<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The AQUA Project, Glasgow University, 1996-1998

-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE CPP, TupleSections #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-record-updates #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-comment">-- | Specialisations of the @HsSyn@ syntax for the typechecker</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- This module is an extension of @HsSyn@ syntax, for use in the type checker.</span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Tc.Utils.Zonk</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Extracting types from HsSyn</span></span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier">hsLitType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier">hsPatType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier">hsLPatType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Other HsSyn functions</span></span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsDictLet"><span class="hs-identifier">mkHsDictLet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsApp"><span class="hs-identifier">mkHsApp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Hs.Type.html#mkHsAppTy"><span class="hs-identifier">mkHsAppTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsCaseAlt"><span class="hs-identifier">mkHsCaseAlt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier">shortCutLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier">hsOverLitName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Core.ConLike.html#conLikeResTy"><span class="hs-identifier">conLikeResTy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><span class="hs-comment">-- * re-exported from TcMonad</span></span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier">TcId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcIdSet"><span class="hs-identifier">TcIdSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Zonking</span></span><span>
</span><span id="line-31"></span><span>        </span><span class="hs-comment">-- | For a description of &quot;zonking&quot;, see Note [What is zonking?]</span><span>
</span><span id="line-32"></span><span>        </span><span class="hs-comment">-- in &quot;GHC.Tc.Utils.TcMType&quot;</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopDecls"><span class="hs-identifier">zonkTopDecls</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopExpr"><span class="hs-identifier">zonkTopExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopLExpr"><span class="hs-identifier">zonkTopLExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopBndrs"><span class="hs-identifier">zonkTopBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier">ZonkFlexi</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#emptyZonkEnv"><span class="hs-identifier">emptyZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier">mkEmptyZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier">initZonkEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinders"><span class="hs-identifier">zonkTyVarBinders</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier">zonkTyVarBindersX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier">zonkTyVarBinderX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrs"><span class="hs-identifier">zonkTyBndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier">zonkTyBndrsX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToType"><span class="hs-identifier">zonkTcTypeToType</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier">zonkTcTypeToTypeX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypes"><span class="hs-identifier">zonkTcTypesToTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier">zonkTcTypesToTypesX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier">zonkScaledTcTypesToTypesX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier">zonkTyVarOcc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier">zonkCoToCo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier">zonkEvBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier">zonkTcEvBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier">zonkTcMethInfoToMethInfoX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#lookupTyVarOcc"><span class="hs-identifier">lookupTyVarOcc</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html"><span class="hs-identifier">GHC.Tc.TyCl.Build</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#TcMethInfo"><span class="hs-identifier">TcMethInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#MethInfo"><span class="hs-identifier">MethInfo</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcMType.html"><span class="hs-identifier">GHC.Tc.Utils.TcMType</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html"><span class="hs-identifier">GHC.Tc.Utils.Env</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html#tcLookupGlobalOnly"><span class="hs-identifier">tcLookupGlobalOnly</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier">pprTyVar</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.Prim.html"><span class="hs-identifier">GHC.Builtin.Types.Prim</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html"><span class="hs-identifier">GHC.Driver.Types</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Platform.html#"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Splice.html"><span class="hs-identifier">GHC.Tc.Gen.Splice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Gen.Splice.html#runTopSplice"><span class="hs-identifier">runTopSplice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base/src/Control.Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base/src/Data.List.html#"><span class="hs-identifier">Data.List</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base/src/Data.OldList.html#partition"><span class="hs-identifier">partition</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base/src/Control.Arrow.html#"><span class="hs-identifier">Control.Arrow</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base/src/Control.Arrow.html#second"><span class="hs-identifier">second</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
       Extracting the type from HsSyn
*                                                                      *
************************************************************************

-}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-type">hsLPatType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-102"></span><span id="hsLPatType"><span class="annot"><span class="annottext">hsLPatType :: LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var hs-var">hsLPatType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075939"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681075939"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681075939"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-type">hsPatType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-105"></span><span id="hsPatType"><span class="annot"><span class="annottext">hsPatType :: Pat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var hs-var">hsPatType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075937"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075937"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var">hsLPatType</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075937"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-106"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span id="local-6989586621681075935"><span class="annot"><span class="annottext">XWildPat GhcTc
</span><a href="#local-6989586621681075935"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
XWildPat GhcTc
</span><a href="#local-6989586621681075935"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-107"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075933"><span class="annot"><span class="annottext">Located (IdP GhcTc)
</span><a href="#local-6989586621681075933"><span class="hs-identifier hs-var">lvar</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan Id -&gt; Id
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Id
Located (IdP GhcTc)
</span><a href="#local-6989586621681075933"><span class="hs-identifier hs-var">lvar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075929"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075929"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var">hsLPatType</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075929"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-109"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075927"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075927"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLPatType"><span class="hs-identifier hs-var">hsLPatType</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075927"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-110"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLitPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075925"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681075925"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc -&gt; Kind
forall (p :: Pass). HsLit (GhcPass p) -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681075925"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-111"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075923"><span class="annot"><span class="annottext">Located (IdP GhcTc)
</span><a href="#local-6989586621681075923"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan Id -&gt; Id
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Id
Located (IdP GhcTc)
</span><a href="#local-6989586621681075923"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span id="local-6989586621681075921"><span class="annot"><span class="annottext">XViewPat GhcTc
</span><a href="#local-6989586621681075921"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
XViewPat GhcTc
</span><a href="#local-6989586621681075921"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-113"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span id="local-6989586621681075918"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075918"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Kind, SyntaxExpr GhcTc)
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Builtin.Types.html#mkListTy"><span class="hs-identifier hs-var">mkListTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075918"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-114"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075916"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075916"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075916"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-115"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621681075914"><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><a href="#local-6989586621681075914"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075913"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681075913"><span class="hs-identifier hs-var">bx</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Boxity -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Builtin.Types.html#mkTupleTy1"><span class="hs-identifier hs-var">mkTupleTy1</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681075913"><span class="hs-identifier hs-var">bx</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XTuplePat GhcTc
</span><a href="#local-6989586621681075914"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-116"></span><span>                  </span><span class="hs-comment">-- See Note [Don't flatten tuples from HsSyn] in GHC.Core.Make</span><span>
</span><span id="line-117"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span id="local-6989586621681075910"><span class="annot"><span class="annottext">XSumPat GhcTc
</span><a href="#local-6989586621681075910"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Kind
</span><a href="GHC.Builtin.Types.html#mkSumTy"><span class="hs-identifier hs-var">mkSumTy</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XSumPat GhcTc
</span><a href="#local-6989586621681075910"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-118"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con :: forall p. Pat p -&gt; Located (ConLikeP p)
</span><a href="GHC.Hs.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075906"><span class="annot"><span class="annottext">Located (ConLikeP GhcTc)
</span><a href="#local-6989586621681075906"><span class="hs-identifier hs-var">lcon</span></a></span></span><span>
</span><span id="line-119"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: forall p. Pat p -&gt; XConPat p
</span><a href="GHC.Hs.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#ConPatTc"><span class="hs-identifier hs-type">ConPatTc</span></a></span><span>
</span><span id="line-120"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cpt_arg_tys :: ConPatTc -&gt; [Kind]
</span><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075902"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075902"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-121"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-122"></span><span>                  </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>                                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Core.ConLike.html#conLikeResTy"><span class="hs-identifier hs-var">conLikeResTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan ConLike -&gt; ConLike
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan ConLike
Located (ConLikeP GhcTc)
</span><a href="#local-6989586621681075906"><span class="hs-identifier hs-var">lcon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075902"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-124"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span id="local-6989586621681075900"><span class="annot"><span class="annottext">XSigPat GhcTc
</span><a href="#local-6989586621681075900"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
XSigPat GhcTc
</span><a href="#local-6989586621681075900"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-125"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span id="local-6989586621681075898"><span class="annot"><span class="annottext">XNPat GhcTc
</span><a href="#local-6989586621681075898"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Located (HsOverLit GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
XNPat GhcTc
</span><a href="#local-6989586621681075898"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-126"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span id="local-6989586621681075896"><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><a href="#local-6989586621681075896"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Located (IdP GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Located (HsOverLit GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
XNPlusKPat GhcTc
</span><a href="#local-6989586621681075896"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-127"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-type">CoPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075893"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075893"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075893"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-128"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsPatType"><span class="hs-identifier hs-var">hsPatType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Kind
forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hsPatType: SplicePat&quot;</span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span id="local-6989586621681077119"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-type">hsLitType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681077119"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span></span><span>
</span><span id="line-131"></span><span id="hsLitType"><span class="annot"><span class="annottext">hsLitType :: forall (p :: Pass). HsLit (GhcPass p) -&gt; Kind
</span><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var hs-var">hsLitType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsChar"><span class="hs-identifier hs-type">HsChar</span></a></span><span> </span><span class="annot"><span class="annottext">XHsChar (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#charTy"><span class="hs-identifier hs-var">charTy</span></a></span><span>
</span><span id="line-132"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsCharPrim"><span class="hs-identifier hs-type">HsCharPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsCharPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#charPrimTy"><span class="hs-identifier hs-var">charPrimTy</span></a></span><span>
</span><span id="line-133"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsString"><span class="hs-identifier hs-type">HsString</span></a></span><span> </span><span class="annot"><span class="annottext">XHsString (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#stringTy"><span class="hs-identifier hs-var">stringTy</span></a></span><span>
</span><span id="line-134"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsStringPrim"><span class="hs-identifier hs-type">HsStringPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsStringPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#addrPrimTy"><span class="hs-identifier hs-var">addrPrimTy</span></a></span><span>
</span><span id="line-135"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsInt"><span class="hs-identifier hs-type">HsInt</span></a></span><span> </span><span class="annot"><span class="annottext">XHsInt (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#intTy"><span class="hs-identifier hs-var">intTy</span></a></span><span>
</span><span id="line-136"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsIntPrim"><span class="hs-identifier hs-type">HsIntPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsIntPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#intPrimTy"><span class="hs-identifier hs-var">intPrimTy</span></a></span><span>
</span><span id="line-137"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsWordPrim"><span class="hs-identifier hs-type">HsWordPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsWordPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#wordPrimTy"><span class="hs-identifier hs-var">wordPrimTy</span></a></span><span>
</span><span id="line-138"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsInt64Prim"><span class="hs-identifier hs-type">HsInt64Prim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsInt64Prim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#int64PrimTy"><span class="hs-identifier hs-var">int64PrimTy</span></a></span><span>
</span><span id="line-139"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsWord64Prim"><span class="hs-identifier hs-type">HsWord64Prim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsWord64Prim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#word64PrimTy"><span class="hs-identifier hs-var">word64PrimTy</span></a></span><span>
</span><span id="line-140"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsInteger"><span class="hs-identifier hs-type">HsInteger</span></a></span><span> </span><span class="annot"><span class="annottext">XHsInteger (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075870"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075870"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075870"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-141"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsRat"><span class="hs-identifier hs-type">HsRat</span></a></span><span> </span><span class="annot"><span class="annottext">XHsRat (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075868"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075868"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075868"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-142"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsFloatPrim"><span class="hs-identifier hs-type">HsFloatPrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsFloatPrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#floatPrimTy"><span class="hs-identifier hs-var">floatPrimTy</span></a></span><span>
</span><span id="line-143"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsLitType"><span class="hs-identifier hs-var">hsLitType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsDoublePrim"><span class="hs-identifier hs-type">HsDoublePrim</span></a></span><span> </span><span class="annot"><span class="annottext">XHsDoublePrim (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#doublePrimTy"><span class="hs-identifier hs-var">doublePrimTy</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-comment">-- Overloaded literals. Here mainly because it uses isIntTy etc</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-type">shortCutLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#OverLitVal"><span class="hs-identifier hs-type">OverLitVal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span id="shortCutLit"><span class="annot"><span class="annottext">shortCutLit :: Platform -&gt; OverLitVal -&gt; Kind -&gt; Maybe (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-var hs-var">shortCutLit</span></a></span></span><span> </span><span id="local-6989586621681075863"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681075863"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsIntegral"><span class="hs-identifier hs-type">HsIntegral</span></a></span><span> </span><span id="local-6989586621681075861"><span class="annot"><span class="annottext">int :: IntegralLit
</span><a href="#local-6989586621681075861"><span class="hs-identifier hs-var">int</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#IL"><span class="hs-identifier hs-type">IL</span></a></span><span> </span><span id="local-6989586621681075859"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681075859"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681075858"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681075858"><span class="hs-identifier hs-var">neg</span></a></span></span><span> </span><span id="local-6989586621681075857"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681075857"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075856"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075856"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isIntTy"><span class="hs-identifier hs-var">isIntTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075856"><span class="hs-identifier hs-var">ty</span></a></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Bool
</span><a href="../../ghc-boot/src/GHC.Platform.html#platformInIntRange"><span class="hs-identifier hs-var">platformInIntRange</span></a></span><span>  </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681075863"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681075857"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; Maybe (HsExpr GhcTc)
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitE GhcTc -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XLitE GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsInt GhcTc -&gt; IntegralLit -&gt; HsLit GhcTc
forall x. XHsInt x -&gt; IntegralLit -&gt; HsLit x
</span><a href="GHC.Hs.Lit.html#HsInt"><span class="hs-identifier hs-var">HsInt</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XHsInt GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">IntegralLit
</span><a href="#local-6989586621681075861"><span class="hs-identifier hs-var">int</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isWordTy"><span class="hs-identifier hs-var">isWordTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075856"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Bool
</span><a href="../../ghc-boot/src/GHC.Platform.html#platformInWordRange"><span class="hs-identifier hs-var">platformInWordRange</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681075863"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681075857"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; Maybe (HsExpr GhcTc)
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var">mkLit</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#wordDataCon"><span class="hs-identifier hs-var">wordDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsWordPrim GhcTc -&gt; Integer -&gt; HsLit GhcTc
forall x. XHsWordPrim x -&gt; Integer -&gt; HsLit x
</span><a href="GHC.Hs.Lit.html#HsWordPrim"><span class="hs-identifier hs-var">HsWordPrim</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
XHsWordPrim GhcTc
</span><a href="#local-6989586621681075859"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681075857"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isIntegerTy"><span class="hs-identifier hs-var">isIntegerTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075856"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; Maybe (HsExpr GhcTc)
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitE GhcTc -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XLitE GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsInteger GhcTc -&gt; Integer -&gt; Kind -&gt; HsLit GhcTc
forall x. XHsInteger x -&gt; Integer -&gt; Kind -&gt; HsLit x
</span><a href="GHC.Hs.Lit.html#HsInteger"><span class="hs-identifier hs-var">HsInteger</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
XHsInteger GhcTc
</span><a href="#local-6989586621681075859"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681075857"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075856"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OverLitVal -&gt; Kind -&gt; Maybe (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-var">shortCutLit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681075863"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FractionalLit -&gt; OverLitVal
</span><a href="GHC.Hs.Lit.html#HsFractional"><span class="hs-identifier hs-var">HsFractional</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Integer -&gt; FractionalLit
</span><a href="GHC.Types.Basic.html#integralFractionalLit"><span class="hs-identifier hs-var">integralFractionalLit</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681075858"><span class="hs-identifier hs-var">neg</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681075857"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075856"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-153"></span><span>        </span><span class="hs-comment">-- The 'otherwise' case is important</span><span>
</span><span id="line-154"></span><span>        </span><span class="hs-comment">-- Consider (3 :: Float).  Syntactically it looks like an IntLit,</span><span>
</span><span id="line-155"></span><span>        </span><span class="hs-comment">-- so we'll call shortCutIntLit, but of course it's a float</span><span>
</span><span id="line-156"></span><span>        </span><span class="hs-comment">-- This can make a big difference for programs with a lot of</span><span>
</span><span id="line-157"></span><span>        </span><span class="hs-comment">-- literals, compiled without -O</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-var">shortCutLit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsFractional"><span class="hs-identifier hs-type">HsFractional</span></a></span><span> </span><span id="local-6989586621681075843"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681075843"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075842"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075842"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isFloatTy"><span class="hs-identifier hs-var">isFloatTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075842"><span class="hs-identifier hs-var">ty</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; Maybe (HsExpr GhcTc)
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var">mkLit</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#floatDataCon"><span class="hs-identifier hs-var">floatDataCon</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsFloatPrim GhcTc -&gt; FractionalLit -&gt; HsLit GhcTc
forall x. XHsFloatPrim x -&gt; FractionalLit -&gt; HsLit x
</span><a href="GHC.Hs.Lit.html#HsFloatPrim"><span class="hs-identifier hs-var">HsFloatPrim</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XHsFloatPrim GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681075843"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isDoubleTy"><span class="hs-identifier hs-var">isDoubleTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075842"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; Maybe (HsExpr GhcTc)
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var">mkLit</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#doubleDataCon"><span class="hs-identifier hs-var">doubleDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsDoublePrim GhcTc -&gt; FractionalLit -&gt; HsLit GhcTc
forall x. XHsDoublePrim x -&gt; FractionalLit -&gt; HsLit x
</span><a href="GHC.Hs.Lit.html#HsDoublePrim"><span class="hs-identifier hs-var">HsDoublePrim</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XHsDoublePrim GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681075843"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcTc)
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#shortCutLit"><span class="hs-identifier hs-var">shortCutLit</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsIsString"><span class="hs-identifier hs-type">HsIsString</span></a></span><span> </span><span id="local-6989586621681075836"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621681075836"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681075835"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681075835"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075834"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075834"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isStringTy"><span class="hs-identifier hs-var">isStringTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075834"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; Maybe (HsExpr GhcTc)
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitE GhcTc -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XLitE GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsString GhcTc -&gt; FastString -&gt; HsLit GhcTc
forall x. XHsString x -&gt; FastString -&gt; HsLit x
</span><a href="GHC.Hs.Lit.html#HsString"><span class="hs-identifier hs-var">HsString</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
XHsString GhcTc
</span><a href="#local-6989586621681075836"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681075835"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcTc)
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-type">mkLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-169"></span><span id="mkLit"><span class="annot"><span class="annottext">mkLit :: DataCon -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
</span><a href="GHC.Tc.Utils.Zonk.html#mkLit"><span class="hs-identifier hs-var hs-var">mkLit</span></a></span></span><span> </span><span id="local-6989586621681075832"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681075832"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681075831"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681075831"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XApp GhcTc -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XApp GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#nlHsDataCon"><span class="hs-identifier hs-var">nlHsDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681075832"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLit GhcTc -&gt; LHsExpr GhcTc
forall (p :: Pass). HsLit (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsLit"><span class="hs-identifier hs-var">nlHsLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681075831"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">------------------------------</span><span>
</span><span id="line-172"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-type">hsOverLitName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#OverLitVal"><span class="hs-identifier hs-type">OverLitVal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-173"></span><span class="hs-comment">-- Get the canonical 'fromX' name for a particular OverLitVal</span><span>
</span><span id="line-174"></span><span id="hsOverLitName"><span class="annot"><span class="annottext">hsOverLitName :: OverLitVal -&gt; Name
</span><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-var hs-var">hsOverLitName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsIntegral"><span class="hs-identifier hs-type">HsIntegral</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromIntegerName"><span class="hs-identifier hs-var">fromIntegerName</span></a></span><span>
</span><span id="line-175"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-var">hsOverLitName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsFractional"><span class="hs-identifier hs-type">HsFractional</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromRationalName"><span class="hs-identifier hs-var">fromRationalName</span></a></span><span>
</span><span id="line-176"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#hsOverLitName"><span class="hs-identifier hs-var">hsOverLitName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsIsString"><span class="hs-identifier hs-type">HsIsString</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#fromStringName"><span class="hs-identifier hs-var">fromStringName</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-HsBinds]{Running a substitution over @HsBinds@}
*                                                                      *
************************************************************************

The rest of the zonking is done *after* typechecking.
The main zonking pass runs over the bindings

 a) to convert TcTyVars to TyVars etc, dereferencing any bindings etc
 b) convert unbound TcTyVar to Void
 c) convert each TcId to an Id by zonking its type

The type variables are converted by binding mutable tyvars to immutable ones
and then zonking as normal.

The Ids are converted by binding them in the normal Tc envt; that
way we maintain sharing; eg an Id is zonked at its binding site and they
all occurrences of that Id point to the common zonked copy

It's all pretty boring stuff, because HsSyn is such a large type, and
the environment manipulation is tiresome.
-}</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-comment">-- Confused by zonking? See Note [What is zonking?] in GHC.Tc.Utils.TcMType.</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">-- | See Note [The ZonkEnv]</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- Confused by zonking? See Note [What is zonking?] in &quot;GHC.Tc.Utils.TcMType&quot;.</span><span>
</span><span id="line-207"></span><span class="hs-keyword">data</span><span> </span><span id="ZonkEnv"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-var">ZonkEnv</span></a></span></span><span>  </span><span class="hs-comment">-- See Note [The ZonkEnv]</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ZonkEnv"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-var">ZonkEnv</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="ze_flexi"><span class="annot"><span class="annottext">ZonkEnv -&gt; ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var hs-var">ze_flexi</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span>
</span><span id="line-209"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="ze_tv_env"><span class="annot"><span class="annottext">ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var hs-var">ze_tv_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#TyCoVarEnv"><span class="hs-identifier hs-type">TyCoVarEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span>
</span><span id="line-210"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="ze_id_env"><span class="annot"><span class="annottext">ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var hs-var">ze_id_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#IdEnv"><span class="hs-identifier hs-type">IdEnv</span></a></span><span>      </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-211"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="ze_meta_tv_env"><span class="annot"><span class="annottext">ZonkEnv -&gt; TcRef (TyVarEnv Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#ze_meta_tv_env"><span class="hs-identifier hs-var hs-var">ze_meta_tv_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcRef"><span class="hs-identifier hs-type">TcRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.Env.html#TyVarEnv"><span class="hs-identifier hs-type">TyVarEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">{- Note [The ZonkEnv]
~~~~~~~~~~~~~~~~~~~~~
* ze_flexi :: ZonkFlexi says what to do with a
  unification variable that is still un-unified.
  See Note [Un-unified unification variables]

* ze_tv_env :: TyCoVarEnv TyCoVar promotes sharing. At a binding site
  of a tyvar or covar, we zonk the kind right away and add a mapping
  to the env. This prevents re-zonking the kind at every
  occurrence. But this is *just* an optimisation.

* ze_id_env : IdEnv Id promotes sharing among Ids, by making all
  occurrences of the Id point to a single zonked copy, built at the
  binding site.

  Unlike ze_tv_env, it is knot-tied: see extendIdZonkEnvRec.
  In a mutually recursive group
     rec { f = ...g...; g = ...f... }
  we want the occurrence of g to point to the one zonked Id for g,
  and the same for f.

  Because it is knot-tied, we must be careful to consult it lazily.
  Specifically, zonkIdOcc is not monadic.

* ze_meta_tv_env: see Note [Sharing when zonking to Type]


Notes:
  * We must be careful never to put coercion variables (which are Ids,
    after all) in the knot-tied ze_id_env, because coercions can
    appear in types, and we sometimes inspect a zonked type in this
    module.  [Question: where, precisely?]

  * In zonkTyVarOcc we consult ze_tv_env in a monadic context,
    a second reason that ze_tv_env can't be monadic.

  * An obvious suggestion would be to have one VarEnv Var to
    replace both ze_id_env and ze_tv_env, but that doesn't work
    because of the knot-tying stuff mentioned above.

Note [Un-unified unification variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
What should we do if we find a Flexi unification variable?
There are three possibilities:

* DefaultFlexi: this is the common case, in situations like
     length @alpha ([] @alpha)
  It really doesn't matter what type we choose for alpha.  But
  we must choose a type!  We can't leave mutable unification
  variables floating around: after typecheck is complete, every
  type variable occurrence must have a binding site.

  So we default it to 'Any' of the right kind.

  All this works for both type and kind variables (indeed
  the two are the same thing).

* SkolemiseFlexi: is a special case for the LHS of RULES.
  See Note [Zonking the LHS of a RULE]

* RuntimeUnkFlexi: is a special case for the GHCi debugger.
  It's a way to have a variable that is not a mutable
  unification variable, but doesn't have a binding site
  either.
-}</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-keyword">data</span><span> </span><span id="ZonkFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-var">ZonkFlexi</span></a></span></span><span>   </span><span class="hs-comment">-- See Note [Un-unified unification variables]</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DefaultFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span></span><span>    </span><span class="hs-comment">-- Default unbound unification variables to Any</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SkolemiseFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span></span><span>  </span><span class="hs-comment">-- Skolemise unbound unification variables</span><span>
</span><span id="line-282"></span><span>                    </span><span class="hs-comment">-- See Note [Zonking the LHS of a RULE]</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RuntimeUnkFlexi"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#RuntimeUnkFlexi"><span class="hs-identifier hs-var">RuntimeUnkFlexi</span></a></span></span><span> </span><span class="hs-comment">-- Used in the GHCi debugger</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681075812"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621681075807"><span class="annot"><span class="annottext">ppr :: ZonkEnv -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075805"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075805"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span>
</span><span id="line-287"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075804"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075804"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ZE&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-289"></span><span>         </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ze_tv_env =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075805"><span class="hs-identifier hs-var">tv_env</span></a></span><span>
</span><span id="line-290"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ze_id_env =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075804"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-comment">-- The EvBinds have to already be zonked, but that's usually the case.</span><span>
</span><span id="line-293"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#emptyZonkEnv"><span class="hs-identifier hs-type">emptyZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-294"></span><span id="emptyZonkEnv"><span class="annot"><span class="annottext">emptyZonkEnv :: TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#emptyZonkEnv"><span class="hs-identifier hs-var hs-var">emptyZonkEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-var">mkEmptyZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-type">mkEmptyZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-297"></span><span id="mkEmptyZonkEnv"><span class="annot"><span class="annottext">mkEmptyZonkEnv :: ZonkFlexi -&gt; TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-var hs-var">mkEmptyZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681075799"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681075799"><span class="hs-identifier hs-var">flexi</span></a></span></span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075798"><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681075798"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind -&gt; TcRnIf TcGblEnv TcLclEnv (TcRef (TyVarEnv Kind))
forall a gbl lcl. a -&gt; TcRnIf gbl lcl (TcRef a)
</span><a href="GHC.Tc.Utils.Monad.html#newTcRef"><span class="hs-identifier hs-var">newTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind
forall a. VarEnv a
</span><a href="GHC.Types.Var.Env.html#emptyVarEnv"><span class="hs-identifier hs-var">emptyVarEnv</span></a></span><span>
</span><span id="line-299"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcM ZonkEnv
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv :: ZonkFlexi
-&gt; TyCoVarEnv Id
-&gt; TyCoVarEnv Id
-&gt; TcRef (TyVarEnv Kind)
-&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_flexi :: ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var">ze_flexi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681075799"><span class="hs-identifier hs-var">flexi</span></a></span><span>
</span><span id="line-300"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
forall a. VarEnv a
</span><a href="GHC.Types.Var.Env.html#emptyVarEnv"><span class="hs-identifier hs-var">emptyVarEnv</span></a></span><span>
</span><span id="line-301"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
forall a. VarEnv a
</span><a href="GHC.Types.Var.Env.html#emptyVarEnv"><span class="hs-identifier hs-var">emptyVarEnv</span></a></span><span>
</span><span id="line-302"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_meta_tv_env :: TcRef (TyVarEnv Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#ze_meta_tv_env"><span class="hs-identifier hs-var">ze_meta_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681075798"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span id="local-6989586621681077045"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-type">initZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681077045"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681077045"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-305"></span><span id="initZonkEnv"><span class="annot"><span class="annottext">initZonkEnv :: forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var hs-var">initZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681075794"><span class="annot"><span class="annottext">ZonkEnv -&gt; TcM b
</span><a href="#local-6989586621681075794"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075793"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075793"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-var">mkEmptyZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span>
</span><span id="line-306"></span><span>                              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcM b
</span><a href="#local-6989586621681075794"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075793"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-comment">-- | Extend the knot-tied environment.</span><span>
</span><span id="line-309"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-type">extendIdZonkEnvRec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-310"></span><span id="extendIdZonkEnvRec"><span class="annot"><span class="annottext">extendIdZonkEnvRec :: ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var hs-var">extendIdZonkEnvRec</span></a></span></span><span> </span><span id="local-6989586621681075790"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681075790"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075789"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075789"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075788"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075788"><span class="hs-identifier hs-var">ids</span></a></span></span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-comment">-- NB: Don't look at the var to decide which env't to put it in. That</span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-comment">-- would end up knot-tying all the env'ts.</span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075790"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; [(Id, Id)] -&gt; TyCoVarEnv Id
forall a. VarEnv a -&gt; [(Id, a)] -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnvList"><span class="hs-identifier hs-var">extendVarEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075789"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075786"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075786"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681075786"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075786"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075788"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-comment">-- Given coercion variables will actually end up here. That's OK though:</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-comment">-- coercion variables are never looked up in the knot-tied env't, so zonking</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-comment">-- them simply doesn't get optimised. No one gets hurt. An improvement (?)</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-comment">-- would be to do SCC analysis in zonkEvBinds and then only knot-tie the</span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-comment">-- recursive groups. But perhaps the time it takes to do the analysis is</span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-comment">-- more than the savings.</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendZonkEnv"><span class="hs-identifier hs-type">extendZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-322"></span><span id="extendZonkEnv"><span class="annot"><span class="annottext">extendZonkEnv :: ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendZonkEnv"><span class="hs-identifier hs-var hs-var">extendZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681075784"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681075784"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075783"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075783"><span class="hs-identifier hs-var">tyco_env</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075782"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075782"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075781"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075781"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075784"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; [(Id, Id)] -&gt; TyCoVarEnv Id
forall a. VarEnv a -&gt; [(Id, a)] -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnvList"><span class="hs-identifier hs-var">extendVarEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075783"><span class="hs-identifier hs-var">tyco_env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075780"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075780"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681075780"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075780"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075779"><span class="hs-identifier hs-var">tycovars</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-324"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; [(Id, Id)] -&gt; TyCoVarEnv Id
forall a. VarEnv a -&gt; [(Id, a)] -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnvList"><span class="hs-identifier hs-var">extendVarEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075782"><span class="hs-identifier hs-var">id_env</span></a></span><span>   </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075778"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075778"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681075778"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075778"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075777"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681075779"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075779"><span class="hs-identifier hs-var">tycovars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075777"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075777"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; ([Id], [Id])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base/src/Data.OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyCoVar"><span class="hs-identifier hs-var">isTyCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075781"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-type">extendIdZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-329"></span><span id="extendIdZonkEnv"><span class="annot"><span class="annottext">extendIdZonkEnv :: ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var hs-var">extendIdZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681075774"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681075774"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075773"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075773"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075772"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075772"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075774"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Id -&gt; TyCoVarEnv Id
forall a. VarEnv a -&gt; Id -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075773"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075772"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075772"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#extendTyZonkEnv"><span class="hs-identifier hs-type">extendTyZonkEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-333"></span><span id="extendTyZonkEnv"><span class="annot"><span class="annottext">extendTyZonkEnv :: ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendTyZonkEnv"><span class="hs-identifier hs-var hs-var">extendTyZonkEnv</span></a></span></span><span> </span><span id="local-6989586621681075768"><span class="annot"><span class="annottext">ze :: ZonkEnv
</span><a href="#local-6989586621681075768"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075767"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075767"><span class="hs-identifier hs-var">ty_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075766"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075766"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075768"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Id -&gt; TyCoVarEnv Id
forall a. VarEnv a -&gt; Id -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075767"><span class="hs-identifier hs-var">ty_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075766"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075766"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#setZonkType"><span class="hs-identifier hs-type">setZonkType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-337"></span><span id="setZonkType"><span class="annot"><span class="annottext">setZonkType :: ZonkEnv -&gt; ZonkFlexi -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#setZonkType"><span class="hs-identifier hs-var hs-var">setZonkType</span></a></span></span><span> </span><span id="local-6989586621681075764"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075764"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span id="local-6989586621681075763"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681075763"><span class="hs-identifier hs-var">flexi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075764"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_flexi :: ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var">ze_flexi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681075763"><span class="hs-identifier hs-var">flexi</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEnvIds"><span class="hs-identifier hs-type">zonkEnvIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-340"></span><span id="zonkEnvIds"><span class="annot"><span class="annottext">zonkEnvIds :: ZonkEnv -&gt; TypeEnv
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEnvIds"><span class="hs-identifier hs-var hs-var">zonkEnvIds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075761"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075761"><span class="hs-identifier hs-var">id_env</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)] -&gt; TypeEnv
forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075758"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075758"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681075758"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075758"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; [Id]
forall key elt. UniqFM key elt -&gt; [elt]
</span><a href="GHC.Types.Unique.FM.html#nonDetEltsUFM"><span class="hs-identifier hs-var">nonDetEltsUFM</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075761"><span class="hs-identifier hs-var">id_env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-comment">-- It's OK to use nonDetEltsUFM here because we forget the ordering</span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-comment">-- immediately by creating a TypeEnv</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-type">zonkLIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-346"></span><span id="zonkLIdOcc"><span class="annot"><span class="annottext">zonkLIdOcc :: ZonkEnv -&gt; GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var hs-var">zonkLIdOcc</span></a></span></span><span> </span><span id="local-6989586621681075754"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075754"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id
forall a b l. (a -&gt; b) -&gt; GenLocated l a -&gt; GenLocated l b
</span><a href="GHC.Types.SrcLoc.html#mapLoc"><span class="hs-identifier hs-var">mapLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075754"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-type">zonkIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-349"></span><span class="hs-comment">-- Ids defined in this module should be in the envt;</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- ignore others.  (Actually, data constructors are also</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- not LocalVars, even when locally defined, but that is fine.)</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- (Also foreign-imported things aren't currently in the ZonkEnv;</span><span>
</span><span id="line-353"></span><span class="hs-comment">--  that's ok because they don't need zonking.)</span><span>
</span><span id="line-354"></span><span class="hs-comment">--</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- Actually, Template Haskell works in 'chunks' of declarations, and</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- an earlier chunk won't be in the 'env' that the zonking phase</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- carries around.  Instead it'll be in the tcg_gbl_env, already fully</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- zonked.  There's no point in looking it up there (except for error</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- checking), and it's not conveniently to hand; hence the simple</span><span>
</span><span id="line-360"></span><span class="hs-comment">-- 'orElse' case in the LocalVar branch.</span><span>
</span><span id="line-361"></span><span class="hs-comment">--</span><span>
</span><span id="line-362"></span><span class="hs-comment">-- Even without template splices, in module Main, the checking of</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- 'main' is done as a separate chunk.</span><span>
</span><span id="line-364"></span><span id="zonkIdOcc"><span class="annot"><span class="annottext">zonkIdOcc :: ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var hs-var">zonkIdOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075751"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075751"><span class="hs-identifier hs-var">id_env</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075750"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075750"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isLocalVar"><span class="hs-identifier hs-var">isLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075750"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Maybe Id
forall a. VarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681075751"><span class="hs-identifier hs-var">id_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075750"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Id -&gt; Id -&gt; Id
forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span>
</span><span id="line-366"></span><span>                    </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075750"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075750"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdOccs"><span class="hs-identifier hs-type">zonkIdOccs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-370"></span><span id="zonkIdOccs"><span class="annot"><span class="annottext">zonkIdOccs :: ZonkEnv -&gt; [Id] -&gt; [Id]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOccs"><span class="hs-identifier hs-var hs-var">zonkIdOccs</span></a></span></span><span> </span><span id="local-6989586621681075745"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075745"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075744"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075744"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Id) -&gt; [Id] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075745"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075744"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-- zonkIdBndr is used *after* typechecking to get the Id's type</span><span>
</span><span id="line-373"></span><span class="hs-comment">-- to its final form.  The TyVarEnv give</span><span>
</span><span id="line-374"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-type">zonkIdBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-375"></span><span id="zonkIdBndr"><span class="annot"><span class="annottext">zonkIdBndr :: ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var hs-var">zonkIdBndr</span></a></span></span><span> </span><span id="local-6989586621681075742"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075742"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075741"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075741"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681075739"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075739"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span id="local-6989586621681075738"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075738"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075742"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Scaled Kind
</span><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier hs-var">idScaledType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075741"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>       </span><span class="annot"><span class="annottext">Kind -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#ensureNotLevPoly"><span class="hs-identifier hs-var">ensureNotLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075738"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-378"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the type of binder&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075741"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span>       </span><span class="annot"><span class="annottext">Id -&gt; TcM Id
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; (IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
(IdInfo -&gt; IdInfo) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Id.html#modifyIdInfo"><span class="hs-identifier hs-var">modifyIdInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdInfo -&gt; Kind -&gt; IdInfo
</span><a href="GHC.Types.Id.Info.html#setLevityInfoWithType"><span class="hs-operator hs-var">`setLevityInfoWithType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075738"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#setIdMult"><span class="hs-identifier hs-var">setIdMult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#setIdType"><span class="hs-identifier hs-var">setIdType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075741"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075738"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075739"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-type">zonkIdBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-383"></span><span id="zonkIdBndrs"><span class="annot"><span class="annottext">zonkIdBndrs :: ZonkEnv -&gt; [Id] -&gt; TcM [Id]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var hs-var">zonkIdBndrs</span></a></span></span><span> </span><span id="local-6989586621681075728"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075728"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075727"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075727"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; TcM Id) -&gt; [Id] -&gt; TcM [Id]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075728"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075727"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopBndrs"><span class="hs-identifier hs-type">zonkTopBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-386"></span><span id="zonkTopBndrs"><span class="annot"><span class="annottext">zonkTopBndrs :: [Id] -&gt; TcM [Id]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopBndrs"><span class="hs-identifier hs-var hs-var">zonkTopBndrs</span></a></span></span><span> </span><span id="local-6989586621681075725"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075725"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM [Id]) -&gt; TcM [Id]
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM [Id]) -&gt; TcM [Id])
-&gt; (ZonkEnv -&gt; TcM [Id]) -&gt; TcM [Id]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681075724"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075724"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM [Id]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var">zonkIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075724"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075725"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-type">zonkFieldOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span id="zonkFieldOcc"><span class="annot"><span class="annottext">zonkFieldOcc :: ZonkEnv -&gt; FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-var hs-var">zonkFieldOcc</span></a></span></span><span> </span><span id="local-6989586621681075722"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075722"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span id="local-6989586621681075720"><span class="annot"><span class="annottext">XCFieldOcc GhcTc
</span><a href="#local-6989586621681075720"><span class="hs-identifier hs-var">sel</span></a></span></span><span> </span><span id="local-6989586621681075719"><span class="annot"><span class="annottext">Located RdrName
</span><a href="#local-6989586621681075719"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; FieldOcc GhcTc) -&gt; TcM Id -&gt; TcM (FieldOcc GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; Located RdrName -&gt; FieldOcc GhcTc)
-&gt; Located RdrName -&gt; Id -&gt; FieldOcc GhcTc
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Located RdrName -&gt; FieldOcc GhcTc
forall pass. XCFieldOcc pass -&gt; Located RdrName -&gt; FieldOcc pass
</span><a href="GHC.Hs.Type.html#FieldOcc"><span class="hs-identifier hs-var">FieldOcc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Located RdrName
</span><a href="#local-6989586621681075719"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcM Id -&gt; TcM (FieldOcc GhcTc)) -&gt; TcM Id -&gt; TcM (FieldOcc GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075722"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
XCFieldOcc GhcTc
</span><a href="#local-6989586621681075720"><span class="hs-identifier hs-var">sel</span></a></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-type">zonkEvBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span id="zonkEvBndrsX"><span class="annot"><span class="annottext">zonkEvBndrsX :: ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var hs-var">zonkEvBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id))
-&gt; ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-var">zonkEvBndrX</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-type">zonkEvBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- Works for dictionaries and coercions</span><span>
</span><span id="line-397"></span><span id="zonkEvBndrX"><span class="annot"><span class="annottext">zonkEvBndrX :: ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-var hs-var">zonkEvBndrX</span></a></span></span><span> </span><span id="local-6989586621681075713"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075713"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075712"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075712"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-398"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075711"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075711"><span class="hs-identifier hs-var">var'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-var">zonkEvBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075713"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075712"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-399"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendZonkEnv"><span class="hs-identifier hs-var">extendZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075713"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075711"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075711"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-type">zonkEvBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-402"></span><span class="hs-comment">-- Works for dictionaries and coercions</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- Does not extend the ZonkEnv</span><span>
</span><span id="line-404"></span><span id="zonkEvBndr"><span class="annot"><span class="annottext">zonkEvBndr :: ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-var hs-var">zonkEvBndr</span></a></span></span><span> </span><span id="local-6989586621681075709"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075709"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075708"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075708"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind) -&gt; Id -&gt; TcM Id
forall (m :: * -&gt; *). Monad m =&gt; (Kind -&gt; m Kind) -&gt; Id -&gt; m Id
</span><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier hs-var">updateIdTypeAndMultM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBndr_zonkTcTypeToType&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075709"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075708"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-comment">{-
zonkEvVarOcc :: ZonkEnv -&gt; EvVar -&gt; TcM EvTerm
zonkEvVarOcc env v
  | isCoVar v
  = EvCoercion &lt;$&gt; zonkCoVarOcc env v
  | otherwise
  = return (EvId $ zonkIdOcc env v)
-}</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-type">zonkCoreBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span id="zonkCoreBndrX"><span class="annot"><span class="annottext">zonkCoreBndrX :: ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-var hs-var">zonkCoreBndrX</span></a></span></span><span> </span><span id="local-6989586621681075705"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075705"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075704"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075704"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075704"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075702"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075702"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075705"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075704"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-419"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075705"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075702"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075702"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075705"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075704"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrsX"><span class="hs-identifier hs-type">zonkCoreBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span id="zonkCoreBndrsX"><span class="annot"><span class="annottext">zonkCoreBndrsX :: ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrsX"><span class="hs-identifier hs-var hs-var">zonkCoreBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id))
-&gt; ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-var">zonkCoreBndrX</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrs"><span class="hs-identifier hs-type">zonkTyBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span id="zonkTyBndrs"><span class="annot"><span class="annottext">zonkTyBndrs :: [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrs"><span class="hs-identifier hs-var hs-var">zonkTyBndrs</span></a></span></span><span> </span><span id="local-6989586621681075698"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075698"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (ZonkEnv, [Id])) -&gt; TcM (ZonkEnv, [Id])
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM (ZonkEnv, [Id])) -&gt; TcM (ZonkEnv, [Id]))
-&gt; (ZonkEnv -&gt; TcM (ZonkEnv, [Id])) -&gt; TcM (ZonkEnv, [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681075697"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075697"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075697"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075698"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-type">zonkTyBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span id="zonkTyBndrsX"><span class="annot"><span class="annottext">zonkTyBndrsX :: ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var hs-var">zonkTyBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id))
-&gt; ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-type">zonkTyBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- This guarantees to return a TyVar (not a TcTyVar)</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- then we add it to the envt, so all occurrences are replaced</span><span>
</span><span id="line-434"></span><span class="hs-comment">--</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- It does not clone: the new TyVar has the sane Name</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- as the old one.  This important when zonking the</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- TyVarBndrs of a TyCon, whose Names may scope.</span><span>
</span><span id="line-438"></span><span id="zonkTyBndrX"><span class="annot"><span class="annottext">zonkTyBndrX :: ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var hs-var">zonkTyBndrX</span></a></span></span><span> </span><span id="local-6989586621681075696"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075696"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075695"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075695"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tv</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">tv</span><span> </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">dcolon</span><span> </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">tyVarKind</span><span> </span><span class="hs-identifier">tv</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075688"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075688"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075696"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075695"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>               </span><span class="hs-comment">-- Internal names tidy up better, for iface files.</span><span>
</span><span id="line-442"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681075687"><span class="annot"><span class="annottext">tv' :: Id
</span><a href="#local-6989586621681075687"><span class="hs-identifier hs-var hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075695"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075688"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-443"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendTyZonkEnv"><span class="hs-identifier hs-var">extendTyZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075696"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075687"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075687"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span id="local-6989586621681077002"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinders"><span class="hs-identifier hs-type">zonkTyVarBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681077002"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-446"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681077002"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-447"></span><span id="zonkTyVarBinders"><span class="annot"><span class="annottext">zonkTyVarBinders :: forall vis. [VarBndr Id vis] -&gt; TcM (ZonkEnv, [VarBndr Id vis])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinders"><span class="hs-identifier hs-var hs-var">zonkTyVarBinders</span></a></span></span><span> </span><span id="local-6989586621681075684"><span class="annot"><span class="annottext">[VarBndr Id vis]
</span><a href="#local-6989586621681075684"><span class="hs-identifier hs-var">tvbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (ZonkEnv, [VarBndr Id vis]))
-&gt; TcM (ZonkEnv, [VarBndr Id vis])
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM (ZonkEnv, [VarBndr Id vis]))
 -&gt; TcM (ZonkEnv, [VarBndr Id vis]))
-&gt; (ZonkEnv -&gt; TcM (ZonkEnv, [VarBndr Id vis]))
-&gt; TcM (ZonkEnv, [VarBndr Id vis])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681075683"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075683"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [VarBndr Id vis] -&gt; TcM (ZonkEnv, [VarBndr Id vis])
forall vis.
ZonkEnv -&gt; [VarBndr Id vis] -&gt; TcM (ZonkEnv, [VarBndr Id vis])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier hs-var">zonkTyVarBindersX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075683"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id vis]
</span><a href="#local-6989586621681075684"><span class="hs-identifier hs-var">tvbs</span></a></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span id="local-6989586621681076999"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier hs-type">zonkTyVarBindersX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681076999"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-450"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681076999"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-451"></span><span id="zonkTyVarBindersX"><span class="annot"><span class="annottext">zonkTyVarBindersX :: forall vis.
ZonkEnv -&gt; [VarBndr Id vis] -&gt; TcM (ZonkEnv, [VarBndr Id vis])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier hs-var hs-var">zonkTyVarBindersX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv
 -&gt; VarBndr Id vis
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, VarBndr Id vis))
-&gt; ZonkEnv
-&gt; [VarBndr Id vis]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [VarBndr Id vis])
forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; VarBndr Id vis
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, VarBndr Id vis)
forall vis.
ZonkEnv -&gt; VarBndr Id vis -&gt; TcM (ZonkEnv, VarBndr Id vis)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier hs-var">zonkTyVarBinderX</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span id="local-6989586621681076997"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier hs-type">zonkTyVarBinderX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681076997"><span class="hs-identifier hs-type">vis</span></a></span><span>
</span><span id="line-454"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681076997"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-455"></span><span class="hs-comment">-- Takes a TcTyVar and guarantees to return a TyVar</span><span>
</span><span id="line-456"></span><span id="zonkTyVarBinderX"><span class="annot"><span class="annottext">zonkTyVarBinderX :: forall vis.
ZonkEnv -&gt; VarBndr Id vis -&gt; TcM (ZonkEnv, VarBndr Id vis)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBinderX"><span class="hs-identifier hs-var hs-var">zonkTyVarBinderX</span></a></span></span><span> </span><span id="local-6989586621681075679"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075679"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681075677"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075677"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681075676"><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681075676"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075675"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075675"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075674"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075674"><span class="hs-identifier hs-var">tv'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075679"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075677"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-458"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, VarBndr Id vis) -&gt; TcM (ZonkEnv, VarBndr Id vis)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075675"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; vis -&gt; VarBndr Id vis
forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075674"><span class="hs-identifier hs-var">tv'</span></a></span><span> </span><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621681075676"><span class="hs-identifier hs-var">vis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopExpr"><span class="hs-identifier hs-type">zonkTopExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span id="zonkTopExpr"><span class="annot"><span class="annottext">zonkTopExpr :: HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopExpr"><span class="hs-identifier hs-var hs-var">zonkTopExpr</span></a></span></span><span> </span><span id="local-6989586621681075673"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075673"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (HsExpr GhcTc)) -&gt; TcM (HsExpr GhcTc)
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM (HsExpr GhcTc)) -&gt; TcM (HsExpr GhcTc))
-&gt; (ZonkEnv -&gt; TcM (HsExpr GhcTc)) -&gt; TcM (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681075672"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075672"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075672"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075673"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopLExpr"><span class="hs-identifier hs-type">zonkTopLExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span id="zonkTopLExpr"><span class="annot"><span class="annottext">zonkTopLExpr :: LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopLExpr"><span class="hs-identifier hs-var hs-var">zonkTopLExpr</span></a></span></span><span> </span><span id="local-6989586621681075670"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075670"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (LHsExpr GhcTc)) -&gt; TcM (LHsExpr GhcTc)
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM (LHsExpr GhcTc)) -&gt; TcM (LHsExpr GhcTc))
-&gt; (ZonkEnv -&gt; TcM (LHsExpr GhcTc)) -&gt; TcM (LHsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681075669"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075669"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075669"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075670"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTopDecls"><span class="hs-identifier hs-type">zonkTopDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-467"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-468"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-469"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-470"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-471"></span><span>                     </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-472"></span><span>                     </span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-473"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-474"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-475"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span>    </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span id="zonkTopDecls"><span class="annot"><span class="annottext">zonkTopDecls :: Bag EvBind
-&gt; LHsBinds GhcTc
-&gt; [LRuleDecl GhcTc]
-&gt; [LTcSpecPrag]
-&gt; [LForeignDecl GhcTc]
-&gt; TcM
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTopDecls"><span class="hs-identifier hs-var hs-var">zonkTopDecls</span></a></span></span><span> </span><span id="local-6989586621681075667"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681075667"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span> </span><span id="local-6989586621681075666"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075666"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681075665"><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681075665"><span class="hs-identifier hs-var">rules</span></a></span></span><span> </span><span id="local-6989586621681075664"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075664"><span class="hs-identifier hs-var">imp_specs</span></a></span></span><span> </span><span id="local-6989586621681075663"><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681075663"><span class="hs-identifier hs-var">fords</span></a></span></span><span>
</span><span id="line-477"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075662"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075662"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075661"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681075661"><span class="hs-identifier hs-var">ev_binds'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (ZonkEnv, Bag EvBind)) -&gt; TcM (ZonkEnv, Bag EvBind)
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM (ZonkEnv, Bag EvBind))
 -&gt; TcM (ZonkEnv, Bag EvBind))
-&gt; (ZonkEnv -&gt; TcM (ZonkEnv, Bag EvBind))
-&gt; TcM (ZonkEnv, Bag EvBind)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681075660"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075660"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075660"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681075667"><span class="hs-identifier hs-var">ev_binds</span></a></span><span>
</span><span id="line-478"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075659"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075659"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075658"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075658"><span class="hs-identifier hs-var">binds'</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (ZonkEnv, LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-var">zonkRecMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075662"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075666"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-479"></span><span>                        </span><span class="hs-comment">-- Top level is implicitly recursive</span><span>
</span><span id="line-480"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075656"><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681075656"><span class="hs-identifier hs-var">rules'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LRuleDecl GhcTc] -&gt; TcM [LRuleDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRules"><span class="hs-identifier hs-var">zonkRules</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075659"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681075665"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-481"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075654"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075654"><span class="hs-identifier hs-var">specs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LTcSpecPrag] -&gt; TcM [LTcSpecPrag]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var">zonkLTcSpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075659"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075664"><span class="hs-identifier hs-var">imp_specs</span></a></span><span>
</span><span id="line-482"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075652"><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681075652"><span class="hs-identifier hs-var">fords'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LForeignDecl GhcTc] -&gt; TcM [LForeignDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExports"><span class="hs-identifier hs-var">zonkForeignExports</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075659"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681075663"><span class="hs-identifier hs-var">fords</span></a></span><span>
</span><span id="line-483"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
 [LTcSpecPrag], [LRuleDecl GhcTc])
-&gt; TcM
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; TypeEnv
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEnvIds"><span class="hs-identifier hs-var">zonkEnvIds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075659"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681075661"><span class="hs-identifier hs-var">ev_binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075658"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681075652"><span class="hs-identifier hs-var">fords'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075654"><span class="hs-identifier hs-var">specs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681075656"><span class="hs-identifier hs-var">rules'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-486"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-type">zonkLocalBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-487"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span id="zonkLocalBinds"><span class="annot"><span class="annottext">zonkLocalBinds :: ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var hs-var">zonkLocalBinds</span></a></span></span><span> </span><span id="local-6989586621681075649"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075649"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span id="local-6989586621681075647"><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc
</span><a href="#local-6989586621681075647"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsLocalBinds GhcTc) -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075649"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc -&gt; HsLocalBinds GhcTc
forall idL idR. XEmptyLocalBinds idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="GHC.Hs.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc
</span><a href="#local-6989586621681075647"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkLocalBinds&quot;</span></span><span> </span><span class="hs-comment">-- Not in typechecker output</span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span id="local-6989586621681075644"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075644"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span id="local-6989586621681075643"><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><a href="#local-6989586621681075643"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-type">NValBinds</span></a></span><span> </span><span id="local-6989586621681075640"><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075640"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621681075639"><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621681075639"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-495"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075638"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075638"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075637"><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075637"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(RecFlag, LHsBinds GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (ZonkEnv, [(RecFlag, LHsBinds GhcTc)])
forall {a}.
ZonkEnv
-&gt; [(a, LHsBinds GhcTc)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(a, LHsBinds GhcTc)])
</span><a href="#local-6989586621681075636"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075644"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075640"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-496"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsLocalBinds GhcTc) -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075638"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
-&gt; HsValBindsLR GhcTc GhcTc -&gt; HsLocalBinds GhcTc
forall idL idR.
XHsValBinds idL idR
-&gt; HsValBindsLR idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="GHC.Hs.Binds.html#HsValBinds"><span class="hs-identifier hs-var">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><a href="#local-6989586621681075643"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XXValBindsLR GhcTc GhcTc -&gt; HsValBindsLR GhcTc GhcTc
forall idL idR. XXValBindsLR idL idR -&gt; HsValBindsLR idL idR
</span><a href="GHC.Hs.Binds.html#XValBindsLR"><span class="hs-identifier hs-var">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)] -&gt; [LSig GhcRn] -&gt; NHsValBindsLR GhcTc
forall idL.
[(RecFlag, LHsBinds idL)] -&gt; [LSig GhcRn] -&gt; NHsValBindsLR idL
</span><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-var">NValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075637"><span class="hs-identifier hs-var">new_binds</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621681075639"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-497"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-498"></span><span>    </span><span id="local-6989586621681075636"><span class="annot"><span class="annottext">go :: ZonkEnv
-&gt; [(a, LHsBinds GhcTc)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(a, LHsBinds GhcTc)])
</span><a href="#local-6989586621681075636"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681075631"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075631"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-499"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [(a, LHsBinds GhcTc)])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(a, LHsBinds GhcTc)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075631"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>    </span><span class="annot"><a href="#local-6989586621681075636"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681075630"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075630"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681075629"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681075629"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681075628"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075628"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681075627"><span class="annot"><span class="annottext">[(a, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075627"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075626"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075626"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075625"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075625"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (ZonkEnv, LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-var">zonkRecMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075630"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075628"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-502"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075624"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075624"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075623"><span class="annot"><span class="annottext">[(a, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075623"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(a, LHsBinds GhcTc)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(a, LHsBinds GhcTc)])
</span><a href="#local-6989586621681075636"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075626"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075627"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-503"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [(a, LHsBinds GhcTc)])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(a, LHsBinds GhcTc)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075624"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681075629"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075625"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(a, LHsBinds GhcTc)
-&gt; [(a, LHsBinds GhcTc)] -&gt; [(a, LHsBinds GhcTc)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(a, LHsBinds GhcTc)]
</span><a href="#local-6989586621681075623"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span id="local-6989586621681075622"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075622"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span id="local-6989586621681075620"><span class="annot"><span class="annottext">XHsIPBinds GhcTc GhcTc
</span><a href="#local-6989586621681075620"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#IPBinds"><span class="hs-identifier hs-type">IPBinds</span></a></span><span> </span><span id="local-6989586621681075618"><span class="annot"><span class="annottext">XIPBinds GhcTc
</span><a href="#local-6989586621681075618"><span class="hs-identifier hs-var">dict_binds</span></a></span></span><span> </span><span id="local-6989586621681075617"><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621681075617"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-506"></span><span>    </span><span id="local-6989586621681075616"><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621681075616"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LIPBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LIPBind GhcTc))
-&gt; [LIPBind GhcTc] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [LIPBind GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(IPBind GhcTc -&gt; TcM (IPBind GhcTc))
-&gt; LIPBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LIPBind GhcTc)
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="annot"><span class="annottext">IPBind GhcTc -&gt; TcM (IPBind GhcTc)
</span><a href="#local-6989586621681075614"><span class="hs-identifier hs-var">zonk_ip_bind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621681075617"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-507"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-508"></span><span>        </span><span id="local-6989586621681075613"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681075613"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075622"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-509"></span><span>                 </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075612"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span class="annot"><span class="annottext">XCIPBind GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681075612"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075612"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621681075616"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-510"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681075610"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075610"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075609"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681075609"><span class="hs-identifier hs-var">new_dict_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075613"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">XIPBinds GhcTc
TcEvBinds
</span><a href="#local-6989586621681075618"><span class="hs-identifier hs-var">dict_binds</span></a></span><span>
</span><span id="line-511"></span><span>    </span><span class="annot"><span class="annottext">(ZonkEnv, HsLocalBinds GhcTc) -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075610"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XHsIPBinds GhcTc GhcTc -&gt; HsIPBinds GhcTc -&gt; HsLocalBinds GhcTc
forall idL idR.
XHsIPBinds idL idR -&gt; HsIPBinds idR -&gt; HsLocalBindsLR idL idR
</span><a href="GHC.Hs.Binds.html#HsIPBinds"><span class="hs-identifier hs-var">HsIPBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsIPBinds GhcTc GhcTc
</span><a href="#local-6989586621681075620"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XIPBinds GhcTc -&gt; [LIPBind GhcTc] -&gt; HsIPBinds GhcTc
forall id. XIPBinds id -&gt; [LIPBind id] -&gt; HsIPBinds id
</span><a href="GHC.Hs.Binds.html#IPBinds"><span class="hs-identifier hs-var">IPBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XIPBinds GhcTc
TcEvBinds
</span><a href="#local-6989586621681075609"><span class="hs-identifier hs-var">new_dict_binds</span></a></span><span> </span><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621681075616"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-512"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-513"></span><span>    </span><span id="local-6989586621681075614"><span class="annot"><span class="annottext">zonk_ip_bind :: IPBind GhcTc -&gt; TcM (IPBind GhcTc)
</span><a href="#local-6989586621681075614"><span class="hs-identifier hs-var hs-var">zonk_ip_bind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span id="local-6989586621681075608"><span class="annot"><span class="annottext">XCIPBind GhcTc
</span><a href="#local-6989586621681075608"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075607"><span class="annot"><span class="annottext">Either (Located HsIPName) (IdP GhcTc)
</span><a href="#local-6989586621681075607"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681075606"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075606"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075605"><span class="annot"><span class="annottext">Either (Located HsIPName) Id
</span><a href="#local-6989586621681075605"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; TcM Id)
-&gt; Either (Located HsIPName) Id
-&gt; TcM (Either (Located HsIPName) Id)
forall a b.
(a -&gt; TcM b)
-&gt; Either (Located HsIPName) a -&gt; TcM (Either (Located HsIPName) b)
</span><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-var">mapIPNameTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075622"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Either (Located HsIPName) Id
Either (Located HsIPName) (IdP GhcTc)
</span><a href="#local-6989586621681075607"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-515"></span><span>             </span><span id="local-6989586621681075603"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075603"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075622"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075606"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-516"></span><span>             </span><span class="annot"><span class="annottext">IPBind GhcTc -&gt; TcM (IPBind GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCIPBind GhcTc
-&gt; Either (Located HsIPName) (IdP GhcTc)
-&gt; LHsExpr GhcTc
-&gt; IPBind GhcTc
forall id.
XCIPBind id
-&gt; Either (Located HsIPName) (IdP id) -&gt; LHsExpr id -&gt; IPBind id
</span><a href="GHC.Hs.Binds.html#IPBind"><span class="hs-identifier hs-var">IPBind</span></a></span><span> </span><span class="annot"><span class="annottext">XCIPBind GhcTc
</span><a href="#local-6989586621681075608"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Either (Located HsIPName) Id
Either (Located HsIPName) (IdP GhcTc)
</span><a href="#local-6989586621681075605"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075603"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-519"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-type">zonkRecMonoBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span id="zonkRecMonoBinds"><span class="annot"><span class="annottext">zonkRecMonoBinds :: ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (ZonkEnv, LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecMonoBinds"><span class="hs-identifier hs-var hs-var">zonkRecMonoBinds</span></a></span></span><span> </span><span id="local-6989586621681075602"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075602"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075601"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075601"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-521"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ZonkEnv, LHsBinds GhcTc) -&gt; TcM (ZonkEnv, LHsBinds GhcTc))
-&gt; TcM (ZonkEnv, LHsBinds GhcTc)
forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075599"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075599"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-522"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681075598"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681075598"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075602"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsBinds GhcTc -&gt; [IdP GhcTc]
forall p idR. CollectPass p =&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075599"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075596"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075596"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMonoBinds"><span class="hs-identifier hs-var">zonkMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075598"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075601"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-524"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, LHsBinds GhcTc) -&gt; TcM (ZonkEnv, LHsBinds GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075598"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075596"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-527"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkMonoBinds"><span class="hs-identifier hs-type">zonkMonoBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span id="zonkMonoBinds"><span class="annot"><span class="annottext">zonkMonoBinds :: ZonkEnv -&gt; LHsBinds GhcTc -&gt; TcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMonoBinds"><span class="hs-identifier hs-var hs-var">zonkMonoBinds</span></a></span></span><span> </span><span id="local-6989586621681075594"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075594"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075593"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075593"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc))
-&gt; LHsBinds GhcTc -&gt; TcM (LHsBinds GhcTc)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-var">zonk_lbind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075594"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075593"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-type">zonk_lbind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span id="zonk_lbind"><span class="annot"><span class="annottext">zonk_lbind :: ZonkEnv
-&gt; LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-var hs-var">zonk_lbind</span></a></span></span><span> </span><span id="local-6989586621681075590"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075590"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsBind GhcTc -&gt; TcM (HsBind GhcTc))
-&gt; LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsBind GhcTc -&gt; TcM (HsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075590"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-type">zonk_bind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span id="zonk_bind"><span class="annot"><span class="annottext">zonk_bind :: ZonkEnv -&gt; HsBind GhcTc -&gt; TcM (HsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var hs-var">zonk_bind</span></a></span></span><span> </span><span id="local-6989586621681075588"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075588"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075587"><span class="annot"><span class="annottext">bind :: HsBind GhcTc
</span><a href="#local-6989586621681075587"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#PatBind"><span class="hs-identifier hs-type">PatBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_lhs :: forall idL idR. HsBindLR idL idR -&gt; LPat idL
</span><a href="GHC.Hs.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075584"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075584"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_rhs :: forall idL idR. HsBindLR idL idR -&gt; GRHSs idR (LHsExpr idR)
</span><a href="GHC.Hs.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075582"><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075582"><span class="hs-identifier hs-var">grhss</span></a></span></span><span>
</span><span id="line-535"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_ext :: forall idL idR. HsBindLR idL idR -&gt; XPatBind idL idR
</span><a href="GHC.Hs.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#NPatBindTc"><span class="hs-identifier hs-type">NPatBindTc</span></a></span><span> </span><span id="local-6989586621681075579"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621681075579"><span class="hs-identifier hs-var">fvs</span></a></span></span><span> </span><span id="local-6989586621681075578"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075578"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075577"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075577"><span class="hs-identifier hs-var">_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075576"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681075576"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075588"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075584"><span class="hs-identifier hs-var">pat</span></a></span><span>            </span><span class="hs-comment">-- Env already extended</span><span>
</span><span id="line-537"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075574"><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075574"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; GRHSs GhcTc (LHsExpr GhcTc)
-&gt; TcM (GRHSs GhcTc (LHsExpr GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; GRHSs GhcTc (Located (body GhcTc))
-&gt; TcM (GRHSs GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-var">zonkGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075588"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075582"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-538"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075572"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075572"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075588"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075578"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-539"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsBind GhcTc -&gt; TcM (HsBind GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBind GhcTc
</span><a href="#local-6989586621681075587"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_lhs :: LPat GhcTc
</span><a href="GHC.Hs.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681075576"><span class="hs-identifier hs-var">new_pat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_rhs :: GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="GHC.Hs.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075574"><span class="hs-identifier hs-var">new_grhss</span></a></span><span>
</span><span id="line-540"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_ext :: XPatBind GhcTc GhcTc
</span><a href="GHC.Hs.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; Kind -&gt; NPatBindTc
</span><a href="GHC.Hs.Binds.html#NPatBindTc"><span class="hs-identifier hs-var">NPatBindTc</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621681075579"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075572"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681075571"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075571"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#VarBind"><span class="hs-identifier hs-type">VarBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">var_ext :: forall idL idR. HsBindLR idL idR -&gt; XVarBind idL idR
</span><a href="GHC.Hs.Binds.html#var_ext"><span class="hs-identifier hs-var">var_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075568"><span class="annot"><span class="annottext">XVarBind GhcTc GhcTc
</span><a href="#local-6989586621681075568"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-543"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_id :: forall idL idR. HsBindLR idL idR -&gt; IdP idL
</span><a href="GHC.Hs.Binds.html#var_id"><span class="hs-identifier hs-var">var_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075566"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075566"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_rhs :: forall idL idR. HsBindLR idL idR -&gt; LHsExpr idR
</span><a href="GHC.Hs.Binds.html#var_rhs"><span class="hs-identifier hs-var">var_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075564"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075564"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075563"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075563"><span class="hs-identifier hs-var">new_var</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075571"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075566"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-545"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075562"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075562"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075571"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075564"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-546"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsBind GhcTc -&gt; TcM (HsBind GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarBind :: forall idL idR.
XVarBind idL idR -&gt; IdP idL -&gt; LHsExpr idR -&gt; HsBindLR idL idR
</span><a href="GHC.Hs.Binds.html#VarBind"><span class="hs-identifier hs-type">VarBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">var_ext :: XVarBind GhcTc GhcTc
</span><a href="GHC.Hs.Binds.html#var_ext"><span class="hs-identifier hs-var">var_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XVarBind GhcTc GhcTc
</span><a href="#local-6989586621681075568"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-547"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_id :: IdP GhcTc
</span><a href="GHC.Hs.Binds.html#var_id"><span class="hs-identifier hs-var">var_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075563"><span class="hs-identifier hs-var">new_var</span></a></span><span>
</span><span id="line-548"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_rhs :: LHsExpr GhcTc
</span><a href="GHC.Hs.Binds.html#var_rhs"><span class="hs-identifier hs-var">var_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075562"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681075561"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075561"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075560"><span class="annot"><span class="annottext">bind :: HsBind GhcTc
</span><a href="#local-6989586621681075560"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; Located (IdP idL)
</span><a href="GHC.Hs.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075557"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075557"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681075556"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075556"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-551"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="GHC.Hs.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075554"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075554"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-552"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: forall idL idR. HsBindLR idL idR -&gt; XFunBind idL idR
</span><a href="GHC.Hs.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075552"><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
</span><a href="#local-6989586621681075552"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075551"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075551"><span class="hs-identifier hs-var">new_var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075561"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075556"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-554"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075550"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075550"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075549"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075549"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075561"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
HsWrapper
</span><a href="#local-6989586621681075552"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-555"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075547"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075547"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsExpr GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075550"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075554"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-556"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsBind GhcTc -&gt; TcM (HsBind GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBind GhcTc
</span><a href="#local-6989586621681075560"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: Located (IdP GhcTc)
</span><a href="GHC.Hs.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075557"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075551"><span class="hs-identifier hs-var">new_var</span></a></span><span>
</span><span id="line-557"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="GHC.Hs.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075547"><span class="hs-identifier hs-var">new_ms</span></a></span><span>
</span><span id="line-558"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcTc GhcTc
</span><a href="GHC.Hs.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
HsWrapper
</span><a href="#local-6989586621681075549"><span class="hs-identifier hs-var">new_co_fn</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681075545"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075545"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#AbsBinds"><span class="hs-identifier hs-type">AbsBinds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abs_tvs :: forall idL idR. HsBindLR idL idR -&gt; [Id]
</span><a href="GHC.Hs.Binds.html#abs_tvs"><span class="hs-identifier hs-var">abs_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075542"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075542"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_vars :: forall idL idR. HsBindLR idL idR -&gt; [Id]
</span><a href="GHC.Hs.Binds.html#abs_ev_vars"><span class="hs-identifier hs-var">abs_ev_vars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075540"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075540"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-561"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_binds :: forall idL idR. HsBindLR idL idR -&gt; [TcEvBinds]
</span><a href="GHC.Hs.Binds.html#abs_ev_binds"><span class="hs-identifier hs-var">abs_ev_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075538"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681075538"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span>
</span><span id="line-562"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_exports :: forall idL idR. HsBindLR idL idR -&gt; [ABExport idL]
</span><a href="GHC.Hs.Binds.html#abs_exports"><span class="hs-identifier hs-var">abs_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075536"><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681075536"><span class="hs-identifier hs-var">exports</span></a></span></span><span>
</span><span id="line-563"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_binds :: forall idL idR. HsBindLR idL idR -&gt; LHsBinds idL
</span><a href="GHC.Hs.Binds.html#abs_binds"><span class="hs-identifier hs-var">abs_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075534"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075534"><span class="hs-identifier hs-var">val_binds</span></a></span></span><span>
</span><span id="line-564"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_sig :: forall idL idR. HsBindLR idL idR -&gt; Bool
</span><a href="GHC.Hs.Binds.html#abs_sig"><span class="hs-identifier hs-var">abs_sig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075532"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681075532"><span class="hs-identifier hs-var">has_sig</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">all</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tyvars</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-566"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075529"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075529"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075528"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075528"><span class="hs-identifier hs-var">new_tyvars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075545"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075542"><span class="hs-identifier hs-var">tyvars</span></a></span><span>
</span><span id="line-567"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075527"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075527"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075526"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075526"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075529"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075540"><span class="hs-identifier hs-var">evs</span></a></span><span>
</span><span id="line-568"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075525"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075525"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075524"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681075524"><span class="hs-identifier hs-var">new_ev_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcEvBinds] -&gt; TcM (ZonkEnv, [TcEvBinds])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds_s"><span class="hs-identifier hs-var">zonkTcEvBinds_s</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075527"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681075538"><span class="hs-identifier hs-var">ev_binds</span></a></span><span>
</span><span id="line-569"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075522"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075522"><span class="hs-identifier hs-var">new_val_bind</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075521"><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681075521"><span class="hs-identifier hs-var">new_exports</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((LHsBinds GhcTc, [ABExport GhcTc])
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv) (LHsBinds GhcTc, [ABExport GhcTc]))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBinds GhcTc, [ABExport GhcTc])
forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">(((LHsBinds GhcTc, [ABExport GhcTc])
  -&gt; IOEnv
       (Env TcGblEnv TcLclEnv) (LHsBinds GhcTc, [ABExport GhcTc]))
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv) (LHsBinds GhcTc, [ABExport GhcTc]))
-&gt; ((LHsBinds GhcTc, [ABExport GhcTc])
    -&gt; IOEnv
         (Env TcGblEnv TcLclEnv) (LHsBinds GhcTc, [ABExport GhcTc]))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBinds GhcTc, [ABExport GhcTc])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621681075520"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075520"><span class="hs-identifier hs-var">new_val_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-570"></span><span>         </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681075519"><span class="annot"><span class="annottext">env3 :: ZonkEnv
</span><a href="#local-6989586621681075519"><span class="hs-identifier hs-var hs-var">env3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075525"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">([Id] -&gt; ZonkEnv) -&gt; [Id] -&gt; ZonkEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-571"></span><span>                         </span><span class="annot"><span class="annottext">LHsBinds GhcTc -&gt; [IdP GhcTc]
forall p idR. CollectPass p =&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075520"><span class="hs-identifier hs-var">new_val_binds</span></a></span><span>
</span><span id="line-572"></span><span>            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075518"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075518"><span class="hs-identifier hs-var">new_val_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc))
-&gt; LHsBinds GhcTc -&gt; TcM (LHsBinds GhcTc)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
</span><a href="#local-6989586621681075517"><span class="hs-identifier hs-var">zonk_val_bind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075519"><span class="hs-identifier hs-var">env3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075534"><span class="hs-identifier hs-var">val_binds</span></a></span><span>
</span><span id="line-573"></span><span>            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075516"><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681075516"><span class="hs-identifier hs-var">new_exports</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ABExport GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ABExport GhcTc))
-&gt; [ABExport GhcTc]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [ABExport GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; ABExport GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ABExport GhcTc)
</span><a href="#local-6989586621681075515"><span class="hs-identifier hs-var">zonk_export</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075519"><span class="hs-identifier hs-var">env3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681075536"><span class="hs-identifier hs-var">exports</span></a></span><span>
</span><span id="line-574"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(LHsBinds GhcTc, [ABExport GhcTc])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBinds GhcTc, [ABExport GhcTc])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075518"><span class="hs-identifier hs-var">new_val_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681075516"><span class="hs-identifier hs-var">new_exports</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-575"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsBind GhcTc -&gt; TcM (HsBind GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AbsBinds :: forall idL idR.
XAbsBinds idL idR
-&gt; [Id]
-&gt; [Id]
-&gt; [ABExport idL]
-&gt; [TcEvBinds]
-&gt; LHsBinds idL
-&gt; Bool
-&gt; HsBindLR idL idR
</span><a href="GHC.Hs.Binds.html#AbsBinds"><span class="hs-identifier hs-type">AbsBinds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abs_ext :: XAbsBinds GhcTc GhcTc
</span><a href="GHC.Hs.Binds.html#abs_ext"><span class="hs-identifier hs-var">abs_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
XAbsBinds GhcTc GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-576"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_tvs :: [Id]
</span><a href="GHC.Hs.Binds.html#abs_tvs"><span class="hs-identifier hs-var">abs_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075528"><span class="hs-identifier hs-var">new_tyvars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_vars :: [Id]
</span><a href="GHC.Hs.Binds.html#abs_ev_vars"><span class="hs-identifier hs-var">abs_ev_vars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681075526"><span class="hs-identifier hs-var">new_evs</span></a></span><span>
</span><span id="line-577"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_binds :: [TcEvBinds]
</span><a href="GHC.Hs.Binds.html#abs_ev_binds"><span class="hs-identifier hs-var">abs_ev_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681075524"><span class="hs-identifier hs-var">new_ev_binds</span></a></span><span>
</span><span id="line-578"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_exports :: [ABExport GhcTc]
</span><a href="GHC.Hs.Binds.html#abs_exports"><span class="hs-identifier hs-var">abs_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ABExport GhcTc]
</span><a href="#local-6989586621681075521"><span class="hs-identifier hs-var">new_exports</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_binds :: LHsBinds GhcTc
</span><a href="GHC.Hs.Binds.html#abs_binds"><span class="hs-identifier hs-var">abs_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621681075522"><span class="hs-identifier hs-var">new_val_bind</span></a></span><span>
</span><span id="line-579"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_sig :: Bool
</span><a href="GHC.Hs.Binds.html#abs_sig"><span class="hs-identifier hs-var">abs_sig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681075532"><span class="hs-identifier hs-var">has_sig</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-580"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-581"></span><span>    </span><span id="local-6989586621681075517"><span class="annot"><span class="annottext">zonk_val_bind :: ZonkEnv
-&gt; LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
</span><a href="#local-6989586621681075517"><span class="hs-identifier hs-var hs-var">zonk_val_bind</span></a></span></span><span> </span><span id="local-6989586621681075513"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075513"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075512"><span class="annot"><span class="annottext">LHsBind GhcTc
</span><a href="#local-6989586621681075512"><span class="hs-identifier hs-var">lbind</span></a></span></span><span>
</span><span id="line-582"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681075532"><span class="hs-identifier hs-var">has_sig</span></a></span><span>
</span><span id="line-583"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075511"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075511"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681075510"><span class="annot"><span class="annottext">bind :: HsBind GhcTc
</span><a href="#local-6989586621681075510"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; Located (IdP idL)
</span><a href="GHC.Hs.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075509"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075509"><span class="hs-identifier hs-var">mloc</span></a></span></span><span> </span><span id="local-6989586621681075508"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075508"><span class="hs-identifier hs-var">mono_id</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="GHC.Hs.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075507"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075507"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-585"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: forall idL idR. HsBindLR idL idR -&gt; XFunBind idL idR
</span><a href="GHC.Hs.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075506"><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
</span><a href="#local-6989586621681075506"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsBind GhcTc
</span><a href="#local-6989586621681075512"><span class="hs-identifier hs-var">lbind</span></a></span><span>
</span><span id="line-586"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075505"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075505"><span class="hs-identifier hs-var">new_mono_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind) -&gt; Id -&gt; TcM Id
forall (m :: * -&gt; *). Monad m =&gt; (Kind -&gt; m Kind) -&gt; Id -&gt; m Id
</span><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier hs-var">updateIdTypeAndMultM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075513"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075508"><span class="hs-identifier hs-var">mono_id</span></a></span><span>
</span><span id="line-587"></span><span>                            </span><span class="hs-comment">-- Specifically /not/ zonkIdBndr; we do not</span><span>
</span><span id="line-588"></span><span>                            </span><span class="hs-comment">-- want to complain about a levity-polymorphic binder</span><span>
</span><span id="line-589"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075504"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075504"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075503"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075503"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075513"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
HsWrapper
</span><a href="#local-6989586621681075506"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-590"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075502"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075502"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsExpr GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075504"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075507"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-591"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc))
-&gt; LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HsBind GhcTc -&gt; LHsBind GhcTc
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075511"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(HsBind GhcTc -&gt; LHsBind GhcTc) -&gt; HsBind GhcTc -&gt; LHsBind GhcTc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-592"></span><span>             </span><span class="annot"><span class="annottext">HsBind GhcTc
</span><a href="#local-6989586621681075510"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: Located (IdP GhcTc)
</span><a href="GHC.Hs.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075509"><span class="hs-identifier hs-var">mloc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075505"><span class="hs-identifier hs-var">new_mono_id</span></a></span><span>
</span><span id="line-593"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="GHC.Hs.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075502"><span class="hs-identifier hs-var">new_ms</span></a></span><span>
</span><span id="line-594"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcTc GhcTc
</span><a href="GHC.Hs.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XFunBind GhcTc GhcTc
HsWrapper
</span><a href="#local-6989586621681075503"><span class="hs-identifier hs-var">new_co_fn</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-595"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-596"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; LHsBind GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsBind GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_lbind"><span class="hs-identifier hs-var">zonk_lbind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075513"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBind GhcTc
</span><a href="#local-6989586621681075512"><span class="hs-identifier hs-var">lbind</span></a></span><span>   </span><span class="hs-comment">-- The normal case</span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><a href="#local-6989586621681075515"><span class="hs-identifier hs-type">zonk_export</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#ABExport"><span class="hs-identifier hs-type">ABExport</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#ABExport"><span class="hs-identifier hs-type">ABExport</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>    </span><span id="local-6989586621681075515"><span class="annot"><span class="annottext">zonk_export :: ZonkEnv
-&gt; ABExport GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ABExport GhcTc)
</span><a href="#local-6989586621681075515"><span class="hs-identifier hs-var hs-var">zonk_export</span></a></span></span><span> </span><span id="local-6989586621681075501"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075501"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#ABE"><span class="hs-identifier hs-type">ABE</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abe_ext :: forall p. ABExport p -&gt; XABE p
</span><a href="GHC.Hs.Binds.html#abe_ext"><span class="hs-identifier hs-var">abe_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075498"><span class="annot"><span class="annottext">XABE GhcTc
</span><a href="#local-6989586621681075498"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-600"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_wrap :: forall p. ABExport p -&gt; HsWrapper
</span><a href="GHC.Hs.Binds.html#abe_wrap"><span class="hs-identifier hs-var">abe_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075496"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075496"><span class="hs-identifier hs-var">wrap</span></a></span></span><span>
</span><span id="line-601"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_poly :: forall p. ABExport p -&gt; IdP p
</span><a href="GHC.Hs.Binds.html#abe_poly"><span class="hs-identifier hs-var">abe_poly</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075494"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075494"><span class="hs-identifier hs-var">poly_id</span></a></span></span><span>
</span><span id="line-602"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_mono :: forall p. ABExport p -&gt; IdP p
</span><a href="GHC.Hs.Binds.html#abe_mono"><span class="hs-identifier hs-var">abe_mono</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075492"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075492"><span class="hs-identifier hs-var">mono_id</span></a></span></span><span>
</span><span id="line-603"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_prags :: forall p. ABExport p -&gt; TcSpecPrags
</span><a href="GHC.Hs.Binds.html#abe_prags"><span class="hs-identifier hs-var">abe_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075490"><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681075490"><span class="hs-identifier hs-var">prags</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-604"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075489"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075489"><span class="hs-identifier hs-var">new_poly_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075501"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075494"><span class="hs-identifier hs-var">poly_id</span></a></span><span>
</span><span id="line-605"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075488"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075488"><span class="hs-identifier hs-var">new_wrap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075501"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075496"><span class="hs-identifier hs-var">wrap</span></a></span><span>
</span><span id="line-606"></span><span>             </span><span id="local-6989586621681075487"><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681075487"><span class="hs-identifier hs-var">new_prags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcSpecPrags -&gt; TcM TcSpecPrags
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-var">zonkSpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075501"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681075490"><span class="hs-identifier hs-var">prags</span></a></span><span>
</span><span id="line-607"></span><span>             </span><span class="annot"><span class="annottext">ABExport GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ABExport GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ABE :: forall p.
XABE p -&gt; IdP p -&gt; IdP p -&gt; HsWrapper -&gt; TcSpecPrags -&gt; ABExport p
</span><a href="GHC.Hs.Binds.html#ABE"><span class="hs-identifier hs-type">ABE</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abe_ext :: XABE GhcTc
</span><a href="GHC.Hs.Binds.html#abe_ext"><span class="hs-identifier hs-var">abe_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XABE GhcTc
</span><a href="#local-6989586621681075498"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-608"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_wrap :: HsWrapper
</span><a href="GHC.Hs.Binds.html#abe_wrap"><span class="hs-identifier hs-var">abe_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075488"><span class="hs-identifier hs-var">new_wrap</span></a></span><span>
</span><span id="line-609"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_poly :: IdP GhcTc
</span><a href="GHC.Hs.Binds.html#abe_poly"><span class="hs-identifier hs-var">abe_poly</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075489"><span class="hs-identifier hs-var">new_poly_id</span></a></span><span>
</span><span id="line-610"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_mono :: IdP GhcTc
</span><a href="GHC.Hs.Binds.html#abe_mono"><span class="hs-identifier hs-var">abe_mono</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075501"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075492"><span class="hs-identifier hs-var">mono_id</span></a></span><span>
</span><span id="line-611"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_prags :: TcSpecPrags
</span><a href="GHC.Hs.Binds.html#abe_prags"><span class="hs-identifier hs-var">abe_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621681075487"><span class="hs-identifier hs-var">new_prags</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621681075485"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075485"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span id="local-6989586621681075483"><span class="annot"><span class="annottext">XPatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681075483"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075482"><span class="annot"><span class="annottext">bind :: PatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681075482"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; Located (IdP idL)
</span><a href="GHC.Hs.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075479"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075479"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681075478"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075478"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-614"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR.
PatSynBind idL idR -&gt; HsPatSynDetails (Located (IdP idR))
</span><a href="GHC.Hs.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075476"><span class="annot"><span class="annottext">HsPatSynDetails (Located (IdP GhcTc))
</span><a href="#local-6989586621681075476"><span class="hs-identifier hs-var">details</span></a></span></span><span>
</span><span id="line-615"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="GHC.Hs.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075474"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075474"><span class="hs-identifier hs-var">lpat</span></a></span></span><span>
</span><span id="line-616"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDir idR
</span><a href="GHC.Hs.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075472"><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681075472"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075471"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075471"><span class="hs-identifier hs-var">id'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075485"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075478"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-618"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075470"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075470"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075469"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681075469"><span class="hs-identifier hs-var">lpat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075485"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075474"><span class="hs-identifier hs-var">lpat</span></a></span><span>
</span><span id="line-619"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681075468"><span class="annot"><span class="annottext">details' :: HsPatSynDetails (GenLocated SrcSpan Id)
</span><a href="#local-6989586621681075468"><span class="hs-identifier hs-var hs-var">details'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; HsPatSynDetails (GenLocated SrcSpan Id)
-&gt; HsPatSynDetails (GenLocated SrcSpan Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075470"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails (GenLocated SrcSpan Id)
HsPatSynDetails (Located (IdP GhcTc))
</span><a href="#local-6989586621681075476"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-620"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075466"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075466"><span class="hs-identifier hs-var">_env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075465"><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681075465"><span class="hs-identifier hs-var">dir'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsPatSynDir GhcTc -&gt; TcM (ZonkEnv, HsPatSynDir GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075470"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681075472"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-621"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsBind GhcTc -&gt; TcM (HsBind GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsBind GhcTc -&gt; TcM (HsBind GhcTc))
-&gt; HsBind GhcTc -&gt; TcM (HsBind GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynBind GhcTc GhcTc -&gt; PatSynBind GhcTc GhcTc -&gt; HsBind GhcTc
forall idL idR.
XPatSynBind idL idR -&gt; PatSynBind idL idR -&gt; HsBindLR idL idR
</span><a href="GHC.Hs.Binds.html#PatSynBind"><span class="hs-identifier hs-var">PatSynBind</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681075483"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(PatSynBind GhcTc GhcTc -&gt; HsBind GhcTc)
-&gt; PatSynBind GhcTc GhcTc -&gt; HsBind GhcTc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-622"></span><span>                  </span><span class="annot"><span class="annottext">PatSynBind GhcTc GhcTc
</span><a href="#local-6989586621681075482"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: Located (IdP GhcTc)
</span><a href="GHC.Hs.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075479"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075471"><span class="hs-identifier hs-var">id'</span></a></span><span>
</span><span id="line-623"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: HsPatSynDetails (Located (IdP GhcTc))
</span><a href="GHC.Hs.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails (GenLocated SrcSpan Id)
HsPatSynDetails (Located (IdP GhcTc))
</span><a href="#local-6989586621681075468"><span class="hs-identifier hs-var">details'</span></a></span><span>
</span><span id="line-624"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: LPat GhcTc
</span><a href="GHC.Hs.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681075469"><span class="hs-identifier hs-var">lpat'</span></a></span><span>
</span><span id="line-625"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: HsPatSynDir GhcTc
</span><a href="GHC.Hs.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621681075465"><span class="hs-identifier hs-var">dir'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-type">zonkPatSynDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-628"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-630"></span><span id="zonkPatSynDetails"><span class="annot"><span class="annottext">zonkPatSynDetails :: ZonkEnv
-&gt; HsPatSynDetails (GenLocated SrcSpan Id)
-&gt; HsPatSynDetails (GenLocated SrcSpan Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var hs-var">zonkPatSynDetails</span></a></span></span><span> </span><span id="local-6989586621681075463"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075463"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span id="local-6989586621681075461"><span class="annot"><span class="annottext">[GenLocated SrcSpan Id]
</span><a href="#local-6989586621681075461"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan Id] -&gt; HsPatSynDetails (GenLocated SrcSpan Id)
forall arg rec. [arg] -&gt; HsConDetails arg rec
</span><a href="GHC.Hs.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id)
-&gt; [GenLocated SrcSpan Id] -&gt; [GenLocated SrcSpan Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075463"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan Id]
</span><a href="#local-6989586621681075461"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span id="local-6989586621681075460"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075460"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621681075458"><span class="annot"><span class="annottext">GenLocated SrcSpan Id
</span><a href="#local-6989586621681075458"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621681075457"><span class="annot"><span class="annottext">GenLocated SrcSpan Id
</span><a href="#local-6989586621681075457"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-633"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Id
-&gt; GenLocated SrcSpan Id -&gt; HsPatSynDetails (GenLocated SrcSpan Id)
forall arg rec. arg -&gt; arg -&gt; HsConDetails arg rec
</span><a href="GHC.Hs.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075460"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Id
</span><a href="#local-6989586621681075458"><span class="hs-identifier hs-var">a1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075460"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Id
</span><a href="#local-6989586621681075457"><span class="hs-identifier hs-var">a2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span id="local-6989586621681075456"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075456"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621681075454"><span class="annot"><span class="annottext">[RecordPatSynField (GenLocated SrcSpan Id)]
</span><a href="#local-6989586621681075454"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-635"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField (GenLocated SrcSpan Id)]
-&gt; HsPatSynDetails (GenLocated SrcSpan Id)
forall arg rec. rec -&gt; HsConDetails arg rec
</span><a href="GHC.Hs.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RecordPatSynField (GenLocated SrcSpan Id)
 -&gt; RecordPatSynField (GenLocated SrcSpan Id))
-&gt; [RecordPatSynField (GenLocated SrcSpan Id)]
-&gt; [RecordPatSynField (GenLocated SrcSpan Id)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id)
-&gt; RecordPatSynField (GenLocated SrcSpan Id)
-&gt; RecordPatSynField (GenLocated SrcSpan Id)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075456"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField (GenLocated SrcSpan Id)]
</span><a href="#local-6989586621681075454"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-type">zonkPatSynDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-638"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-639"></span><span id="zonkPatSynDir"><span class="annot"><span class="annottext">zonkPatSynDir :: ZonkEnv -&gt; HsPatSynDir GhcTc -&gt; TcM (ZonkEnv, HsPatSynDir GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var hs-var">zonkPatSynDir</span></a></span></span><span> </span><span id="local-6989586621681075453"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075453"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="GHC.Hs.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsPatSynDir GhcTc) -&gt; TcM (ZonkEnv, HsPatSynDir GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075453"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
forall id. HsPatSynDir id
</span><a href="GHC.Hs.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span id="local-6989586621681075451"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075451"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="GHC.Hs.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsPatSynDir GhcTc) -&gt; TcM (ZonkEnv, HsPatSynDir GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075451"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
forall id. HsPatSynDir id
</span><a href="GHC.Hs.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-641"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span id="local-6989586621681075449"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075449"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-type">ExplicitBidirectional</span></a></span><span> </span><span id="local-6989586621681075447"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075447"><span class="hs-identifier hs-var">mg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-642"></span><span>    </span><span id="local-6989586621681075446"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075446"><span class="hs-identifier hs-var">mg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsExpr GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075449"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075447"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-643"></span><span>    </span><span class="annot"><span class="annottext">(ZonkEnv, HsPatSynDir GhcTc) -&gt; TcM (ZonkEnv, HsPatSynDir GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075449"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsPatSynDir GhcTc
forall id. MatchGroup id (LHsExpr id) -&gt; HsPatSynDir id
</span><a href="GHC.Hs.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-var">ExplicitBidirectional</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075446"><span class="hs-identifier hs-var">mg'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-type">zonkSpecPrags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#TcSpecPrags"><span class="hs-identifier hs-type">TcSpecPrags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#TcSpecPrags"><span class="hs-identifier hs-type">TcSpecPrags</span></a></span><span>
</span><span id="line-646"></span><span id="zonkSpecPrags"><span class="annot"><span class="annottext">zonkSpecPrags :: ZonkEnv -&gt; TcSpecPrags -&gt; TcM TcSpecPrags
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-var hs-var">zonkSpecPrags</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="GHC.Hs.Binds.html#IsDefaultMethod"><span class="hs-identifier hs-var">IsDefaultMethod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcSpecPrags -&gt; TcM TcSpecPrags
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="GHC.Hs.Binds.html#IsDefaultMethod"><span class="hs-identifier hs-var">IsDefaultMethod</span></a></span><span>
</span><span id="line-647"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSpecPrags"><span class="hs-identifier hs-var">zonkSpecPrags</span></a></span><span> </span><span id="local-6989586621681075444"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075444"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#SpecPrags"><span class="hs-identifier hs-type">SpecPrags</span></a></span><span> </span><span id="local-6989586621681075442"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075442"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075441"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075441"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LTcSpecPrag] -&gt; TcM [LTcSpecPrag]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var">zonkLTcSpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075444"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075442"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-648"></span><span>                                       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TcSpecPrags -&gt; TcM TcSpecPrags
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LTcSpecPrag] -&gt; TcSpecPrags
</span><a href="GHC.Hs.Binds.html#SpecPrags"><span class="hs-identifier hs-var">SpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075441"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-649"></span><span>
</span><span id="line-650"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-type">zonkLTcSpecPrags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-651"></span><span id="zonkLTcSpecPrags"><span class="annot"><span class="annottext">zonkLTcSpecPrags :: ZonkEnv -&gt; [LTcSpecPrag] -&gt; TcM [LTcSpecPrag]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var hs-var">zonkLTcSpecPrags</span></a></span></span><span> </span><span id="local-6989586621681075440"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075440"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075439"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075439"><span class="hs-identifier hs-var">ps</span></a></span></span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LTcSpecPrag -&gt; IOEnv (Env TcGblEnv TcLclEnv) LTcSpecPrag)
-&gt; [LTcSpecPrag] -&gt; TcM [LTcSpecPrag]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LTcSpecPrag -&gt; IOEnv (Env TcGblEnv TcLclEnv) LTcSpecPrag
</span><a href="#local-6989586621681075438"><span class="hs-identifier hs-var">zonk_prag</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621681075439"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-653"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-654"></span><span>    </span><span id="local-6989586621681075438"><span class="annot"><span class="annottext">zonk_prag :: LTcSpecPrag -&gt; IOEnv (Env TcGblEnv TcLclEnv) LTcSpecPrag
</span><a href="#local-6989586621681075438"><span class="hs-identifier hs-var hs-var">zonk_prag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075437"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075437"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#SpecPrag"><span class="hs-identifier hs-type">SpecPrag</span></a></span><span> </span><span id="local-6989586621681075435"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075435"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681075434"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075434"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621681075433"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621681075433"><span class="hs-identifier hs-var">inl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075432"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075432"><span class="hs-identifier hs-var">co_fn'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075440"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075434"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-656"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LTcSpecPrag -&gt; IOEnv (Env TcGblEnv TcLclEnv) LTcSpecPrag
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; TcSpecPrag -&gt; LTcSpecPrag
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075437"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; HsWrapper -&gt; InlinePragma -&gt; TcSpecPrag
</span><a href="GHC.Hs.Binds.html#SpecPrag"><span class="hs-identifier hs-var">SpecPrag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075440"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075435"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075432"><span class="hs-identifier hs-var">co_fn'</span></a></span><span> </span><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621681075433"><span class="hs-identifier hs-var">inl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-657"></span><span>
</span><span id="line-658"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Match-GRHSs]{Match and GRHSs}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-665"></span><span>
</span><span id="line-666"></span><span id="local-6989586621681076919"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-type">zonkMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-667"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076919"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076919"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076919"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-669"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076919"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-670"></span><span id="zonkMatchGroup"><span class="annot"><span class="annottext">zonkMatchGroup :: forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var hs-var">zonkMatchGroup</span></a></span></span><span> </span><span id="local-6989586621681075425"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075425"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075424"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681075424"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; Located [LMatch p body]
</span><a href="GHC.Hs.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075421"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075421"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681075420"><span class="annot"><span class="annottext">[LMatch GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075420"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-671"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: forall p body. MatchGroup p body -&gt; XMG p body
</span><a href="GHC.Hs.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#MatchGroupTc"><span class="hs-identifier hs-type">MatchGroupTc</span></a></span><span> </span><span id="local-6989586621681075417"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681075417"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span> </span><span id="local-6989586621681075416"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075416"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span>
</span><span id="line-672"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_origin :: forall p body. MatchGroup p body -&gt; Origin
</span><a href="GHC.Hs.Expr.html#mg_origin"><span class="hs-identifier hs-var">mg_origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075414"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681075414"><span class="hs-identifier hs-var">origin</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075413"><span class="annot"><span class="annottext">[LMatch GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075413"><span class="hs-identifier hs-var">ms'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LMatch GhcTc (Located (body GhcTc))
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv) (LMatch GhcTc (Located (body GhcTc))))
-&gt; [LMatch GhcTc (Located (body GhcTc))]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) [LMatch GhcTc (Located (body GhcTc))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; LMatch GhcTc (Located (body GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (LMatch GhcTc (Located (body GhcTc)))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; LMatch GhcTc (Located (body GhcTc))
-&gt; TcM (LMatch GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatch"><span class="hs-identifier hs-var">zonkMatch</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075425"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681075424"><span class="hs-identifier hs-var">zBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LMatch GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075420"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-674"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075411"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681075411"><span class="hs-identifier hs-var">arg_tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Scaled Kind] -&gt; TcM [Scaled Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-var">zonkScaledTcTypesToTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075425"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681075417"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-675"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075410"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075410"><span class="hs-identifier hs-var">res_ty'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075425"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075416"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-676"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MG :: forall p body.
XMG p body
-&gt; Located [LMatch p body] -&gt; Origin -&gt; MatchGroup p body
</span><a href="GHC.Hs.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: GenLocated SrcSpan [LMatch GhcTc (Located (body GhcTc))]
</span><a href="GHC.Hs.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; [LMatch GhcTc (Located (body GhcTc))]
-&gt; GenLocated SrcSpan [LMatch GhcTc (Located (body GhcTc))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075421"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075413"><span class="hs-identifier hs-var">ms'</span></a></span><span>
</span><span id="line-677"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: XMG GhcTc (Located (body GhcTc))
</span><a href="GHC.Hs.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind] -&gt; Kind -&gt; MatchGroupTc
</span><a href="GHC.Hs.Expr.html#MatchGroupTc"><span class="hs-identifier hs-var">MatchGroupTc</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681075411"><span class="hs-identifier hs-var">arg_tys'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075410"><span class="hs-identifier hs-var">res_ty'</span></a></span><span>
</span><span id="line-678"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_origin :: Origin
</span><a href="GHC.Hs.Expr.html#mg_origin"><span class="hs-identifier hs-var">mg_origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681075414"><span class="hs-identifier hs-var">origin</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-679"></span><span>
</span><span id="line-680"></span><span id="local-6989586621681076865"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkMatch"><span class="hs-identifier hs-type">zonkMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-681"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076865"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076865"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076865"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076865"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-684"></span><span id="zonkMatch"><span class="annot"><span class="annottext">zonkMatch :: forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; LMatch GhcTc (Located (body GhcTc))
-&gt; TcM (LMatch GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatch"><span class="hs-identifier hs-var hs-var">zonkMatch</span></a></span></span><span> </span><span id="local-6989586621681075406"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075406"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075405"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681075405"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075404"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075404"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681075403"><span class="annot"><span class="annottext">match :: Match GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075403"><span class="hs-identifier hs-var">match</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; [LPat p]
</span><a href="GHC.Hs.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075400"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681075400"><span class="hs-identifier hs-var">pats</span></a></span></span><span>
</span><span id="line-685"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: forall p body. Match p body -&gt; GRHSs p body
</span><a href="GHC.Hs.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075398"><span class="annot"><span class="annottext">GRHSs GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075398"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075397"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075397"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075396"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681075396"><span class="hs-identifier hs-var">new_pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075406"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681075400"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-687"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075394"><span class="annot"><span class="annottext">GRHSs GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075394"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; GRHSs GhcTc (Located (body GhcTc))
-&gt; TcM (GRHSs GhcTc (Located (body GhcTc)))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; GRHSs GhcTc (Located (body GhcTc))
-&gt; TcM (GRHSs GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-var">zonkGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075397"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681075405"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075398"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-688"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Match GhcTc (Located (body GhcTc)))
-&gt; TcM (GenLocated SrcSpan (Match GhcTc (Located (body GhcTc))))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; Match GhcTc (Located (body GhcTc))
-&gt; GenLocated SrcSpan (Match GhcTc (Located (body GhcTc)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075404"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Match GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075403"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: [LPat GhcTc]
</span><a href="GHC.Hs.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
[LPat GhcTc]
</span><a href="#local-6989586621681075396"><span class="hs-identifier hs-var">new_pats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: GRHSs GhcTc (Located (body GhcTc))
</span><a href="GHC.Hs.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075394"><span class="hs-identifier hs-var">new_grhss</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-691"></span><span id="local-6989586621681076937"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-type">zonkGRHSs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-692"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076937"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076937"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076937"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076937"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span id="zonkGRHSs"><span class="annot"><span class="annottext">zonkGRHSs :: forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; GRHSs GhcTc (Located (body GhcTc))
-&gt; TcM (GRHSs GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkGRHSs"><span class="hs-identifier hs-var hs-var">zonkGRHSs</span></a></span></span><span> </span><span id="local-6989586621681075385"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075385"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075384"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681075384"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span id="local-6989586621681075382"><span class="annot"><span class="annottext">XCGRHSs GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075382"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075381"><span class="annot"><span class="annottext">[LGRHS GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075381"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075380"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075380"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681075379"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075379"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-697"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681075378"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075378"><span class="hs-identifier hs-var">new_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075377"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075377"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075385"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075379"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-698"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-699"></span><span>        </span><span id="local-6989586621681075376"><span class="annot"><span class="annottext">zonk_grhs :: GRHS GhcTc (Located (body GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (GRHS GhcTc (Located (body GhcTc)))
</span><a href="#local-6989586621681075376"><span class="hs-identifier hs-var hs-var">zonk_grhs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span id="local-6989586621681075374"><span class="annot"><span class="annottext">XCGRHS GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075374"><span class="hs-identifier hs-var">xx</span></a></span></span><span> </span><span id="local-6989586621681075373"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075373"><span class="hs-identifier hs-var">guarded</span></a></span></span><span> </span><span id="local-6989586621681075372"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681075372"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075371"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075371"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075370"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075370"><span class="hs-identifier hs-var">new_guarded</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; TcM (ZonkEnv, [GuardLStmt GhcTc])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075378"><span class="hs-identifier hs-var">new_env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075373"><span class="hs-identifier hs-var">guarded</span></a></span><span>
</span><span id="line-701"></span><span>               </span><span id="local-6989586621681075368"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681075368"><span class="hs-identifier hs-var">new_rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681075384"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075371"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681075372"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-702"></span><span>               </span><span class="annot"><span class="annottext">GRHS GhcTc (Located (body GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (GRHS GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCGRHS GhcTc (Located (body GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; Located (body GhcTc)
-&gt; GRHS GhcTc (Located (body GhcTc))
forall p body.
XCGRHS p body -&gt; [GuardLStmt p] -&gt; body -&gt; GRHS p body
</span><a href="GHC.Hs.Expr.html#GRHS"><span class="hs-identifier hs-var">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075374"><span class="hs-identifier hs-var">xx</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075370"><span class="hs-identifier hs-var">new_guarded</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681075368"><span class="hs-identifier hs-var">new_rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>    </span><span id="local-6989586621681075367"><span class="annot"><span class="annottext">[LGRHS GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075367"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LGRHS GhcTc (Located (body GhcTc))
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv) (LGRHS GhcTc (Located (body GhcTc))))
-&gt; [LGRHS GhcTc (Located (body GhcTc))]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) [LGRHS GhcTc (Located (body GhcTc))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GRHS GhcTc (Located (body GhcTc))
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv) (GRHS GhcTc (Located (body GhcTc))))
-&gt; LGRHS GhcTc (Located (body GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (LGRHS GhcTc (Located (body GhcTc)))
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="annot"><span class="annottext">GRHS GhcTc (Located (body GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (GRHS GhcTc (Located (body GhcTc)))
</span><a href="#local-6989586621681075376"><span class="hs-identifier hs-var">zonk_grhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075381"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-704"></span><span>    </span><span class="annot"><span class="annottext">GRHSs GhcTc (Located (body GhcTc))
-&gt; TcM (GRHSs GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCGRHSs GhcTc (Located (body GhcTc))
-&gt; [LGRHS GhcTc (Located (body GhcTc))]
-&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
-&gt; GRHSs GhcTc (Located (body GhcTc))
forall p body.
XCGRHSs p body -&gt; [LGRHS p body] -&gt; LHsLocalBinds p -&gt; GRHSs p body
</span><a href="GHC.Hs.Expr.html#GRHSs"><span class="hs-identifier hs-var">GRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHSs GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681075382"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681075367"><span class="hs-identifier hs-var">new_grhss</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsLocalBinds GhcTc -&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075380"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075377"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-HsExpr]{Running a zonkitution over a TypeCheckedExpr}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLExprs"><span class="hs-identifier hs-type">zonkLExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-715"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span>
</span><span id="line-718"></span><span id="zonkLExprs"><span class="annot"><span class="annottext">zonkLExprs :: ZonkEnv -&gt; [LHsExpr GhcTc] -&gt; TcM [LHsExpr GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExprs"><span class="hs-identifier hs-var hs-var">zonkLExprs</span></a></span></span><span> </span><span id="local-6989586621681075365"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075365"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075364"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681075364"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; [LHsExpr GhcTc] -&gt; TcM [LHsExpr GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075365"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681075364"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-719"></span><span id="zonkLExpr"><span class="annot"><span class="annottext">zonkLExpr :: ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var hs-var">zonkLExpr</span></a></span></span><span>  </span><span id="local-6989586621681075363"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075363"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075362"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075362"><span class="hs-identifier hs-var">expr</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; TcM (HsExpr GhcTc))
-&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075363"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075362"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span id="zonkExpr"><span class="annot"><span class="annottext">zonkExpr :: ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var hs-var">zonkExpr</span></a></span></span><span> </span><span id="local-6989586621681075361"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075361"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span id="local-6989586621681075359"><span class="annot"><span class="annottext">XVar GhcTc
</span><a href="#local-6989586621681075359"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075358"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075358"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681075357"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681075357"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isNothing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">isDataConId_maybe</span><span> </span><span class="hs-identifier">id</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">id</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>    </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XVar GhcTc -&gt; Located (IdP GhcTc) -&gt; HsExpr GhcTc
forall p. XVar p -&gt; Located (IdP p) -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcTc
</span><a href="#local-6989586621681075359"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075358"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075361"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681075357"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>
</span><span id="line-725"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075354"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681075354"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsConLikeOut"><span class="hs-identifier hs-type">HsConLikeOut</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075354"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsIPVar"><span class="hs-identifier hs-type">HsIPVar</span></a></span><span> </span><span id="local-6989586621681075351"><span class="annot"><span class="annottext">XIPVar GhcTc
</span><a href="#local-6989586621681075351"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075350"><span class="annot"><span class="annottext">HsIPName
</span><a href="#local-6989586621681075350"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-728"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XIPVar GhcTc -&gt; HsIPName -&gt; HsExpr GhcTc
forall p. XIPVar p -&gt; HsIPName -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsIPVar"><span class="hs-identifier hs-var">HsIPVar</span></a></span><span> </span><span class="annot"><span class="annottext">XIPVar GhcTc
</span><a href="#local-6989586621681075351"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsIPName
</span><a href="#local-6989586621681075350"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075349"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681075349"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Hs.Expr.html#HsOverLabel"><span class="hs-identifier hs-type">HsOverLabel</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075349"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-731"></span><span>
</span><span id="line-732"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075347"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075347"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621681075346"><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681075346"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsRat"><span class="hs-identifier hs-type">HsRat</span></a></span><span> </span><span id="local-6989586621681075345"><span class="annot"><span class="annottext">XHsRat GhcTc
</span><a href="#local-6989586621681075345"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681075344"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681075344"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681075343"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075343"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075342"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075342"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075347"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075343"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-734"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitE GhcTc -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681075346"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsRat GhcTc -&gt; FractionalLit -&gt; Kind -&gt; HsLit GhcTc
forall x. XHsRat x -&gt; FractionalLit -&gt; Kind -&gt; HsLit x
</span><a href="GHC.Hs.Lit.html#HsRat"><span class="hs-identifier hs-var">HsRat</span></a></span><span> </span><span class="annot"><span class="annottext">XHsRat GhcTc
</span><a href="#local-6989586621681075345"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621681075344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075342"><span class="hs-identifier hs-var">new_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621681075341"><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681075341"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075340"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681075340"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-737"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitE GhcTc -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621681075341"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681075340"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>
</span><span id="line-739"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075339"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075339"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span id="local-6989586621681075337"><span class="annot"><span class="annottext">XOverLitE GhcTc
</span><a href="#local-6989586621681075337"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075336"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681075336"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075335"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681075335"><span class="hs-identifier hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075339"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681075336"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-741"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOverLitE GhcTc -&gt; HsOverLit GhcTc -&gt; HsExpr GhcTc
forall p. XOverLitE p -&gt; HsOverLit p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcTc
</span><a href="#local-6989586621681075337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681075335"><span class="hs-identifier hs-var">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075333"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075333"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsLam"><span class="hs-identifier hs-type">HsLam</span></a></span><span> </span><span id="local-6989586621681075331"><span class="annot"><span class="annottext">XLam GhcTc
</span><a href="#local-6989586621681075331"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075330"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075330"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075329"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075329"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsExpr GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075333"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075330"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-745"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLam GhcTc -&gt; MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsExpr GhcTc
forall p. XLam p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLam"><span class="hs-identifier hs-var">HsLam</span></a></span><span> </span><span class="annot"><span class="annottext">XLam GhcTc
</span><a href="#local-6989586621681075331"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075329"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>
</span><span id="line-747"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075328"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075328"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsLamCase"><span class="hs-identifier hs-type">HsLamCase</span></a></span><span> </span><span id="local-6989586621681075326"><span class="annot"><span class="annottext">XLamCase GhcTc
</span><a href="#local-6989586621681075326"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075325"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075325"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-748"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075324"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075324"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsExpr GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075328"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075325"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-749"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLamCase GhcTc -&gt; MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsExpr GhcTc
forall p. XLamCase p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLamCase"><span class="hs-identifier hs-var">HsLamCase</span></a></span><span> </span><span class="annot"><span class="annottext">XLamCase GhcTc
</span><a href="#local-6989586621681075326"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075324"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075323"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075323"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsApp"><span class="hs-identifier hs-type">HsApp</span></a></span><span> </span><span id="local-6989586621681075322"><span class="annot"><span class="annottext">XApp GhcTc
</span><a href="#local-6989586621681075322"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075321"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075321"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681075320"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075320"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-752"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075319"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075319"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075323"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075321"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-753"></span><span>       </span><span id="local-6989586621681075318"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075318"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075323"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075320"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-754"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XApp GhcTc -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcTc
</span><a href="#local-6989586621681075322"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075319"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075318"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075317"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075317"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsAppType"><span class="hs-identifier hs-type">HsAppType</span></a></span><span> </span><span id="local-6989586621681075315"><span class="annot"><span class="annottext">XAppTypeE GhcTc
</span><a href="#local-6989586621681075315"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681075314"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075314"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681075313"><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681075313"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075312"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075312"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075317"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075314"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-758"></span><span>       </span><span id="local-6989586621681075311"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075311"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075317"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XAppTypeE GhcTc
</span><a href="#local-6989586621681075315"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-759"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XAppTypeE GhcTc
-&gt; LHsExpr GhcTc -&gt; LHsWcType (NoGhcTc GhcTc) -&gt; HsExpr GhcTc
forall p.
XAppTypeE p -&gt; LHsExpr p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsAppType"><span class="hs-identifier hs-var">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XAppTypeE GhcTc
</span><a href="#local-6989586621681075311"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075312"><span class="hs-identifier hs-var">new_e</span></a></span><span> </span><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681075313"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>       </span><span class="hs-comment">-- NB: the type is an HsType; can't zonk that!</span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075310"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681075310"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsRnBracketOut"><span class="hs-identifier hs-type">HsRnBracketOut</span></a></span><span> </span><span class="annot"><span class="annottext">XRnBracketOut GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsBracket GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PendingRnSplice]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM (HsExpr GhcTc)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr: HsRnBracketOut&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075310"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075307"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075307"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsTcBracketOut"><span class="hs-identifier hs-type">HsTcBracketOut</span></a></span><span> </span><span id="local-6989586621681075305"><span class="annot"><span class="annottext">XTcBracketOut GhcTc
</span><a href="#local-6989586621681075305"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075304"><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681075304"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span id="local-6989586621681075303"><span class="annot"><span class="annottext">HsBracket GhcRn
</span><a href="#local-6989586621681075303"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681075302"><span class="annot"><span class="annottext">[PendingTcSplice]
</span><a href="#local-6989586621681075302"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075301"><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681075301"><span class="hs-identifier hs-var">wrap'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(QuoteWrapper -&gt; IOEnv (Env TcGblEnv TcLclEnv) QuoteWrapper)
-&gt; Maybe QuoteWrapper
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe QuoteWrapper)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base/src/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">QuoteWrapper -&gt; IOEnv (Env TcGblEnv TcLclEnv) QuoteWrapper
</span><a href="#local-6989586621681075299"><span class="hs-identifier hs-var">zonkQuoteWrap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681075304"><span class="hs-identifier hs-var">wrap</span></a></span><span>
</span><span id="line-767"></span><span>       </span><span id="local-6989586621681075298"><span class="annot"><span class="annottext">[PendingTcSplice]
</span><a href="#local-6989586621681075298"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(PendingTcSplice -&gt; IOEnv (Env TcGblEnv TcLclEnv) PendingTcSplice)
-&gt; [PendingTcSplice]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [PendingTcSplice]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; PendingTcSplice -&gt; IOEnv (Env TcGblEnv TcLclEnv) PendingTcSplice
</span><a href="#local-6989586621681075297"><span class="hs-identifier hs-var">zonk_b</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075307"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PendingTcSplice]
</span><a href="#local-6989586621681075302"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-768"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTcBracketOut GhcTc
-&gt; Maybe QuoteWrapper
-&gt; HsBracket GhcRn
-&gt; [PendingTcSplice]
-&gt; HsExpr GhcTc
forall p.
XTcBracketOut p
-&gt; Maybe QuoteWrapper
-&gt; HsBracket GhcRn
-&gt; [PendingTcSplice]
-&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsTcBracketOut"><span class="hs-identifier hs-var">HsTcBracketOut</span></a></span><span> </span><span class="annot"><span class="annottext">XTcBracketOut GhcTc
</span><a href="#local-6989586621681075305"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621681075301"><span class="hs-identifier hs-var">wrap'</span></a></span><span> </span><span class="annot"><span class="annottext">HsBracket GhcRn
</span><a href="#local-6989586621681075303"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">[PendingTcSplice]
</span><a href="#local-6989586621681075298"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-770"></span><span>    </span><span id="local-6989586621681075299"><span class="annot"><span class="annottext">zonkQuoteWrap :: QuoteWrapper -&gt; IOEnv (Env TcGblEnv TcLclEnv) QuoteWrapper
</span><a href="#local-6989586621681075299"><span class="hs-identifier hs-var hs-var">zonkQuoteWrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span id="local-6989586621681075295"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075295"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621681075294"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075294"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-771"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681075293"><span class="annot"><span class="annottext">ev' :: Id
</span><a href="#local-6989586621681075293"><span class="hs-identifier hs-var hs-var">ev'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075307"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075295"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-772"></span><span>        </span><span id="local-6989586621681075292"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075292"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075307"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075294"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-773"></span><span>        </span><span class="annot"><span class="annottext">QuoteWrapper -&gt; IOEnv (Env TcGblEnv TcLclEnv) QuoteWrapper
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind -&gt; QuoteWrapper
</span><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-var">QuoteWrapper</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681075293"><span class="hs-identifier hs-var">ev'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075292"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>
</span><span id="line-775"></span><span>    </span><span id="local-6989586621681075297"><span class="annot"><span class="annottext">zonk_b :: ZonkEnv
-&gt; PendingTcSplice -&gt; IOEnv (Env TcGblEnv TcLclEnv) PendingTcSplice
</span><a href="#local-6989586621681075297"><span class="hs-identifier hs-var hs-var">zonk_b</span></a></span></span><span> </span><span id="local-6989586621681075289"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075289"><span class="hs-identifier hs-var">env'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#PendingTcSplice"><span class="hs-identifier hs-type">PendingTcSplice</span></a></span><span> </span><span id="local-6989586621681075287"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681075287"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681075286"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075286"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075285"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075285"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075289"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075286"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-776"></span><span>                                           </span><span class="annot"><span class="annottext">PendingTcSplice -&gt; IOEnv (Env TcGblEnv TcLclEnv) PendingTcSplice
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; LHsExpr GhcTc -&gt; PendingTcSplice
</span><a href="GHC.Hs.Expr.html#PendingTcSplice"><span class="hs-identifier hs-var">PendingTcSplice</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681075287"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075285"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>
</span><span id="line-778"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075284"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075284"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsSpliceE"><span class="hs-identifier hs-type">HsSpliceE</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceE GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#XSplice"><span class="hs-identifier hs-type">XSplice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsSplicedT"><span class="hs-identifier hs-type">HsSplicedT</span></a></span><span> </span><span id="local-6989586621681075280"><span class="annot"><span class="annottext">DelayedSplice
</span><a href="#local-6989586621681075280"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-779"></span><span>  </span><span class="annot"><span class="annottext">DelayedSplice -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Gen.Splice.html#runTopSplice"><span class="hs-identifier hs-var">runTopSplice</span></a></span><span> </span><span class="annot"><span class="annottext">DelayedSplice
</span><a href="#local-6989586621681075280"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">TcM (HsExpr GhcTc)
-&gt; (HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)) -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075284"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-780"></span><span>
</span><span id="line-781"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075279"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681075279"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsSpliceE"><span class="hs-identifier hs-type">HsSpliceE</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceE GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsSplice GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM (HsExpr GhcTc)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr: HsSpliceE&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075279"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>
</span><span id="line-783"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075278"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075278"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span id="local-6989586621681075276"><span class="annot"><span class="annottext">XOpApp GhcTc
</span><a href="#local-6989586621681075276"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span id="local-6989586621681075275"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075275"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681075274"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075274"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681075273"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075273"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-784"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075272"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075272"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075278"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075275"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-785"></span><span>       </span><span id="local-6989586621681075271"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075271"><span class="hs-identifier hs-var">new_op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075278"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075274"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-786"></span><span>       </span><span id="local-6989586621681075270"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075270"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075278"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075273"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-787"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOpApp GhcTc
-&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p.
XOpApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#OpApp"><span class="hs-identifier hs-var">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">XOpApp GhcTc
</span><a href="#local-6989586621681075276"><span class="hs-identifier hs-var">fixity</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075272"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075271"><span class="hs-identifier hs-var">new_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075270"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>
</span><span id="line-789"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075269"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075269"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span id="local-6989586621681075267"><span class="annot"><span class="annottext">XNegApp GhcTc
</span><a href="#local-6989586621681075267"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075266"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075266"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681075265"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681075265"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075264"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075264"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075263"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681075263"><span class="hs-identifier hs-var">new_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075269"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681075265"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-791"></span><span>       </span><span id="local-6989586621681075261"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075261"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075264"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075266"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-792"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XNegApp GhcTc -&gt; LHsExpr GhcTc -&gt; SyntaxExpr GhcTc -&gt; HsExpr GhcTc
forall p. XNegApp p -&gt; LHsExpr p -&gt; SyntaxExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#NegApp"><span class="hs-identifier hs-var">NegApp</span></a></span><span> </span><span class="annot"><span class="annottext">XNegApp GhcTc
</span><a href="#local-6989586621681075267"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075261"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681075263"><span class="hs-identifier hs-var">new_op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075260"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075260"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span id="local-6989586621681075258"><span class="annot"><span class="annottext">XPar GhcTc
</span><a href="#local-6989586621681075258"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075257"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075257"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075256"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075256"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075260"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075257"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-796"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPar GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XPar p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsPar"><span class="hs-identifier hs-var">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar GhcTc
</span><a href="#local-6989586621681075258"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075256"><span class="hs-identifier hs-var">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>
</span><span id="line-798"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075255"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075255"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SectionL"><span class="hs-identifier hs-type">SectionL</span></a></span><span> </span><span id="local-6989586621681075253"><span class="annot"><span class="annottext">XSectionL GhcTc
</span><a href="#local-6989586621681075253"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075252"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075252"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681075251"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075251"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075250"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075250"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075255"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075252"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-800"></span><span>       </span><span id="local-6989586621681075249"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075249"><span class="hs-identifier hs-var">new_op</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075255"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075251"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-801"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSectionL GhcTc -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XSectionL p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#SectionL"><span class="hs-identifier hs-var">SectionL</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionL GhcTc
</span><a href="#local-6989586621681075253"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075250"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075249"><span class="hs-identifier hs-var">new_op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075248"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075248"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SectionR"><span class="hs-identifier hs-type">SectionR</span></a></span><span> </span><span id="local-6989586621681075246"><span class="annot"><span class="annottext">XSectionR GhcTc
</span><a href="#local-6989586621681075246"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075245"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075245"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681075244"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075244"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075243"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075243"><span class="hs-identifier hs-var">new_op</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075248"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075245"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-805"></span><span>       </span><span id="local-6989586621681075242"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075242"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075248"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075244"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-806"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSectionR GhcTc -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XSectionR p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#SectionR"><span class="hs-identifier hs-var">SectionR</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionR GhcTc
</span><a href="#local-6989586621681075246"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075243"><span class="hs-identifier hs-var">new_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075242"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075241"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075241"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExplicitTuple"><span class="hs-identifier hs-type">ExplicitTuple</span></a></span><span> </span><span id="local-6989586621681075239"><span class="annot"><span class="annottext">XExplicitTuple GhcTc
</span><a href="#local-6989586621681075239"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075238"><span class="annot"><span class="annottext">[LHsTupArg GhcTc]
</span><a href="#local-6989586621681075238"><span class="hs-identifier hs-var">tup_args</span></a></span></span><span> </span><span id="local-6989586621681075237"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681075237"><span class="hs-identifier hs-var">boxed</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075236"><span class="annot"><span class="annottext">[LHsTupArg GhcTc]
</span><a href="#local-6989586621681075236"><span class="hs-identifier hs-var">new_tup_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LHsTupArg GhcTc
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsTupArg GhcTc))
-&gt; [LHsTupArg GhcTc]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [LHsTupArg GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTupArg GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsTupArg GhcTc)
</span><a href="#local-6989586621681075235"><span class="hs-identifier hs-var">zonk_tup_arg</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTupArg GhcTc]
</span><a href="#local-6989586621681075238"><span class="hs-identifier hs-var">tup_args</span></a></span><span>
</span><span id="line-810"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XExplicitTuple GhcTc -&gt; [LHsTupArg GhcTc] -&gt; Boxity -&gt; HsExpr GhcTc
forall p. XExplicitTuple p -&gt; [LHsTupArg p] -&gt; Boxity -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#ExplicitTuple"><span class="hs-identifier hs-var">ExplicitTuple</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTuple GhcTc
</span><a href="#local-6989586621681075239"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTupArg GhcTc]
</span><a href="#local-6989586621681075236"><span class="hs-identifier hs-var">new_tup_args</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681075237"><span class="hs-identifier hs-var">boxed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-811"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-812"></span><span>    </span><span id="local-6989586621681075235"><span class="annot"><span class="annottext">zonk_tup_arg :: LHsTupArg GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsTupArg GhcTc)
</span><a href="#local-6989586621681075235"><span class="hs-identifier hs-var hs-var">zonk_tup_arg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075234"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075234"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#Present"><span class="hs-identifier hs-type">Present</span></a></span><span> </span><span id="local-6989586621681075232"><span class="annot"><span class="annottext">XPresent GhcTc
</span><a href="#local-6989586621681075232"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075231"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075231"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075230"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075230"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075241"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075231"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-813"></span><span>                                          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LHsTupArg GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsTupArg GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsTupArg GhcTc -&gt; LHsTupArg GhcTc
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075234"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPresent GhcTc -&gt; LHsExpr GhcTc -&gt; HsTupArg GhcTc
forall id. XPresent id -&gt; LHsExpr id -&gt; HsTupArg id
</span><a href="GHC.Hs.Expr.html#Present"><span class="hs-identifier hs-var">Present</span></a></span><span> </span><span class="annot"><span class="annottext">XPresent GhcTc
</span><a href="#local-6989586621681075232"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075230"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-814"></span><span>    </span><span class="annot"><a href="#local-6989586621681075235"><span class="hs-identifier hs-var">zonk_tup_arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075229"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075229"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span id="local-6989586621681075227"><span class="annot"><span class="annottext">XMissing GhcTc
</span><a href="#local-6989586621681075227"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075226"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681075226"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075241"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
XMissing GhcTc
</span><a href="#local-6989586621681075227"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-815"></span><span>                                        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LHsTupArg GhcTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsTupArg GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsTupArg GhcTc -&gt; LHsTupArg GhcTc
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075229"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XMissing GhcTc -&gt; HsTupArg GhcTc
forall id. XMissing id -&gt; HsTupArg id
</span><a href="GHC.Hs.Expr.html#Missing"><span class="hs-identifier hs-var">Missing</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
XMissing GhcTc
</span><a href="#local-6989586621681075226"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-816"></span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075225"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075225"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExplicitSum"><span class="hs-identifier hs-type">ExplicitSum</span></a></span><span> </span><span id="local-6989586621681075223"><span class="annot"><span class="annottext">XExplicitSum GhcTc
</span><a href="#local-6989586621681075223"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681075222"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681075222"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621681075221"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681075221"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621681075220"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075220"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-819"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075219"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075219"><span class="hs-identifier hs-var">new_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075225"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
XExplicitSum GhcTc
</span><a href="#local-6989586621681075223"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-820"></span><span>       </span><span id="local-6989586621681075218"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075218"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075225"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075220"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-821"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XExplicitSum GhcTc
-&gt; ConTag -&gt; ConTag -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p.
XExplicitSum p -&gt; ConTag -&gt; ConTag -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#ExplicitSum"><span class="hs-identifier hs-var">ExplicitSum</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XExplicitSum GhcTc
</span><a href="#local-6989586621681075219"><span class="hs-identifier hs-var">new_args</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681075222"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681075221"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075218"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span>
</span><span id="line-823"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075217"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075217"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCase"><span class="hs-identifier hs-type">HsCase</span></a></span><span> </span><span id="local-6989586621681075215"><span class="annot"><span class="annottext">XCase GhcTc
</span><a href="#local-6989586621681075215"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075214"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075214"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681075213"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075213"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-824"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075212"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075212"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075217"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075214"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-825"></span><span>       </span><span id="local-6989586621681075211"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075211"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsExpr GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075217"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075213"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-826"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCase GhcTc
-&gt; LHsExpr GhcTc
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; HsExpr GhcTc
forall p.
XCase p -&gt; LHsExpr p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsCase"><span class="hs-identifier hs-var">HsCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCase GhcTc
</span><a href="#local-6989586621681075215"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075212"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075211"><span class="hs-identifier hs-var">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075210"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075210"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsIf"><span class="hs-identifier hs-type">HsIf</span></a></span><span> </span><span id="local-6989586621681075208"><span class="annot"><span class="annottext">XIf GhcTc
</span><a href="#local-6989586621681075208"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075207"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075207"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681075206"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075206"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621681075205"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075205"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-829"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075204"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075204"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075210"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075207"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-830"></span><span>       </span><span id="local-6989586621681075203"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075203"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075210"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075206"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-831"></span><span>       </span><span id="local-6989586621681075202"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075202"><span class="hs-identifier hs-var">new_e3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075210"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075205"><span class="hs-identifier hs-var">e3</span></a></span><span>
</span><span id="line-832"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XIf GhcTc
-&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XIf p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsIf"><span class="hs-identifier hs-var">HsIf</span></a></span><span> </span><span class="annot"><span class="annottext">XIf GhcTc
</span><a href="#local-6989586621681075208"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075204"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075203"><span class="hs-identifier hs-var">new_e2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075202"><span class="hs-identifier hs-var">new_e3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075201"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075201"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsMultiIf"><span class="hs-identifier hs-type">HsMultiIf</span></a></span><span> </span><span id="local-6989586621681075199"><span class="annot"><span class="annottext">XMultiIf GhcTc
</span><a href="#local-6989586621681075199"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681075198"><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681075198"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075197"><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681075197"><span class="hs-identifier hs-var">alts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LGRHS GhcTc (LHsExpr GhcTc)
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LGRHS GhcTc (LHsExpr GhcTc)))
-&gt; [LGRHS GhcTc (LHsExpr GhcTc)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [LGRHS GhcTc (LHsExpr GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GRHS GhcTc (LHsExpr GhcTc) -&gt; TcM (GRHS GhcTc (LHsExpr GhcTc)))
-&gt; LGRHS GhcTc (LHsExpr GhcTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LGRHS GhcTc (LHsExpr GhcTc))
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="annot"><span class="annottext">GRHS GhcTc (LHsExpr GhcTc) -&gt; TcM (GRHS GhcTc (LHsExpr GhcTc))
</span><a href="#local-6989586621681075196"><span class="hs-identifier hs-var">zonk_alt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681075198"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-836"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075195"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075195"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075201"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XMultiIf GhcTc
</span><a href="#local-6989586621681075199"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-837"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; TcM (HsExpr GhcTc))
-&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XMultiIf GhcTc -&gt; [LGRHS GhcTc (LHsExpr GhcTc)] -&gt; HsExpr GhcTc
forall p. XMultiIf p -&gt; [LGRHS p (LHsExpr p)] -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsMultiIf"><span class="hs-identifier hs-var">HsMultiIf</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XMultiIf GhcTc
</span><a href="#local-6989586621681075195"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681075197"><span class="hs-identifier hs-var">alts'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-838"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681075196"><span class="annot"><span class="annottext">zonk_alt :: GRHS GhcTc (LHsExpr GhcTc) -&gt; TcM (GRHS GhcTc (LHsExpr GhcTc))
</span><a href="#local-6989586621681075196"><span class="hs-identifier hs-var hs-var">zonk_alt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span id="local-6989586621681075194"><span class="annot"><span class="annottext">XCGRHS GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075194"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075193"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075193"><span class="hs-identifier hs-var">guard</span></a></span></span><span> </span><span id="local-6989586621681075192"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075192"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-839"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075191"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075191"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075190"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075190"><span class="hs-identifier hs-var">guard'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; TcM (ZonkEnv, [GuardLStmt GhcTc])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075201"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075193"><span class="hs-identifier hs-var">guard</span></a></span><span>
</span><span id="line-840"></span><span>               </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075189"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075189"><span class="hs-identifier hs-var">expr'</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075191"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075192"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-841"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">GRHS GhcTc (LHsExpr GhcTc) -&gt; TcM (GRHS GhcTc (LHsExpr GhcTc))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(GRHS GhcTc (LHsExpr GhcTc) -&gt; TcM (GRHS GhcTc (LHsExpr GhcTc)))
-&gt; GRHS GhcTc (LHsExpr GhcTc) -&gt; TcM (GRHS GhcTc (LHsExpr GhcTc))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcTc (LHsExpr GhcTc)
-&gt; [GuardLStmt GhcTc]
-&gt; LHsExpr GhcTc
-&gt; GRHS GhcTc (LHsExpr GhcTc)
forall p body.
XCGRHS p body -&gt; [GuardLStmt p] -&gt; body -&gt; GRHS p body
</span><a href="GHC.Hs.Expr.html#GRHS"><span class="hs-identifier hs-var">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621681075194"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075190"><span class="hs-identifier hs-var">guard'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075189"><span class="hs-identifier hs-var">expr'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-842"></span><span>
</span><span id="line-843"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075188"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075188"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsLet"><span class="hs-identifier hs-type">HsLet</span></a></span><span> </span><span id="local-6989586621681075186"><span class="annot"><span class="annottext">XLet GhcTc
</span><a href="#local-6989586621681075186"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075185"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075185"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681075184"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075184"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681075183"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075183"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075182"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075182"><span class="hs-identifier hs-var">new_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075181"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075181"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075188"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075184"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-845"></span><span>       </span><span id="local-6989586621681075180"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075180"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075182"><span class="hs-identifier hs-var">new_env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075183"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-846"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLet GhcTc
-&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
-&gt; LHsExpr GhcTc
-&gt; HsExpr GhcTc
forall p. XLet p -&gt; LHsLocalBinds p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsLet"><span class="hs-identifier hs-var">HsLet</span></a></span><span> </span><span class="annot"><span class="annottext">XLet GhcTc
</span><a href="#local-6989586621681075186"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsLocalBinds GhcTc -&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075185"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681075181"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075180"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075179"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075179"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span id="local-6989586621681075177"><span class="annot"><span class="annottext">XDo GhcTc
</span><a href="#local-6989586621681075177"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681075176"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681075176"><span class="hs-identifier hs-var">do_or_lc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681075175"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075175"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681075174"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075174"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-849"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075173"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075173"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; TcM (ZonkEnv, [GuardLStmt GhcTc])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075179"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075174"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-850"></span><span>       </span><span id="local-6989586621681075172"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075172"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075179"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XDo GhcTc
</span><a href="#local-6989586621681075177"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-851"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XDo GhcTc
-&gt; HsStmtContext GhcRn
-&gt; GenLocated SrcSpan [GuardLStmt GhcTc]
-&gt; HsExpr GhcTc
forall p.
XDo p -&gt; HsStmtContext GhcRn -&gt; Located [ExprLStmt p] -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsDo"><span class="hs-identifier hs-var">HsDo</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XDo GhcTc
</span><a href="#local-6989586621681075172"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681075176"><span class="hs-identifier hs-var">do_or_lc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; [GuardLStmt GhcTc] -&gt; GenLocated SrcSpan [GuardLStmt GhcTc]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681075175"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681075173"><span class="hs-identifier hs-var">new_stmts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075171"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075171"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExplicitList"><span class="hs-identifier hs-type">ExplicitList</span></a></span><span> </span><span id="local-6989586621681075169"><span class="annot"><span class="annottext">XExplicitList GhcTc
</span><a href="#local-6989586621681075169"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681075168"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681075168"><span class="hs-identifier hs-var">wit</span></a></span></span><span> </span><span id="local-6989586621681075167"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681075167"><span class="hs-identifier hs-var">exprs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075166"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075166"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075165"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681075165"><span class="hs-identifier hs-var">new_wit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681075164"><span class="hs-identifier hs-var">zonkWit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075171"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681075168"><span class="hs-identifier hs-var">wit</span></a></span><span>
</span><span id="line-855"></span><span>       </span><span id="local-6989586621681075163"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075163"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075166"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XExplicitList GhcTc
</span><a href="#local-6989586621681075169"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-856"></span><span>       </span><span id="local-6989586621681075162"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681075162"><span class="hs-identifier hs-var">new_exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LHsExpr GhcTc] -&gt; TcM [LHsExpr GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExprs"><span class="hs-identifier hs-var">zonkLExprs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075166"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681075167"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-857"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XExplicitList GhcTc
-&gt; Maybe (SyntaxExpr GhcTc) -&gt; [LHsExpr GhcTc] -&gt; HsExpr GhcTc
forall p.
XExplicitList p -&gt; Maybe (SyntaxExpr p) -&gt; [LHsExpr p] -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#ExplicitList"><span class="hs-identifier hs-var">ExplicitList</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XExplicitList GhcTc
</span><a href="#local-6989586621681075163"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681075165"><span class="hs-identifier hs-var">new_wit</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621681075162"><span class="hs-identifier hs-var">new_exprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-858"></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681075164"><span class="annot"><span class="annottext">zonkWit :: ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681075164"><span class="hs-identifier hs-var hs-var">zonkWit</span></a></span></span><span> </span><span id="local-6989586621681075158"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075158"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Maybe SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075158"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>         </span><span class="annot"><a href="#local-6989586621681075164"><span class="hs-identifier hs-var">zonkWit</span></a></span><span> </span><span id="local-6989586621681075157"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075157"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681075156"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681075156"><span class="hs-identifier hs-var">fln</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; (ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../base/src/Control.Arrow.html#second"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075157"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681075156"><span class="hs-identifier hs-var">fln</span></a></span><span>
</span><span id="line-860"></span><span>
</span><span id="line-861"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075154"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075154"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075153"><span class="annot"><span class="annottext">expr :: HsExpr GhcTc
</span><a href="#local-6989586621681075153"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#RecordCon"><span class="hs-identifier hs-type">RecordCon</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_ext :: forall p. HsExpr p -&gt; XRecordCon p
</span><a href="GHC.Hs.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075150"><span class="annot"><span class="annottext">XRecordCon GhcTc
</span><a href="#local-6989586621681075150"><span class="hs-identifier hs-var">ext</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: forall p. HsExpr p -&gt; HsRecordBinds p
</span><a href="GHC.Hs.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075148"><span class="annot"><span class="annottext">HsRecordBinds GhcTc
</span><a href="#local-6989586621681075148"><span class="hs-identifier hs-var">rbinds</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075147"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075147"><span class="hs-identifier hs-var">new_con_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075154"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecordConTc -&gt; HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#rcon_con_expr"><span class="hs-identifier hs-var hs-var">rcon_con_expr</span></a></span><span> </span><span class="annot"><span class="annottext">XRecordCon GhcTc
RecordConTc
</span><a href="#local-6989586621681075150"><span class="hs-identifier hs-var">ext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075145"><span class="annot"><span class="annottext">HsRecordBinds GhcTc
</span><a href="#local-6989586621681075145"><span class="hs-identifier hs-var">new_rbinds</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsRecordBinds GhcTc -&gt; TcM (HsRecordBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecFields"><span class="hs-identifier hs-var">zonkRecFields</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075154"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecordBinds GhcTc
</span><a href="#local-6989586621681075148"><span class="hs-identifier hs-var">rbinds</span></a></span><span>
</span><span id="line-864"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075153"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_ext :: XRecordCon GhcTc
</span><a href="GHC.Hs.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRecordCon GhcTc
RecordConTc
</span><a href="#local-6989586621681075150"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_con_expr :: HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#rcon_con_expr"><span class="hs-identifier hs-var">rcon_con_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075147"><span class="hs-identifier hs-var">new_con_expr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-865"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: HsRecordBinds GhcTc
</span><a href="GHC.Hs.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsRecordBinds GhcTc
</span><a href="#local-6989586621681075145"><span class="hs-identifier hs-var">new_rbinds</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-866"></span><span>
</span><span id="line-867"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075143"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075143"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rupd_flds :: forall p. HsExpr p -&gt; [LHsRecUpdField p]
</span><a href="GHC.Hs.Expr.html#rupd_flds"><span class="hs-identifier hs-var">rupd_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075140"><span class="annot"><span class="annottext">[LHsRecUpdField GhcTc]
</span><a href="#local-6989586621681075140"><span class="hs-identifier hs-var">rbinds</span></a></span></span><span>
</span><span id="line-868"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_expr :: forall p. HsExpr p -&gt; LHsExpr p
</span><a href="GHC.Hs.Expr.html#rupd_expr"><span class="hs-identifier hs-var">rupd_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075138"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075138"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-869"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_ext :: forall p. HsExpr p -&gt; XRecordUpd p
</span><a href="GHC.Hs.Expr.html#rupd_ext"><span class="hs-identifier hs-var">rupd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#RecordUpdTc"><span class="hs-identifier hs-type">RecordUpdTc</span></a></span><span>
</span><span id="line-870"></span><span>                            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rupd_cons :: RecordUpdTc -&gt; [ConLike]
</span><a href="GHC.Hs.Expr.html#rupd_cons"><span class="hs-identifier hs-var">rupd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075134"><span class="annot"><span class="annottext">[ConLike]
</span><a href="#local-6989586621681075134"><span class="hs-identifier hs-var">cons</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_in_tys :: RecordUpdTc -&gt; [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_in_tys"><span class="hs-identifier hs-var">rupd_in_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075132"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075132"><span class="hs-identifier hs-var">in_tys</span></a></span></span><span>
</span><span id="line-871"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_out_tys :: RecordUpdTc -&gt; [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_out_tys"><span class="hs-identifier hs-var">rupd_out_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075130"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075130"><span class="hs-identifier hs-var">out_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_wrap :: RecordUpdTc -&gt; HsWrapper
</span><a href="GHC.Hs.Expr.html#rupd_wrap"><span class="hs-identifier hs-var">rupd_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075128"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075128"><span class="hs-identifier hs-var">req_wrap</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-872"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075127"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075127"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075143"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075138"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-873"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075126"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075126"><span class="hs-identifier hs-var">new_in_tys</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075143"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075132"><span class="hs-identifier hs-var">in_tys</span></a></span><span>
</span><span id="line-874"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075125"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075125"><span class="hs-identifier hs-var">new_out_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075143"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075130"><span class="hs-identifier hs-var">out_tys</span></a></span><span>
</span><span id="line-875"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075124"><span class="annot"><span class="annottext">[LHsRecUpdField GhcTc]
</span><a href="#local-6989586621681075124"><span class="hs-identifier hs-var">new_rbinds</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LHsRecUpdField GhcTc] -&gt; TcM [LHsRecUpdField GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecUpdFields"><span class="hs-identifier hs-var">zonkRecUpdFields</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075143"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcTc]
</span><a href="#local-6989586621681075140"><span class="hs-identifier hs-var">rbinds</span></a></span><span>
</span><span id="line-876"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075122"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075122"><span class="hs-identifier hs-var">new_recwrap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075143"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075128"><span class="hs-identifier hs-var">req_wrap</span></a></span><span>
</span><span id="line-877"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecordUpd :: forall p.
XRecordUpd p -&gt; LHsExpr p -&gt; [LHsRecUpdField p] -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rupd_expr :: LHsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#rupd_expr"><span class="hs-identifier hs-var">rupd_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075127"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_flds :: [LHsRecUpdField GhcTc]
</span><a href="GHC.Hs.Expr.html#rupd_flds"><span class="hs-identifier hs-var">rupd_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcTc]
</span><a href="#local-6989586621681075124"><span class="hs-identifier hs-var">new_rbinds</span></a></span><span>
</span><span id="line-878"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_ext :: XRecordUpd GhcTc
</span><a href="GHC.Hs.Expr.html#rupd_ext"><span class="hs-identifier hs-var">rupd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RecordUpdTc :: [ConLike] -&gt; [Kind] -&gt; [Kind] -&gt; HsWrapper -&gt; RecordUpdTc
</span><a href="GHC.Hs.Expr.html#RecordUpdTc"><span class="hs-identifier hs-type">RecordUpdTc</span></a></span><span>
</span><span id="line-879"></span><span>                                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rupd_cons :: [ConLike]
</span><a href="GHC.Hs.Expr.html#rupd_cons"><span class="hs-identifier hs-var">rupd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ConLike]
</span><a href="#local-6989586621681075134"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_in_tys :: [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_in_tys"><span class="hs-identifier hs-var">rupd_in_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075126"><span class="hs-identifier hs-var">new_in_tys</span></a></span><span>
</span><span id="line-880"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_out_tys :: [Kind]
</span><a href="GHC.Hs.Expr.html#rupd_out_tys"><span class="hs-identifier hs-var">rupd_out_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681075125"><span class="hs-identifier hs-var">new_out_tys</span></a></span><span>
</span><span id="line-881"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_wrap :: HsWrapper
</span><a href="GHC.Hs.Expr.html#rupd_wrap"><span class="hs-identifier hs-var">rupd_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075122"><span class="hs-identifier hs-var">new_recwrap</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-882"></span><span>
</span><span id="line-883"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075121"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075121"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExprWithTySig"><span class="hs-identifier hs-type">ExprWithTySig</span></a></span><span> </span><span class="annot"><span class="annottext">XExprWithTySig GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075119"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075119"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681075118"><span class="annot"><span class="annottext">LHsSigWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681075118"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681075117"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075117"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075121"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075119"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-885"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XExprWithTySig GhcTc
-&gt; LHsExpr GhcTc -&gt; LHsSigWcType (NoGhcTc GhcTc) -&gt; HsExpr GhcTc
forall p.
XExprWithTySig p
-&gt; LHsExpr p -&gt; LHsSigWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#ExprWithTySig"><span class="hs-identifier hs-var">ExprWithTySig</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XExprWithTySig GhcTc
</span><a href="GHC.Hs.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075117"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681075118"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075116"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075116"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ArithSeq"><span class="hs-identifier hs-type">ArithSeq</span></a></span><span> </span><span id="local-6989586621681075114"><span class="annot"><span class="annottext">XArithSeq GhcTc
</span><a href="#local-6989586621681075114"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681075113"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681075113"><span class="hs-identifier hs-var">wit</span></a></span></span><span> </span><span id="local-6989586621681075112"><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681075112"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-888"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075111"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075111"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075110"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681075110"><span class="hs-identifier hs-var">new_wit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681075109"><span class="hs-identifier hs-var">zonkWit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075116"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681075113"><span class="hs-identifier hs-var">wit</span></a></span><span>
</span><span id="line-889"></span><span>       </span><span id="local-6989586621681075108"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075108"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075116"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">XArithSeq GhcTc
HsExpr GhcTc
</span><a href="#local-6989586621681075114"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-890"></span><span>       </span><span id="local-6989586621681075107"><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681075107"><span class="hs-identifier hs-var">new_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075111"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681075112"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-891"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XArithSeq GhcTc
-&gt; Maybe (SyntaxExpr GhcTc) -&gt; ArithSeqInfo GhcTc -&gt; HsExpr GhcTc
forall p.
XArithSeq p -&gt; Maybe (SyntaxExpr p) -&gt; ArithSeqInfo p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#ArithSeq"><span class="hs-identifier hs-var">ArithSeq</span></a></span><span> </span><span class="annot"><span class="annottext">XArithSeq GhcTc
HsExpr GhcTc
</span><a href="#local-6989586621681075108"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681075110"><span class="hs-identifier hs-var">new_wit</span></a></span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621681075107"><span class="hs-identifier hs-var">new_info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681075109"><span class="annot"><span class="annottext">zonkWit :: ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681075109"><span class="hs-identifier hs-var hs-var">zonkWit</span></a></span></span><span> </span><span id="local-6989586621681075102"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075102"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Maybe SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075102"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-893"></span><span>         </span><span class="annot"><a href="#local-6989586621681075109"><span class="hs-identifier hs-var">zonkWit</span></a></span><span> </span><span id="local-6989586621681075101"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075101"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681075100"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681075100"><span class="hs-identifier hs-var">fln</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; (ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../base/src/Control.Arrow.html#second"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075101"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681075100"><span class="hs-identifier hs-var">fln</span></a></span><span>
</span><span id="line-894"></span><span>
</span><span id="line-895"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075099"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075099"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span id="local-6989586621681075097"><span class="annot"><span class="annottext">XPragE GhcTc
</span><a href="#local-6989586621681075097"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075096"><span class="annot"><span class="annottext">HsPragE GhcTc
</span><a href="#local-6989586621681075096"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span id="local-6989586621681075095"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075095"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075094"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075094"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075099"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075095"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-897"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPragE GhcTc -&gt; HsPragE GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XPragE p -&gt; HsPragE p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsPragE"><span class="hs-identifier hs-var">HsPragE</span></a></span><span> </span><span class="annot"><span class="annottext">XPragE GhcTc
</span><a href="#local-6989586621681075097"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsPragE GhcTc
</span><a href="#local-6989586621681075096"><span class="hs-identifier hs-var">prag</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075094"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="hs-comment">-- arrow notation extensions</span><span>
</span><span id="line-900"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075093"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075093"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsProc"><span class="hs-identifier hs-type">HsProc</span></a></span><span> </span><span id="local-6989586621681075091"><span class="annot"><span class="annottext">XProc GhcTc
</span><a href="#local-6989586621681075091"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075090"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075090"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681075089"><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681075089"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075088"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075088"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075087"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681075087"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075093"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681075090"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-902"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075086"><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681075086"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-var">zonkCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075088"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681075089"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-903"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XProc GhcTc -&gt; LPat GhcTc -&gt; LHsCmdTop GhcTc -&gt; HsExpr GhcTc
forall p. XProc p -&gt; LPat p -&gt; LHsCmdTop p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsProc"><span class="hs-identifier hs-var">HsProc</span></a></span><span> </span><span class="annot"><span class="annottext">XProc GhcTc
</span><a href="#local-6989586621681075091"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681075087"><span class="hs-identifier hs-var">new_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681075086"><span class="hs-identifier hs-var">new_body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span class="hs-comment">-- StaticPointers extension</span><span>
</span><span id="line-906"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075084"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075084"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsStatic"><span class="hs-identifier hs-type">HsStatic</span></a></span><span> </span><span id="local-6989586621681075082"><span class="annot"><span class="annottext">XStatic GhcTc
</span><a href="#local-6989586621681075082"><span class="hs-identifier hs-var">fvs</span></a></span></span><span> </span><span id="local-6989586621681075081"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075081"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XStatic GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XStatic p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#HsStatic"><span class="hs-identifier hs-var">HsStatic</span></a></span><span> </span><span class="annot"><span class="annottext">XStatic GhcTc
</span><a href="#local-6989586621681075082"><span class="hs-identifier hs-var">fvs</span></a></span><span> </span><span class="annot"><span class="annottext">(LHsExpr GhcTc -&gt; HsExpr GhcTc)
-&gt; TcM (LHsExpr GhcTc) -&gt; TcM (HsExpr GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075084"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075081"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-908"></span><span>
</span><span id="line-909"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075080"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075080"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#WrapExpr"><span class="hs-identifier hs-type">WrapExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-type">HsWrap</span></a></span><span> </span><span id="local-6989586621681075076"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075076"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621681075075"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075075"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-910"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075074"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075074"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075073"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075073"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075080"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075076"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-911"></span><span>       </span><span id="local-6989586621681075072"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075072"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075074"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075075"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-912"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XXExpr GhcTc -&gt; HsExpr GhcTc
forall p. XXExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#XExpr"><span class="hs-identifier hs-var">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrap HsExpr -&gt; XXExprGhcTc
</span><a href="GHC.Hs.Expr.html#WrapExpr"><span class="hs-identifier hs-var">WrapExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper -&gt; HsExpr GhcTc -&gt; HsWrap HsExpr
forall (hs_syn :: * -&gt; *).
HsWrapper -&gt; hs_syn GhcTc -&gt; HsWrap hs_syn
</span><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-var">HsWrap</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075073"><span class="hs-identifier hs-var">new_co_fn</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075072"><span class="hs-identifier hs-var">new_expr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621681075071"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075071"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExpansionExpr"><span class="hs-identifier hs-type">ExpansionExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsExpanded"><span class="hs-identifier hs-type">HsExpanded</span></a></span><span> </span><span id="local-6989586621681075068"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681075068"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681075067"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075067"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-915"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XXExprGhcTc -&gt; HsExpr GhcTc
forall p. XXExpr p -&gt; HsExpr p
</span><a href="GHC.Hs.Expr.html#XExpr"><span class="hs-identifier hs-var">XExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(XXExprGhcTc -&gt; HsExpr GhcTc)
-&gt; (HsExpr GhcTc -&gt; XXExprGhcTc) -&gt; HsExpr GhcTc -&gt; HsExpr GhcTc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpansion (HsExpr GhcRn) (HsExpr GhcTc) -&gt; XXExprGhcTc
</span><a href="GHC.Hs.Expr.html#ExpansionExpr"><span class="hs-identifier hs-var">ExpansionExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpansion (HsExpr GhcRn) (HsExpr GhcTc) -&gt; XXExprGhcTc)
-&gt; (HsExpr GhcTc -&gt; HsExpansion (HsExpr GhcRn) (HsExpr GhcTc))
-&gt; HsExpr GhcTc
-&gt; XXExprGhcTc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
-&gt; HsExpr GhcTc -&gt; HsExpansion (HsExpr GhcRn) (HsExpr GhcTc)
forall a b. a -&gt; b -&gt; HsExpansion a b
</span><a href="GHC.Hs.Expr.html#HsExpanded"><span class="hs-identifier hs-var">HsExpanded</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621681075068"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; HsExpr GhcTc)
-&gt; TcM (HsExpr GhcTc) -&gt; TcM (HsExpr GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075071"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075067"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-916"></span><span>
</span><span id="line-917"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075065"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621681075065"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsUnboundVar"><span class="hs-identifier hs-type">HsUnboundVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-918"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075065"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-919"></span><span>
</span><span id="line-920"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681075063"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075063"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM (HsExpr GhcTc)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075063"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-923"></span><span class="hs-comment">{-
Note [Skolems in zonkSyntaxExpr]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider rebindable syntax with something like

  (&gt;&gt;=) :: (forall x. blah) -&gt; (forall y. blah') -&gt; blah''

The x and y become skolems that are in scope when type-checking the
arguments to the bind. This means that we must extend the ZonkEnv with
these skolems when zonking the arguments to the bind. But the skolems
are different between the two arguments, and so we should theoretically
carry around different environments to use for the different arguments.

However, this becomes a logistical nightmare, especially in dealing with
the more exotic Stmt forms. So, we simplify by making the critical
assumption that the uniques of the skolems are different. (This assumption
is justified by the use of newUnique in GHC.Tc.Utils.TcMType.instSkolTyCoVarX.)
Now, we can safely just extend one environment.
-}</span><span>
</span><span id="line-942"></span><span>
</span><span id="line-943"></span><span class="hs-comment">-- See Note [Skolems in zonkSyntaxExpr]</span><span>
</span><span id="line-944"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-945"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span id="zonkSyntaxExpr"><span class="annot"><span class="annottext">zonkSyntaxExpr :: ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var hs-var">zonkSyntaxExpr</span></a></span></span><span> </span><span id="local-6989586621681075062"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075062"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExprTc"><span class="hs-identifier hs-type">SyntaxExprTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">syn_expr :: SyntaxExprTc -&gt; HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#syn_expr"><span class="hs-identifier hs-var">syn_expr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075059"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075059"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-947"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_arg_wraps :: SyntaxExprTc -&gt; [HsWrapper]
</span><a href="GHC.Hs.Expr.html#syn_arg_wraps"><span class="hs-identifier hs-var">syn_arg_wraps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075057"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681075057"><span class="hs-identifier hs-var">arg_wraps</span></a></span></span><span>
</span><span id="line-948"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_res_wrap :: SyntaxExprTc -&gt; HsWrapper
</span><a href="GHC.Hs.Expr.html#syn_res_wrap"><span class="hs-identifier hs-var">syn_res_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681075055"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075055"><span class="hs-identifier hs-var">res_wrap</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-949"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075054"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075054"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075053"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075053"><span class="hs-identifier hs-var">res_wrap'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075062"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075055"><span class="hs-identifier hs-var">res_wrap</span></a></span><span>
</span><span id="line-950"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075052"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075052"><span class="hs-identifier hs-var">expr'</span></a></span></span><span>              </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075054"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075059"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-951"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075051"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075051"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075050"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681075050"><span class="hs-identifier hs-var">arg_wraps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper))
-&gt; ZonkEnv
-&gt; [HsWrapper]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [HsWrapper])
forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075054"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681075057"><span class="hs-identifier hs-var">arg_wraps</span></a></span><span>
</span><span id="line-952"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, SyntaxExprTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075051"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc :: HsExpr GhcTc -&gt; [HsWrapper] -&gt; HsWrapper -&gt; SyntaxExprTc
</span><a href="GHC.Hs.Expr.html#SyntaxExprTc"><span class="hs-identifier hs-type">SyntaxExprTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">syn_expr :: HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#syn_expr"><span class="hs-identifier hs-var">syn_expr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681075052"><span class="hs-identifier hs-var">expr'</span></a></span><span>
</span><span id="line-953"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_arg_wraps :: [HsWrapper]
</span><a href="GHC.Hs.Expr.html#syn_arg_wraps"><span class="hs-identifier hs-var">syn_arg_wraps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621681075050"><span class="hs-identifier hs-var">arg_wraps'</span></a></span><span>
</span><span id="line-954"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_res_wrap :: HsWrapper
</span><a href="GHC.Hs.Expr.html#syn_res_wrap"><span class="hs-identifier hs-var">syn_res_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075053"><span class="hs-identifier hs-var">res_wrap'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-955"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span id="local-6989586621681075049"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075049"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="GHC.Hs.Expr.html#NoSyntaxExprTc"><span class="hs-identifier hs-var">NoSyntaxExprTc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, SyntaxExprTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075049"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="GHC.Hs.Expr.html#NoSyntaxExprTc"><span class="hs-identifier hs-var">NoSyntaxExprTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-956"></span><span>
</span><span id="line-957"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-958"></span><span>
</span><span id="line-959"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-type">zonkLCmd</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-960"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-type">zonkCmd</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span id="zonkLCmd"><span class="annot"><span class="annottext">zonkLCmd :: ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var hs-var">zonkLCmd</span></a></span></span><span>  </span><span id="local-6989586621681075045"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075045"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681075044"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075044"><span class="hs-identifier hs-var">cmd</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsCmd GhcTc -&gt; TcM (HsCmd GhcTc))
-&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075045"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075044"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-963"></span><span>
</span><span id="line-964"></span><span id="zonkCmd"><span class="annot"><span class="annottext">zonkCmd :: ZonkEnv -&gt; HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var hs-var">zonkCmd</span></a></span></span><span> </span><span id="local-6989586621681075043"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075043"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#XCmd"><span class="hs-identifier hs-type">XCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-type">HsWrap</span></a></span><span> </span><span id="local-6989586621681075041"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075041"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681075040"><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681075040"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-965"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681075039"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075039"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681075038"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075038"><span class="hs-identifier hs-var">w'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075043"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075041"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-966"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681075037"><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681075037"><span class="hs-identifier hs-var">cmd'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075039"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681075040"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-967"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XXCmd GhcTc -&gt; HsCmd GhcTc
forall id. XXCmd id -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#XCmd"><span class="hs-identifier hs-var">XCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper -&gt; HsCmd GhcTc -&gt; HsWrap HsCmd
forall (hs_syn :: * -&gt; *).
HsWrapper -&gt; hs_syn GhcTc -&gt; HsWrap hs_syn
</span><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-var">HsWrap</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681075038"><span class="hs-identifier hs-var">w'</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621681075037"><span class="hs-identifier hs-var">cmd'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-968"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681075036"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075036"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-type">HsCmdArrApp</span></a></span><span> </span><span id="local-6989586621681075034"><span class="annot"><span class="annottext">XCmdArrApp GhcTc
</span><a href="#local-6989586621681075034"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681075033"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075033"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681075032"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075032"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621681075031"><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621681075031"><span class="hs-identifier hs-var">ho</span></a></span></span><span> </span><span id="local-6989586621681075030"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681075030"><span class="hs-identifier hs-var">rl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-969"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075029"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075029"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075036"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075033"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-970"></span><span>       </span><span id="local-6989586621681075028"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075028"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075036"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075032"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-971"></span><span>       </span><span id="local-6989586621681075027"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681075027"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075036"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XCmdArrApp GhcTc
</span><a href="#local-6989586621681075034"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-972"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdArrApp GhcTc
-&gt; LHsExpr GhcTc
-&gt; LHsExpr GhcTc
-&gt; HsArrAppType
-&gt; Bool
-&gt; HsCmd GhcTc
forall id.
XCmdArrApp id
-&gt; LHsExpr id -&gt; LHsExpr id -&gt; HsArrAppType -&gt; Bool -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-var">HsCmdArrApp</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XCmdArrApp GhcTc
</span><a href="#local-6989586621681075027"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075029"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075028"><span class="hs-identifier hs-var">new_e2</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621681075031"><span class="hs-identifier hs-var">ho</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681075030"><span class="hs-identifier hs-var">rl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-973"></span><span>
</span><span id="line-974"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681075026"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075026"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span id="local-6989586621681075024"><span class="annot"><span class="annottext">XCmdArrForm GhcTc
</span><a href="#local-6989586621681075024"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075023"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075023"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681075022"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681075022"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681075021"><span class="annot"><span class="annottext">Maybe Fixity
</span><a href="#local-6989586621681075021"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span id="local-6989586621681075020"><span class="annot"><span class="annottext">[LHsCmdTop GhcTc]
</span><a href="#local-6989586621681075020"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-975"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075019"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075019"><span class="hs-identifier hs-var">new_op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075026"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075023"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-976"></span><span>       </span><span id="local-6989586621681075018"><span class="annot"><span class="annottext">[LHsCmdTop GhcTc]
</span><a href="#local-6989586621681075018"><span class="hs-identifier hs-var">new_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc))
-&gt; [LHsCmdTop GhcTc]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [LHsCmdTop GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-var">zonkCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075026"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsCmdTop GhcTc]
</span><a href="#local-6989586621681075020"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-977"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdArrForm GhcTc
-&gt; LHsExpr GhcTc
-&gt; LexicalFixity
-&gt; Maybe Fixity
-&gt; [LHsCmdTop GhcTc]
-&gt; HsCmd GhcTc
forall id.
XCmdArrForm id
-&gt; LHsExpr id
-&gt; LexicalFixity
-&gt; Maybe Fixity
-&gt; [LHsCmdTop id]
-&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-var">HsCmdArrForm</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdArrForm GhcTc
</span><a href="#local-6989586621681075024"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075019"><span class="hs-identifier hs-var">new_op</span></a></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621681075022"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Fixity
</span><a href="#local-6989586621681075021"><span class="hs-identifier hs-var">fixity</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsCmdTop GhcTc]
</span><a href="#local-6989586621681075018"><span class="hs-identifier hs-var">new_args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681075017"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075017"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdApp"><span class="hs-identifier hs-type">HsCmdApp</span></a></span><span> </span><span id="local-6989586621681075015"><span class="annot"><span class="annottext">XCmdApp GhcTc
</span><a href="#local-6989586621681075015"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075014"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075014"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681075013"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075013"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-980"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075012"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075012"><span class="hs-identifier hs-var">new_c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075017"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075014"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-981"></span><span>       </span><span id="local-6989586621681075011"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075011"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075017"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075013"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-982"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdApp GhcTc -&gt; LHsCmd GhcTc -&gt; LHsExpr GhcTc -&gt; HsCmd GhcTc
forall id. XCmdApp id -&gt; LHsCmd id -&gt; LHsExpr id -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdApp"><span class="hs-identifier hs-var">HsCmdApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdApp GhcTc
</span><a href="#local-6989586621681075015"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075012"><span class="hs-identifier hs-var">new_c</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681075011"><span class="hs-identifier hs-var">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span>
</span><span id="line-984"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681075010"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075010"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span id="local-6989586621681075008"><span class="annot"><span class="annottext">XCmdLam GhcTc
</span><a href="#local-6989586621681075008"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075007"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681075007"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-985"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075006"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681075006"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc))
-&gt; MatchGroup GhcTc (LHsCmd GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsCmd GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075010"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681075007"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-986"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdLam GhcTc -&gt; MatchGroup GhcTc (LHsCmd GhcTc) -&gt; HsCmd GhcTc
forall id. XCmdLam id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdLam"><span class="hs-identifier hs-var">HsCmdLam</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLam GhcTc
</span><a href="#local-6989586621681075008"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681075006"><span class="hs-identifier hs-var">new_matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>
</span><span id="line-988"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681075005"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075005"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdPar"><span class="hs-identifier hs-type">HsCmdPar</span></a></span><span> </span><span id="local-6989586621681075003"><span class="annot"><span class="annottext">XCmdPar GhcTc
</span><a href="#local-6989586621681075003"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681075002"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075002"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-989"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681075001"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075001"><span class="hs-identifier hs-var">new_c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075005"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075002"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-990"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdPar GhcTc -&gt; LHsCmd GhcTc -&gt; HsCmd GhcTc
forall id. XCmdPar id -&gt; LHsCmd id -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdPar"><span class="hs-identifier hs-var">HsCmdPar</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdPar GhcTc
</span><a href="#local-6989586621681075003"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681075001"><span class="hs-identifier hs-var">new_c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681075000"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075000"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span id="local-6989586621681074998"><span class="annot"><span class="annottext">XCmdCase GhcTc
</span><a href="#local-6989586621681074998"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074997"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074997"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681074996"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074996"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074995"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074995"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075000"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074997"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-994"></span><span>       </span><span id="local-6989586621681074994"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074994"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc))
-&gt; MatchGroup GhcTc (LHsCmd GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsCmd GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681075000"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074996"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-995"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdCase GhcTc
-&gt; LHsExpr GhcTc -&gt; MatchGroup GhcTc (LHsCmd GhcTc) -&gt; HsCmd GhcTc
forall id.
XCmdCase id -&gt; LHsExpr id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdCase"><span class="hs-identifier hs-var">HsCmdCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdCase GhcTc
</span><a href="#local-6989586621681074998"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074995"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074994"><span class="hs-identifier hs-var">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-996"></span><span>
</span><span id="line-997"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681074993"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074993"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdLamCase"><span class="hs-identifier hs-type">HsCmdLamCase</span></a></span><span> </span><span id="local-6989586621681074991"><span class="annot"><span class="annottext">XCmdLamCase GhcTc
</span><a href="#local-6989586621681074991"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074990"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074990"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-998"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074989"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074989"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc))
-&gt; MatchGroup GhcTc (LHsCmd GhcTc)
-&gt; TcM (MatchGroup GhcTc (LHsCmd GhcTc))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; MatchGroup GhcTc (Located (body GhcTc))
-&gt; TcM (MatchGroup GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074993"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074990"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-999"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdLamCase GhcTc -&gt; MatchGroup GhcTc (LHsCmd GhcTc) -&gt; HsCmd GhcTc
forall id. XCmdLamCase id -&gt; MatchGroup id (LHsCmd id) -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdLamCase"><span class="hs-identifier hs-var">HsCmdLamCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLamCase GhcTc
</span><a href="#local-6989586621681074991"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621681074989"><span class="hs-identifier hs-var">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681074988"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074988"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdIf"><span class="hs-identifier hs-type">HsCmdIf</span></a></span><span> </span><span id="local-6989586621681074986"><span class="annot"><span class="annottext">XCmdIf GhcTc
</span><a href="#local-6989586621681074986"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074985"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074985"><span class="hs-identifier hs-var">eCond</span></a></span></span><span> </span><span id="local-6989586621681074984"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074984"><span class="hs-identifier hs-var">ePred</span></a></span></span><span> </span><span id="local-6989586621681074983"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074983"><span class="hs-identifier hs-var">cThen</span></a></span></span><span> </span><span id="local-6989586621681074982"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074982"><span class="hs-identifier hs-var">cElse</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1002"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074981"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074981"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074980"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074980"><span class="hs-identifier hs-var">new_eCond</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074988"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074985"><span class="hs-identifier hs-var">eCond</span></a></span><span>
</span><span id="line-1003"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074979"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074979"><span class="hs-identifier hs-var">new_ePred</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074981"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074984"><span class="hs-identifier hs-var">ePred</span></a></span><span>
</span><span id="line-1004"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074978"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074978"><span class="hs-identifier hs-var">new_cThen</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074981"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074983"><span class="hs-identifier hs-var">cThen</span></a></span><span>
</span><span id="line-1005"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074977"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074977"><span class="hs-identifier hs-var">new_cElse</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074981"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074982"><span class="hs-identifier hs-var">cElse</span></a></span><span>
</span><span id="line-1006"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdIf GhcTc
-&gt; SyntaxExpr GhcTc
-&gt; LHsExpr GhcTc
-&gt; LHsCmd GhcTc
-&gt; LHsCmd GhcTc
-&gt; HsCmd GhcTc
forall id.
XCmdIf id
-&gt; SyntaxExpr id
-&gt; LHsExpr id
-&gt; LHsCmd id
-&gt; LHsCmd id
-&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdIf"><span class="hs-identifier hs-var">HsCmdIf</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdIf GhcTc
</span><a href="#local-6989586621681074986"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074980"><span class="hs-identifier hs-var">new_eCond</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074979"><span class="hs-identifier hs-var">new_ePred</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074978"><span class="hs-identifier hs-var">new_cThen</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074977"><span class="hs-identifier hs-var">new_cElse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1007"></span><span>
</span><span id="line-1008"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681074976"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074976"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span id="local-6989586621681074974"><span class="annot"><span class="annottext">XCmdLet GhcTc
</span><a href="#local-6989586621681074974"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074973"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074973"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074972"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074972"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074971"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074971"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074970"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074970"><span class="hs-identifier hs-var">new_env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074969"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074969"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074976"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074972"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1010"></span><span>       </span><span id="local-6989586621681074968"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074968"><span class="hs-identifier hs-var">new_cmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074970"><span class="hs-identifier hs-var">new_env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074971"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1011"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdLet GhcTc
-&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
-&gt; LHsCmd GhcTc
-&gt; HsCmd GhcTc
forall id. XCmdLet id -&gt; LHsLocalBinds id -&gt; LHsCmd id -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdLet"><span class="hs-identifier hs-var">HsCmdLet</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLet GhcTc
</span><a href="#local-6989586621681074974"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsLocalBinds GhcTc -&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074973"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074969"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074968"><span class="hs-identifier hs-var">new_cmd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1012"></span><span>
</span><span id="line-1013"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span id="local-6989586621681074967"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074967"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span id="local-6989586621681074965"><span class="annot"><span class="annottext">XCmdDo GhcTc
</span><a href="#local-6989586621681074965"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074964"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074964"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074963"><span class="annot"><span class="annottext">[CmdLStmt GhcTc]
</span><a href="#local-6989586621681074963"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074962"><span class="annot"><span class="annottext">[CmdLStmt GhcTc]
</span><a href="#local-6989586621681074962"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc))
-&gt; [CmdLStmt GhcTc]
-&gt; TcM (ZonkEnv, [CmdLStmt GhcTc])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074967"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">[CmdLStmt GhcTc]
</span><a href="#local-6989586621681074963"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1015"></span><span>       </span><span id="local-6989586621681074961"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074961"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074967"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XCmdDo GhcTc
</span><a href="#local-6989586621681074965"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1016"></span><span>       </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; TcM (HsCmd GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdDo GhcTc -&gt; GenLocated SrcSpan [CmdLStmt GhcTc] -&gt; HsCmd GhcTc
forall id. XCmdDo id -&gt; Located [CmdLStmt id] -&gt; HsCmd id
</span><a href="GHC.Hs.Expr.html#HsCmdDo"><span class="hs-identifier hs-var">HsCmdDo</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XCmdDo GhcTc
</span><a href="#local-6989586621681074961"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; [CmdLStmt GhcTc] -&gt; GenLocated SrcSpan [CmdLStmt GhcTc]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074964"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[CmdLStmt GhcTc]
</span><a href="#local-6989586621681074962"><span class="hs-identifier hs-var">new_stmts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1017"></span><span>
</span><span id="line-1018"></span><span>
</span><span id="line-1019"></span><span>
</span><span id="line-1020"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-type">zonkCmdTop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1021"></span><span id="zonkCmdTop"><span class="annot"><span class="annottext">zonkCmdTop :: ZonkEnv -&gt; LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCmdTop"><span class="hs-identifier hs-var hs-var">zonkCmdTop</span></a></span></span><span> </span><span id="local-6989586621681074960"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074960"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074959"><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681074959"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsCmdTop GhcTc -&gt; TcM (HsCmdTop GhcTc))
-&gt; LHsCmdTop GhcTc -&gt; TcM (LHsCmdTop GhcTc)
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsCmdTop GhcTc -&gt; TcM (HsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_cmd_top"><span class="hs-identifier hs-var">zonk_cmd_top</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074960"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621681074959"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1022"></span><span>
</span><span id="line-1023"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_cmd_top"><span class="hs-identifier hs-type">zonk_cmd_top</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1024"></span><span id="zonk_cmd_top"><span class="annot"><span class="annottext">zonk_cmd_top :: ZonkEnv -&gt; HsCmdTop GhcTc -&gt; TcM (HsCmdTop GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_cmd_top"><span class="hs-identifier hs-var hs-var">zonk_cmd_top</span></a></span></span><span> </span><span id="local-6989586621681074957"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074957"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#CmdTopTc"><span class="hs-identifier hs-type">CmdTopTc</span></a></span><span> </span><span id="local-6989586621681074954"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074954"><span class="hs-identifier hs-var">stack_tys</span></a></span></span><span> </span><span id="local-6989586621681074953"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074953"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681074952"><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681074952"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074951"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074951"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1025"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074950"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074950"><span class="hs-identifier hs-var">new_cmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsCmd GhcTc -&gt; TcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074957"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074951"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1026"></span><span>       </span><span id="local-6989586621681074949"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074949"><span class="hs-identifier hs-var">new_stack_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074957"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074954"><span class="hs-identifier hs-var">stack_tys</span></a></span><span>
</span><span id="line-1027"></span><span>       </span><span id="local-6989586621681074948"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074948"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074957"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074953"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1028"></span><span>       </span><span id="local-6989586621681074947"><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681074947"><span class="hs-identifier hs-var">new_ids</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; TcM (HsExpr GhcTc))
-&gt; CmdSyntaxTable GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (CmdSyntaxTable GhcTc)
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; [(a, b)] -&gt; m [(a, c)]
</span><a href="GHC.Utils.Monad.html#mapSndM"><span class="hs-identifier hs-var">mapSndM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074957"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681074952"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-1029"></span><span>
</span><span id="line-1030"></span><span>       </span><span class="hs-identifier">MASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isLiftedTypeKind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">tcTypeKind</span><span> </span><span class="hs-identifier">new_stack_tys</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1031"></span><span>         </span><span class="hs-comment">-- desugarer assumes that this is not levity polymorphic...</span><span>
</span><span id="line-1032"></span><span>         </span><span class="hs-comment">-- but indeed it should always be lifted due to the typing</span><span>
</span><span id="line-1033"></span><span>         </span><span class="hs-comment">-- rules for arrows</span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span>       </span><span class="annot"><span class="annottext">HsCmdTop GhcTc -&gt; TcM (HsCmdTop GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdTop GhcTc -&gt; LHsCmd GhcTc -&gt; HsCmdTop GhcTc
forall p. XCmdTop p -&gt; LHsCmd p -&gt; HsCmdTop p
</span><a href="GHC.Hs.Expr.html#HsCmdTop"><span class="hs-identifier hs-var">HsCmdTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; CmdSyntaxTable GhcTc -&gt; CmdTopTc
</span><a href="GHC.Hs.Expr.html#CmdTopTc"><span class="hs-identifier hs-var">CmdTopTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074949"><span class="hs-identifier hs-var">new_stack_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074948"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621681074947"><span class="hs-identifier hs-var">new_ids</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621681074950"><span class="hs-identifier hs-var">new_cmd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1036"></span><span>
</span><span id="line-1037"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1038"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1039"></span><span id="zonkCoFn"><span class="annot"><span class="annottext">zonkCoFn :: ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var hs-var">zonkCoFn</span></a></span></span><span> </span><span id="local-6989586621681074943"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074943"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074943"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1040"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074941"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074941"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-type">WpCompose</span></a></span><span> </span><span id="local-6989586621681074939"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074939"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681074938"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074938"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074937"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074937"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074936"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074936"><span class="hs-identifier hs-var">c1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074941"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074939"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1041"></span><span>                                    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074935"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074935"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074934"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074934"><span class="hs-identifier hs-var">c2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074937"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074938"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1042"></span><span>                                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074935"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-var">WpCompose</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074936"><span class="hs-identifier hs-var">c1'</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074934"><span class="hs-identifier hs-var">c2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1043"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074933"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074933"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-type">WpFun</span></a></span><span> </span><span id="local-6989586621681074931"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074931"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681074930"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074930"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621681074929"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681074929"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681074928"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681074928"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074927"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074927"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074926"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074926"><span class="hs-identifier hs-var">c1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074933"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074931"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1044"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074925"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074925"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074924"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074924"><span class="hs-identifier hs-var">c2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074927"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074930"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1045"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074923"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681074923"><span class="hs-identifier hs-var">t1'</span></a></span></span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074925"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681074929"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1046"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074925"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; Scaled Kind -&gt; SDoc -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-var">WpFun</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074926"><span class="hs-identifier hs-var">c1'</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074924"><span class="hs-identifier hs-var">c2'</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681074923"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681074928"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1047"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074922"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074922"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621681074920"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074920"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074919"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074919"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074922"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074920"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1048"></span><span>                              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074922"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074919"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1049"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074918"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074918"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-type">WpEvLam</span></a></span><span> </span><span id="local-6989586621681074916"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074916"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074915"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074915"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074914"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074914"><span class="hs-identifier hs-var">ev'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrX"><span class="hs-identifier hs-var">zonkEvBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074918"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074916"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1050"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074915"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-var">WpEvLam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074914"><span class="hs-identifier hs-var">ev'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1051"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074913"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074913"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-type">WpEvApp</span></a></span><span> </span><span id="local-6989586621681074911"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074911"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074910"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074910"><span class="hs-identifier hs-var">arg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074913"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074911"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1052"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074913"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074910"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1053"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074908"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074908"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-type">WpTyLam</span></a></span><span> </span><span id="local-6989586621681074906"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074906"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tv</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1054"></span><span>                              </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074905"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074905"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074904"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074904"><span class="hs-identifier hs-var">tv'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074908"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074906"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1055"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074905"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-var">WpTyLam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074904"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1056"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074903"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074903"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-type">WpTyApp</span></a></span><span> </span><span id="local-6989586621681074901"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074901"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074900"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074900"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074903"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074901"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1057"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074903"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-var">WpTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074900"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1058"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074899"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074899"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-type">WpLet</span></a></span><span> </span><span id="local-6989586621681074897"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074897"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074896"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074896"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074895"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074895"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074899"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074897"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1059"></span><span>                                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074896"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcEvBinds -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-var">WpLet</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074895"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1060"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span id="local-6989586621681074894"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074894"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-type">WpMultCoercion</span></a></span><span> </span><span id="local-6989586621681074892"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074892"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074891"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074891"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074894"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074892"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1061"></span><span>                                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, HsWrapper) -&gt; TcM (ZonkEnv, HsWrapper)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074894"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-var">WpMultCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074891"><span class="hs-identifier hs-var">co'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1062"></span><span>
</span><span id="line-1063"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1064"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-type">zonkOverLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1065"></span><span id="zonkOverLit"><span class="annot"><span class="annottext">zonkOverLit :: ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var hs-var">zonkOverLit</span></a></span></span><span> </span><span id="local-6989586621681074890"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074890"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074889"><span class="annot"><span class="annottext">lit :: HsOverLit GhcTc
</span><a href="#local-6989586621681074889"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Lit.html#OverLit"><span class="hs-identifier hs-type">OverLit</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ol_ext :: forall p. HsOverLit p -&gt; XOverLit p
</span><a href="GHC.Hs.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#OverLitTc"><span class="hs-identifier hs-type">OverLitTc</span></a></span><span> </span><span id="local-6989586621681074885"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681074885"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681074884"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074884"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ol_witness :: forall p. HsOverLit p -&gt; HsExpr p
</span><a href="GHC.Hs.Lit.html#ol_witness"><span class="hs-identifier hs-var">ol_witness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074882"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074882"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1066"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074881"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074881"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074890"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074884"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1067"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074880"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074880"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074890"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074882"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1068"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074889"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ol_witness :: HsExpr GhcTc
</span><a href="GHC.Hs.Lit.html#ol_witness"><span class="hs-identifier hs-var">ol_witness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074880"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ol_ext :: XOverLit GhcTc
</span><a href="GHC.Hs.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Kind -&gt; OverLitTc
</span><a href="GHC.Hs.Lit.html#OverLitTc"><span class="hs-identifier hs-var">OverLitTc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681074885"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074881"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1071"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-type">zonkArithSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>
</span><span id="line-1073"></span><span id="zonkArithSeq"><span class="annot"><span class="annottext">zonkArithSeq :: ZonkEnv -&gt; ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var hs-var">zonkArithSeq</span></a></span></span><span> </span><span id="local-6989586621681074879"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074879"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#From"><span class="hs-identifier hs-type">From</span></a></span><span> </span><span id="local-6989586621681074877"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074877"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074876"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074876"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074879"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074877"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1075"></span><span>       </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcTc -&gt; ArithSeqInfo GhcTc
forall id. LHsExpr id -&gt; ArithSeqInfo id
</span><a href="GHC.Hs.Expr.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074876"><span class="hs-identifier hs-var">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1076"></span><span>
</span><span id="line-1077"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span id="local-6989586621681074875"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074875"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#FromThen"><span class="hs-identifier hs-type">FromThen</span></a></span><span> </span><span id="local-6989586621681074873"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074873"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681074872"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074872"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1078"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074871"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074871"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074875"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074873"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1079"></span><span>       </span><span id="local-6989586621681074870"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074870"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074875"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074872"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1080"></span><span>       </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; ArithSeqInfo GhcTc
forall id. LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="GHC.Hs.Expr.html#FromThen"><span class="hs-identifier hs-var">FromThen</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074871"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074870"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>
</span><span id="line-1082"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span id="local-6989586621681074869"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074869"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#FromTo"><span class="hs-identifier hs-type">FromTo</span></a></span><span> </span><span id="local-6989586621681074867"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074867"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681074866"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074866"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1083"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074865"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074865"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074869"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074867"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1084"></span><span>       </span><span id="local-6989586621681074864"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074864"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074869"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074866"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1085"></span><span>       </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; ArithSeqInfo GhcTc
forall id. LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="GHC.Hs.Expr.html#FromTo"><span class="hs-identifier hs-var">FromTo</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074865"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074864"><span class="hs-identifier hs-var">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1086"></span><span>
</span><span id="line-1087"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span id="local-6989586621681074863"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074863"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#FromThenTo"><span class="hs-identifier hs-type">FromThenTo</span></a></span><span> </span><span id="local-6989586621681074861"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074861"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681074860"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074860"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621681074859"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074859"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1088"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074858"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074858"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074863"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074861"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1089"></span><span>       </span><span id="local-6989586621681074857"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074857"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074863"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074860"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1090"></span><span>       </span><span id="local-6989586621681074856"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074856"><span class="hs-identifier hs-var">new_e3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074863"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074859"><span class="hs-identifier hs-var">e3</span></a></span><span>
</span><span id="line-1091"></span><span>       </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc -&gt; TcM (ArithSeqInfo GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; ArithSeqInfo GhcTc
forall id.
LHsExpr id -&gt; LHsExpr id -&gt; LHsExpr id -&gt; ArithSeqInfo id
</span><a href="GHC.Hs.Expr.html#FromThenTo"><span class="hs-identifier hs-var">FromThenTo</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074858"><span class="hs-identifier hs-var">new_e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074857"><span class="hs-identifier hs-var">new_e2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074856"><span class="hs-identifier hs-var">new_e3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1092"></span><span>
</span><span id="line-1093"></span><span>
</span><span id="line-1094"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1095"></span><span id="local-6989586621681076850"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-type">zonkStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-1096"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076850"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076850"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1097"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076850"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1098"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076850"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-1099"></span><span id="zonkStmts"><span class="annot"><span class="annottext">zonkStmts :: forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var hs-var">zonkStmts</span></a></span></span><span> </span><span id="local-6989586621681074851"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074851"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074851"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1100"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span id="local-6989586621681074850"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074850"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074849"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074849"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074848"><span class="annot"><span class="annottext">LStmt GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074848"><span class="hs-identifier hs-var">s</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681074847"><span class="annot"><span class="annottext">[LStmt GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074847"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074846"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074846"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074845"><span class="annot"><span class="annottext">LStmt GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074845"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Stmt GhcTc (Located (body GhcTc))
 -&gt; TcM (ZonkEnv, Stmt GhcTc (Located (body GhcTc))))
-&gt; LStmt GhcTc (Located (body GhcTc))
-&gt; TcM (ZonkEnv, LStmt GhcTc (Located (body GhcTc)))
forall a b c. (a -&gt; TcM (b, c)) -&gt; Located a -&gt; TcM (b, Located c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocSndM"><span class="hs-identifier hs-var">wrapLocSndM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; Stmt GhcTc (Located (body GhcTc))
-&gt; TcM (ZonkEnv, Stmt GhcTc (Located (body GhcTc)))
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; Stmt GhcTc (Located (body GhcTc))
-&gt; TcM (ZonkEnv, Stmt GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074850"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074849"><span class="hs-identifier hs-var">zBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LStmt GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074848"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1101"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074842"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074842"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074841"><span class="annot"><span class="annottext">[LStmt GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074841"><span class="hs-identifier hs-var">ss'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074846"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074849"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074847"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-1102"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074842"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LStmt GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074845"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="annot"><span class="annottext">LStmt GhcTc (Located (body GhcTc))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; [LStmt GhcTc (Located (body GhcTc))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074841"><span class="hs-identifier hs-var">ss'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1103"></span><span>
</span><span id="line-1104"></span><span id="local-6989586621681076721"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-type">zonkStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-1105"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076721"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076721"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076721"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076721"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1108"></span><span id="zonkStmt"><span class="annot"><span class="annottext">zonkStmt :: forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; Stmt GhcTc (Located (body GhcTc))
-&gt; TcM (ZonkEnv, Stmt GhcTc (Located (body GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var hs-var">zonkStmt</span></a></span></span><span> </span><span id="local-6989586621681074780"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074780"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span id="local-6989586621681074778"><span class="annot"><span class="annottext">XParStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074778"><span class="hs-identifier hs-var">bind_ty</span></a></span></span><span> </span><span id="local-6989586621681074777"><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681074777"><span class="hs-identifier hs-var">stmts_w_bndrs</span></a></span></span><span> </span><span id="local-6989586621681074776"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074776"><span class="hs-identifier hs-var">mzip_op</span></a></span></span><span> </span><span id="local-6989586621681074775"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074775"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1109"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074774"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074774"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074773"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074773"><span class="hs-identifier hs-var">new_bind_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074780"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074775"><span class="hs-identifier hs-var">bind_op</span></a></span><span>
</span><span id="line-1110"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074772"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074772"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074774"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XParStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074778"><span class="hs-identifier hs-var">bind_ty</span></a></span><span>
</span><span id="line-1111"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074771"><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681074771"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ParStmtBlock GhcTc GhcTc
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ParStmtBlock GhcTc GhcTc))
-&gt; [ParStmtBlock GhcTc GhcTc]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [ParStmtBlock GhcTc GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; ParStmtBlock GhcTc GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ParStmtBlock GhcTc GhcTc)
</span><a href="#local-6989586621681074770"><span class="hs-identifier hs-var">zonk_branch</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074774"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681074777"><span class="hs-identifier hs-var">stmts_w_bndrs</span></a></span><span>
</span><span id="line-1112"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074769"><span class="annot"><span class="annottext">new_binders :: [Id]
</span><a href="#local-6989586621681074769"><span class="hs-identifier hs-var hs-var">new_binders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074768"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074766"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681074766"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681074771"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span><span>
</span><span id="line-1113"></span><span>                              </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074768"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074768"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
[IdP GhcTc]
</span><a href="#local-6989586621681074766"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1114"></span><span>             </span><span id="local-6989586621681074765"><span class="annot"><span class="annottext">env2 :: ZonkEnv
</span><a href="#local-6989586621681074765"><span class="hs-identifier hs-var hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074774"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074769"><span class="hs-identifier hs-var">new_binders</span></a></span><span>
</span><span id="line-1115"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074764"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074764"><span class="hs-identifier hs-var">new_mzip</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074765"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074776"><span class="hs-identifier hs-var">mzip_op</span></a></span><span>
</span><span id="line-1116"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074765"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-1117"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XParStmt GhcTc GhcTc (Located (body GhcTc))
-&gt; [ParStmtBlock GhcTc GhcTc]
-&gt; HsExpr GhcTc
-&gt; SyntaxExpr GhcTc
-&gt; StmtLR GhcTc GhcTc (Located (body GhcTc))
forall idL idR body.
XParStmt idL idR body
-&gt; [ParStmtBlock idL idR]
-&gt; HsExpr idR
-&gt; SyntaxExpr idR
-&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#ParStmt"><span class="hs-identifier hs-var">ParStmt</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XParStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074772"><span class="hs-identifier hs-var">new_bind_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621681074771"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074764"><span class="hs-identifier hs-var">new_mzip</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074773"><span class="hs-identifier hs-var">new_bind_op</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-1118"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1119"></span><span>    </span><span class="annot"><a href="#local-6989586621681074770"><span class="hs-identifier hs-type">zonk_branch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1120"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1121"></span><span>    </span><span id="local-6989586621681074770"><span class="annot"><span class="annottext">zonk_branch :: ZonkEnv
-&gt; ParStmtBlock GhcTc GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ParStmtBlock GhcTc GhcTc)
</span><a href="#local-6989586621681074770"><span class="hs-identifier hs-var hs-var">zonk_branch</span></a></span></span><span> </span><span id="local-6989586621681074763"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074763"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span id="local-6989586621681074762"><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><a href="#local-6989586621681074762"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074761"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074761"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681074760"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681074760"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621681074759"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074759"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074758"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074758"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074757"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074757"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; TcM (ZonkEnv, [GuardLStmt GhcTc])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074763"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074761"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1123"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074756"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074756"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074755"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074755"><span class="hs-identifier hs-var">new_return</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074758"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074759"><span class="hs-identifier hs-var">return_op</span></a></span><span>
</span><span id="line-1124"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ParStmtBlock GhcTc GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ParStmtBlock GhcTc GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
-&gt; [GuardLStmt GhcTc]
-&gt; [IdP GhcTc]
-&gt; SyntaxExpr GhcTc
-&gt; ParStmtBlock GhcTc GhcTc
forall idL idR.
XParStmtBlock idL idR
-&gt; [ExprLStmt idL]
-&gt; [IdP idR]
-&gt; SyntaxExpr idR
-&gt; ParStmtBlock idL idR
</span><a href="GHC.Hs.Expr.html#ParStmtBlock"><span class="hs-identifier hs-var">ParStmtBlock</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><a href="#local-6989586621681074762"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074757"><span class="hs-identifier hs-var">new_stmts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; [Id]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOccs"><span class="hs-identifier hs-var">zonkIdOccs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074756"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
[IdP GhcTc]
</span><a href="#local-6989586621681074760"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1125"></span><span>                                                                   </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074755"><span class="hs-identifier hs-var">new_return</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1126"></span><span>
</span><span id="line-1127"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681074754"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074754"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074753"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074753"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: forall idL idR body. StmtLR idL idR body -&gt; [LStmtLR idL idR body]
</span><a href="GHC.Hs.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074750"><span class="annot"><span class="annottext">[LStmtLR GhcTc GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074750"><span class="hs-identifier hs-var">segStmts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_ids :: forall idL idR body. StmtLR idL idR body -&gt; [IdP idR]
</span><a href="GHC.Hs.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074748"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681074748"><span class="hs-identifier hs-var">lvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_ids :: forall idL idR body. StmtLR idL idR body -&gt; [IdP idR]
</span><a href="GHC.Hs.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074746"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621681074746"><span class="hs-identifier hs-var">rvs</span></a></span></span><span>
</span><span id="line-1128"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="GHC.Hs.Expr.html#recS_ret_fn"><span class="hs-identifier hs-var">recS_ret_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074744"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074744"><span class="hs-identifier hs-var">ret_id</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_mfix_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="GHC.Hs.Expr.html#recS_mfix_fn"><span class="hs-identifier hs-var">recS_mfix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074742"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074742"><span class="hs-identifier hs-var">mfix_id</span></a></span></span><span>
</span><span id="line-1129"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_bind_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="GHC.Hs.Expr.html#recS_bind_fn"><span class="hs-identifier hs-var">recS_bind_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074740"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074740"><span class="hs-identifier hs-var">bind_id</span></a></span></span><span>
</span><span id="line-1130"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ext :: forall idL idR body. StmtLR idL idR body -&gt; XRecStmt idL idR body
</span><a href="GHC.Hs.Expr.html#recS_ext"><span class="hs-identifier hs-var">recS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1131"></span><span>                                       </span><span class="annot"><a href="GHC.Hs.Expr.html#RecStmtTc"><span class="hs-identifier hs-type">RecStmtTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_bind_ty :: RecStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#recS_bind_ty"><span class="hs-identifier hs-var">recS_bind_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074736"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074736"><span class="hs-identifier hs-var">bind_ty</span></a></span></span><span>
</span><span id="line-1132"></span><span>                                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_rets :: RecStmtTc -&gt; [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_later_rets"><span class="hs-identifier hs-var">recS_later_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074734"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074734"><span class="hs-identifier hs-var">later_rets</span></a></span></span><span>
</span><span id="line-1133"></span><span>                                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_rets :: RecStmtTc -&gt; [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_rec_rets"><span class="hs-identifier hs-var">recS_rec_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074732"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074732"><span class="hs-identifier hs-var">rec_rets</span></a></span></span><span>
</span><span id="line-1134"></span><span>                                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_ty :: RecStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#recS_ret_ty"><span class="hs-identifier hs-var">recS_ret_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074730"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074730"><span class="hs-identifier hs-var">ret_ty</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1135"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074729"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074729"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074728"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074728"><span class="hs-identifier hs-var">new_bind_id</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074754"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074740"><span class="hs-identifier hs-var">bind_id</span></a></span><span>
</span><span id="line-1136"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074727"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074727"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074726"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074726"><span class="hs-identifier hs-var">new_mfix_id</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074729"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074742"><span class="hs-identifier hs-var">mfix_id</span></a></span><span>
</span><span id="line-1137"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074725"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074725"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074724"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074724"><span class="hs-identifier hs-var">new_ret_id</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074727"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074744"><span class="hs-identifier hs-var">ret_id</span></a></span><span>
</span><span id="line-1138"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074723"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074723"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074725"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074736"><span class="hs-identifier hs-var">bind_ty</span></a></span><span>
</span><span id="line-1139"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074722"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074722"><span class="hs-identifier hs-var">new_rvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM [Id]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var">zonkIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074725"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
[IdP GhcTc]
</span><a href="#local-6989586621681074746"><span class="hs-identifier hs-var">rvs</span></a></span><span>
</span><span id="line-1140"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074721"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074721"><span class="hs-identifier hs-var">new_lvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM [Id]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndrs"><span class="hs-identifier hs-var">zonkIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074725"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
[IdP GhcTc]
</span><a href="#local-6989586621681074748"><span class="hs-identifier hs-var">lvs</span></a></span><span>
</span><span id="line-1141"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074720"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074720"><span class="hs-identifier hs-var">new_ret_ty</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074725"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074730"><span class="hs-identifier hs-var">ret_ty</span></a></span><span>
</span><span id="line-1142"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074719"><span class="annot"><span class="annottext">env4 :: ZonkEnv
</span><a href="#local-6989586621681074719"><span class="hs-identifier hs-var hs-var">env4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074725"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074722"><span class="hs-identifier hs-var">new_rvs</span></a></span><span>
</span><span id="line-1143"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074718"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074718"><span class="hs-identifier hs-var">env5</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074717"><span class="annot"><span class="annottext">[LStmtLR GhcTc GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074717"><span class="hs-identifier hs-var">new_segStmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmtLR GhcTc GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmtLR GhcTc GhcTc (Located (body GhcTc))])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074719"><span class="hs-identifier hs-var">env4</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074753"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmtLR GhcTc GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074750"><span class="hs-identifier hs-var">segStmts</span></a></span><span>
</span><span id="line-1144"></span><span>        </span><span class="hs-comment">-- Zonk the ret-expressions in an envt that</span><span>
</span><span id="line-1145"></span><span>        </span><span class="hs-comment">-- has the polymorphic bindings in the envt</span><span>
</span><span id="line-1146"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074716"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074716"><span class="hs-identifier hs-var">new_later_rets</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; TcM (HsExpr GhcTc))
-&gt; [HsExpr GhcTc] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [HsExpr GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074718"><span class="hs-identifier hs-var">env5</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074734"><span class="hs-identifier hs-var">later_rets</span></a></span><span>
</span><span id="line-1147"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074715"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074715"><span class="hs-identifier hs-var">new_rec_rets</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; TcM (HsExpr GhcTc))
-&gt; [HsExpr GhcTc] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [HsExpr GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074718"><span class="hs-identifier hs-var">env5</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074732"><span class="hs-identifier hs-var">rec_rets</span></a></span><span>
</span><span id="line-1148"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074725"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074721"><span class="hs-identifier hs-var">new_lvs</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- Only the lvs are needed</span><span>
</span><span id="line-1149"></span><span>                 </span><span class="annot"><span class="annottext">RecStmt :: forall idL idR body.
XRecStmt idL idR body
-&gt; [LStmtLR idL idR body]
-&gt; [IdP idR]
-&gt; [IdP idR]
-&gt; SyntaxExpr idR
-&gt; SyntaxExpr idR
-&gt; SyntaxExpr idR
-&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: [LStmtLR GhcTc GhcTc (Located (body GhcTc))]
</span><a href="GHC.Hs.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LStmtLR GhcTc GhcTc (Located (body GhcTc))]
</span><a href="#local-6989586621681074717"><span class="hs-identifier hs-var">new_segStmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_ids :: [IdP GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
[IdP GhcTc]
</span><a href="#local-6989586621681074721"><span class="hs-identifier hs-var">new_lvs</span></a></span><span>
</span><span id="line-1150"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_ids :: [IdP GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
[IdP GhcTc]
</span><a href="#local-6989586621681074722"><span class="hs-identifier hs-var">new_rvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_fn :: SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#recS_ret_fn"><span class="hs-identifier hs-var">recS_ret_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074724"><span class="hs-identifier hs-var">new_ret_id</span></a></span><span>
</span><span id="line-1151"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_mfix_fn :: SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#recS_mfix_fn"><span class="hs-identifier hs-var">recS_mfix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074726"><span class="hs-identifier hs-var">new_mfix_id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_bind_fn :: SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#recS_bind_fn"><span class="hs-identifier hs-var">recS_bind_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074728"><span class="hs-identifier hs-var">new_bind_id</span></a></span><span>
</span><span id="line-1152"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ext :: XRecStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="GHC.Hs.Expr.html#recS_ext"><span class="hs-identifier hs-var">recS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RecStmtTc :: Kind -&gt; [HsExpr GhcTc] -&gt; [HsExpr GhcTc] -&gt; Kind -&gt; RecStmtTc
</span><a href="GHC.Hs.Expr.html#RecStmtTc"><span class="hs-identifier hs-type">RecStmtTc</span></a></span><span>
</span><span id="line-1153"></span><span>                             </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_bind_ty :: Kind
</span><a href="GHC.Hs.Expr.html#recS_bind_ty"><span class="hs-identifier hs-var">recS_bind_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074723"><span class="hs-identifier hs-var">new_bind_ty</span></a></span><span>
</span><span id="line-1154"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_rets :: [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_later_rets"><span class="hs-identifier hs-var">recS_later_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074716"><span class="hs-identifier hs-var">new_later_rets</span></a></span><span>
</span><span id="line-1155"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_rets :: [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_rec_rets"><span class="hs-identifier hs-var">recS_rec_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621681074715"><span class="hs-identifier hs-var">new_rec_rets</span></a></span><span>
</span><span id="line-1156"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_ty :: Kind
</span><a href="GHC.Hs.Expr.html#recS_ret_ty"><span class="hs-identifier hs-var">recS_ret_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074720"><span class="hs-identifier hs-var">new_ret_ty</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1157"></span><span>
</span><span id="line-1158"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681074714"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074714"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074713"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074713"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span id="local-6989586621681074711"><span class="annot"><span class="annottext">XBodyStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074711"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681074710"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074710"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681074709"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074709"><span class="hs-identifier hs-var">then_op</span></a></span></span><span> </span><span id="local-6989586621681074708"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074708"><span class="hs-identifier hs-var">guard_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1159"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074707"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074707"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074706"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074706"><span class="hs-identifier hs-var">new_then_op</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074714"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074709"><span class="hs-identifier hs-var">then_op</span></a></span><span>
</span><span id="line-1160"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681074705"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074705"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074704"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074704"><span class="hs-identifier hs-var">new_guard_op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074707"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074708"><span class="hs-identifier hs-var">guard_op</span></a></span><span>
</span><span id="line-1161"></span><span>       </span><span id="local-6989586621681074703"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074703"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074713"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074705"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074710"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1162"></span><span>       </span><span id="local-6989586621681074702"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074702"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074705"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XBodyStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074711"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1163"></span><span>       </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074705"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XBodyStmt GhcTc GhcTc (Located (body GhcTc))
-&gt; Located (body GhcTc)
-&gt; SyntaxExpr GhcTc
-&gt; SyntaxExpr GhcTc
-&gt; StmtLR GhcTc GhcTc (Located (body GhcTc))
forall idL idR body.
XBodyStmt idL idR body
-&gt; body -&gt; SyntaxExpr idR -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#BodyStmt"><span class="hs-identifier hs-var">BodyStmt</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XBodyStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074702"><span class="hs-identifier hs-var">new_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074703"><span class="hs-identifier hs-var">new_body</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074706"><span class="hs-identifier hs-var">new_then_op</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074704"><span class="hs-identifier hs-var">new_guard_op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681074701"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074701"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074700"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074700"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span id="local-6989586621681074698"><span class="annot"><span class="annottext">XLastStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074698"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074697"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074697"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681074696"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681074696"><span class="hs-identifier hs-var">noret</span></a></span></span><span> </span><span id="local-6989586621681074695"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074695"><span class="hs-identifier hs-var">ret_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1166"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074694"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074694"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074693"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074693"><span class="hs-identifier hs-var">new_ret</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074701"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074695"><span class="hs-identifier hs-var">ret_op</span></a></span><span>
</span><span id="line-1167"></span><span>       </span><span id="local-6989586621681074692"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074692"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074700"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074694"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074697"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1168"></span><span>       </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074701"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcTc GhcTc (Located (body GhcTc))
-&gt; Located (body GhcTc)
-&gt; Maybe Bool
-&gt; SyntaxExpr GhcTc
-&gt; StmtLR GhcTc GhcTc (Located (body GhcTc))
forall idL idR body.
XLastStmt idL idR body
-&gt; body -&gt; Maybe Bool -&gt; SyntaxExpr idR -&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#LastStmt"><span class="hs-identifier hs-var">LastStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLastStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074698"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074692"><span class="hs-identifier hs-var">new_body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681074696"><span class="hs-identifier hs-var">noret</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074693"><span class="hs-identifier hs-var">new_ret</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1169"></span><span>
</span><span id="line-1170"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681074691"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074691"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">trS_stmts :: forall idL idR body. StmtLR idL idR body -&gt; [ExprLStmt idL]
</span><a href="GHC.Hs.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074688"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074688"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bndrs :: forall idL idR body. StmtLR idL idR body -&gt; [(IdP idR, IdP idR)]
</span><a href="GHC.Hs.Expr.html#trS_bndrs"><span class="hs-identifier hs-var">trS_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074686"><span class="annot"><span class="annottext">[(IdP GhcTc, IdP GhcTc)]
</span><a href="#local-6989586621681074686"><span class="hs-identifier hs-var">binderMap</span></a></span></span><span>
</span><span id="line-1171"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_by :: forall idL idR body. StmtLR idL idR body -&gt; Maybe (LHsExpr idR)
</span><a href="GHC.Hs.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074684"><span class="annot"><span class="annottext">Maybe (LHsExpr GhcTc)
</span><a href="#local-6989586621681074684"><span class="hs-identifier hs-var">by</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_form :: forall idL idR body. StmtLR idL idR body -&gt; TransForm
</span><a href="GHC.Hs.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074682"><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621681074682"><span class="hs-identifier hs-var">form</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_using :: forall idL idR body. StmtLR idL idR body -&gt; LHsExpr idR
</span><a href="GHC.Hs.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074680"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074680"><span class="hs-identifier hs-var">using</span></a></span></span><span>
</span><span id="line-1172"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ret :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="GHC.Hs.Expr.html#trS_ret"><span class="hs-identifier hs-var">trS_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074678"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074678"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bind :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="GHC.Hs.Expr.html#trS_bind"><span class="hs-identifier hs-var">trS_bind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074676"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074676"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span>
</span><span id="line-1173"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ext :: forall idL idR body. StmtLR idL idR body -&gt; XTransStmt idL idR body
</span><a href="GHC.Hs.Expr.html#trS_ext"><span class="hs-identifier hs-var">trS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074674"><span class="annot"><span class="annottext">XTransStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074674"><span class="hs-identifier hs-var">bind_arg_ty</span></a></span></span><span>
</span><span id="line-1174"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_fmap :: forall idL idR body. StmtLR idL idR body -&gt; HsExpr idR
</span><a href="GHC.Hs.Expr.html#trS_fmap"><span class="hs-identifier hs-var">trS_fmap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074672"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074672"><span class="hs-identifier hs-var">liftM_op</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1175"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1176"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074671"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074671"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074670"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074670"><span class="hs-identifier hs-var">bind_op'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074691"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074676"><span class="hs-identifier hs-var">bind_op</span></a></span><span>
</span><span id="line-1177"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074669"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074669"><span class="hs-identifier hs-var">bind_arg_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074671"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XTransStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074674"><span class="hs-identifier hs-var">bind_arg_ty</span></a></span><span>
</span><span id="line-1178"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074668"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074668"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074667"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074667"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; TcM (ZonkEnv, [GuardLStmt GhcTc])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074671"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074688"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1179"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074666"><span class="annot"><span class="annottext">Maybe (LHsExpr GhcTc)
</span><a href="#local-6989586621681074666"><span class="hs-identifier hs-var">by'</span></a></span></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; Maybe (LHsExpr GhcTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe (LHsExpr GhcTc))
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Maybe a -&gt; m (Maybe b)
</span><a href="GHC.Utils.Monad.html#fmapMaybeM"><span class="hs-identifier hs-var">fmapMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074668"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsExpr GhcTc)
</span><a href="#local-6989586621681074684"><span class="hs-identifier hs-var">by</span></a></span><span>
</span><span id="line-1180"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074664"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074664"><span class="hs-identifier hs-var">using'</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074668"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074680"><span class="hs-identifier hs-var">using</span></a></span><span>
</span><span id="line-1181"></span><span>
</span><span id="line-1182"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074663"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074663"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074662"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074662"><span class="hs-identifier hs-var">return_op'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074668"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074678"><span class="hs-identifier hs-var">return_op</span></a></span><span>
</span><span id="line-1183"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074661"><span class="annot"><span class="annottext">[(Id, Id)]
</span><a href="#local-6989586621681074661"><span class="hs-identifier hs-var">binderMap'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Id, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, Id))
-&gt; [(Id, Id)] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [(Id, Id)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; (Id, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, Id)
</span><a href="#local-6989586621681074660"><span class="hs-identifier hs-var">zonkBinderMapEntry</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074663"><span class="hs-identifier hs-var">env3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Id, Id)]
[(IdP GhcTc, IdP GhcTc)]
</span><a href="#local-6989586621681074686"><span class="hs-identifier hs-var">binderMap</span></a></span><span>
</span><span id="line-1184"></span><span>    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074659"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074659"><span class="hs-identifier hs-var">liftM_op'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074663"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074672"><span class="hs-identifier hs-var">liftM_op</span></a></span><span>
</span><span id="line-1185"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074658"><span class="annot"><span class="annottext">env3' :: ZonkEnv
</span><a href="#local-6989586621681074658"><span class="hs-identifier hs-var hs-var">env3'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074663"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Id, Id) -&gt; Id) -&gt; [(Id, Id)] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(Id, Id) -&gt; Id
forall a b. (a, b) -&gt; b
</span><a href="../../base/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">[(Id, Id)]
</span><a href="#local-6989586621681074661"><span class="hs-identifier hs-var">binderMap'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1186"></span><span>    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074658"><span class="hs-identifier hs-var">env3'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TransStmt :: forall idL idR body.
XTransStmt idL idR body
-&gt; TransForm
-&gt; [ExprLStmt idL]
-&gt; [(IdP idR, IdP idR)]
-&gt; LHsExpr idR
-&gt; Maybe (LHsExpr idR)
-&gt; SyntaxExpr idR
-&gt; SyntaxExpr idR
-&gt; HsExpr idR
-&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">trS_stmts :: [GuardLStmt GhcTc]
</span><a href="GHC.Hs.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074667"><span class="hs-identifier hs-var">stmts'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bndrs :: [(IdP GhcTc, IdP GhcTc)]
</span><a href="GHC.Hs.Expr.html#trS_bndrs"><span class="hs-identifier hs-var">trS_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Id, Id)]
[(IdP GhcTc, IdP GhcTc)]
</span><a href="#local-6989586621681074661"><span class="hs-identifier hs-var">binderMap'</span></a></span><span>
</span><span id="line-1187"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_by :: Maybe (LHsExpr GhcTc)
</span><a href="GHC.Hs.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsExpr GhcTc)
</span><a href="#local-6989586621681074666"><span class="hs-identifier hs-var">by'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_form :: TransForm
</span><a href="GHC.Hs.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621681074682"><span class="hs-identifier hs-var">form</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_using :: LHsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074664"><span class="hs-identifier hs-var">using'</span></a></span><span>
</span><span id="line-1188"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ret :: SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#trS_ret"><span class="hs-identifier hs-var">trS_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074662"><span class="hs-identifier hs-var">return_op'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bind :: SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#trS_bind"><span class="hs-identifier hs-var">trS_bind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074670"><span class="hs-identifier hs-var">bind_op'</span></a></span><span>
</span><span id="line-1189"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ext :: XTransStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="GHC.Hs.Expr.html#trS_ext"><span class="hs-identifier hs-var">trS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
XTransStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074669"><span class="hs-identifier hs-var">bind_arg_ty'</span></a></span><span>
</span><span id="line-1190"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_fmap :: HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#trS_fmap"><span class="hs-identifier hs-var">trS_fmap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074659"><span class="hs-identifier hs-var">liftM_op'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1192"></span><span>    </span><span id="local-6989586621681074660"><span class="annot"><span class="annottext">zonkBinderMapEntry :: ZonkEnv -&gt; (Id, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, Id)
</span><a href="#local-6989586621681074660"><span class="hs-identifier hs-var hs-var">zonkBinderMapEntry</span></a></span></span><span> </span><span id="local-6989586621681074655"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074655"><span class="hs-identifier hs-var">env</span></a></span></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681074654"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074654"><span class="hs-identifier hs-var">oldBinder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074653"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074653"><span class="hs-identifier hs-var">newBinder</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1193"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074652"><span class="annot"><span class="annottext">oldBinder' :: Id
</span><a href="#local-6989586621681074652"><span class="hs-identifier hs-var hs-var">oldBinder'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074655"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074654"><span class="hs-identifier hs-var">oldBinder</span></a></span><span>
</span><span id="line-1194"></span><span>        </span><span id="local-6989586621681074651"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074651"><span class="hs-identifier hs-var">newBinder'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074655"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074653"><span class="hs-identifier hs-var">newBinder</span></a></span><span>
</span><span id="line-1195"></span><span>        </span><span class="annot"><span class="annottext">(Id, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074652"><span class="hs-identifier hs-var">oldBinder'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074651"><span class="hs-identifier hs-var">newBinder'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1196"></span><span>
</span><span id="line-1197"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681074650"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074650"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span id="local-6989586621681074648"><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074648"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074647"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074647"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074646"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074646"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1198"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074645"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074645"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074644"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074644"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsLocalBinds GhcTc -&gt; TcM (ZonkEnv, HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074650"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074646"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1199"></span><span>       </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074645"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (Located (body GhcTc))
-&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
-&gt; StmtLR GhcTc GhcTc (Located (body GhcTc))
forall idL idR body.
XLetStmt idL idR body
-&gt; LHsLocalBindsLR idL idR -&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#LetStmt"><span class="hs-identifier hs-var">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074648"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsLocalBinds GhcTc -&gt; GenLocated SrcSpan (HsLocalBinds GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074647"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621681074644"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681074643"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074643"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074642"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074642"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span id="local-6989586621681074640"><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074640"><span class="hs-identifier hs-var">xbs</span></a></span></span><span> </span><span id="local-6989586621681074639"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074639"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681074638"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074638"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1202"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074637"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074637"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074636"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074636"><span class="hs-identifier hs-var">new_bind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074643"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc -&gt; SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#xbstc_bindOp"><span class="hs-identifier hs-var hs-var">xbstc_bindOp</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (Located (body GhcTc))
XBindStmtTc
</span><a href="#local-6989586621681074640"><span class="hs-identifier hs-var">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1203"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074634"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074634"><span class="hs-identifier hs-var">new_w</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074637"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultMult"><span class="hs-identifier hs-var hs-var">xbstc_boundResultMult</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (Located (body GhcTc))
XBindStmtTc
</span><a href="#local-6989586621681074640"><span class="hs-identifier hs-var">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1204"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074632"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074632"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074637"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultType"><span class="hs-identifier hs-var hs-var">xbstc_boundResultType</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (Located (body GhcTc))
XBindStmtTc
</span><a href="#local-6989586621681074640"><span class="hs-identifier hs-var">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1205"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074630"><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074630"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074642"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074637"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074638"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1206"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074629"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074629"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074628"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074628"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074637"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074639"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1207"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074627"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681074627"><span class="hs-identifier hs-var">new_fail</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">XBindStmtTc -&gt; Maybe (SyntaxExpr GhcTc)
</span><a href="GHC.Hs.Expr.html#xbstc_failOp"><span class="hs-identifier hs-var hs-var">xbstc_failOp</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (Located (body GhcTc))
XBindStmtTc
</span><a href="#local-6989586621681074640"><span class="hs-identifier hs-var">xbs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1208"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1209"></span><span>            </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681074625"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074625"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((ZonkEnv, SyntaxExprTc) -&gt; Maybe SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; ((ZonkEnv, SyntaxExprTc) -&gt; SyntaxExprTc)
-&gt; (ZonkEnv, SyntaxExprTc)
-&gt; Maybe SyntaxExprTc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, SyntaxExprTc) -&gt; SyntaxExprTc
forall a b. (a, b) -&gt; b
</span><a href="../../base/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074637"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074625"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1210"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074629"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-1211"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (Located (body GhcTc))
-&gt; LPat GhcTc
-&gt; Located (body GhcTc)
-&gt; StmtLR GhcTc GhcTc (Located (body GhcTc))
forall idL idR body.
XBindStmt idL idR body -&gt; LPat idL -&gt; body -&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#BindStmt"><span class="hs-identifier hs-var">BindStmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc :: SyntaxExpr GhcTc
-&gt; Kind -&gt; Kind -&gt; Maybe (SyntaxExpr GhcTc) -&gt; XBindStmtTc
</span><a href="GHC.Hs.Expr.html#XBindStmtTc"><span class="hs-identifier hs-type">XBindStmtTc</span></a></span><span>
</span><span id="line-1212"></span><span>                              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xbstc_bindOp :: SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#xbstc_bindOp"><span class="hs-identifier hs-var">xbstc_bindOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074636"><span class="hs-identifier hs-var">new_bind</span></a></span><span>
</span><span id="line-1213"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbstc_boundResultType :: Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultType"><span class="hs-identifier hs-var">xbstc_boundResultType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074632"><span class="hs-identifier hs-var">new_bind_ty</span></a></span><span>
</span><span id="line-1214"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbstc_boundResultMult :: Kind
</span><a href="GHC.Hs.Expr.html#xbstc_boundResultMult"><span class="hs-identifier hs-var">xbstc_boundResultMult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074634"><span class="hs-identifier hs-var">new_w</span></a></span><span>
</span><span id="line-1215"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">xbstc_failOp :: Maybe (SyntaxExpr GhcTc)
</span><a href="GHC.Hs.Expr.html#xbstc_failOp"><span class="hs-identifier hs-var">xbstc_failOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681074627"><span class="hs-identifier hs-var">new_fail</span></a></span><span>
</span><span id="line-1216"></span><span>                              </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1217"></span><span>                            </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074628"><span class="hs-identifier hs-var">new_pat</span></a></span><span> </span><span class="annot"><span class="annottext">Located (body GhcTc)
</span><a href="#local-6989586621681074630"><span class="hs-identifier hs-var">new_body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1218"></span><span>
</span><span id="line-1219"></span><span class="hs-comment">-- Scopes: join &gt; ops (in reverse order) &gt; pats (in forward order)</span><span>
</span><span id="line-1220"></span><span class="hs-comment">--              &gt; rest of stmts</span><span>
</span><span id="line-1221"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621681074623"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074623"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074622"><span class="annot"><span class="annottext">ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc))
</span><a href="#local-6989586621681074622"><span class="hs-identifier hs-var">_zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span id="local-6989586621681074620"><span class="annot"><span class="annottext">XApplicativeStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074620"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span> </span><span id="local-6989586621681074619"><span class="annot"><span class="annottext">[(SyntaxExpr GhcTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074619"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681074618"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681074618"><span class="hs-identifier hs-var">mb_join</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1222"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074617"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074617"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074616"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681074616"><span class="hs-identifier hs-var">new_mb_join</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681074615"><span class="hs-identifier hs-var">zonk_join</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074623"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681074618"><span class="hs-identifier hs-var">mb_join</span></a></span><span>
</span><span id="line-1223"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074614"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074614"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074613"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074613"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681074612"><span class="hs-identifier hs-var">zonk_args</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074617"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExpr GhcTc, ApplicativeArg GhcTc)]
[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074619"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1224"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074611"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074611"><span class="hs-identifier hs-var">new_body_ty</span></a></span></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074614"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XApplicativeStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074620"><span class="hs-identifier hs-var">body_ty</span></a></span><span>
</span><span id="line-1225"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
-&gt; TcM (ZonkEnv, StmtLR GhcTc GhcTc (Located (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074614"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-1226"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XApplicativeStmt GhcTc GhcTc (Located (body GhcTc))
-&gt; [(SyntaxExpr GhcTc, ApplicativeArg GhcTc)]
-&gt; Maybe (SyntaxExpr GhcTc)
-&gt; StmtLR GhcTc GhcTc (Located (body GhcTc))
forall idL idR body.
XApplicativeStmt idL idR body
-&gt; [(SyntaxExpr idR, ApplicativeArg idL)]
-&gt; Maybe (SyntaxExpr idR)
-&gt; StmtLR idL idR body
</span><a href="GHC.Hs.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-var">ApplicativeStmt</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XApplicativeStmt GhcTc GhcTc (Located (body GhcTc))
</span><a href="#local-6989586621681074611"><span class="hs-identifier hs-var">new_body_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExpr GhcTc, ApplicativeArg GhcTc)]
[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074613"><span class="hs-identifier hs-var">new_args</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681074616"><span class="hs-identifier hs-var">new_mb_join</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1227"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1228"></span><span>    </span><span id="local-6989586621681074615"><span class="annot"><span class="annottext">zonk_join :: ZonkEnv
-&gt; Maybe SyntaxExprTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
</span><a href="#local-6989586621681074615"><span class="hs-identifier hs-var hs-var">zonk_join</span></a></span></span><span> </span><span id="local-6989586621681074607"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074607"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Maybe SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074607"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1229"></span><span>    </span><span class="annot"><a href="#local-6989586621681074615"><span class="hs-identifier hs-var">zonk_join</span></a></span><span> </span><span id="local-6989586621681074606"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074606"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681074605"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074605"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; (ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../base/src/Control.Arrow.html#second"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074606"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074605"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-1230"></span><span>
</span><span id="line-1231"></span><span>    </span><span class="annot"><a href="#local-6989586621681074604"><span class="hs-identifier hs-type">get_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1232"></span><span>    </span><span id="local-6989586621681074604"><span class="annot"><span class="annottext">get_pat :: (SyntaxExpr GhcTc, ApplicativeArg GhcTc) -&gt; LPat GhcTc
</span><a href="#local-6989586621681074604"><span class="hs-identifier hs-var hs-var">get_pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074602"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074602"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074602"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1233"></span><span>    </span><span class="annot"><a href="#local-6989586621681074604"><span class="hs-identifier hs-var">get_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074600"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074600"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074600"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1234"></span><span>
</span><span id="line-1235"></span><span>    </span><span class="annot"><a href="#local-6989586621681074599"><span class="hs-identifier hs-type">replace_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1236"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1237"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1238"></span><span>    </span><span id="local-6989586621681074599"><span class="annot"><span class="annottext">replace_pat :: LPat GhcTc
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
</span><a href="#local-6989586621681074599"><span class="hs-identifier hs-var hs-var">replace_pat</span></a></span></span><span> </span><span id="local-6989586621681074598"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074598"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074597"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074597"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span id="local-6989586621681074596"><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681074596"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074595"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074595"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681074594"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681074594"><span class="hs-identifier hs-var">isBody</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1239"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074597"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
-&gt; LPat GhcTc -&gt; LHsExpr GhcTc -&gt; Bool -&gt; ApplicativeArg GhcTc
forall idL.
XApplicativeArgOne idL
-&gt; LPat idL -&gt; LHsExpr idL -&gt; Bool -&gt; ApplicativeArg idL
</span><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-var">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681074596"><span class="hs-identifier hs-var">fail_op</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074598"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074595"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681074594"><span class="hs-identifier hs-var">isBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1240"></span><span>    </span><span class="annot"><a href="#local-6989586621681074599"><span class="hs-identifier hs-var">replace_pat</span></a></span><span> </span><span id="local-6989586621681074593"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074593"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074592"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074592"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span id="local-6989586621681074591"><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681074591"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074590"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074590"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681074589"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074589"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074588"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681074588"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1241"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074592"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
-&gt; [GuardLStmt GhcTc]
-&gt; HsExpr GhcTc
-&gt; LPat GhcTc
-&gt; HsStmtContext GhcRn
-&gt; ApplicativeArg GhcTc
forall idL.
XApplicativeArgMany idL
-&gt; [ExprLStmt idL]
-&gt; HsExpr idL
-&gt; LPat idL
-&gt; HsStmtContext GhcRn
-&gt; ApplicativeArg idL
</span><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-var">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681074591"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074590"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074589"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074593"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681074588"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1242"></span><span>
</span><span id="line-1243"></span><span>    </span><span id="local-6989586621681074612"><span class="annot"><span class="annottext">zonk_args :: ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681074612"><span class="hs-identifier hs-var hs-var">zonk_args</span></a></span></span><span> </span><span id="local-6989586621681074584"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074584"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074583"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074583"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1244"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074582"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074582"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074581"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074581"><span class="hs-identifier hs-var">new_args_rev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681074580"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074584"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
forall a. [a] -&gt; [a]
</span><a href="../../base/src/GHC.List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074583"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1245"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074578"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074578"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074577"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074577"><span class="hs-identifier hs-var">new_pats</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074582"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((SyntaxExprTc, ApplicativeArg GhcTc)
 -&gt; GenLocated SrcSpan (Pat GhcTc))
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; [GenLocated SrcSpan (Pat GhcTc)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(SyntaxExpr GhcTc, ApplicativeArg GhcTc) -&gt; LPat GhcTc
(SyntaxExprTc, ApplicativeArg GhcTc)
-&gt; GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074604"><span class="hs-identifier hs-var">get_pat</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074583"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1246"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074578"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (GenLocated SrcSpan (Pat GhcTc)
    -&gt; (SyntaxExprTc, ApplicativeArg GhcTc)
    -&gt; (SyntaxExprTc, ApplicativeArg GhcTc))
-&gt; [GenLocated SrcSpan (Pat GhcTc)]
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
forall a b c. String -&gt; (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="GHC.Utils.Misc.html#zipWithEqual"><span class="hs-identifier hs-var">zipWithEqual</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkStmt&quot;</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
-&gt; (SyntaxExprTc, ApplicativeArg GhcTc)
-&gt; (SyntaxExprTc, ApplicativeArg GhcTc)
LPat GhcTc
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
</span><a href="#local-6989586621681074599"><span class="hs-identifier hs-var">replace_pat</span></a></span><span>
</span><span id="line-1247"></span><span>                                        </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074577"><span class="hs-identifier hs-var">new_pats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
forall a. [a] -&gt; [a]
</span><a href="../../base/src/GHC.List.html#reverse"><span class="hs-identifier hs-var">reverse</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074581"><span class="hs-identifier hs-var">new_args_rev</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1248"></span><span>
</span><span id="line-1249"></span><span>     </span><span class="hs-comment">-- these need to go backward, because if any operators are higher-rank,</span><span>
</span><span id="line-1250"></span><span>     </span><span class="hs-comment">-- later operators may introduce skolems that are in scope for earlier</span><span>
</span><span id="line-1251"></span><span>     </span><span class="hs-comment">-- arguments</span><span>
</span><span id="line-1252"></span><span>    </span><span id="local-6989586621681074580"><span class="annot"><span class="annottext">zonk_args_rev :: ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681074580"><span class="hs-identifier hs-var hs-var">zonk_args_rev</span></a></span></span><span> </span><span id="local-6989586621681074570"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074570"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681074569"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074569"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074568"><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681074568"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681074567"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074567"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1253"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074566"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074566"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074565"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074565"><span class="hs-identifier hs-var">new_op</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074570"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074569"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1254"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074564"><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681074564"><span class="hs-identifier hs-var">new_arg</span></a></span></span><span>                </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; ApplicativeArg GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcTc)
</span><a href="#local-6989586621681074563"><span class="hs-identifier hs-var">zonk_arg</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074566"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681074568"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1255"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074562"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074562"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074561"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074561"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
</span><a href="#local-6989586621681074580"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074566"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074567"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1256"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074562"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074565"><span class="hs-identifier hs-var">new_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621681074564"><span class="hs-identifier hs-var">new_arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc, ApplicativeArg GhcTc)
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621681074561"><span class="hs-identifier hs-var">new_args</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1257"></span><span>    </span><span class="annot"><a href="#local-6989586621681074580"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span id="local-6989586621681074560"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074560"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv, [(SyntaxExprTc, ApplicativeArg GhcTc)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074560"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1258"></span><span>
</span><span id="line-1259"></span><span>    </span><span id="local-6989586621681074563"><span class="annot"><span class="annottext">zonk_arg :: ZonkEnv
-&gt; ApplicativeArg GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcTc)
</span><a href="#local-6989586621681074563"><span class="hs-identifier hs-var hs-var">zonk_arg</span></a></span></span><span> </span><span id="local-6989586621681074549"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074549"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span id="local-6989586621681074548"><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681074548"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span> </span><span id="local-6989586621681074547"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074547"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681074546"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074546"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681074545"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681074545"><span class="hs-identifier hs-var">isBody</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1260"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074544"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074544"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074549"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074546"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1261"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074543"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681074543"><span class="hs-identifier hs-var">new_fail</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
-&gt; (SyntaxExprTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprTc)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681074548"><span class="hs-identifier hs-var">fail_op</span></a></span><span> </span><span class="annot"><span class="annottext">((SyntaxExprTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) SyntaxExprTc)
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprTc))
-&gt; (SyntaxExprTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe SyntaxExprTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681074541"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074541"><span class="hs-identifier hs-var">old_fail</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1262"></span><span>              </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074540"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074540"><span class="hs-identifier hs-var">fail'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074549"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074541"><span class="hs-identifier hs-var">old_fail</span></a></span><span>
</span><span id="line-1263"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; IOEnv (Env TcGblEnv TcLclEnv) SyntaxExprTc
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074540"><span class="hs-identifier hs-var">fail'</span></a></span><span>
</span><span id="line-1264"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-1265"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ApplicativeArg GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
-&gt; LPat GhcTc -&gt; LHsExpr GhcTc -&gt; Bool -&gt; ApplicativeArg GhcTc
forall idL.
XApplicativeArgOne idL
-&gt; LPat idL -&gt; LHsExpr idL -&gt; Bool -&gt; ApplicativeArg idL
</span><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-var">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
XApplicativeArgOne GhcTc
</span><a href="#local-6989586621681074543"><span class="hs-identifier hs-var">new_fail</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074547"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074544"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681074545"><span class="hs-identifier hs-var">isBody</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1266"></span><span>    </span><span class="annot"><a href="#local-6989586621681074563"><span class="hs-identifier hs-var">zonk_arg</span></a></span><span> </span><span id="local-6989586621681074539"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074539"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span id="local-6989586621681074538"><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681074538"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074537"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074537"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681074536"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074536"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span id="local-6989586621681074535"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074535"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681074534"><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681074534"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1267"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074533"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074533"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074532"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074532"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; TcM (ZonkEnv, [GuardLStmt GhcTc])
forall (body :: * -&gt; *).
ZonkEnv
-&gt; (ZonkEnv -&gt; Located (body GhcTc) -&gt; TcM (Located (body GhcTc)))
-&gt; [LStmt GhcTc (Located (body GhcTc))]
-&gt; TcM (ZonkEnv, [LStmt GhcTc (Located (body GhcTc))])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074539"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074537"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1268"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074531"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074531"><span class="hs-identifier hs-var">new_ret</span></a></span></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074533"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074536"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-1269"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ApplicativeArg GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ApplicativeArg GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
-&gt; [GuardLStmt GhcTc]
-&gt; HsExpr GhcTc
-&gt; LPat GhcTc
-&gt; HsStmtContext GhcRn
-&gt; ApplicativeArg GhcTc
forall idL.
XApplicativeArgMany idL
-&gt; [ExprLStmt idL]
-&gt; HsExpr idL
-&gt; LPat idL
-&gt; HsStmtContext GhcRn
-&gt; ApplicativeArg idL
</span><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-var">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621681074538"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621681074532"><span class="hs-identifier hs-var">new_stmts</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621681074531"><span class="hs-identifier hs-var">new_ret</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074535"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">HsStmtContext GhcRn
</span><a href="#local-6989586621681074534"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1270"></span><span>
</span><span id="line-1271"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1272"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRecFields"><span class="hs-identifier hs-type">zonkRecFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsRecordBinds"><span class="hs-identifier hs-type">HsRecordBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsRecordBinds"><span class="hs-identifier hs-type">HsRecordBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span id="zonkRecFields"><span class="annot"><span class="annottext">zonkRecFields :: ZonkEnv -&gt; HsRecordBinds GhcTc -&gt; TcM (HsRecordBinds GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecFields"><span class="hs-identifier hs-var hs-var">zonkRecFields</span></a></span></span><span> </span><span id="local-6989586621681074530"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074530"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621681074528"><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681074528"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span id="local-6989586621681074527"><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681074527"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1274"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074526"><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681074526"><span class="hs-identifier hs-var">flds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LHsRecField GhcTc (LHsExpr GhcTc)
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv) (LHsRecField GhcTc (LHsExpr GhcTc)))
-&gt; [LHsRecField GhcTc (LHsExpr GhcTc)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) [LHsRecField GhcTc (LHsExpr GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LHsRecField GhcTc (LHsExpr GhcTc)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (LHsRecField GhcTc (LHsExpr GhcTc))
</span><a href="#local-6989586621681074525"><span class="hs-identifier hs-var">zonk_rbind</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681074528"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-1275"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsRecordBinds GhcTc -&gt; TcM (HsRecordBinds GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
-&gt; Maybe (Located ConTag) -&gt; HsRecordBinds GhcTc
forall p arg.
[LHsRecField p arg] -&gt; Maybe (Located ConTag) -&gt; HsRecFields p arg
</span><a href="GHC.Hs.Pat.html#HsRecFields"><span class="hs-identifier hs-var">HsRecFields</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621681074526"><span class="hs-identifier hs-var">flds'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681074527"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1276"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1277"></span><span>    </span><span id="local-6989586621681074525"><span class="annot"><span class="annottext">zonk_rbind :: LHsRecField GhcTc (LHsExpr GhcTc)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (LHsRecField GhcTc (LHsExpr GhcTc))
</span><a href="#local-6989586621681074525"><span class="hs-identifier hs-var hs-var">zonk_rbind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074524"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074524"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074523"><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074523"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1278"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074522"><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681074522"><span class="hs-identifier hs-var">new_id</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc))
-&gt; Located (FieldOcc GhcTc) -&gt; TcM (Located (FieldOcc GhcTc))
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-var">zonkFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074530"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LHsExpr GhcTc)
-&gt; Located (FieldOcc GhcTc)
forall id arg. HsRecField' id arg -&gt; Located id
</span><a href="GHC.Hs.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074523"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1279"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074520"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074520"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074530"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LHsExpr GhcTc) -&gt; LHsExpr GhcTc
forall id arg. HsRecField' id arg -&gt; arg
</span><a href="GHC.Hs.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var hs-var">hsRecFieldArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074523"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1280"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LHsRecField GhcTc (LHsExpr GhcTc)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (LHsRecField GhcTc (LHsExpr GhcTc))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsRecField' (FieldOcc GhcTc) (LHsExpr GhcTc)
-&gt; LHsRecField GhcTc (LHsExpr GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074524"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (FieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074523"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldLbl :: Located (FieldOcc GhcTc)
</span><a href="GHC.Hs.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681074522"><span class="hs-identifier hs-var">new_id</span></a></span><span>
</span><span id="line-1281"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: LHsExpr GhcTc
</span><a href="GHC.Hs.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074520"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1282"></span><span>
</span><span id="line-1283"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRecUpdFields"><span class="hs-identifier hs-type">zonkRecUpdFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1284"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1285"></span><span id="zonkRecUpdFields"><span class="annot"><span class="annottext">zonkRecUpdFields :: ZonkEnv -&gt; [LHsRecUpdField GhcTc] -&gt; TcM [LHsRecUpdField GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRecUpdFields"><span class="hs-identifier hs-var hs-var">zonkRecUpdFields</span></a></span></span><span> </span><span id="local-6989586621681074518"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074518"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LHsRecUpdField GhcTc
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsRecUpdField GhcTc))
-&gt; [LHsRecUpdField GhcTc] -&gt; TcM [LHsRecUpdField GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LHsRecUpdField GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsRecUpdField GhcTc)
</span><a href="#local-6989586621681074517"><span class="hs-identifier hs-var">zonk_rbind</span></a></span><span>
</span><span id="line-1286"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1287"></span><span>    </span><span id="local-6989586621681074517"><span class="annot"><span class="annottext">zonk_rbind :: LHsRecUpdField GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsRecUpdField GhcTc)
</span><a href="#local-6989586621681074517"><span class="hs-identifier hs-var hs-var">zonk_rbind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074516"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074516"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074515"><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074515"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1288"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074514"><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681074514"><span class="hs-identifier hs-var">new_id</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc))
-&gt; Located (FieldOcc GhcTc) -&gt; TcM (Located (FieldOcc GhcTc))
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; FieldOcc GhcTc -&gt; TcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkFieldOcc"><span class="hs-identifier hs-var">zonkFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074518"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LHsExpr GhcTc)
-&gt; Located (FieldOcc GhcTc)
forall arg.
HsRecField' (AmbiguousFieldOcc GhcTc) arg
-&gt; Located (FieldOcc GhcTc)
</span><a href="GHC.Hs.Pat.html#hsRecUpdFieldOcc"><span class="hs-identifier hs-var">hsRecUpdFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074515"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1289"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074512"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074512"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074518"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LHsExpr GhcTc)
-&gt; LHsExpr GhcTc
forall id arg. HsRecField' id arg -&gt; arg
</span><a href="GHC.Hs.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var hs-var">hsRecFieldArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074515"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1290"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LHsRecUpdField GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LHsRecUpdField GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsRecField' (AmbiguousFieldOcc GhcTc) (LHsExpr GhcTc)
-&gt; LHsRecUpdField GhcTc
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074516"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (AmbiguousFieldOcc GhcTc) (LHsExpr GhcTc)
</span><a href="#local-6989586621681074515"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldLbl :: Located (AmbiguousFieldOcc GhcTc)
</span><a href="GHC.Hs.Pat.html#hsRecFieldLbl"><span class="hs-identifier hs-var">hsRecFieldLbl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcTc -&gt; AmbiguousFieldOcc GhcTc)
-&gt; Located (FieldOcc GhcTc) -&gt; Located (AmbiguousFieldOcc GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcTc -&gt; AmbiguousFieldOcc GhcTc
</span><a href="GHC.Hs.Type.html#ambiguousFieldOcc"><span class="hs-identifier hs-var">ambiguousFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Located (FieldOcc GhcTc)
</span><a href="#local-6989586621681074514"><span class="hs-identifier hs-var">new_id</span></a></span><span>
</span><span id="line-1291"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: LHsExpr GhcTc
</span><a href="GHC.Hs.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074512"><span class="hs-identifier hs-var">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1292"></span><span>
</span><span id="line-1293"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1294"></span><span id="local-6989586621681076960"><span id="local-6989586621681076961"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-type">mapIPNameTc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681076961"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681076960"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsIPName"><span class="hs-identifier hs-type">HsIPName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681076961"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1295"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsIPName"><span class="hs-identifier hs-type">HsIPName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681076960"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1296"></span><span id="mapIPNameTc"><span class="annot"><span class="annottext">mapIPNameTc :: forall a b.
(a -&gt; TcM b)
-&gt; Either (Located HsIPName) a -&gt; TcM (Either (Located HsIPName) b)
</span><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-var hs-var">mapIPNameTc</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TcM b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681074507"><span class="annot"><span class="annottext">Located HsIPName
</span><a href="#local-6989586621681074507"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either (Located HsIPName) b
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Either (Located HsIPName) b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located HsIPName -&gt; Either (Located HsIPName) b
forall a b. a -&gt; Either a b
</span><a href="../../base/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">Located HsIPName
</span><a href="#local-6989586621681074507"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1297"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#mapIPNameTc"><span class="hs-identifier hs-var">mapIPNameTc</span></a></span><span> </span><span id="local-6989586621681074506"><span class="annot"><span class="annottext">a -&gt; TcM b
</span><a href="#local-6989586621681074506"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681074505"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681074505"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074504"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681074504"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; TcM b
</span><a href="#local-6989586621681074506"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681074505"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1298"></span><span>                             </span><span class="annot"><span class="annottext">Either (Located HsIPName) b
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Either (Located HsIPName) b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Either (Located HsIPName) b
forall a b. b -&gt; Either a b
</span><a href="../../base/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681074504"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1299"></span><span>
</span><span id="line-1300"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Pats]{Patterns}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1307"></span><span>
</span><span id="line-1308"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1309"></span><span class="hs-comment">-- Extend the environment as we go, because it's possible for one</span><span>
</span><span id="line-1310"></span><span class="hs-comment">-- pattern to bind something that is used in another (inside or</span><span>
</span><span id="line-1311"></span><span class="hs-comment">-- to the right)</span><span>
</span><span id="line-1312"></span><span id="zonkPat"><span class="annot"><span class="annottext">zonkPat :: ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var hs-var">zonkPat</span></a></span></span><span> </span><span id="local-6989586621681074503"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074503"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074502"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074502"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pat GhcTc -&gt; TcM (ZonkEnv, Pat GhcTc))
-&gt; GenLocated SrcSpan (Pat GhcTc)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (ZonkEnv, GenLocated SrcSpan (Pat GhcTc))
forall a b c. (a -&gt; TcM (b, c)) -&gt; Located a -&gt; TcM (b, Located c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocSndM"><span class="hs-identifier hs-var">wrapLocSndM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Pat GhcTc -&gt; TcM (ZonkEnv, Pat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074503"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074502"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1313"></span><span>
</span><span id="line-1314"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-type">zonk_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1315"></span><span id="zonk_pat"><span class="annot"><span class="annottext">zonk_pat :: ZonkEnv -&gt; Pat GhcTc -&gt; TcM (ZonkEnv, Pat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var hs-var">zonk_pat</span></a></span></span><span> </span><span id="local-6989586621681074500"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074500"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span id="local-6989586621681074499"><span class="annot"><span class="annottext">XParPat GhcTc
</span><a href="#local-6989586621681074499"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074498"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074498"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074497"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074497"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074496"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074496"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074500"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074498"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1317"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074497"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XParPat GhcTc -&gt; LPat GhcTc -&gt; Pat GhcTc
forall p. XParPat p -&gt; LPat p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#ParPat"><span class="hs-identifier hs-var">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcTc
</span><a href="#local-6989586621681074499"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074496"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1318"></span><span>
</span><span id="line-1319"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074495"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074495"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span id="local-6989586621681074494"><span class="annot"><span class="annottext">XWildPat GhcTc
</span><a href="#local-6989586621681074494"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1320"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074493"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074493"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074495"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XWildPat GhcTc
</span><a href="#local-6989586621681074494"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1321"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#ensureNotLevPoly"><span class="hs-identifier hs-var">ensureNotLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074493"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-1322"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In a wildcard pattern&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074495"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XWildPat GhcTc -&gt; Pat GhcTc
forall p. XWildPat p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XWildPat GhcTc
</span><a href="#local-6989586621681074493"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1324"></span><span>
</span><span id="line-1325"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074492"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074492"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span id="local-6989586621681074491"><span class="annot"><span class="annottext">XVarPat GhcTc
</span><a href="#local-6989586621681074491"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074490"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074490"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074489"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681074489"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1326"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074488"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074488"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074492"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681074489"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1327"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074492"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074488"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XVarPat GhcTc -&gt; Located (IdP GhcTc) -&gt; Pat GhcTc
forall p. XVarPat p -&gt; Located (IdP p) -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcTc
</span><a href="#local-6989586621681074491"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074490"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074488"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1328"></span><span>
</span><span id="line-1329"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074487"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074487"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span id="local-6989586621681074486"><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><a href="#local-6989586621681074486"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074485"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074485"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074484"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074484"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074483"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074483"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074487"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074485"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1331"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074484"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">XLazyPat GhcTc -&gt; LPat GhcTc -&gt; Pat GhcTc
forall p. XLazyPat p -&gt; LPat p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#LazyPat"><span class="hs-identifier hs-var">LazyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><a href="#local-6989586621681074486"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074483"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1332"></span><span>
</span><span id="line-1333"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074482"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074482"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span id="local-6989586621681074481"><span class="annot"><span class="annottext">XBangPat GhcTc
</span><a href="#local-6989586621681074481"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074480"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074480"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1334"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074479"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074479"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074478"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074478"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074482"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074480"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1335"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074479"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">XBangPat GhcTc -&gt; LPat GhcTc -&gt; Pat GhcTc
forall p. XBangPat p -&gt; LPat p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#BangPat"><span class="hs-identifier hs-var">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcTc
</span><a href="#local-6989586621681074481"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074478"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1336"></span><span>
</span><span id="line-1337"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074477"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074477"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span id="local-6989586621681074476"><span class="annot"><span class="annottext">XAsPat GhcTc
</span><a href="#local-6989586621681074476"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074475"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074475"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681074474"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681074474"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074473"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074473"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1338"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074472"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074472"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074477"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681074474"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1339"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074471"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074471"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074470"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074470"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074477"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074472"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074473"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1340"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074471"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XAsPat GhcTc -&gt; Located (IdP GhcTc) -&gt; LPat GhcTc -&gt; Pat GhcTc
forall p. XAsPat p -&gt; Located (IdP p) -&gt; LPat p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#AsPat"><span class="hs-identifier hs-var">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat GhcTc
</span><a href="#local-6989586621681074476"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074475"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074472"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074470"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1341"></span><span>
</span><span id="line-1342"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074469"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074469"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span id="local-6989586621681074468"><span class="annot"><span class="annottext">XViewPat GhcTc
</span><a href="#local-6989586621681074468"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681074467"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074467"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681074466"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074466"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074465"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074465"><span class="hs-identifier hs-var">expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074469"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074467"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1344"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074464"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074464"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074463"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074463"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074469"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074466"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1345"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074462"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074462"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074469"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XViewPat GhcTc
</span><a href="#local-6989586621681074468"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1346"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074464"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XViewPat GhcTc -&gt; LHsExpr GhcTc -&gt; LPat GhcTc -&gt; Pat GhcTc
forall p. XViewPat p -&gt; LHsExpr p -&gt; LPat p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#ViewPat"><span class="hs-identifier hs-var">ViewPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XViewPat GhcTc
</span><a href="#local-6989586621681074462"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074465"><span class="hs-identifier hs-var">expr'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074463"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1347"></span><span>
</span><span id="line-1348"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074461"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074461"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span id="local-6989586621681074460"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074460"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Kind, SyntaxExpr GhcTc)
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074459"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074459"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1349"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074458"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074458"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074461"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074460"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1350"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074457"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074457"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074456"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074456"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074461"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074459"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1351"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074457"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XListPat GhcTc -&gt; [LPat GhcTc] -&gt; Pat GhcTc
forall p. XListPat p -&gt; [LPat p] -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Maybe (Kind, SyntaxExpr GhcTc) -&gt; ListPatTc
</span><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-var">ListPatTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074458"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Kind, SyntaxExpr GhcTc)
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
[LPat GhcTc]
</span><a href="#local-6989586621681074456"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1352"></span><span>
</span><span id="line-1353"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074455"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074455"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-type">ListPatTc</span></a></span><span> </span><span id="local-6989586621681074454"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074454"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074453"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074453"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681074452"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074452"><span class="hs-identifier hs-var">wit</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074451"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074451"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1354"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074450"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074450"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074449"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074449"><span class="hs-identifier hs-var">wit'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074455"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074452"><span class="hs-identifier hs-var">wit</span></a></span><span>
</span><span id="line-1355"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074448"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074448"><span class="hs-identifier hs-var">ty2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074450"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074453"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1356"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074447"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074447"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074450"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074454"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1357"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074446"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074446"><span class="hs-identifier hs-var">env''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074445"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074445"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074450"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074451"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1358"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074446"><span class="hs-identifier hs-var">env''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XListPat GhcTc -&gt; [LPat GhcTc] -&gt; Pat GhcTc
forall p. XListPat p -&gt; [LPat p] -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#ListPat"><span class="hs-identifier hs-var">ListPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Maybe (Kind, SyntaxExpr GhcTc) -&gt; ListPatTc
</span><a href="GHC.Hs.Pat.html#ListPatTc"><span class="hs-identifier hs-var">ListPatTc</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074447"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Kind, SyntaxExprTc) -&gt; Maybe (Kind, SyntaxExprTc)
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074448"><span class="hs-identifier hs-var">ty2'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074449"><span class="hs-identifier hs-var">wit'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
[LPat GhcTc]
</span><a href="#local-6989586621681074445"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1359"></span><span>
</span><span id="line-1360"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074444"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074444"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621681074443"><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><a href="#local-6989586621681074443"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681074442"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074442"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621681074441"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681074441"><span class="hs-identifier hs-var">boxed</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1361"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074440"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681074440"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074444"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
XTuplePat GhcTc
</span><a href="#local-6989586621681074443"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1362"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074439"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074439"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074438"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074438"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074444"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074442"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1363"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074439"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XTuplePat GhcTc -&gt; [LPat GhcTc] -&gt; Boxity -&gt; Pat GhcTc
forall p. XTuplePat p -&gt; [LPat p] -&gt; Boxity -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#TuplePat"><span class="hs-identifier hs-var">TuplePat</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XTuplePat GhcTc
</span><a href="#local-6989586621681074440"><span class="hs-identifier hs-var">tys'</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
[LPat GhcTc]
</span><a href="#local-6989586621681074438"><span class="hs-identifier hs-var">pats'</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621681074441"><span class="hs-identifier hs-var">boxed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074437"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074437"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span id="local-6989586621681074436"><span class="annot"><span class="annottext">XSumPat GhcTc
</span><a href="#local-6989586621681074436"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681074435"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074435"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681074434"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681074434"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621681074433"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681074433"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074432"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681074432"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074437"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
XSumPat GhcTc
</span><a href="#local-6989586621681074436"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1367"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074431"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074431"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074430"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074430"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074437"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074435"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1368"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074431"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XSumPat GhcTc -&gt; LPat GhcTc -&gt; ConTag -&gt; ConTag -&gt; Pat GhcTc
forall p. XSumPat p -&gt; LPat p -&gt; ConTag -&gt; ConTag -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#SumPat"><span class="hs-identifier hs-var">SumPat</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XSumPat GhcTc
</span><a href="#local-6989586621681074432"><span class="hs-identifier hs-var">tys'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074430"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681074434"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621681074433"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074429"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074429"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074428"><span class="annot"><span class="annottext">p :: Pat GhcTc
</span><a href="#local-6989586621681074428"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con :: forall p. Pat p -&gt; Located (ConLikeP p)
</span><a href="GHC.Hs.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074427"><span class="annot"><span class="annottext">ConLikeP GhcTc
</span><a href="#local-6989586621681074427"><span class="hs-identifier hs-var">con</span></a></span></span><span>
</span><span id="line-1371"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_args :: forall p. Pat p -&gt; HsConPatDetails p
</span><a href="GHC.Hs.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074425"><span class="annot"><span class="annottext">HsConPatDetails GhcTc
</span><a href="#local-6989586621681074425"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1372"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: forall p. Pat p -&gt; XConPat p
</span><a href="GHC.Hs.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074424"><span class="annot"><span class="annottext">p' :: XConPat GhcTc
</span><a href="#local-6989586621681074424"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ConPatTc"><span class="hs-identifier hs-type">ConPatTc</span></a></span><span>
</span><span id="line-1373"></span><span>                         </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cpt_tvs :: ConPatTc -&gt; [Id]
</span><a href="GHC.Hs.Pat.html#cpt_tvs"><span class="hs-identifier hs-var">cpt_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074422"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074422"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span>
</span><span id="line-1374"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_dicts :: ConPatTc -&gt; [Id]
</span><a href="GHC.Hs.Pat.html#cpt_dicts"><span class="hs-identifier hs-var">cpt_dicts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074420"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074420"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-1375"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_binds :: ConPatTc -&gt; TcEvBinds
</span><a href="GHC.Hs.Pat.html#cpt_binds"><span class="hs-identifier hs-var">cpt_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074418"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074418"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-1376"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_wrap :: ConPatTc -&gt; HsWrapper
</span><a href="GHC.Hs.Pat.html#cpt_wrap"><span class="hs-identifier hs-var">cpt_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074416"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074416"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span>
</span><span id="line-1377"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_arg_tys :: ConPatTc -&gt; [Kind]
</span><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074415"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681074415"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-1378"></span><span>                         </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1379"></span><span>                       </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1380"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">all</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">tyvars</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1381"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074414"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681074414"><span class="hs-identifier hs-var">new_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074429"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681074415"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1382"></span><span>
</span><span id="line-1383"></span><span>          </span><span class="hs-comment">-- an unboxed tuple pattern (but only an unboxed tuple pattern)</span><span>
</span><span id="line-1384"></span><span>          </span><span class="hs-comment">-- might have levity-polymorphic arguments. Check for this badness.</span><span>
</span><span id="line-1385"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConLikeP GhcTc
</span><a href="#local-6989586621681074427"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1386"></span><span>            </span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621681074412"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681074412"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-1387"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isUnboxedTupleTyCon"><span class="hs-identifier hs-var">isUnboxedTupleTyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TcTyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681074412"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1388"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; TcM ()) -&gt; [Kind] -&gt; TcM ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base/src/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Kind -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#checkForLevPoly"><span class="hs-identifier hs-var">checkForLevPoly</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681074407"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Kind] -&gt; [Kind]
</span><a href="GHC.Core.Type.html#dropRuntimeRepArgs"><span class="hs-identifier hs-var">dropRuntimeRepArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681074414"><span class="hs-identifier hs-var">new_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1389"></span><span>            </span><span class="annot"><span class="annottext">ConLikeP GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074405"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074405"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074404"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074404"><span class="hs-identifier hs-var">new_tyvars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074429"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074422"><span class="hs-identifier hs-var">tyvars</span></a></span><span>
</span><span id="line-1392"></span><span>          </span><span class="hs-comment">-- Must zonk the existential variables, because their</span><span>
</span><span id="line-1393"></span><span>          </span><span class="hs-comment">-- /kind/ need potential zonking.</span><span>
</span><span id="line-1394"></span><span>          </span><span class="hs-comment">-- cf typecheck/should_compile/tc221.hs</span><span>
</span><span id="line-1395"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074403"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074403"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074402"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074402"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074405"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074420"><span class="hs-identifier hs-var">evs</span></a></span><span>
</span><span id="line-1396"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074401"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074401"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074400"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074400"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074403"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074418"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1397"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074399"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074399"><span class="hs-identifier hs-var">env3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074398"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074398"><span class="hs-identifier hs-var">new_wrapper</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074401"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074416"><span class="hs-identifier hs-var">wrapper</span></a></span><span>
</span><span id="line-1398"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074397"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074397"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074396"><span class="annot"><span class="annottext">HsConDetails
  (GenLocated SrcSpan (Pat GhcTc))
  (HsRecFields GhcTc (GenLocated SrcSpan (Pat GhcTc)))
</span><a href="#local-6989586621681074396"><span class="hs-identifier hs-var">new_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; HsConPatDetails GhcTc -&gt; TcM (ZonkEnv, HsConPatDetails GhcTc)
forall id.
ZonkEnv
-&gt; HsConDetails (LPat GhcTc) (HsRecFields id (LPat GhcTc))
-&gt; TcM
     (ZonkEnv, HsConDetails (LPat GhcTc) (HsRecFields id (LPat GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074399"><span class="hs-identifier hs-var">env3</span></a></span><span> </span><span class="annot"><span class="annottext">HsConPatDetails GhcTc
</span><a href="#local-6989586621681074425"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1399"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074397"><span class="hs-identifier hs-var">env'</span></a></span><span>
</span><span id="line-1400"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681074428"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1401"></span><span>                 </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_args :: HsConPatDetails GhcTc
</span><a href="GHC.Hs.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsConDetails
  (GenLocated SrcSpan (Pat GhcTc))
  (HsRecFields GhcTc (GenLocated SrcSpan (Pat GhcTc)))
HsConPatDetails GhcTc
</span><a href="#local-6989586621681074396"><span class="hs-identifier hs-var">new_args</span></a></span><span>
</span><span id="line-1402"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: XConPat GhcTc
</span><a href="GHC.Hs.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XConPat GhcTc
ConPatTc
</span><a href="#local-6989586621681074424"><span class="hs-identifier hs-var">p'</span></a></span><span>
</span><span id="line-1403"></span><span>                   </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cpt_arg_tys :: [Kind]
</span><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681074414"><span class="hs-identifier hs-var">new_tys</span></a></span><span>
</span><span id="line-1404"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_tvs :: [Id]
</span><a href="GHC.Hs.Pat.html#cpt_tvs"><span class="hs-identifier hs-var">cpt_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074404"><span class="hs-identifier hs-var">new_tyvars</span></a></span><span>
</span><span id="line-1405"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_dicts :: [Id]
</span><a href="GHC.Hs.Pat.html#cpt_dicts"><span class="hs-identifier hs-var">cpt_dicts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074402"><span class="hs-identifier hs-var">new_evs</span></a></span><span>
</span><span id="line-1406"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_binds :: TcEvBinds
</span><a href="GHC.Hs.Pat.html#cpt_binds"><span class="hs-identifier hs-var">cpt_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074400"><span class="hs-identifier hs-var">new_binds</span></a></span><span>
</span><span id="line-1407"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_wrap :: HsWrapper
</span><a href="GHC.Hs.Pat.html#cpt_wrap"><span class="hs-identifier hs-var">cpt_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074398"><span class="hs-identifier hs-var">new_wrapper</span></a></span><span>
</span><span id="line-1408"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1409"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-1410"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-1411"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1412"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1413"></span><span>    </span><span id="local-6989586621681074407"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621681074407"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the type of an element of an unboxed tuple pattern:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681074428"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1414"></span><span>
</span><span id="line-1415"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074393"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074393"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span id="local-6989586621681074392"><span class="annot"><span class="annottext">XLitPat GhcTc
</span><a href="#local-6989586621681074392"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681074391"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681074391"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074393"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XLitPat GhcTc -&gt; HsLit GhcTc -&gt; Pat GhcTc
forall p. XLitPat p -&gt; HsLit p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#LitPat"><span class="hs-identifier hs-var">LitPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLitPat GhcTc
</span><a href="#local-6989586621681074392"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621681074391"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span>
</span><span id="line-1417"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074390"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074390"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span id="local-6989586621681074389"><span class="annot"><span class="annottext">XSigPat GhcTc
</span><a href="#local-6989586621681074389"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681074388"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074388"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681074387"><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681074387"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1418"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074386"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074386"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074390"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XSigPat GhcTc
</span><a href="#local-6989586621681074389"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1419"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074385"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074385"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074384"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074384"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074390"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074388"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1420"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074385"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XSigPat GhcTc
-&gt; LPat GhcTc -&gt; HsPatSigType (NoGhcTc GhcTc) -&gt; Pat GhcTc
forall p. XSigPat p -&gt; LPat p -&gt; HsPatSigType (NoGhcTc p) -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#SigPat"><span class="hs-identifier hs-var">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XSigPat GhcTc
</span><a href="#local-6989586621681074386"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
LPat GhcTc
</span><a href="#local-6989586621681074384"><span class="hs-identifier hs-var">pat'</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><a href="#local-6989586621681074387"><span class="hs-identifier hs-var">hs_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1421"></span><span>
</span><span id="line-1422"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074383"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074383"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span id="local-6989586621681074382"><span class="annot"><span class="annottext">XNPat GhcTc
</span><a href="#local-6989586621681074382"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074381"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074381"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074380"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074380"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074379"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681074379"><span class="hs-identifier hs-var">mb_neg</span></a></span></span><span> </span><span id="local-6989586621681074378"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074378"><span class="hs-identifier hs-var">eq_expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1423"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074377"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074377"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074376"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074376"><span class="hs-identifier hs-var">eq_expr'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074383"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074378"><span class="hs-identifier hs-var">eq_expr</span></a></span><span>
</span><span id="line-1424"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074375"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074375"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074374"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621681074374"><span class="hs-identifier hs-var">mb_neg'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621681074379"><span class="hs-identifier hs-var">mb_neg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1425"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Maybe SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074377"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1426"></span><span>            </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681074373"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074373"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; (ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc)
forall (a :: * -&gt; * -&gt; *) b c d.
Arrow a =&gt;
a b c -&gt; a (d, b) (d, c)
</span><a href="../../base/src/Control.Arrow.html#second"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv, SyntaxExprTc) -&gt; (ZonkEnv, Maybe SyntaxExprTc))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, SyntaxExprTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074377"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074373"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1427"></span><span>
</span><span id="line-1428"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074372"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074372"><span class="hs-identifier hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074375"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074380"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1429"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074371"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074371"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074375"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XNPat GhcTc
</span><a href="#local-6989586621681074382"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1430"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074375"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XNPat GhcTc
-&gt; Located (HsOverLit GhcTc)
-&gt; Maybe (SyntaxExpr GhcTc)
-&gt; SyntaxExpr GhcTc
-&gt; Pat GhcTc
forall p.
XNPat p
-&gt; Located (HsOverLit p)
-&gt; Maybe (SyntaxExpr p)
-&gt; SyntaxExpr p
-&gt; Pat p
</span><a href="GHC.Hs.Pat.html#NPat"><span class="hs-identifier hs-var">NPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XNPat GhcTc
</span><a href="#local-6989586621681074371"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsOverLit GhcTc -&gt; Located (HsOverLit GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074381"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074372"><span class="hs-identifier hs-var">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621681074374"><span class="hs-identifier hs-var">mb_neg'</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074376"><span class="hs-identifier hs-var">eq_expr'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1431"></span><span>
</span><span id="line-1432"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074370"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074370"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span id="local-6989586621681074369"><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><a href="#local-6989586621681074369"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074368"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074368"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681074367"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681074367"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074366"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074366"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074365"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074365"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074364"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074364"><span class="hs-identifier hs-var">lit2</span></a></span></span><span> </span><span id="local-6989586621681074363"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074363"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681074362"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074362"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1433"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074361"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074361"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074360"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074360"><span class="hs-identifier hs-var">e1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074370"><span class="hs-identifier hs-var">env</span></a></span><span>  </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074363"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1434"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074359"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074359"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074358"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621681074358"><span class="hs-identifier hs-var">e2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; SyntaxExpr GhcTc -&gt; TcM (ZonkEnv, SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074361"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621681074362"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1435"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074357"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074357"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074359"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681074367"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1436"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074356"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074356"><span class="hs-identifier hs-var">lit1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074359"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074365"><span class="hs-identifier hs-var">lit1</span></a></span><span>
</span><span id="line-1437"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074355"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074355"><span class="hs-identifier hs-var">lit2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsOverLit GhcTc -&gt; TcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074359"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074364"><span class="hs-identifier hs-var">lit2</span></a></span><span>
</span><span id="line-1438"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074354"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074354"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074359"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XNPlusKPat GhcTc
</span><a href="#local-6989586621681074369"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1439"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074359"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074357"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1440"></span><span>                  </span><span class="annot"><span class="annottext">XNPlusKPat GhcTc
-&gt; Located (IdP GhcTc)
-&gt; Located (HsOverLit GhcTc)
-&gt; HsOverLit GhcTc
-&gt; SyntaxExpr GhcTc
-&gt; SyntaxExpr GhcTc
-&gt; Pat GhcTc
forall p.
XNPlusKPat p
-&gt; Located (IdP p)
-&gt; Located (HsOverLit p)
-&gt; HsOverLit p
-&gt; SyntaxExpr p
-&gt; SyntaxExpr p
-&gt; Pat p
</span><a href="GHC.Hs.Pat.html#NPlusKPat"><span class="hs-identifier hs-var">NPlusKPat</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XNPlusKPat GhcTc
</span><a href="#local-6989586621681074354"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074368"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074357"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsOverLit GhcTc -&gt; Located (HsOverLit GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074366"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074356"><span class="hs-identifier hs-var">lit1'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621681074355"><span class="hs-identifier hs-var">lit2'</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074360"><span class="hs-identifier hs-var">e1'</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621681074358"><span class="hs-identifier hs-var">e2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1441"></span><span>
</span><span id="line-1442"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621681074353"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074353"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-type">CoPat</span></a></span><span> </span><span id="local-6989586621681074352"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074352"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621681074351"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681074351"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681074350"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074350"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1443"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074349"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074349"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074348"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074348"><span class="hs-identifier hs-var">co_fn'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; HsWrapper -&gt; TcM (ZonkEnv, HsWrapper)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074353"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074352"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-1444"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074347"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074347"><span class="hs-identifier hs-var">env''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074346"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074346"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074349"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcTc -&gt; GenLocated SrcSpan (Pat GhcTc)
forall e. e -&gt; Located e
</span><a href="GHC.Types.SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681074351"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1445"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074344"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074344"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074347"><span class="hs-identifier hs-var">env''</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074350"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1446"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Pat GhcTc) -&gt; TcM (ZonkEnv, Pat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074347"><span class="hs-identifier hs-var">env''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XXPat GhcTc -&gt; Pat GhcTc
forall p. XXPat p -&gt; Pat p
</span><a href="GHC.Hs.Pat.html#XPat"><span class="hs-identifier hs-var">XPat</span></a></span><span> </span><span class="annot"><span class="annottext">(XXPat GhcTc -&gt; Pat GhcTc) -&gt; XXPat GhcTc -&gt; Pat GhcTc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; Pat GhcTc -&gt; Kind -&gt; CoPat
</span><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-var">CoPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621681074348"><span class="hs-identifier hs-var">co_fn'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc) -&gt; Pat GhcTc
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074346"><span class="hs-identifier hs-var">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074344"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074343"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681074343"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM (ZonkEnv, Pat GhcTc)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonk_pat&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621681074343"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1450"></span><span>
</span><span id="line-1451"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1452"></span><span id="local-6989586621681076626"><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-type">zonkConStuff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span>
</span><span id="line-1453"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsConDetails"><span class="hs-identifier hs-type">HsConDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681076626"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1455"></span><span>                    </span><span class="annot"><a href="GHC.Hs.Type.html#HsConDetails"><span class="hs-identifier hs-type">HsConDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681076626"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1456"></span><span id="zonkConStuff"><span class="annot"><span class="annottext">zonkConStuff :: forall id.
ZonkEnv
-&gt; HsConDetails (LPat GhcTc) (HsRecFields id (LPat GhcTc))
-&gt; TcM
     (ZonkEnv, HsConDetails (LPat GhcTc) (HsRecFields id (LPat GhcTc)))
</span><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var hs-var">zonkConStuff</span></a></span></span><span> </span><span id="local-6989586621681074335"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074335"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span id="local-6989586621681074334"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074334"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074333"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074333"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074332"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074332"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074335"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074334"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1458"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv,
 HsConDetails
   (GenLocated SrcSpan (Pat GhcTc))
   (HsRecFields id (GenLocated SrcSpan (Pat GhcTc))))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv,
      HsConDetails
        (GenLocated SrcSpan (Pat GhcTc))
        (HsRecFields id (GenLocated SrcSpan (Pat GhcTc))))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074333"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
-&gt; HsConDetails
     (GenLocated SrcSpan (Pat GhcTc))
     (HsRecFields id (GenLocated SrcSpan (Pat GhcTc)))
forall arg rec. [arg] -&gt; HsConDetails arg rec
</span><a href="GHC.Hs.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074332"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1459"></span><span>
</span><span id="line-1460"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span id="local-6989586621681074331"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074331"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621681074330"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074330"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621681074329"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074329"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1461"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074328"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074328"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074327"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074327"><span class="hs-identifier hs-var">p1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074331"><span class="hs-identifier hs-var">env</span></a></span><span>  </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074330"><span class="hs-identifier hs-var">p1</span></a></span><span>
</span><span id="line-1462"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074326"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074326"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074325"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074325"><span class="hs-identifier hs-var">p2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074328"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074329"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-1463"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv,
 HsConDetails
   (GenLocated SrcSpan (Pat GhcTc))
   (HsRecFields id (GenLocated SrcSpan (Pat GhcTc))))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv,
      HsConDetails
        (GenLocated SrcSpan (Pat GhcTc))
        (HsRecFields id (GenLocated SrcSpan (Pat GhcTc))))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074326"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
-&gt; GenLocated SrcSpan (Pat GhcTc)
-&gt; HsConDetails
     (GenLocated SrcSpan (Pat GhcTc))
     (HsRecFields id (GenLocated SrcSpan (Pat GhcTc)))
forall arg rec. arg -&gt; arg -&gt; HsConDetails arg rec
</span><a href="GHC.Hs.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074327"><span class="hs-identifier hs-var">p1'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074325"><span class="hs-identifier hs-var">p2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1464"></span><span>
</span><span id="line-1465"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span id="local-6989586621681074324"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074324"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621681074323"><span class="annot"><span class="annottext">[LHsRecField id (LPat GhcTc)]
</span><a href="#local-6989586621681074323"><span class="hs-identifier hs-var">rpats</span></a></span></span><span> </span><span id="local-6989586621681074322"><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681074322"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1466"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074321"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074321"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074320"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074320"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074324"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated
   SrcSpan
   (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))
 -&gt; GenLocated SrcSpan (Pat GhcTc))
-&gt; [GenLocated
      SrcSpan
      (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
-&gt; [GenLocated SrcSpan (Pat GhcTc)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc))
-&gt; GenLocated SrcSpan (Pat GhcTc)
forall id arg. HsRecField' id arg -&gt; arg
</span><a href="GHC.Hs.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var hs-var">hsRecFieldArg</span></a></span><span> </span><span class="annot"><span class="annottext">(HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc))
 -&gt; GenLocated SrcSpan (Pat GhcTc))
-&gt; (GenLocated
      SrcSpan
      (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))
    -&gt; HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))
-&gt; GenLocated
     SrcSpan
     (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))
-&gt; GenLocated SrcSpan (Pat GhcTc)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpan
  (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))
-&gt; HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc))
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpan
   (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
[LHsRecField id (LPat GhcTc)]
</span><a href="#local-6989586621681074323"><span class="hs-identifier hs-var">rpats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1467"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074319"><span class="annot"><span class="annottext">rpats' :: [GenLocated
   SrcSpan
   (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
</span><a href="#local-6989586621681074319"><span class="hs-identifier hs-var hs-var">rpats'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpan
   (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))
 -&gt; GenLocated SrcSpan (Pat GhcTc)
 -&gt; GenLocated
      SrcSpan
      (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc))))
-&gt; [GenLocated
      SrcSpan
      (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
-&gt; [GenLocated SrcSpan (Pat GhcTc)]
-&gt; [GenLocated
      SrcSpan
      (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../../base/src/GHC.List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074317"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074317"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681074316"><span class="annot"><span class="annottext">HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc))
</span><a href="#local-6989586621681074316"><span class="hs-identifier hs-var">rp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074315"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074315"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1468"></span><span>                                  </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc))
-&gt; GenLocated
     SrcSpan
     (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074317"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc))
</span><a href="#local-6989586621681074316"><span class="hs-identifier hs-var">rp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsRecFieldArg :: GenLocated SrcSpan (Pat GhcTc)
</span><a href="GHC.Hs.Pat.html#hsRecFieldArg"><span class="hs-identifier hs-var">hsRecFieldArg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074315"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1469"></span><span>                               </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpan
   (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
[LHsRecField id (LPat GhcTc)]
</span><a href="#local-6989586621681074323"><span class="hs-identifier hs-var">rpats</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074320"><span class="hs-identifier hs-var">pats'</span></a></span><span>
</span><span id="line-1470"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv,
 HsConDetails
   (GenLocated SrcSpan (Pat GhcTc))
   (HsRecFields id (GenLocated SrcSpan (Pat GhcTc))))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (ZonkEnv,
      HsConDetails
        (GenLocated SrcSpan (Pat GhcTc))
        (HsRecFields id (GenLocated SrcSpan (Pat GhcTc))))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074321"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsRecFields id (GenLocated SrcSpan (Pat GhcTc))
-&gt; HsConDetails
     (GenLocated SrcSpan (Pat GhcTc))
     (HsRecFields id (GenLocated SrcSpan (Pat GhcTc)))
forall arg rec. rec -&gt; HsConDetails arg rec
</span><a href="GHC.Hs.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpan
   (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
-&gt; Maybe (Located ConTag)
-&gt; HsRecFields id (GenLocated SrcSpan (Pat GhcTc))
forall p arg.
[LHsRecField p arg] -&gt; Maybe (Located ConTag) -&gt; HsRecFields p arg
</span><a href="GHC.Hs.Pat.html#HsRecFields"><span class="hs-identifier hs-var">HsRecFields</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpan
   (HsRecField' (FieldOcc id) (GenLocated SrcSpan (Pat GhcTc)))]
</span><a href="#local-6989586621681074319"><span class="hs-identifier hs-var">rpats'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Located ConTag)
</span><a href="#local-6989586621681074322"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1471"></span><span>        </span><span class="hs-comment">-- Field selectors have declared types; hence no zonking</span><span>
</span><span id="line-1472"></span><span>
</span><span id="line-1473"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1474"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-type">zonkPats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1475"></span><span id="zonkPats"><span class="annot"><span class="annottext">zonkPats :: ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var hs-var">zonkPats</span></a></span></span><span> </span><span id="local-6989586621681074314"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074314"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [GenLocated SrcSpan (Pat GhcTc)])
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (ZonkEnv, [GenLocated SrcSpan (Pat GhcTc)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074314"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1476"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span id="local-6989586621681074313"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074313"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074312"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074312"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681074311"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074311"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074310"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074310"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074309"><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074309"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LPat GhcTc -&gt; TcM (ZonkEnv, LPat GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074313"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621681074312"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1477"></span><span>                             </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074308"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074308"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074307"><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074307"><span class="hs-identifier hs-var">pats'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [LPat GhcTc] -&gt; TcM (ZonkEnv, [LPat GhcTc])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074310"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621681074311"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1478"></span><span>                             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [GenLocated SrcSpan (Pat GhcTc)])
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv) (ZonkEnv, [GenLocated SrcSpan (Pat GhcTc)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074308"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
</span><a href="#local-6989586621681074309"><span class="hs-identifier hs-var">pat'</span></a></span><span class="annot"><span class="annottext">GenLocated SrcSpan (Pat GhcTc)
-&gt; [GenLocated SrcSpan (Pat GhcTc)]
-&gt; [GenLocated SrcSpan (Pat GhcTc)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[GenLocated SrcSpan (Pat GhcTc)]
</span><a href="#local-6989586621681074307"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1479"></span><span>
</span><span id="line-1480"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Foreign]{Foreign exports}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1487"></span><span>
</span><span id="line-1488"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExports"><span class="hs-identifier hs-type">zonkForeignExports</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1489"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1490"></span><span id="zonkForeignExports"><span class="annot"><span class="annottext">zonkForeignExports :: ZonkEnv -&gt; [LForeignDecl GhcTc] -&gt; TcM [LForeignDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExports"><span class="hs-identifier hs-var hs-var">zonkForeignExports</span></a></span></span><span> </span><span id="local-6989586621681074306"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074306"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074305"><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681074305"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LForeignDecl GhcTc
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LForeignDecl GhcTc))
-&gt; [LForeignDecl GhcTc] -&gt; TcM [LForeignDecl GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ForeignDecl GhcTc -&gt; TcM (ForeignDecl GhcTc))
-&gt; LForeignDecl GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LForeignDecl GhcTc)
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; ForeignDecl GhcTc -&gt; TcM (ForeignDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-var">zonkForeignExport</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074306"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621681074305"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-type">zonkForeignExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1493"></span><span id="zonkForeignExport"><span class="annot"><span class="annottext">zonkForeignExport :: ZonkEnv -&gt; ForeignDecl GhcTc -&gt; TcM (ForeignDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-var hs-var">zonkForeignExport</span></a></span></span><span> </span><span id="local-6989586621681074303"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074303"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_name :: forall pass. ForeignDecl pass -&gt; Located (IdP pass)
</span><a href="GHC.Hs.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074300"><span class="annot"><span class="annottext">Located (IdP GhcTc)
</span><a href="#local-6989586621681074300"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_e_ext :: forall pass. ForeignDecl pass -&gt; XForeignExport pass
</span><a href="GHC.Hs.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074298"><span class="annot"><span class="annottext">XForeignExport GhcTc
</span><a href="#local-6989586621681074298"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-1494"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: forall pass. ForeignDecl pass -&gt; ForeignExport
</span><a href="GHC.Hs.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074296"><span class="annot"><span class="annottext">ForeignExport
</span><a href="#local-6989586621681074296"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1495"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcTc -&gt; TcM (ForeignDecl GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignExport :: forall pass.
XForeignExport pass
-&gt; Located (IdP pass)
-&gt; LHsSigType pass
-&gt; ForeignExport
-&gt; ForeignDecl pass
</span><a href="GHC.Hs.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_name :: Located (IdP GhcTc)
</span><a href="GHC.Hs.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; GenLocated SrcSpan Id -&gt; GenLocated SrcSpan Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074303"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Id
Located (IdP GhcTc)
</span><a href="#local-6989586621681074300"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1496"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: LHsSigType GhcTc
</span><a href="GHC.Hs.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcTc
forall a. HasCallStack =&gt; a
</span><a href="../../base/src/GHC.Err.html#undefined"><span class="hs-identifier hs-var">undefined</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_e_ext :: XForeignExport GhcTc
</span><a href="GHC.Hs.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XForeignExport GhcTc
</span><a href="#local-6989586621681074298"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1497"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: ForeignExport
</span><a href="GHC.Hs.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignExport
</span><a href="#local-6989586621681074296"><span class="hs-identifier hs-var">spec</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1498"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkForeignExport"><span class="hs-identifier hs-var">zonkForeignExport</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681074293"><span class="annot"><span class="annottext">ForeignDecl GhcTc
</span><a href="#local-6989586621681074293"><span class="hs-identifier hs-var">for_imp</span></a></span></span><span>
</span><span id="line-1499"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcTc -&gt; TcM (ForeignDecl GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcTc
</span><a href="#local-6989586621681074293"><span class="hs-identifier hs-var">for_imp</span></a></span><span>     </span><span class="hs-comment">-- Foreign imports don't need zonking</span><span>
</span><span id="line-1500"></span><span>
</span><span id="line-1501"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRules"><span class="hs-identifier hs-type">zonkRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1502"></span><span id="zonkRules"><span class="annot"><span class="annottext">zonkRules :: ZonkEnv -&gt; [LRuleDecl GhcTc] -&gt; TcM [LRuleDecl GhcTc]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRules"><span class="hs-identifier hs-var hs-var">zonkRules</span></a></span></span><span> </span><span id="local-6989586621681074292"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074292"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074291"><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681074291"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LRuleDecl GhcTc
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LRuleDecl GhcTc))
-&gt; [LRuleDecl GhcTc] -&gt; TcM [LRuleDecl GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc))
-&gt; LRuleDecl GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LRuleDecl GhcTc)
forall a b. (a -&gt; TcM b) -&gt; Located a -&gt; TcM (Located b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocM"><span class="hs-identifier hs-var">wrapLocM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRule"><span class="hs-identifier hs-var">zonkRule</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074292"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621681074291"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-1503"></span><span>
</span><span id="line-1504"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkRule"><span class="hs-identifier hs-type">zonkRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1505"></span><span id="zonkRule"><span class="annot"><span class="annottext">zonkRule :: ZonkEnv -&gt; RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkRule"><span class="hs-identifier hs-var hs-var">zonkRule</span></a></span></span><span> </span><span id="local-6989586621681074289"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074289"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074288"><span class="annot"><span class="annottext">rule :: RuleDecl GhcTc
</span><a href="#local-6989586621681074288"><span class="hs-identifier hs-var">rule</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#HsRule"><span class="hs-identifier hs-type">HsRule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rd_tmvs :: forall pass. RuleDecl pass -&gt; [LRuleBndr pass]
</span><a href="GHC.Hs.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074285"><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
</span><a href="#local-6989586621681074285"><span class="hs-identifier hs-var">tm_bndrs</span></a></span></span><span class="hs-comment">{-::[RuleBndr TcId]-}</span><span>
</span><span id="line-1506"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_lhs :: forall pass. RuleDecl pass -&gt; Located (HsExpr pass)
</span><a href="GHC.Hs.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074283"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074283"><span class="hs-identifier hs-var">lhs</span></a></span></span><span>
</span><span id="line-1507"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_rhs :: forall pass. RuleDecl pass -&gt; Located (HsExpr pass)
</span><a href="GHC.Hs.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074281"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074281"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1508"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074280"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074280"><span class="hs-identifier hs-var">env_inside</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074279"><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
</span><a href="#local-6989586621681074279"><span class="hs-identifier hs-var">new_tm_bndrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv
 -&gt; LRuleBndr GhcTc
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, LRuleBndr GhcTc))
-&gt; ZonkEnv
-&gt; [LRuleBndr GhcTc]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [LRuleBndr GhcTc])
forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; LRuleBndr GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, LRuleBndr GhcTc)
</span><a href="#local-6989586621681074278"><span class="hs-identifier hs-var">zonk_tm_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074289"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
</span><a href="#local-6989586621681074285"><span class="hs-identifier hs-var">tm_bndrs</span></a></span><span>
</span><span id="line-1509"></span><span>
</span><span id="line-1510"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074277"><span class="annot"><span class="annottext">env_lhs :: ZonkEnv
</span><a href="#local-6989586621681074277"><span class="hs-identifier hs-var hs-var">env_lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; ZonkFlexi -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#setZonkType"><span class="hs-identifier hs-var">setZonkType</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074280"><span class="hs-identifier hs-var">env_inside</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span><span>
</span><span id="line-1511"></span><span>              </span><span class="hs-comment">-- See Note [Zonking the LHS of a RULE]</span><span>
</span><span id="line-1512"></span><span>
</span><span id="line-1513"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074276"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074276"><span class="hs-identifier hs-var">new_lhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074277"><span class="hs-identifier hs-var">env_lhs</span></a></span><span>    </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074283"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1514"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074275"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074275"><span class="hs-identifier hs-var">new_rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074280"><span class="hs-identifier hs-var">env_inside</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074281"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1515"></span><span>
</span><span id="line-1516"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc))
-&gt; RuleDecl GhcTc -&gt; TcM (RuleDecl GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RuleDecl GhcTc
</span><a href="#local-6989586621681074288"><span class="hs-identifier hs-var">rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rd_tmvs :: [LRuleBndr GhcTc]
</span><a href="GHC.Hs.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
</span><a href="#local-6989586621681074279"><span class="hs-identifier hs-var">new_tm_bndrs</span></a></span><span>
</span><span id="line-1517"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_lhs :: LHsExpr GhcTc
</span><a href="GHC.Hs.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074276"><span class="hs-identifier hs-var">new_lhs</span></a></span><span>
</span><span id="line-1518"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_rhs :: LHsExpr GhcTc
</span><a href="GHC.Hs.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621681074275"><span class="hs-identifier hs-var">new_rhs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1519"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1520"></span><span>   </span><span class="annot"><a href="#local-6989586621681074278"><span class="hs-identifier hs-type">zonk_tm_bndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1521"></span><span>   </span><span id="local-6989586621681074278"><span class="annot"><span class="annottext">zonk_tm_bndr :: ZonkEnv
-&gt; LRuleBndr GhcTc
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, LRuleBndr GhcTc)
</span><a href="#local-6989586621681074278"><span class="hs-identifier hs-var hs-var">zonk_tm_bndr</span></a></span></span><span> </span><span id="local-6989586621681074274"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074274"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074273"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074273"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#RuleBndr"><span class="hs-identifier hs-type">RuleBndr</span></a></span><span> </span><span id="local-6989586621681074271"><span class="annot"><span class="annottext">XCRuleBndr GhcTc
</span><a href="#local-6989586621681074271"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681074270"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074270"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621681074269"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621681074269"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074268"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074268"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074267"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074267"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="#local-6989586621681074266"><span class="hs-identifier hs-var">zonk_it</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074274"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
IdP GhcTc
</span><a href="#local-6989586621681074269"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1523"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, LRuleBndr GhcTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, LRuleBndr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074268"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; RuleBndr GhcTc -&gt; LRuleBndr GhcTc
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074273"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCRuleBndr GhcTc -&gt; Located (IdP GhcTc) -&gt; RuleBndr GhcTc
forall pass. XCRuleBndr pass -&gt; Located (IdP pass) -&gt; RuleBndr pass
</span><a href="GHC.Hs.Decls.html#RuleBndr"><span class="hs-identifier hs-var">RuleBndr</span></a></span><span> </span><span class="annot"><span class="annottext">XCRuleBndr GhcTc
</span><a href="#local-6989586621681074271"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; GenLocated SrcSpan Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681074270"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074267"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1524"></span><span>   </span><span class="annot"><a href="#local-6989586621681074278"><span class="hs-identifier hs-var">zonk_tm_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#RuleBndrSig"><span class="hs-identifier hs-type">RuleBndrSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, LRuleBndr GhcTc)
forall a. String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonk_tm_bndr RuleBndrSig&quot;</span></span><span>
</span><span id="line-1525"></span><span>
</span><span id="line-1526"></span><span>   </span><span id="local-6989586621681074266"><span class="annot"><span class="annottext">zonk_it :: ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="#local-6989586621681074266"><span class="hs-identifier hs-var hs-var">zonk_it</span></a></span></span><span> </span><span id="local-6989586621681074262"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074262"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074261"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074261"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-1527"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074261"><span class="hs-identifier hs-var">v</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074260"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074260"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074262"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074261"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1528"></span><span>                       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Id) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074262"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074260"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074260"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1529"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isImmutableTyVar</span><span> </span><span class="hs-identifier">v</span><span class="hs-special">)</span><span>
</span><span id="line-1530"></span><span>                    </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074262"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074261"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1531"></span><span>                    </span><span class="hs-comment">-- DV: used to be return (env,v) but that is plain</span><span>
</span><span id="line-1532"></span><span>                    </span><span class="hs-comment">-- wrong because we may need to go inside the kind</span><span>
</span><span id="line-1533"></span><span>                    </span><span class="hs-comment">-- of v and zonk there!</span><span>
</span><span id="line-1534"></span><span>
</span><span id="line-1535"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
              Constraints and evidence
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1542"></span><span>
</span><span id="line-1543"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-type">zonkEvTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-1544"></span><span id="zonkEvTerm"><span class="annot"><span class="annottext">zonkEvTerm :: ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var hs-var">zonkEvTerm</span></a></span></span><span> </span><span id="local-6989586621681074259"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074259"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span id="local-6989586621681074257"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074257"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1545"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvTerm)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr -&gt; TcM EvTerm
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074259"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074257"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1546"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span id="local-6989586621681074255"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074255"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span id="local-6989586621681074253"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074253"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681074252"><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621681074252"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; EvTypeable -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; EvTypeable -&gt; EvTerm)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (EvTypeable -&gt; EvTerm)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074255"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074253"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (EvTypeable -&gt; EvTerm)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable -&gt; TcM EvTerm
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074255"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621681074252"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1548"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span id="local-6989586621681074250"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074250"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">et_tvs :: EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var">et_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074247"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074247"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_given :: EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var">et_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074245"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074245"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-1549"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_binds :: EvTerm -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var">et_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074243"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074243"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_body :: EvTerm -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var">et_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074241"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074241"><span class="hs-identifier hs-var">body_id</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074240"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074240"><span class="hs-identifier hs-var">env0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074239"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074239"><span class="hs-identifier hs-var">new_tvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074250"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074247"><span class="hs-identifier hs-var">tvs</span></a></span><span>
</span><span id="line-1551"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074238"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074238"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074237"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074237"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074240"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074245"><span class="hs-identifier hs-var">evs</span></a></span><span>
</span><span id="line-1552"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074236"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074236"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074235"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074235"><span class="hs-identifier hs-var">new_ev_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074238"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074243"><span class="hs-identifier hs-var">ev_binds</span></a></span><span>
</span><span id="line-1553"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074234"><span class="annot"><span class="annottext">new_body_id :: Id
</span><a href="#local-6989586621681074234"><span class="hs-identifier hs-var hs-var">new_body_id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074236"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074241"><span class="hs-identifier hs-var">body_id</span></a></span><span>
</span><span id="line-1554"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; TcM EvTerm
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvFun :: [Id] -&gt; [Id] -&gt; TcEvBinds -&gt; Id -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">et_tvs :: [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var">et_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074239"><span class="hs-identifier hs-var">new_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_given :: [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var">et_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074237"><span class="hs-identifier hs-var">new_evs</span></a></span><span>
</span><span id="line-1555"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_binds :: TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var">et_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074235"><span class="hs-identifier hs-var">new_ev_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_body :: Id
</span><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var">et_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074234"><span class="hs-identifier hs-var">new_body_id</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1556"></span><span>
</span><span id="line-1557"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-type">zonkCoreExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1558"></span><span id="zonkCoreExpr"><span class="annot"><span class="annottext">zonkCoreExpr :: ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var hs-var">zonkCoreExpr</span></a></span></span><span> </span><span id="local-6989586621681074232"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074232"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681074230"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074230"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1559"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074230"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1560"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; EvExpr
forall b. TcCoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">(TcCoercionR -&gt; EvExpr)
-&gt; TcM TcCoercionR -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-var">zonkCoVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074232"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074230"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1561"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1562"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; EvExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; EvExpr) -&gt; Id -&gt; EvExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074232"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074230"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1563"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621681074225"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681074225"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1564"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr)
-&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; EvExpr
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681074225"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1565"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074224"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074224"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span id="local-6989586621681074223"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074223"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1566"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; EvExpr
forall b. TcCoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">(TcCoercionR -&gt; EvExpr)
-&gt; TcM TcCoercionR -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074224"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074223"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1567"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074222"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074222"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621681074220"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074220"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1568"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; EvExpr
forall b. Kind -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; EvExpr)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074222"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074220"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1569"></span><span>
</span><span id="line-1570"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074219"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074219"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621681074217"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074217"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681074216"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074216"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1571"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; TcCoercionR -&gt; EvExpr
forall b. Expr b -&gt; TcCoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; TcCoercionR -&gt; EvExpr)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (TcCoercionR -&gt; EvExpr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074219"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074217"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (TcCoercionR -&gt; EvExpr)
-&gt; TcM TcCoercionR -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074219"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074216"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1572"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074215"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074215"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621681074213"><span class="annot"><span class="annottext">Tickish Id
</span><a href="#local-6989586621681074213"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681074212"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074212"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1573"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tickish Id -&gt; EvExpr -&gt; EvExpr
forall b. Tickish Id -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-var">Tick</span></a></span><span> </span><span class="annot"><span class="annottext">Tickish Id
</span><a href="#local-6989586621681074213"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074215"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074212"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-comment">-- Do we need to zonk in ticks?</span><span>
</span><span id="line-1574"></span><span>
</span><span id="line-1575"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074211"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074211"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621681074209"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074209"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681074208"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074208"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1576"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvExpr -&gt; EvExpr
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr -&gt; EvExpr)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (EvExpr -&gt; EvExpr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074211"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074209"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (EvExpr -&gt; EvExpr)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074211"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074208"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1577"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074207"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074207"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621681074205"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074205"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681074204"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074204"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074203"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074203"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074202"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074202"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrX"><span class="hs-identifier hs-var">zonkCoreBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074207"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074205"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1579"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr -&gt; EvExpr
forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074202"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074203"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074204"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1580"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074201"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074201"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span id="local-6989586621681074199"><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621681074199"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span id="local-6989586621681074198"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074198"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1581"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074197"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074197"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074196"><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621681074196"><span class="hs-identifier hs-var">bind'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bind Id -&gt; TcM (ZonkEnv, Bind Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-var">zonkCoreBind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074201"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621681074199"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-1582"></span><span>         </span><span class="annot"><span class="annottext">Bind Id -&gt; EvExpr -&gt; EvExpr
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621681074196"><span class="hs-identifier hs-var">bind'</span></a></span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074197"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074198"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1583"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span id="local-6989586621681074194"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074194"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Case"><span class="hs-identifier hs-type">Case</span></a></span><span> </span><span id="local-6989586621681074192"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074192"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621681074191"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074191"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621681074190"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074190"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681074189"><span class="annot"><span class="annottext">[Alt Id]
</span><a href="#local-6989586621681074189"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1584"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074188"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074188"><span class="hs-identifier hs-var">scrut'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074194"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074192"><span class="hs-identifier hs-var">scrut</span></a></span><span>
</span><span id="line-1585"></span><span>         </span><span id="local-6989586621681074187"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074187"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074194"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074190"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1586"></span><span>         </span><span id="local-6989586621681074186"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074186"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074194"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074191"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1587"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074185"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681074185"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074194"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074186"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-1588"></span><span>         </span><span id="local-6989586621681074184"><span class="annot"><span class="annottext">[Alt Id]
</span><a href="#local-6989586621681074184"><span class="hs-identifier hs-var">alts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Alt Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Alt Id))
-&gt; [Alt Id] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Alt Id]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Alt Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Alt Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreAlt"><span class="hs-identifier hs-var">zonkCoreAlt</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074185"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Alt Id]
</span><a href="#local-6989586621681074189"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1589"></span><span>         </span><span class="annot"><span class="annottext">EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr)
-&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; Id -&gt; Kind -&gt; [Alt Id] -&gt; EvExpr
forall b. Expr b -&gt; b -&gt; Kind -&gt; [Alt b] -&gt; Expr b
</span><a href="GHC.Core.html#Case"><span class="hs-identifier hs-var">Case</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074188"><span class="hs-identifier hs-var">scrut'</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074186"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074187"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Id]
</span><a href="#local-6989586621681074184"><span class="hs-identifier hs-var">alts'</span></a></span><span>
</span><span id="line-1590"></span><span>
</span><span id="line-1591"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreAlt"><span class="hs-identifier hs-type">zonkCoreAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1592"></span><span id="zonkCoreAlt"><span class="annot"><span class="annottext">zonkCoreAlt :: ZonkEnv -&gt; Alt Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Alt Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreAlt"><span class="hs-identifier hs-var hs-var">zonkCoreAlt</span></a></span></span><span> </span><span id="local-6989586621681074181"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074181"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074180"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681074180"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074179"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074179"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074178"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074178"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074177"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074177"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074176"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074176"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; TcM (ZonkEnv, [Id])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBndrsX"><span class="hs-identifier hs-var">zonkCoreBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074181"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074179"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1594"></span><span>         </span><span id="local-6989586621681074175"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074175"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074177"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074178"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1595"></span><span>         </span><span class="annot"><span class="annottext">Alt Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Alt Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Alt Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Alt Id))
-&gt; Alt Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Alt Id)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621681074180"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074176"><span class="hs-identifier hs-var">bndrs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074175"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1596"></span><span>
</span><span id="line-1597"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-type">zonkCoreBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1598"></span><span id="zonkCoreBind"><span class="annot"><span class="annottext">zonkCoreBind :: ZonkEnv -&gt; Bind Id -&gt; TcM (ZonkEnv, Bind Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-var hs-var">zonkCoreBind</span></a></span></span><span> </span><span id="local-6989586621681074173"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074173"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621681074171"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074171"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681074170"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074170"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1599"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681074169"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074169"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074173"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074171"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1600"></span><span>         </span><span id="local-6989586621681074168"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074168"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074173"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074170"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1601"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074167"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681074167"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnv"><span class="hs-identifier hs-var">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074173"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074169"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-1602"></span><span>         </span><span class="annot"><span class="annottext">(ZonkEnv, Bind Id) -&gt; TcM (ZonkEnv, Bind Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074167"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr -&gt; Bind Id
forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074169"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074168"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1603"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoreBind"><span class="hs-identifier hs-var">zonkCoreBind</span></a></span><span> </span><span id="local-6989586621681074166"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074166"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621681074164"><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074164"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1604"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074163"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074163"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074162"><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074162"><span class="hs-identifier hs-var">pairs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((ZonkEnv, [(Id, EvExpr)])
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(Id, EvExpr)]))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(Id, EvExpr)])
forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [(Id, EvExpr)])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(Id, EvExpr)])
</span><a href="#local-6989586621681074161"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1605"></span><span>         </span><span class="annot"><span class="annottext">(ZonkEnv, Bind Id) -&gt; TcM (ZonkEnv, Bind Id)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074163"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)] -&gt; Bind Id
forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074162"><span class="hs-identifier hs-var">pairs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1606"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1607"></span><span>    </span><span id="local-6989586621681074161"><span class="annot"><span class="annottext">go :: (ZonkEnv, [(Id, EvExpr)])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(Id, EvExpr)])
</span><a href="#local-6989586621681074161"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074160"><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074160"><span class="hs-identifier hs-var">new_pairs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1608"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074159"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681074159"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074166"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Id, EvExpr) -&gt; Id) -&gt; [(Id, EvExpr)] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(Id, EvExpr) -&gt; Id
forall a b. (a, b) -&gt; a
</span><a href="../../base/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074160"><span class="hs-identifier hs-var">new_pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1609"></span><span>         </span><span id="local-6989586621681074158"><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074158"><span class="hs-identifier hs-var">pairs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Id, EvExpr) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, EvExpr))
-&gt; [(Id, EvExpr)] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [(Id, EvExpr)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
-&gt; (Id, EvExpr) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, EvExpr)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCorePair"><span class="hs-identifier hs-var">zonkCorePair</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074159"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074164"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1610"></span><span>         </span><span class="annot"><span class="annottext">(ZonkEnv, [(Id, EvExpr)])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [(Id, EvExpr)])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074159"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621681074158"><span class="hs-identifier hs-var">pairs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1611"></span><span>
</span><span id="line-1612"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCorePair"><span class="hs-identifier hs-type">zonkCorePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1613"></span><span id="zonkCorePair"><span class="annot"><span class="annottext">zonkCorePair :: ZonkEnv
-&gt; (Id, EvExpr) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, EvExpr)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCorePair"><span class="hs-identifier hs-var hs-var">zonkCorePair</span></a></span></span><span> </span><span id="local-6989586621681074155"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074155"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074154"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074154"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681074153"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074153"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; EvExpr -&gt; (Id, EvExpr))
-&gt; TcM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (EvExpr -&gt; (Id, EvExpr))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074155"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074154"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (EvExpr -&gt; (Id, EvExpr))
-&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Id, EvExpr)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvExpr -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvExpr
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074155"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621681074153"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1614"></span><span>
</span><span id="line-1615"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-type">zonkEvTypeable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span>
</span><span id="line-1616"></span><span id="zonkEvTypeable"><span class="annot"><span class="annottext">zonkEvTypeable :: ZonkEnv -&gt; EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var hs-var">zonkEvTypeable</span></a></span></span><span> </span><span id="local-6989586621681074152"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074152"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-type">EvTypeableTyCon</span></a></span><span> </span><span id="local-6989586621681074150"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681074150"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span id="local-6989586621681074149"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681074149"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1617"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074148"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681074148"><span class="hs-identifier hs-var">e'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; TcM EvTerm)
-&gt; [EvTerm] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [EvTerm]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074152"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681074149"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1618"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable)
-&gt; EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; [EvTerm] -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-var">EvTypeableTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681074150"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621681074148"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1619"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span id="local-6989586621681074147"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074147"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-type">EvTypeableTyApp</span></a></span><span> </span><span id="local-6989586621681074145"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074145"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681074144"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074144"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1620"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074143"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074143"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074147"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074145"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1621"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074142"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074142"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074147"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074144"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1622"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; EvTerm -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-var">EvTypeableTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074143"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074142"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1623"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span id="local-6989586621681074141"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074141"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-type">EvTypeableTrFun</span></a></span><span> </span><span id="local-6989586621681074139"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074139"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621681074138"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074138"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681074137"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074137"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1624"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074136"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074136"><span class="hs-identifier hs-var">tm'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074141"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074139"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1625"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074135"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074135"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074141"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074138"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1626"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074134"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074134"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074141"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074137"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1627"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; EvTerm -&gt; EvTerm -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-var">EvTypeableTrFun</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074136"><span class="hs-identifier hs-var">tm'</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074135"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074134"><span class="hs-identifier hs-var">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1628"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span id="local-6989586621681074133"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074133"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-type">EvTypeableTyLit</span></a></span><span> </span><span id="local-6989586621681074131"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074131"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1629"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074130"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074130"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074133"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074131"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1630"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EvTypeable -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTypeable
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; EvTypeable
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-var">EvTypeableTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074130"><span class="hs-identifier hs-var">t1'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1631"></span><span>
</span><span id="line-1632"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds_s"><span class="hs-identifier hs-type">zonkTcEvBinds_s</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1633"></span><span id="zonkTcEvBinds_s"><span class="annot"><span class="annottext">zonkTcEvBinds_s :: ZonkEnv -&gt; [TcEvBinds] -&gt; TcM (ZonkEnv, [TcEvBinds])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds_s"><span class="hs-identifier hs-var hs-var">zonkTcEvBinds_s</span></a></span></span><span> </span><span id="local-6989586621681074129"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074129"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074128"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681074128"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074127"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074127"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074126"><span class="annot"><span class="annottext">[Bag EvBind]
</span><a href="#local-6989586621681074126"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, Bag EvBind))
-&gt; ZonkEnv
-&gt; [TcEvBinds]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, [Bag EvBind])
forall (m :: * -&gt; *) acc x y.
Monad m =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; [x] -&gt; m (acc, [y])
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074129"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621681074128"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1634"></span><span>                            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, [TcEvBinds]) -&gt; TcM (ZonkEnv, [TcEvBinds])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074127"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bag EvBind -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bag EvBind] -&gt; Bag EvBind
forall a. [Bag a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionManyBags"><span class="hs-identifier hs-var">unionManyBags</span></a></span><span> </span><span class="annot"><span class="annottext">[Bag EvBind]
</span><a href="#local-6989586621681074126"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1635"></span><span>
</span><span id="line-1636"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-type">zonkTcEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1637"></span><span id="zonkTcEvBinds"><span class="annot"><span class="annottext">zonkTcEvBinds :: ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, TcEvBinds)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcEvBinds"><span class="hs-identifier hs-var hs-var">zonkTcEvBinds</span></a></span></span><span> </span><span id="local-6989586621681074122"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074122"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074121"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074121"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074120"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074120"><span class="hs-identifier hs-var">env'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074119"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074119"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074122"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621681074121"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1638"></span><span>                          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, TcEvBinds) -&gt; TcM (ZonkEnv, TcEvBinds)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074120"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag EvBind -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-var">EvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074119"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1639"></span><span>
</span><span id="line-1640"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-type">zonk_tc_ev_binds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span id="zonk_tc_ev_binds"><span class="annot"><span class="annottext">zonk_tc_ev_binds :: ZonkEnv -&gt; TcEvBinds -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var hs-var">zonk_tc_ev_binds</span></a></span></span><span> </span><span id="local-6989586621681074118"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074118"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span id="local-6989586621681074116"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681074116"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvBindsVar -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-var">zonkEvBindsVar</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074118"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621681074116"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1642"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span id="local-6989586621681074114"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074114"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span id="local-6989586621681074113"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074113"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074114"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074113"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1643"></span><span>
</span><span id="line-1644"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-type">zonkEvBindsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1645"></span><span id="zonkEvBindsVar"><span class="annot"><span class="annottext">zonkEvBindsVar :: ZonkEnv -&gt; EvBindsVar -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-var hs-var">zonkEvBindsVar</span></a></span></span><span> </span><span id="local-6989586621681074112"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074112"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ebv_binds :: EvBindsVar -&gt; IORef EvBindMap
</span><a href="GHC.Tc.Types.Evidence.html#ebv_binds"><span class="hs-identifier hs-var">ebv_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074109"><span class="annot"><span class="annottext">IORef EvBindMap
</span><a href="#local-6989586621681074109"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1646"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074108"><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621681074108"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef EvBindMap -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvBindMap
forall a env. IORef a -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#readMutVar"><span class="hs-identifier hs-var">readMutVar</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvBindMap
</span><a href="#local-6989586621681074109"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1647"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074112"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBindMap -&gt; Bag EvBind
</span><a href="GHC.Tc.Types.Evidence.html#evBindMapBinds"><span class="hs-identifier hs-var">evBindMapBinds</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindMap
</span><a href="#local-6989586621681074108"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1648"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBindsVar"><span class="hs-identifier hs-var">zonkEvBindsVar</span></a></span><span> </span><span id="local-6989586621681074105"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074105"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#CoEvBindsVar"><span class="hs-identifier hs-type">CoEvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Bag EvBind) -&gt; TcM (ZonkEnv, Bag EvBind)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074105"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1649"></span><span>
</span><span id="line-1650"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-type">zonkEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1651"></span><span id="zonkEvBinds"><span class="annot"><span class="annottext">zonkEvBinds :: ZonkEnv -&gt; Bag EvBind -&gt; TcM (ZonkEnv, Bag EvBind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBinds"><span class="hs-identifier hs-var hs-var">zonkEvBinds</span></a></span></span><span> </span><span id="local-6989586621681074102"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074102"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074101"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074101"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-1652"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBinds&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1653"></span><span>    </span><span class="annot"><span class="annottext">((ZonkEnv, Bag EvBind) -&gt; TcM (ZonkEnv, Bag EvBind))
-&gt; TcM (ZonkEnv, Bag EvBind)
forall a env. (a -&gt; IOEnv env a) -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#fixM"><span class="hs-identifier hs-var">fixM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074100"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074100"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1654"></span><span>         </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681074099"><span class="annot"><span class="annottext">env1 :: ZonkEnv
</span><a href="#local-6989586621681074099"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Id] -&gt; ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074102"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag EvBind -&gt; [Id]
</span><a href="#local-6989586621681074098"><span class="hs-identifier hs-var">collect_ev_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074100"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1655"></span><span>         </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074097"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074097"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvBind)
-&gt; Bag EvBind -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Bag EvBind)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvBind -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvBind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBind"><span class="hs-identifier hs-var">zonkEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074099"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074101"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1656"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv, Bag EvBind) -&gt; TcM (ZonkEnv, Bag EvBind)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074099"><span class="hs-identifier hs-var">env1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621681074097"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1658"></span><span>    </span><span class="annot"><a href="#local-6989586621681074098"><span class="hs-identifier hs-type">collect_ev_bndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1659"></span><span>    </span><span id="local-6989586621681074098"><span class="annot"><span class="annottext">collect_ev_bndrs :: Bag EvBind -&gt; [Id]
</span><a href="#local-6989586621681074098"><span class="hs-identifier hs-var hs-var">collect_ev_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; [Id] -&gt; [Id]) -&gt; [Id] -&gt; Bag EvBind -&gt; [Id]
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; [Id] -&gt; [Id]
</span><a href="#local-6989586621681074094"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1660"></span><span>    </span><span id="local-6989586621681074094"><span class="annot"><span class="annottext">add :: EvBind -&gt; [Id] -&gt; [Id]
</span><a href="#local-6989586621681074094"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074091"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074091"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074090"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074090"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074091"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621681074090"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-1661"></span><span>
</span><span id="line-1662"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkEvBind"><span class="hs-identifier hs-type">zonkEvBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-1663"></span><span id="zonkEvBind"><span class="annot"><span class="annottext">zonkEvBind :: ZonkEnv -&gt; EvBind -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvBind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBind"><span class="hs-identifier hs-var hs-var">zonkEvBind</span></a></span></span><span> </span><span id="local-6989586621681074089"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074089"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074088"><span class="annot"><span class="annottext">bind :: EvBind
</span><a href="#local-6989586621681074088"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074087"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074087"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvBind -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074085"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074085"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1664"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074084"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074084"><span class="hs-identifier hs-var">var'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBndr&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvBndr"><span class="hs-identifier hs-var">zonkEvBndr</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074089"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074087"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1665"></span><span>
</span><span id="line-1666"></span><span>         </span><span class="hs-comment">-- Optimise the common case of Refl coercions</span><span>
</span><span id="line-1667"></span><span>         </span><span class="hs-comment">-- See Note [Optimise coercion zonking]</span><span>
</span><span id="line-1668"></span><span>         </span><span class="hs-comment">-- This has a very big effect on some programs (eg #5030)</span><span>
</span><span id="line-1669"></span><span>
</span><span id="line-1670"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074083"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074083"><span class="hs-identifier hs-var">term'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Maybe (Role, Kind, Kind)
</span><a href="GHC.Core.Predicate.html#getEqPredTys_maybe"><span class="hs-identifier hs-var">getEqPredTys_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074084"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1671"></span><span>           </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681074081"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681074081"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074080"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074080"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681074079"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074079"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074080"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074079"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1672"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; TcM EvTerm
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcCoercionR -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evCoercion"><span class="hs-identifier hs-var">evCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; Kind -&gt; TcCoercionR
</span><a href="GHC.Tc.Types.Evidence.html#mkTcReflCo"><span class="hs-identifier hs-var">mkTcReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681074081"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074080"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1673"></span><span>           </span><span id="local-6989586621681074075"><span class="annot"><span class="annottext">Maybe (Role, Kind, Kind)
</span><a href="#local-6989586621681074075"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; EvTerm -&gt; TcM EvTerm
</span><a href="GHC.Tc.Utils.Zonk.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074089"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074085"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-1674"></span><span>
</span><span id="line-1675"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvBind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvBind
</span><a href="#local-6989586621681074088"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074084"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621681074083"><span class="hs-identifier hs-var">term'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1676"></span><span>
</span><span id="line-1677"></span><span class="hs-comment">{- Note [Optimise coercion zonking]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When optimising evidence binds we may come across situations where
a coercion looks like
      cv = ReflCo ty
or    cv1 = cv2
where the type 'ty' is big.  In such cases it is a waste of time to zonk both
  * The variable on the LHS
  * The coercion on the RHS
Rather, we can zonk the variable, and if its type is (ty ~ ty), we can just
use Refl on the right, ignoring the actual coercion on the RHS.

This can have a very big effect, because the constraint solver sometimes does go
to a lot of effort to prove Refl!  (Eg when solving  10+3 = 10+3; cf #5030)


************************************************************************
*                                                                      *
                         Zonking types
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1699"></span><span>
</span><span id="line-1700"></span><span class="hs-comment">{- Note [Sharing when zonking to Type]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Problem:

    In GHC.Tc.Utils.TcMType.zonkTcTyVar, we short-circuit (Indirect ty) to
    (Indirect zty), see Note [Sharing in zonking] in GHC.Tc.Utils.TcMType. But we
    /can't/ do this when zonking a TcType to a Type (#15552, esp
    comment:3).  Suppose we have

       alpha -&gt; alpha
         where
            alpha is already unified:
             alpha := T{tc-tycon} Int -&gt; Int
         and T is knot-tied

    By &quot;knot-tied&quot; I mean that the occurrence of T is currently a TcTyCon,
    but the global env contains a mapping &quot;T&quot; :-&gt; T{knot-tied-tc}. See
    Note [Type checking recursive type and class declarations] in
    GHC.Tc.TyCl.

    Now we call zonkTcTypeToType on that (alpha -&gt; alpha). If we follow
    the same path as Note [Sharing in zonking] in GHC.Tc.Utils.TcMType, we'll
    update alpha to
       alpha := T{knot-tied-tc} Int -&gt; Int

    But alas, if we encounter alpha for a /second/ time, we end up
    looking at T{knot-tied-tc} and fall into a black hole. The whole
    point of zonkTcTypeToType is that it produces a type full of
    knot-tied tycons, and you must not look at the result!!

    To put it another way (zonkTcTypeToType . zonkTcTypeToType) is not
    the same as zonkTcTypeToType. (If we distinguished TcType from
    Type, this issue would have been a type error!)

Solutions: (see #15552 for other variants)

One possible solution is simply not to do the short-circuiting.
That has less sharing, but maybe sharing is rare. And indeed,
that usually turns out to be viable from a perf point of view

But zonkTyVarOcc implements something a bit better

* ZonkEnv contains ze_meta_tv_env, which maps
      from a MetaTyVar (unification variable)
      to a Type (not a TcType)

* In zonkTyVarOcc, we check this map to see if we have zonked
  this variable before. If so, use the previous answer; if not
  zonk it, and extend the map.

* The map is of course stateful, held in a TcRef. (That is unlike
  the treatment of lexically-scoped variables in ze_tv_env and
  ze_id_env.)

* In zonkTyVarOcc we read the TcRef to look up the unification
  variable:
    - if we get a hit we use the zonked result;
    - if not, in zonk_meta we see if the variable is `Indirect ty`,
      zonk that, and update the map (in finish_meta)
  But Nota Bene that the &quot;update map&quot; step must re-read the TcRef
  (or, more precisely, use updTcRef) because the zonking of the
  `Indirect ty` may have added lots of stuff to the map.  See
  #19668 for an example where this made an asymptotic difference!

Is it worth the extra work of carrying ze_meta_tv_env? Some
non-systematic perf measurements suggest that compiler allocation is
reduced overall (by 0.5% or so) but compile time really doesn't
change.  But in some cases it makes a HUGE difference: see test
T9198 and #19668.  So yes, it seems worth it.
-}</span><span>
</span><span id="line-1770"></span><span>
</span><span id="line-1771"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier hs-type">zonkTyVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>
</span><span id="line-1772"></span><span id="zonkTyVarOcc"><span class="annot"><span class="annottext">zonkTyVarOcc :: ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier hs-var hs-var">zonkTyVarOcc</span></a></span></span><span> </span><span id="local-6989586621681074074"><span class="annot"><span class="annottext">env :: ZonkEnv
</span><a href="#local-6989586621681074074"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_flexi :: ZonkEnv -&gt; ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#ze_flexi"><span class="hs-identifier hs-var">ze_flexi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074073"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681074073"><span class="hs-identifier hs-var">flexi</span></a></span></span><span>
</span><span id="line-1773"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074072"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681074072"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span>
</span><span id="line-1774"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ze_meta_tv_env :: ZonkEnv -&gt; TcRef (TyVarEnv Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#ze_meta_tv_env"><span class="hs-identifier hs-var">ze_meta_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074071"><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681074071"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074070"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-1775"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isTcTyVar"><span class="hs-identifier hs-var">isTcTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1776"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TcTyVarDetails
</span><a href="GHC.Types.Var.html#tcTyVarDetails"><span class="hs-identifier hs-var">tcTyVarDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1777"></span><span>      </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#SkolemTv"><span class="hs-identifier hs-type">SkolemTv</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074066"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-1778"></span><span>      </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#RuntimeUnk"><span class="hs-identifier hs-type">RuntimeUnk</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074066"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-1779"></span><span>      </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#MetaTv"><span class="hs-identifier hs-type">MetaTv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mtv_ref :: TcTyVarDetails -&gt; IORef MetaDetails
</span><a href="GHC.Tc.Utils.TcType.html#mtv_ref"><span class="hs-identifier hs-var">mtv_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074062"><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681074062"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1780"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074061"><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681074061"><span class="hs-identifier hs-var">mtv_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind) -&gt; TcRnIf TcGblEnv TcLclEnv (TyVarEnv Kind)
forall a gbl lcl. TcRef a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681074071"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span>
</span><span id="line-1781"></span><span>                </span><span class="hs-comment">-- See Note [Sharing when zonking to Type]</span><span>
</span><span id="line-1782"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind -&gt; Id -&gt; Maybe Kind
forall a. VarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681074061"><span class="hs-identifier hs-var">mtv_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1783"></span><span>                  </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681074059"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074059"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074059"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1784"></span><span>                  </span><span class="annot"><span class="annottext">Maybe Kind
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074058"><span class="annot"><span class="annottext">MetaDetails
</span><a href="#local-6989586621681074058"><span class="hs-identifier hs-var">mtv_details</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails -&gt; TcRnIf TcGblEnv TcLclEnv MetaDetails
forall a gbl lcl. TcRef a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681074062"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1785"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
-&gt; MetaDetails -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074057"><span class="hs-identifier hs-var">zonk_meta</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681074062"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">MetaDetails
</span><a href="#local-6989586621681074058"><span class="hs-identifier hs-var">mtv_details</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1786"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1787"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074066"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-1788"></span><span>
</span><span id="line-1789"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1790"></span><span>    </span><span id="local-6989586621681074066"><span class="annot"><span class="annottext">lookup_in_tv_env :: IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074066"><span class="hs-identifier hs-var hs-var">lookup_in_tv_env</span></a></span></span><span>    </span><span class="hs-comment">-- Look up in the env just as we do for Ids</span><span>
</span><span id="line-1791"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Maybe Id
forall a. VarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681074072"><span class="hs-identifier hs-var">tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1792"></span><span>          </span><span class="annot"><span class="annottext">Maybe Id
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Kind) -&gt; TcM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind) -&gt; Id -&gt; TcM Id
forall (m :: * -&gt; *). Monad m =&gt; (Kind -&gt; m Kind) -&gt; Id -&gt; m Id
</span><a href="GHC.Types.Var.html#updateTyVarKindM"><span class="hs-identifier hs-var">updateTyVarKindM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074074"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1793"></span><span>          </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681074054"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074054"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074054"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1794"></span><span>
</span><span id="line-1795"></span><span>    </span><span id="local-6989586621681074057"><span class="annot"><span class="annottext">zonk_meta :: IORef MetaDetails
-&gt; MetaDetails -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074057"><span class="hs-identifier hs-var hs-var">zonk_meta</span></a></span></span><span> </span><span id="local-6989586621681074053"><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681074053"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="annot"><span class="annottext">MetaDetails
</span><a href="GHC.Tc.Utils.TcType.html#Flexi"><span class="hs-identifier hs-var">Flexi</span></a></span><span>
</span><span id="line-1796"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074051"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074051"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074074"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1797"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074050"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074050"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; Id -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#commitFlexi"><span class="hs-identifier hs-var">commitFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681074073"><span class="hs-identifier hs-var">flexi</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074051"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-1798"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IORef MetaDetails -&gt; Kind -&gt; TcM ()
</span><a href="GHC.Tc.Utils.TcMType.html#writeMetaTyVarRef"><span class="hs-identifier hs-var">writeMetaTyVarRef</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><a href="#local-6989586621681074053"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074050"><span class="hs-identifier hs-var">ty</span></a></span><span>  </span><span class="hs-comment">-- Belt and braces</span><span>
</span><span id="line-1799"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074047"><span class="hs-identifier hs-var">finish_meta</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074050"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1800"></span><span>
</span><span id="line-1801"></span><span>    </span><span class="annot"><a href="#local-6989586621681074057"><span class="hs-identifier hs-var">zonk_meta</span></a></span><span> </span><span class="annot"><span class="annottext">IORef MetaDetails
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#Indirect"><span class="hs-identifier hs-type">Indirect</span></a></span><span> </span><span id="local-6989586621681074045"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074045"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1802"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074044"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074044"><span class="hs-identifier hs-var">zty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074074"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074045"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1803"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074047"><span class="hs-identifier hs-var">finish_meta</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074044"><span class="hs-identifier hs-var">zty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1804"></span><span>
</span><span id="line-1805"></span><span>    </span><span id="local-6989586621681074047"><span class="annot"><span class="annottext">finish_meta :: Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="#local-6989586621681074047"><span class="hs-identifier hs-var hs-var">finish_meta</span></a></span></span><span> </span><span id="local-6989586621681074043"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074043"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1806"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind) -&gt; (TyVarEnv Kind -&gt; TyVarEnv Kind) -&gt; TcM ()
forall a gbl lcl. TcRef a -&gt; (a -&gt; a) -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#updTcRef"><span class="hs-identifier hs-var">updTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">TcRef (TyVarEnv Kind)
</span><a href="#local-6989586621681074071"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681074041"><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681074041"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind -&gt; Id -&gt; Kind -&gt; TyVarEnv Kind
forall a. VarEnv a -&gt; Id -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621681074041"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074070"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074043"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1807"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074043"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1808"></span><span>
</span><span id="line-1809"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#lookupTyVarOcc"><span class="hs-identifier hs-type">lookupTyVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>
</span><span id="line-1810"></span><span id="lookupTyVarOcc"><span class="annot"><span class="annottext">lookupTyVarOcc :: ZonkEnv -&gt; Id -&gt; Maybe Id
</span><a href="GHC.Tc.Utils.Zonk.html#lookupTyVarOcc"><span class="hs-identifier hs-var hs-var">lookupTyVarOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074040"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681074040"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074039"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074039"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-1811"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Maybe Id
forall a. VarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681074040"><span class="hs-identifier hs-var">tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074039"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1812"></span><span>
</span><span id="line-1813"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#commitFlexi"><span class="hs-identifier hs-type">commitFlexi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkFlexi"><span class="hs-identifier hs-type">ZonkFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1814"></span><span class="hs-comment">-- Only monadic so we can do tc-tracing</span><span>
</span><span id="line-1815"></span><span id="commitFlexi"><span class="annot"><span class="annottext">commitFlexi :: ZonkFlexi -&gt; Id -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#commitFlexi"><span class="hs-identifier hs-var hs-var">commitFlexi</span></a></span></span><span> </span><span id="local-6989586621681074038"><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681074038"><span class="hs-identifier hs-var">flexi</span></a></span></span><span> </span><span id="local-6989586621681074037"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074037"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681074036"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074036"><span class="hs-identifier hs-var">zonked_kind</span></a></span></span><span>
</span><span id="line-1816"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="#local-6989586621681074038"><span class="hs-identifier hs-var">flexi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1817"></span><span>      </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681074035"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074036"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1818"></span><span>
</span><span id="line-1819"></span><span>      </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span>
</span><span id="line-1820"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isRuntimeRepTy"><span class="hs-identifier hs-var">isRuntimeRepTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074036"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span>
</span><span id="line-1821"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to LiftedRep:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074037"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1822"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#liftedRepTy"><span class="hs-identifier hs-var">liftedRepTy</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1823"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isMultiplicityTy"><span class="hs-identifier hs-var">isMultiplicityTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074036"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span>
</span><span id="line-1824"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to Many:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074037"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1825"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1826"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1827"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to Any:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074037"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1828"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Builtin.Types.html#anyTypeOfKind"><span class="hs-identifier hs-var">anyTypeOfKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074036"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1829"></span><span>
</span><span id="line-1830"></span><span>      </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#RuntimeUnkFlexi"><span class="hs-identifier hs-var">RuntimeUnkFlexi</span></a></span><span>
</span><span id="line-1831"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to RuntimeUnk:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074037"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1832"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; TcTyVarDetails -&gt; Id
</span><a href="GHC.Types.Var.html#mkTcTyVar"><span class="hs-identifier hs-var">mkTcTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681074035"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681074036"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVarDetails
</span><a href="GHC.Tc.Utils.TcType.html#RuntimeUnk"><span class="hs-identifier hs-var">RuntimeUnk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1833"></span><span>                        </span><span class="hs-comment">-- This is where RuntimeUnks are born:</span><span>
</span><span id="line-1834"></span><span>                        </span><span class="hs-comment">-- otherwise-unconstrained unification variables are</span><span>
</span><span id="line-1835"></span><span>                        </span><span class="hs-comment">-- turned into RuntimeUnks as they leave the</span><span>
</span><span id="line-1836"></span><span>                        </span><span class="hs-comment">-- typechecker's monad</span><span>
</span><span id="line-1837"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1838"></span><span>     </span><span id="local-6989586621681074035"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621681074035"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074037"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1839"></span><span>
</span><span id="line-1840"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-type">zonkCoVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1841"></span><span id="zonkCoVarOcc"><span class="annot"><span class="annottext">zonkCoVarOcc :: ZonkEnv -&gt; Id -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-var hs-var">zonkCoVarOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_tv_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Utils.Zonk.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074025"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681074025"><span class="hs-identifier hs-var">tyco_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681074024"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074024"><span class="hs-identifier hs-var">cv</span></a></span></span><span>
</span><span id="line-1842"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681074023"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074023"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Maybe Id
forall a. VarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621681074025"><span class="hs-identifier hs-var">tyco_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074024"><span class="hs-identifier hs-var">cv</span></a></span><span>  </span><span class="hs-comment">-- don't look in the knot-tied env</span><span>
</span><span id="line-1843"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; TcM TcCoercionR
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(TcCoercionR -&gt; TcM TcCoercionR) -&gt; TcCoercionR -&gt; TcM TcCoercionR
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; TcCoercionR
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074023"><span class="hs-identifier hs-var">cv'</span></a></span><span>
</span><span id="line-1844"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1845"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074021"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074021"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.TcMType.html#zonkCoVar"><span class="hs-identifier hs-var">zonkCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074024"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; TcM TcCoercionR
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; TcCoercionR
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074021"><span class="hs-identifier hs-var">cv'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1846"></span><span>
</span><span id="line-1847"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoHole"><span class="hs-identifier hs-type">zonkCoHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1848"></span><span id="zonkCoHole"><span class="annot"><span class="annottext">zonkCoHole :: ZonkEnv -&gt; CoercionHole -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoHole"><span class="hs-identifier hs-var hs-var">zonkCoHole</span></a></span></span><span> </span><span id="local-6989586621681074018"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074018"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681074017"><span class="annot"><span class="annottext">hole :: CoercionHole
</span><a href="#local-6989586621681074017"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ch_ref :: CoercionHole -&gt; IORef (Maybe TcCoercionR)
</span><a href="GHC.Core.TyCo.Rep.html#ch_ref"><span class="hs-identifier hs-var">ch_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074014"><span class="annot"><span class="annottext">IORef (Maybe TcCoercionR)
</span><a href="#local-6989586621681074014"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ch_co_var :: CoercionHole -&gt; Id
</span><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var">ch_co_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681074012"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074012"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1849"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074011"><span class="annot"><span class="annottext">Maybe TcCoercionR
</span><a href="#local-6989586621681074011"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (Maybe TcCoercionR)
-&gt; TcRnIf TcGblEnv TcLclEnv (Maybe TcCoercionR)
forall a gbl lcl. TcRef a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe TcCoercionR)
</span><a href="#local-6989586621681074014"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1850"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TcCoercionR
</span><a href="#local-6989586621681074011"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1851"></span><span>           </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681074010"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074010"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681074009"><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074009"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681074018"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074010"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1852"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.TcMType.html#checkCoercionHole"><span class="hs-identifier hs-var">checkCoercionHole</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074012"><span class="hs-identifier hs-var">cv</span></a></span><span> </span><span class="annot"><span class="annottext">TcCoercionR
</span><a href="#local-6989586621681074009"><span class="hs-identifier hs-var">co'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1853"></span><span>
</span><span id="line-1854"></span><span>              </span><span class="hs-comment">-- This next case should happen only in the presence of</span><span>
</span><span id="line-1855"></span><span>              </span><span class="hs-comment">-- (undeferred) type errors. Originally, I put in a panic</span><span>
</span><span id="line-1856"></span><span>              </span><span class="hs-comment">-- here, but that caused too many uses of `failIfErrsM`.</span><span>
</span><span id="line-1857"></span><span>           </span><span class="annot"><span class="annottext">Maybe TcCoercionR
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Zonking unfilled coercion hole&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681074017"><span class="hs-identifier hs-var">hole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1858"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcM () -&gt; TcM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base/src/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="GHC.Utils.Misc.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM () -&gt; TcM ()) -&gt; TcM () -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1859"></span><span>                           </span><span class="annot"><span class="annottext">TcM () -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#whenNoErrs"><span class="hs-identifier hs-var">whenNoErrs</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM () -&gt; TcM ()) -&gt; TcM () -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1860"></span><span>                           </span><span class="hs-identifier">MASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">False</span><span>
</span><span id="line-1861"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">text</span><span> </span><span class="hs-string">&quot;Type-correct unfilled coercion hole&quot;</span><span>
</span><span id="line-1862"></span><span>                                     </span><span class="hs-operator">&lt;+&gt;</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">hole</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1863"></span><span>                         </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681074005"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074005"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TcM Id
</span><a href="GHC.Tc.Utils.TcMType.html#zonkCoVar"><span class="hs-identifier hs-var">zonkCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074012"><span class="hs-identifier hs-var">cv</span></a></span><span>
</span><span id="line-1864"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TcCoercionR -&gt; TcM TcCoercionR
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(TcCoercionR -&gt; TcM TcCoercionR) -&gt; TcCoercionR -&gt; TcM TcCoercionR
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; TcCoercionR
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681074005"><span class="hs-identifier hs-var">cv'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1865"></span><span>                             </span><span class="hs-comment">-- This will be an out-of-scope variable, but keeping</span><span>
</span><span id="line-1866"></span><span>                             </span><span class="hs-comment">-- this as a coercion hole led to #15787</span><span>
</span><span id="line-1867"></span><span>
</span><span id="line-1868"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonk_tycomapper"><span class="hs-identifier hs-type">zonk_tycomapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#TyCoMapper"><span class="hs-identifier hs-type">TyCoMapper</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span>
</span><span id="line-1869"></span><span id="zonk_tycomapper"><span class="annot"><span class="annottext">zonk_tycomapper :: TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tycomapper"><span class="hs-identifier hs-var hs-var">zonk_tycomapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoMapper :: forall env (m :: * -&gt; *).
(env -&gt; Id -&gt; m Kind)
-&gt; (env -&gt; Id -&gt; m TcCoercionR)
-&gt; (env -&gt; CoercionHole -&gt; m TcCoercionR)
-&gt; (env -&gt; Id -&gt; ArgFlag -&gt; m (env, Id))
-&gt; (TcTyCon -&gt; m TcTyCon)
-&gt; TyCoMapper env m
</span><a href="GHC.Core.Type.html#TyCoMapper"><span class="hs-identifier hs-type">TyCoMapper</span></a></span><span>
</span><span id="line-1870"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcm_tyvar :: ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Core.Type.html#tcm_tyvar"><span class="hs-identifier hs-var">tcm_tyvar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarOcc"><span class="hs-identifier hs-var">zonkTyVarOcc</span></a></span><span>
</span><span id="line-1871"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_covar :: ZonkEnv -&gt; Id -&gt; TcM TcCoercionR
</span><a href="GHC.Core.Type.html#tcm_covar"><span class="hs-identifier hs-var">tcm_covar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoVarOcc"><span class="hs-identifier hs-var">zonkCoVarOcc</span></a></span><span>
</span><span id="line-1872"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_hole :: ZonkEnv -&gt; CoercionHole -&gt; TcM TcCoercionR
</span><a href="GHC.Core.Type.html#tcm_hole"><span class="hs-identifier hs-var">tcm_hole</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; CoercionHole -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoHole"><span class="hs-identifier hs-var">zonkCoHole</span></a></span><span>
</span><span id="line-1873"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_tycobinder :: ZonkEnv
-&gt; Id -&gt; ArgFlag -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Core.Type.html#tcm_tycobinder"><span class="hs-identifier hs-var">tcm_tycobinder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681073998"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073998"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681073997"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681073997"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681073996"><span class="annot"><span class="annottext">ArgFlag
</span><a href="#local-6989586621681073996"><span class="hs-identifier hs-var">_vis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (ZonkEnv, Id)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073998"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621681073997"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1874"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_tycon :: TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
</span><a href="GHC.Core.Type.html#tcm_tycon"><span class="hs-identifier hs-var">tcm_tycon</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-var">zonkTcTyConToTyCon</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1875"></span><span>
</span><span id="line-1876"></span><span class="hs-comment">-- Zonk a TyCon by changing a TcTyCon to a regular TyCon</span><span>
</span><span id="line-1877"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-type">zonkTcTyConToTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCon"><span class="hs-identifier hs-type">TcTyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-1878"></span><span id="zonkTcTyConToTyCon"><span class="annot"><span class="annottext">zonkTcTyConToTyCon :: TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-var hs-var">zonkTcTyConToTyCon</span></a></span></span><span> </span><span id="local-6989586621681073992"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681073992"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-1879"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTcTyCon"><span class="hs-identifier hs-var">isTcTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681073992"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681073990"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681073990"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcM TyThing
</span><a href="GHC.Tc.Utils.Env.html#tcLookupGlobalOnly"><span class="hs-identifier hs-var">tcLookupGlobalOnly</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681073992"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1880"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681073990"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1881"></span><span>                          </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621681073988"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681073988"><span class="hs-identifier hs-var">real_tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681073988"><span class="hs-identifier hs-var">real_tc</span></a></span><span>
</span><span id="line-1882"></span><span>                          </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkTcTyCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681073992"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621681073990"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1883"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; IOEnv (Env TcGblEnv TcLclEnv) TcTyCon
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621681073992"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-comment">-- it's already zonked</span><span>
</span><span id="line-1884"></span><span>
</span><span id="line-1885"></span><span class="hs-comment">-- Confused by zonking? See Note [What is zonking?] in GHC.Tc.Utils.TcMType.</span><span>
</span><span id="line-1886"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToType"><span class="hs-identifier hs-type">zonkTcTypeToType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1887"></span><span id="zonkTcTypeToType"><span class="annot"><span class="annottext">zonkTcTypeToType :: Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToType"><span class="hs-identifier hs-var hs-var">zonkTcTypeToType</span></a></span></span><span> </span><span id="local-6989586621681073987"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073987"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; (ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681073986"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073986"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073986"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073987"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1888"></span><span>
</span><span id="line-1889"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypes"><span class="hs-identifier hs-type">zonkTcTypesToTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1890"></span><span id="zonkTcTypesToTypes"><span class="annot"><span class="annottext">zonkTcTypesToTypes :: [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypes"><span class="hs-identifier hs-var hs-var">zonkTcTypesToTypes</span></a></span></span><span> </span><span id="local-6989586621681073985"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681073985"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall b. (ZonkEnv -&gt; TcM b) -&gt; TcM b
</span><a href="GHC.Tc.Utils.Zonk.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind])
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind])
-&gt; (ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681073984"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073984"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-var">zonkTcTypesToTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073984"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681073985"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1891"></span><span>
</span><span id="line-1892"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-type">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1893"></span><span id="zonkScaledTcTypeToTypeX"><span class="annot"><span class="annottext">zonkScaledTcTypeToTypeX :: ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var hs-var">zonkScaledTcTypeToTypeX</span></a></span></span><span> </span><span id="local-6989586621681073983"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073983"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681073982"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073982"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681073981"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073981"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Scaled Kind
forall a. Kind -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind -&gt; Scaled Kind)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Kind -&gt; Scaled Kind)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073983"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073982"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1894"></span><span>                                                   </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (Kind -&gt; Scaled Kind)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind -&gt; TcM (Scaled Kind)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073983"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073981"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1895"></span><span>
</span><span id="line-1896"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1897"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-type">zonkTcTypesToTypesX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1898"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-type">zonkCoToCo</span></a></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1899"></span><span class="hs-special">(</span><span id="zonkTcTypeToTypeX"><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="zonkTcTypesToTypesX"><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-var">zonkTcTypesToTypesX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="zonkCoToCo"><span class="annot"><span class="annottext">ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR
</span><a href="GHC.Tc.Utils.Zonk.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [TcCoercionR] -&gt; TcM [TcCoercionR]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1900"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
-&gt; (ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind,
    ZonkEnv -&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Kind],
    ZonkEnv -&gt; TcCoercionR -&gt; TcM TcCoercionR,
    ZonkEnv -&gt; [TcCoercionR] -&gt; TcM [TcCoercionR])
forall (m :: * -&gt; *) env.
Monad m =&gt;
TyCoMapper env m
-&gt; (env -&gt; Kind -&gt; m Kind, env -&gt; [Kind] -&gt; m [Kind],
    env -&gt; TcCoercionR -&gt; m TcCoercionR,
    env -&gt; [TcCoercionR] -&gt; m [TcCoercionR])
</span><a href="GHC.Core.Type.html#mapTyCoX"><span class="hs-identifier hs-var">mapTyCoX</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
</span><a href="GHC.Tc.Utils.Zonk.html#zonk_tycomapper"><span class="hs-identifier hs-var">zonk_tycomapper</span></a></span><span>
</span><span id="line-1901"></span><span>
</span><span id="line-1902"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-type">zonkScaledTcTypesToTypesX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1903"></span><span id="zonkScaledTcTypesToTypesX"><span class="annot"><span class="annottext">zonkScaledTcTypesToTypesX :: ZonkEnv -&gt; [Scaled Kind] -&gt; TcM [Scaled Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-var hs-var">zonkScaledTcTypesToTypesX</span></a></span></span><span> </span><span id="local-6989586621681073978"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073978"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681073977"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681073977"><span class="hs-identifier hs-var">scaled_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1904"></span><span>   </span><span class="annot"><span class="annottext">(Scaled Kind -&gt; TcM (Scaled Kind))
-&gt; [Scaled Kind] -&gt; TcM [Scaled Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Scaled Kind -&gt; TcM (Scaled Kind)
</span><a href="GHC.Tc.Utils.Zonk.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073978"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681073977"><span class="hs-identifier hs-var">scaled_tys</span></a></span><span>
</span><span id="line-1905"></span><span>
</span><span id="line-1906"></span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier hs-type">zonkTcMethInfoToMethInfoX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#TcMethInfo"><span class="hs-identifier hs-type">TcMethInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#MethInfo"><span class="hs-identifier hs-type">MethInfo</span></a></span><span>
</span><span id="line-1907"></span><span id="zonkTcMethInfoToMethInfoX"><span class="annot"><span class="annottext">zonkTcMethInfoToMethInfoX :: ZonkEnv -&gt; TcMethInfo -&gt; TcM TcMethInfo
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier hs-var hs-var">zonkTcMethInfoToMethInfoX</span></a></span></span><span> </span><span id="local-6989586621681073976"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073976"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681073975"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681073975"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681073974"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073974"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681073973"><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681073973"><span class="hs-identifier hs-var">gdm_spec</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1908"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681073972"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073972"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073976"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073974"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1909"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621681073971"><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681073971"><span class="hs-identifier hs-var">gdm_spec'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; TcM (Maybe (DefMethSpec (SrcSpan, Kind)))
</span><a href="#local-6989586621681073970"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681073973"><span class="hs-identifier hs-var">gdm_spec</span></a></span><span>
</span><span id="line-1910"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">TcMethInfo -&gt; TcM TcMethInfo
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681073975"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073972"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621681073971"><span class="hs-identifier hs-var">gdm_spec'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1911"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1912"></span><span>    </span><span class="annot"><a href="#local-6989586621681073970"><span class="hs-identifier hs-type">zonk_gdm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1913"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1914"></span><span>    </span><span id="local-6989586621681073970"><span class="annot"><span class="annottext">zonk_gdm :: Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; TcM (Maybe (DefMethSpec (SrcSpan, Kind)))
</span><a href="#local-6989586621681073970"><span class="hs-identifier hs-var hs-var">zonk_gdm</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; TcM (Maybe (DefMethSpec (SrcSpan, Kind)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1915"></span><span>    </span><span class="annot"><a href="#local-6989586621681073970"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind)
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; TcM (Maybe (DefMethSpec (SrcSpan, Kind)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind) -&gt; Maybe (DefMethSpec (SrcSpan, Kind))
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind)
forall ty. DefMethSpec ty
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1916"></span><span>    </span><span class="annot"><a href="#local-6989586621681073970"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-type">GenericDM</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681073967"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681073967"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681073966"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073966"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1917"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681073965"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073965"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621681073976"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073966"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1918"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; TcM (Maybe (DefMethSpec (SrcSpan, Kind)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind) -&gt; Maybe (DefMethSpec (SrcSpan, Kind))
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SrcSpan, Kind) -&gt; DefMethSpec (SrcSpan, Kind)
forall ty. ty -&gt; DefMethSpec ty
</span><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-var">GenericDM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681073967"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681073965"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1919"></span><span>
</span><span id="line-1920"></span><span class="hs-comment">---------------------------------------</span><span>
</span><span id="line-1921"></span><span class="hs-comment">{- Note [Zonking the LHS of a RULE]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
See also GHC.HsToCore.Binds Note [Free tyvars on rule LHS]

We need to gather the type variables mentioned on the LHS so we can
quantify over them.  Example:
  data T a = C

  foo :: T a -&gt; Int
  foo C = 1

  {-# RULES &quot;myrule&quot;  foo C = 1 #-}

After type checking the LHS becomes (foo alpha (C alpha)) and we do
not want to zap the unbound meta-tyvar 'alpha' to Any, because that
limits the applicability of the rule.  Instead, we want to quantify
over it!

We do this in two stages.

* During zonking, we skolemise the TcTyVar 'alpha' to TyVar 'a'.  We
  do this by using zonkTvSkolemising as the UnboundTyVarZonker in the
  ZonkEnv.  (This is in fact the whole reason that the ZonkEnv has a
  UnboundTyVarZonker.)

* In GHC.HsToCore.Binds, we quantify over it.  See GHC.HsToCore.Binds
  Note [Free tyvars on rule LHS]

Quantifying here is awkward because (a) the data type is big and (b)
finding the free type vars of an expression is necessarily monadic
operation. (consider /\a -&gt; f @ b, where b is side-effected to a)
-}</span><span>
</span><span id="line-1953"></span></pre></body></html>