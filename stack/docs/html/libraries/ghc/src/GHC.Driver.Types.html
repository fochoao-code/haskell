<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-
(c) The University of Glasgow, 2006

\section[GHC.Driver.Types]{Types for the per-module compiler}
-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE CPP, ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeSynonymInstances #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-comment">-- | Types for the per-module compiler</span><span>
</span><span id="line-19"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Driver.Types</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><span class="hs-comment">-- * compilation state</span></span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier">HscEnv</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#hscEPS"><span class="hs-identifier">hscEPS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#FinderCache"><span class="hs-identifier">FinderCache</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FindResult"><span class="hs-identifier">FindResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InstalledFindResult"><span class="hs-identifier">InstalledFindResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#Target"><span class="hs-identifier">Target</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TargetId"><span class="hs-identifier">TargetId</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InputFileBuffer"><span class="hs-identifier">InputFileBuffer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#pprTarget"><span class="hs-identifier">pprTarget</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#pprTargetId"><span class="hs-identifier">pprTargetId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#HscStatus"><span class="hs-identifier">HscStatus</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><span class="hs-comment">-- * ModuleGraph</span></span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier">ModuleGraph</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyMG"><span class="hs-identifier">emptyMG</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkModuleGraph"><span class="hs-identifier">mkModuleGraph</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#extendMG"><span class="hs-identifier">extendMG</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mapMG"><span class="hs-identifier">mapMG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mgModSummaries"><span class="hs-identifier">mgModSummaries</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mgElemModule"><span class="hs-identifier">mgElemModule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mgLookupModule"><span class="hs-identifier">mgLookupModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#needsTemplateHaskellOrQQ"><span class="hs-identifier">needsTemplateHaskellOrQQ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mgBootModules"><span class="hs-identifier">mgBootModules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Hsc monad</span></span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier">Hsc</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#runHsc"><span class="hs-identifier">runHsc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkInteractiveHscEnv"><span class="hs-identifier">mkInteractiveHscEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#runInteractiveHsc"><span class="hs-identifier">runInteractiveHsc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Information about modules</span></span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier">ModDetails</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyModDetails"><span class="hs-identifier">emptyModDetails</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ModGuts"><span class="hs-identifier">ModGuts</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CgGuts"><span class="hs-identifier">CgGuts</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier">ForeignStubs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#appendStubC"><span class="hs-identifier">appendStubC</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ImportedMods"><span class="hs-identifier">ImportedMods</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ImportedBy"><span class="hs-identifier">ImportedBy</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#importedByUser"><span class="hs-identifier">importedByUser</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ImportedModsVal"><span class="hs-identifier">ImportedModsVal</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#SptEntry"><span class="hs-identifier">SptEntry</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#ForeignSrcLang"><span class="hs-identifier">ForeignSrcLang</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#phaseForeignLanguage"><span class="hs-identifier">phaseForeignLanguage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier">ModSummary</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ms_imps"><span class="hs-identifier">ms_imps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ms_installed_mod"><span class="hs-identifier">ms_installed_mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ms_mod_name"><span class="hs-identifier">ms_mod_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ms_home_imps"><span class="hs-identifier">ms_home_imps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#home_imps"><span class="hs-identifier">home_imps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ms_home_allimps"><span class="hs-identifier">ms_home_allimps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ms_home_srcimps"><span class="hs-identifier">ms_home_srcimps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#showModMsg"><span class="hs-identifier">showModMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#isBootSummary"><span class="hs-identifier">isBootSummary</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#msHsFilePath"><span class="hs-identifier">msHsFilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#msHiFilePath"><span class="hs-identifier">msHiFilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#msObjFilePath"><span class="hs-identifier">msObjFilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#SourceModified"><span class="hs-identifier">SourceModified</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#isTemplateHaskellOrQQNonBoot"><span class="hs-identifier">isTemplateHaskellOrQQNonBoot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Information about the module being compiled</span></span><span>
</span><span id="line-47"></span><span>        </span><span class="hs-comment">-- (re-exported from GHC.Driver.Phases)</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Driver.Phases.html#HscSource"><span class="hs-identifier">HscSource</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#isHsBootOrSig"><span class="hs-identifier">isHsBootOrSig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#isHsigFile"><span class="hs-identifier">isHsigFile</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#hscSourceString"><span class="hs-identifier">hscSourceString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><span class="hs-comment">-- * State relating to modules in this package</span></span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier">HomePackageTable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier">HomeModInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyHomePackageTable"><span class="hs-identifier">emptyHomePackageTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#lookupHpt"><span class="hs-identifier">lookupHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#eltsHpt"><span class="hs-identifier">eltsHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#filterHpt"><span class="hs-identifier">filterHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#allHpt"><span class="hs-identifier">allHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#anyHpt"><span class="hs-identifier">anyHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mapHpt"><span class="hs-identifier">mapHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#delFromHpt"><span class="hs-identifier">delFromHpt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#addToHpt"><span class="hs-identifier">addToHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#addListToHpt"><span class="hs-identifier">addListToHpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#lookupHptDirectly"><span class="hs-identifier">lookupHptDirectly</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#listToHpt"><span class="hs-identifier">listToHpt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#hptCompleteSigs"><span class="hs-identifier">hptCompleteSigs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#hptInstances"><span class="hs-identifier">hptInstances</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#hptRules"><span class="hs-identifier">hptRules</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#pprHPT"><span class="hs-identifier">pprHPT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><span class="hs-comment">-- * State relating to known packages</span></span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ExternalPackageState"><span class="hs-identifier">ExternalPackageState</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#EpsStats"><span class="hs-identifier">EpsStats</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#addEpsInStats"><span class="hs-identifier">addEpsInStats</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#PackageTypeEnv"><span class="hs-identifier">PackageTypeEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PackageIfaceTable"><span class="hs-identifier">PackageIfaceTable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyPackageIfaceTable"><span class="hs-identifier">emptyPackageIfaceTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#lookupIfaceByModule"><span class="hs-identifier">lookupIfaceByModule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyPartialModIface"><span class="hs-identifier">emptyPartialModIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyFullModIface"><span class="hs-identifier">emptyFullModIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#lookupHptByModule"><span class="hs-identifier">lookupHptByModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#PackageInstEnv"><span class="hs-identifier">PackageInstEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PackageFamInstEnv"><span class="hs-identifier">PackageFamInstEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PackageRuleBase"><span class="hs-identifier">PackageRuleBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#PackageCompleteMatchMap"><span class="hs-identifier">PackageCompleteMatchMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mkSOName"><span class="hs-identifier">mkSOName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkHsSOName"><span class="hs-identifier">mkHsSOName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#soExt"><span class="hs-identifier">soExt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Metaprogramming</span></span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#MetaRequest"><span class="hs-identifier">MetaRequest</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier">MetaResult</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- data constructors not exported to ensure correct response type</span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#metaRequestE"><span class="hs-identifier">metaRequestE</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#metaRequestP"><span class="hs-identifier">metaRequestP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#metaRequestT"><span class="hs-identifier">metaRequestT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#metaRequestD"><span class="hs-identifier">metaRequestD</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#metaRequestAW"><span class="hs-identifier">metaRequestAW</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#MetaHook"><span class="hs-identifier">MetaHook</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Annotations</span></span><span>
</span><span id="line-75"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#prepareAnnotations"><span class="hs-identifier">prepareAnnotations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Interactive context</span></span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier">InteractiveContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyInteractiveContext"><span class="hs-identifier">emptyInteractiveContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#icPrintUnqual"><span class="hs-identifier">icPrintUnqual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#icInScopeTTs"><span class="hs-identifier">icInScopeTTs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#icExtendGblRdrEnv"><span class="hs-identifier">icExtendGblRdrEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#extendInteractiveContext"><span class="hs-identifier">extendInteractiveContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#extendInteractiveContextWithIds"><span class="hs-identifier">extendInteractiveContextWithIds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#substInteractiveContext"><span class="hs-identifier">substInteractiveContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#setInteractivePrintName"><span class="hs-identifier">setInteractivePrintName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#icInteractiveModule"><span class="hs-identifier">icInteractiveModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveImport"><span class="hs-identifier">InteractiveImport</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#setInteractivePackage"><span class="hs-identifier">setInteractivePackage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mkPrintUnqualified"><span class="hs-identifier">mkPrintUnqualified</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#pprModulePrefix"><span class="hs-identifier">pprModulePrefix</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mkQualPackage"><span class="hs-identifier">mkQualPackage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkQualModule"><span class="hs-identifier">mkQualModule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#pkgQual"><span class="hs-identifier">pkgQual</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Interfaces</span></span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier">ModIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PartialModIface"><span class="hs-identifier">PartialModIface</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface_"><span class="hs-identifier">ModIface_</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceBackend"><span class="hs-identifier">ModIfaceBackend</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceWarnCache"><span class="hs-identifier">mkIfaceWarnCache</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceHashCache"><span class="hs-identifier">mkIfaceHashCache</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceFixCache"><span class="hs-identifier">mkIfaceFixCache</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#emptyIfaceWarnCache"><span class="hs-identifier">emptyIfaceWarnCache</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mi_boot"><span class="hs-identifier">mi_boot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mi_fix"><span class="hs-identifier">mi_fix</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mi_semantic_module"><span class="hs-identifier">mi_semantic_module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mi_free_holes"><span class="hs-identifier">mi_free_holes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#renameFreeHoles"><span class="hs-identifier">renameFreeHoles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Fixity</span></span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#FixityEnv"><span class="hs-identifier">FixityEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FixItem"><span class="hs-identifier">FixItem</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#lookupFixity"><span class="hs-identifier">lookupFixity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyFixityEnv"><span class="hs-identifier">emptyFixityEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><span class="hs-comment">-- * TyThings and type environments</span></span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier">TyThing</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingAvailInfo"><span class="hs-identifier">tyThingAvailInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingTyCon"><span class="hs-identifier">tyThingTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingDataCon"><span class="hs-identifier">tyThingDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingConLike"><span class="hs-identifier">tyThingConLike</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingId"><span class="hs-identifier">tyThingId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingCoAxiom"><span class="hs-identifier">tyThingCoAxiom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingParent_maybe"><span class="hs-identifier">tyThingParent_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#tyThingsTyCoVars"><span class="hs-identifier">tyThingsTyCoVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#implicitTyThings"><span class="hs-identifier">implicitTyThings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#implicitTyConThings"><span class="hs-identifier">implicitTyConThings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#implicitClassThings"><span class="hs-identifier">implicitClassThings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#isImplicitTyThing"><span class="hs-identifier">isImplicitTyThing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier">TypeEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#lookupType"><span class="hs-identifier">lookupType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#lookupTypeHscEnv"><span class="hs-identifier">lookupTypeHscEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkTypeEnv"><span class="hs-identifier">mkTypeEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyTypeEnv"><span class="hs-identifier">emptyTypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvFromEntities"><span class="hs-identifier">typeEnvFromEntities</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkTypeEnvWithImplicits"><span class="hs-identifier">mkTypeEnvWithImplicits</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#extendTypeEnv"><span class="hs-identifier">extendTypeEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#extendTypeEnvList"><span class="hs-identifier">extendTypeEnvList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#extendTypeEnvWithIds"><span class="hs-identifier">extendTypeEnvWithIds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#plusTypeEnv"><span class="hs-identifier">plusTypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#lookupTypeEnv"><span class="hs-identifier">lookupTypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier">typeEnvElts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvTyCons"><span class="hs-identifier">typeEnvTyCons</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvIds"><span class="hs-identifier">typeEnvIds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvPatSyns"><span class="hs-identifier">typeEnvPatSyns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvDataCons"><span class="hs-identifier">typeEnvDataCons</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvCoAxioms"><span class="hs-identifier">typeEnvCoAxioms</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvClasses"><span class="hs-identifier">typeEnvClasses</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><span class="hs-comment">-- * MonadThings</span></span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#MonadThings"><span class="hs-identifier">MonadThings</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Information on imports and exports</span></span><span>
</span><span id="line-117"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#WhetherHasOrphans"><span class="hs-identifier">WhetherHasOrphans</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier">IsBootInterface</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Usage"><span class="hs-identifier">Usage</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#Dependencies"><span class="hs-identifier">Dependencies</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#noDependencies"><span class="hs-identifier">noDependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#updNameCache"><span class="hs-identifier">updNameCache</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceExport"><span class="hs-identifier">IfaceExport</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Warnings</span></span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier">Warnings</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#WarningTxt"><span class="hs-identifier">WarningTxt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#plusWarns"><span class="hs-identifier">plusWarns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Linker stuff</span></span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Linkable"><span class="hs-identifier">Linkable</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#isObjectLinkable"><span class="hs-identifier">isObjectLinkable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#linkableObjs"><span class="hs-identifier">linkableObjs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Unlinked"><span class="hs-identifier">Unlinked</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.ByteCode.Types.html#CompiledByteCode"><span class="hs-identifier">CompiledByteCode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier">isObject</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#nameOfObject"><span class="hs-identifier">nameOfObject</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#isInterpretable"><span class="hs-identifier">isInterpretable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#byteCodeOfObject"><span class="hs-identifier">byteCodeOfObject</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Program coverage</span></span><span>
</span><span id="line-131"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier">HpcInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#emptyHpcInfo"><span class="hs-identifier">emptyHpcInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#isHpcUsed"><span class="hs-identifier">isHpcUsed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#AnyHpcUsage"><span class="hs-identifier">AnyHpcUsage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Breakpoints</span></span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><a href="GHC.ByteCode.Types.html#ModBreaks"><span class="hs-identifier">ModBreaks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.ByteCode.Types.html#emptyModBreaks"><span class="hs-identifier">emptyModBreaks</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Safe Haskell information</span></span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier">IfaceTrustInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#getSafeMode"><span class="hs-identifier">getSafeMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier">setSafeMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#noIfaceTrustInfo"><span class="hs-identifier">noIfaceTrustInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#trustInfoToNum"><span class="hs-identifier">trustInfoToNum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier">numToTrustInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IsSafeImport"><span class="hs-identifier">IsSafeImport</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><span class="hs-comment">-- * result of the parser</span></span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#HsParsedModule"><span class="hs-identifier">HsParsedModule</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Compilation errors and warnings</span></span><span>
</span><span id="line-144"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier">SourceError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier">GhcApiError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkSrcErr"><span class="hs-identifier">mkSrcErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#srcErrorMessages"><span class="hs-identifier">srcErrorMessages</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#mkApiErr"><span class="hs-identifier">mkApiErr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#throwOneError"><span class="hs-identifier">throwOneError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#throwErrors"><span class="hs-identifier">throwErrors</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#handleSourceError"><span class="hs-identifier">handleSourceError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#handleFlagWarnings"><span class="hs-identifier">handleFlagWarnings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#printOrThrowWarnings"><span class="hs-identifier">printOrThrowWarnings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><span class="hs-comment">-- * COMPLETE signature</span></span><span>
</span><span id="line-149"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier">CompleteMatch</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier">CompleteMatchMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#mkCompleteMatchMap"><span class="hs-identifier">mkCompleteMatchMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#extendCompleteMatchMap"><span class="hs-identifier">extendCompleteMatchMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Exstensible Iface fields</span></span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier">ExtensibleFields</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier">FieldName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#emptyExtensibleFields"><span class="hs-identifier">emptyExtensibleFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-155"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#readField"><span class="hs-identifier">readField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#readIfaceField"><span class="hs-identifier">readIfaceField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#readIfaceFieldWith"><span class="hs-identifier">readIfaceFieldWith</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#writeField"><span class="hs-identifier">writeField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#writeIfaceField"><span class="hs-identifier">writeIfaceField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#writeIfaceFieldWith"><span class="hs-identifier">writeIfaceFieldWith</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><a href="GHC.Driver.Types.html#deleteField"><span class="hs-identifier">deleteField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#deleteIfaceField"><span class="hs-identifier">deleteIfaceField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">

#include &quot;HsVersions.h&quot;
</span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.ByteCode.Types.html"><span class="hs-identifier">GHC.ByteCode.Types</span></a></span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Runtime.Eval.Types.html"><span class="hs-identifier">GHC.Runtime.Eval.Types</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Runtime.Eval.Types.html#Resume"><span class="hs-identifier">Resume</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Runtime.Interpreter.Types.html"><span class="hs-identifier">GHC.Runtime.Interpreter.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Interpreter.Types.html#Interp"><span class="hs-identifier">Interp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.ForeignSrcLang.html#"><span class="hs-identifier">GHC.ForeignSrcLang</span></a></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-171"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html"><span class="hs-identifier">GHC.Types.Avail</span></a></span><span>
</span><span id="line-173"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.html"><span class="hs-identifier">GHC.Unit</span></a></span><span>
</span><span id="line-174"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html"><span class="hs-identifier">GHC.Core.InstEnv</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#InstEnv"><span class="hs-identifier">InstEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier">ClsInst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#identicalClsInstHead"><span class="hs-identifier">identicalClsInstHead</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html"><span class="hs-identifier">GHC.Core.FamInstEnv</span></a></span><span>
</span><span id="line-176"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>         </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier">CoreProgram</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#RuleBase"><span class="hs-identifier">RuleBase</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier">CoreRule</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-178"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-179"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-180"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-181"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-182"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#IdDetails"><span class="hs-identifier">IdDetails</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelParent"><span class="hs-identifier">RecSelParent</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html"><span class="hs-identifier">GHC.Parser.Annotation</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#ApiAnns"><span class="hs-identifier">ApiAnns</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html"><span class="hs-identifier">GHC.Types.Annotations</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#Annotation"><span class="hs-identifier">Annotation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#AnnEnv"><span class="hs-identifier">AnnEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#mkAnnEnv"><span class="hs-identifier">mkAnnEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#plusAnnEnv"><span class="hs-identifier">plusAnnEnv</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Class.html"><span class="hs-identifier">GHC.Core.Class</span></a></span><span>
</span><span id="line-188"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-189"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html"><span class="hs-identifier">GHC.Core.Coercion.Axiom</span></a></span><span>
</span><span id="line-190"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span>
</span><span id="line-191"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-192"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.PatSyn.html"><span class="hs-identifier">GHC.Core.PatSyn</span></a></span><span>
</span><span id="line-193"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#gHC_PRIM"><span class="hs-identifier">gHC_PRIM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#ioTyConName"><span class="hs-identifier">ioTyConName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#printName"><span class="hs-identifier">printName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#mkInteractiveModule"><span class="hs-identifier">mkInteractiveModule</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-195"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.CmdLine.html"><span class="hs-identifier">GHC.Driver.CmdLine</span></a></span><span>
</span><span id="line-196"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-197"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html"><span class="hs-identifier">GHC.Runtime.Linker.Types</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DynLinker"><span class="hs-identifier">DynLinker</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Linkable"><span class="hs-identifier">Linkable</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Unlinked"><span class="hs-identifier">Unlinked</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#SptEntry"><span class="hs-identifier">SptEntry</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html"><span class="hs-identifier">GHC.Driver.Phases</span></a></span><span>
</span><span id="line-199"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#Phase"><span class="hs-identifier">Phase</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#HscSource"><span class="hs-identifier">HscSource</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#hscSourceString"><span class="hs-identifier">hscSourceString</span></a></span><span>
</span><span id="line-200"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#isHsBootOrSig"><span class="hs-identifier">isHsBootOrSig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#isHsigFile"><span class="hs-identifier">isHsigFile</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html"><span class="hs-identifier">GHC.Driver.Phases</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Phase</span></span><span>
</span><span id="line-202"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-203"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html"><span class="hs-identifier">GHC.Iface.Syntax</span></a></span><span>
</span><span id="line-204"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-205"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-206"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-207"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span>
</span><span id="line-208"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DFM.html"><span class="hs-identifier">GHC.Types.Unique.DFM</span></a></span><span>
</span><span id="line-209"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-210"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html"><span class="hs-identifier">GHC.Data.StringBuffer</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html#StringBuffer"><span class="hs-identifier">StringBuffer</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Fingerprint.html"><span class="hs-identifier">GHC.Utils.Fingerprint</span></a></span><span>
</span><span id="line-212"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.html"><span class="hs-identifier">GHC.Utils.Monad</span></a></span><span>
</span><span id="line-213"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-214"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>
</span><span id="line-215"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span>
</span><span id="line-216"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Cache.html"><span class="hs-identifier">GHC.Types.Name.Cache</span></a></span><span>
</span><span id="line-217"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Platform.html#"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-218"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-219"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html"><span class="hs-identifier">GHC.Types.Unique.DSet</span></a></span><span>
</span><span id="line-220"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Serialized.html#"><span class="hs-identifier">GHC.Serialized</span></a></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Serialized.html#Serialized"><span class="hs-identifier">Serialized</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.LanguageExtensions.html#"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base/src/Foreign.html#"><span class="hs-identifier">Foreign</span></a></span><span>
</span><span id="line-224"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base/src/Control.Monad.html#"><span class="hs-identifier">Control.Monad</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base/src/Control.Monad.html#guard"><span class="hs-identifier">guard</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#liftM"><span class="hs-identifier">liftM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#ap"><span class="hs-identifier">ap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/Data.Traversable.html#forM"><span class="hs-identifier">forM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/Data.Foldable.html#forM_"><span class="hs-identifier">forM_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/Control.Monad.html#replicateM"><span class="hs-identifier">replicateM</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base/src/Data.IORef.html#"><span class="hs-identifier">Data.IORef</span></a></span><span>
</span><span id="line-226"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../containers/src/Data.Map.html#"><span class="hs-identifier">Data.Map</span></a></span><span>         </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../containers/src/Data.Map.Internal.html#Map"><span class="hs-identifier">Map</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers/src/Data.Map.html#"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-228"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../time/src/Data.Time.html#"><span class="hs-identifier">Data.Time</span></a></span><span>
</span><span id="line-229"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Exception.html"><span class="hs-identifier">GHC.Utils.Exception</span></a></span><span>
</span><span id="line-230"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath/src/System.FilePath.html#"><span class="hs-identifier">System.FilePath</span></a></span><span>
</span><span id="line-231"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../deepseq/src/Control.DeepSeq.html#"><span class="hs-identifier">Control.DeepSeq</span></a></span><span>
</span><span id="line-232"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers/src/Control.Monad.Trans.Reader.html#"><span class="hs-identifier">Control.Monad.Trans.Reader</span></a></span><span>
</span><span id="line-233"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers/src/Control.Monad.Trans.Class.html#"><span class="hs-identifier">Control.Monad.Trans.Class</span></a></span><span>
</span><span id="line-234"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../exceptions/src/Control.Monad.Catch.html#"><span class="hs-identifier">Control.Monad.Catch</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../exceptions/src/Control.Monad.Catch.html#MonadCatch"><span class="hs-identifier">MonadCatch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../exceptions/src/Control.Monad.Catch.html#catch"><span class="hs-identifier">catch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- Compilation state</span><span>
</span><span id="line-238"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-comment">-- | Status of a compilation to hard-code</span><span>
</span><span id="line-241"></span><span class="hs-keyword">data</span><span> </span><span id="HscStatus"><span class="annot"><a href="GHC.Driver.Types.html#HscStatus"><span class="hs-identifier hs-var">HscStatus</span></a></span></span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-comment">-- | Nothing to do.</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="HscNotGeneratingCode"><span class="annot"><a href="GHC.Driver.Types.html#HscNotGeneratingCode"><span class="hs-identifier hs-var">HscNotGeneratingCode</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-comment">-- | Nothing to do because code already exists.</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="HscUpToDate"><span class="annot"><a href="GHC.Driver.Types.html#HscUpToDate"><span class="hs-identifier hs-var">HscUpToDate</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-comment">-- | Update boot file result.</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="HscUpdateBoot"><span class="annot"><a href="GHC.Driver.Types.html#HscUpdateBoot"><span class="hs-identifier hs-var">HscUpdateBoot</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-comment">-- | Generate signature file (backpack)</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="HscUpdateSig"><span class="annot"><a href="GHC.Driver.Types.html#HscUpdateSig"><span class="hs-identifier hs-var">HscUpdateSig</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-comment">-- | Recompile this module.</span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="HscRecomp"><span class="annot"><a href="GHC.Driver.Types.html#HscRecomp"><span class="hs-identifier hs-var">HscRecomp</span></a></span></span><span>
</span><span id="line-252"></span><span>        </span><span class="hs-special">{</span><span> </span><span id="hscs_guts"><span class="annot"><span class="annottext">HscStatus -&gt; CgGuts
</span><a href="GHC.Driver.Types.html#hscs_guts"><span class="hs-identifier hs-var hs-var">hscs_guts</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CgGuts"><span class="hs-identifier hs-type">CgGuts</span></a></span><span>
</span><span id="line-253"></span><span>          </span><span class="hs-comment">-- ^ Information for the code generator.</span><span>
</span><span id="line-254"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="hscs_mod_location"><span class="annot"><span class="annottext">HscStatus -&gt; ModLocation
</span><a href="GHC.Driver.Types.html#hscs_mod_location"><span class="hs-identifier hs-var hs-var">hscs_mod_location</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span>
</span><span id="line-255"></span><span>          </span><span class="hs-comment">-- ^ Module info</span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="hscs_partial_iface"><span class="annot"><span class="annottext">HscStatus -&gt; PartialModIface
</span><a href="GHC.Driver.Types.html#hscs_partial_iface"><span class="hs-identifier hs-var hs-var">hscs_partial_iface</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PartialModIface"><span class="hs-identifier hs-type">PartialModIface</span></a></span><span>
</span><span id="line-257"></span><span>          </span><span class="hs-comment">-- ^ Partial interface</span><span>
</span><span id="line-258"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="hscs_old_iface_hash"><span class="annot"><span class="annottext">HscStatus -&gt; Maybe Fingerprint
</span><a href="GHC.Driver.Types.html#hscs_old_iface_hash"><span class="hs-identifier hs-var hs-var">hscs_old_iface_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>          </span><span class="hs-comment">-- ^ Old interface hash for this compilation, if an old interface file</span><span>
</span><span id="line-260"></span><span>          </span><span class="hs-comment">-- exists. Pass to `hscMaybeWriteIface` when writing the interface to</span><span>
</span><span id="line-261"></span><span>          </span><span class="hs-comment">-- avoid updating the existing interface when the interface isn't</span><span>
</span><span id="line-262"></span><span>          </span><span class="hs-comment">-- changed.</span><span>
</span><span id="line-263"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="hscs_iface_dflags"><span class="annot"><span class="annottext">HscStatus -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#hscs_iface_dflags"><span class="hs-identifier hs-var hs-var">hscs_iface_dflags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-264"></span><span>          </span><span class="hs-comment">-- ^ Generate final iface using this DynFlags.</span><span>
</span><span id="line-265"></span><span>          </span><span class="hs-comment">-- FIXME (osa): I don't understand why this is necessary, but I spent</span><span>
</span><span id="line-266"></span><span>          </span><span class="hs-comment">-- almost two days trying to figure this out and I couldn't .. perhaps</span><span>
</span><span id="line-267"></span><span>          </span><span class="hs-comment">-- someone who understands this code better will remove this later.</span><span>
</span><span id="line-268"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- Should HscStatus contain the HomeModInfo?</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- All places where we return a status we also return a HomeModInfo.</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- The Hsc monad: Passing an environment and warning state</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-keyword">newtype</span><span> </span><span id="Hsc"><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-var">Hsc</span></a></span></span><span> </span><span id="local-6989586621680920944"><span class="annot"><a href="#local-6989586621680920944"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Hsc"><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-var">Hsc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#WarningMessages"><span class="hs-identifier hs-type">WarningMessages</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680920944"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#WarningMessages"><span class="hs-identifier hs-type">WarningMessages</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680920065"><span id="local-6989586621680920069"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Hsc a -&gt; Hsc b)
-&gt; (forall a b. a -&gt; Hsc b -&gt; Hsc a) -&gt; Functor Hsc
forall a b. a -&gt; Hsc b -&gt; Hsc a
forall a b. (a -&gt; b) -&gt; Hsc a -&gt; Hsc b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; Hsc b -&gt; Hsc a
$c&lt;$ :: forall a b. a -&gt; Hsc b -&gt; Hsc a
fmap :: forall a b. (a -&gt; b) -&gt; Hsc a -&gt; Hsc b
$cfmap :: forall a b. (a -&gt; b) -&gt; Hsc a -&gt; Hsc b
</span><a href="../../base/src/GHC.Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680920052"><span id="local-6989586621680920054"><span id="local-6989586621680920056"><span class="annot"><a href="../../base/src/GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-279"></span><span>    </span><span id="local-6989586621680920049"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; Hsc a
</span><a href="../../base/src/GHC.Base.html#pure"><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></a></span></span><span> </span><span id="local-6989586621680920048"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920048"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
forall a.
(HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
</span><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-var">Hsc</span></a></span><span> </span><span class="annot"><span class="annottext">((HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a)
-&gt; (HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">HscEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680920047"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920047"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a, WarningMessages) -&gt; IO (a, WarningMessages)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920048"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920047"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>    </span><span id="local-6989586621680920045"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. Hsc (a -&gt; b) -&gt; Hsc a -&gt; Hsc b
</span><a href="../../base/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hsc (a -&gt; b) -&gt; Hsc a -&gt; Hsc b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><a href="../../base/src/GHC.Base.html#ap"><span class="hs-identifier hs-var">ap</span></a></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680920038"><span id="local-6989586621680920040"><span class="annot"><a href="../../base/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span><span> </span><span id="local-6989586621680920035"><span class="annot"><span class="annottext">HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)
</span><a href="#local-6989586621680920035"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621680920034"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. Hsc a -&gt; (a -&gt; Hsc b) -&gt; Hsc b
</span><a href="../../base/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></a></span></span><span> </span><span id="local-6989586621680920033"><span class="annot"><span class="annottext">a -&gt; Hsc b
</span><a href="#local-6989586621680920033"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HscEnv -&gt; WarningMessages -&gt; IO (b, WarningMessages)) -&gt; Hsc b
forall a.
(HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
</span><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-var">Hsc</span></a></span><span> </span><span class="annot"><span class="annottext">((HscEnv -&gt; WarningMessages -&gt; IO (b, WarningMessages)) -&gt; Hsc b)
-&gt; (HscEnv -&gt; WarningMessages -&gt; IO (b, WarningMessages)) -&gt; Hsc b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680920032"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920032"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680920031"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920031"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680920030"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920030"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680920029"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920029"><span class="hs-identifier hs-var">w1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)
</span><a href="#local-6989586621680920035"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920032"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920031"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-284"></span><span>                                   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; Hsc b
</span><a href="#local-6989586621680920033"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920030"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-285"></span><span>                                       </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span><span> </span><span id="local-6989586621680920028"><span class="annot"><span class="annottext">HscEnv -&gt; WarningMessages -&gt; IO (b, WarningMessages)
</span><a href="#local-6989586621680920028"><span class="hs-identifier hs-var">k'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; WarningMessages -&gt; IO (b, WarningMessages)
</span><a href="#local-6989586621680920028"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920032"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920029"><span class="hs-identifier hs-var">w1</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../base/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-288"></span><span>    </span><span id="local-6989586621680920020"><span class="annot"><span class="annottext">liftIO :: forall a. IO a -&gt; Hsc a
</span><a href="../../base/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var hs-var hs-var hs-var">liftIO</span></a></span></span><span> </span><span id="local-6989586621680920018"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621680920018"><span class="hs-identifier hs-var">io</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
forall a.
(HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
</span><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-var">Hsc</span></a></span><span> </span><span class="annot"><span class="annottext">((HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a)
-&gt; (HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">HscEnv
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680920017"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920017"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621680920016"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920016"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621680920018"><span class="hs-identifier hs-var">io</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(a, WarningMessages) -&gt; IO (a, WarningMessages)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920016"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920017"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#HasDynFlags"><span class="hs-identifier hs-type">HasDynFlags</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-291"></span><span>    </span><span id="local-6989586621680920011"><span class="annot"><span class="annottext">getDynFlags :: Hsc DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var hs-var hs-var hs-var">getDynFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HscEnv -&gt; WarningMessages -&gt; IO (DynFlags, WarningMessages))
-&gt; Hsc DynFlags
forall a.
(HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)) -&gt; Hsc a
</span><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-var">Hsc</span></a></span><span> </span><span class="annot"><span class="annottext">((HscEnv -&gt; WarningMessages -&gt; IO (DynFlags, WarningMessages))
 -&gt; Hsc DynFlags)
-&gt; (HscEnv -&gt; WarningMessages -&gt; IO (DynFlags, WarningMessages))
-&gt; Hsc DynFlags
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680920009"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920009"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680920008"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920008"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DynFlags, WarningMessages) -&gt; IO (DynFlags, WarningMessages)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920009"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920008"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span id="local-6989586621680920921"><span class="annot"><a href="GHC.Driver.Types.html#runHsc"><span class="hs-identifier hs-type">runHsc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920921"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621680920921"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-294"></span><span id="runHsc"><span class="annot"><span class="annottext">runHsc :: forall a. HscEnv -&gt; Hsc a -&gt; IO a
</span><a href="GHC.Driver.Types.html#runHsc"><span class="hs-identifier hs-var hs-var">runHsc</span></a></span></span><span> </span><span id="local-6989586621680920003"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920003"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span><span> </span><span id="local-6989586621680920002"><span class="annot"><span class="annottext">HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)
</span><a href="#local-6989586621680920002"><span class="hs-identifier hs-var">hsc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680920001"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920001"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680920000"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920000"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; WarningMessages -&gt; IO (a, WarningMessages)
</span><a href="#local-6989586621680920002"><span class="hs-identifier hs-var">hsc</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920003"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><span class="annottext">DynFlags -&gt; WarningMessages -&gt; IO ()
</span><a href="GHC.Driver.Types.html#printOrThrowWarnings"><span class="hs-identifier hs-var">printOrThrowWarnings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680920003"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680920000"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><span class="annottext">a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680920001"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="annot"><a href="GHC.Driver.Types.html#mkInteractiveHscEnv"><span class="hs-identifier hs-type">mkInteractiveHscEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span>
</span><span id="line-300"></span><span id="mkInteractiveHscEnv"><span class="annot"><span class="annottext">mkInteractiveHscEnv :: HscEnv -&gt; HscEnv
</span><a href="GHC.Driver.Types.html#mkInteractiveHscEnv"><span class="hs-identifier hs-var hs-var">mkInteractiveHscEnv</span></a></span></span><span> </span><span id="local-6989586621680919998"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919998"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919998"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsc_dflags :: DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919997"><span class="hs-identifier hs-var">interactive_dflags</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-302"></span><span>    </span><span id="local-6989586621680919997"><span class="annot"><span class="annottext">interactive_dflags :: DynFlags
</span><a href="#local-6989586621680919997"><span class="hs-identifier hs-var hs-var">interactive_dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#ic_dflags"><span class="hs-identifier hs-var hs-var">ic_dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#hsc_IC"><span class="hs-identifier hs-var hs-var">hsc_IC</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919998"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span id="local-6989586621680919994"><span class="annot"><a href="GHC.Driver.Types.html#runInteractiveHsc"><span class="hs-identifier hs-type">runInteractiveHsc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Hsc"><span class="hs-identifier hs-type">Hsc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680919994"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621680919994"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-305"></span><span class="hs-comment">-- A variant of runHsc that switches in the DynFlags from the</span><span>
</span><span id="line-306"></span><span class="hs-comment">-- InteractiveContext before running the Hsc computation.</span><span>
</span><span id="line-307"></span><span id="runInteractiveHsc"><span class="annot"><span class="annottext">runInteractiveHsc :: forall a. HscEnv -&gt; Hsc a -&gt; IO a
</span><a href="GHC.Driver.Types.html#runInteractiveHsc"><span class="hs-identifier hs-var hs-var">runInteractiveHsc</span></a></span></span><span> </span><span id="local-6989586621680919993"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919993"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; Hsc a -&gt; IO a
forall a. HscEnv -&gt; Hsc a -&gt; IO a
</span><a href="GHC.Driver.Types.html#runHsc"><span class="hs-identifier hs-var">runHsc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; HscEnv
</span><a href="GHC.Driver.Types.html#mkInteractiveHscEnv"><span class="hs-identifier hs-var">mkInteractiveHscEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919993"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-310"></span><span class="hs-comment">-- Source Errors</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-comment">-- When the compiler (GHC.Driver.Main) discovers errors, it throws an</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- exception in the IO monad.</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="annot"><a href="GHC.Driver.Types.html#mkSrcErr"><span class="hs-identifier hs-type">mkSrcErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#ErrorMessages"><span class="hs-identifier hs-type">ErrorMessages</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span><span>
</span><span id="line-316"></span><span id="mkSrcErr"><span class="annot"><span class="annottext">mkSrcErr :: WarningMessages -&gt; SourceError
</span><a href="GHC.Driver.Types.html#mkSrcErr"><span class="hs-identifier hs-var hs-var">mkSrcErr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningMessages -&gt; SourceError
</span><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-var">SourceError</span></a></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="annot"><a href="GHC.Driver.Types.html#srcErrorMessages"><span class="hs-identifier hs-type">srcErrorMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#ErrorMessages"><span class="hs-identifier hs-type">ErrorMessages</span></a></span><span>
</span><span id="line-319"></span><span id="srcErrorMessages"><span class="annot"><span class="annottext">srcErrorMessages :: SourceError -&gt; WarningMessages
</span><a href="GHC.Driver.Types.html#srcErrorMessages"><span class="hs-identifier hs-var hs-var">srcErrorMessages</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span><span> </span><span id="local-6989586621680919990"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919990"><span class="hs-identifier hs-var">msgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919990"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="annot"><a href="GHC.Driver.Types.html#mkApiErr"><span class="hs-identifier hs-type">mkApiErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier hs-type">GhcApiError</span></a></span><span>
</span><span id="line-322"></span><span id="mkApiErr"><span class="annot"><span class="annottext">mkApiErr :: DynFlags -&gt; SDoc -&gt; GhcApiError
</span><a href="GHC.Driver.Types.html#mkApiErr"><span class="hs-identifier hs-var hs-var">mkApiErr</span></a></span></span><span> </span><span id="local-6989586621680919989"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919989"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621680919988"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919988"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; GhcApiError
</span><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier hs-var">GhcApiError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; SDoc -&gt; FieldName
</span><a href="GHC.Utils.Outputable.html#showSDoc"><span class="hs-identifier hs-var">showSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919989"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919988"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span id="local-6989586621680920913"><span id="local-6989586621680920914"><span class="annot"><a href="GHC.Driver.Types.html#throwErrors"><span class="hs-identifier hs-type">throwErrors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920914"><span class="hs-identifier hs-type">io</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#ErrorMessages"><span class="hs-identifier hs-type">ErrorMessages</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920914"><span class="hs-identifier hs-type">io</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920913"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-325"></span><span id="throwErrors"><span class="annot"><span class="annottext">throwErrors :: forall (io :: * -&gt; *) a. MonadIO io =&gt; WarningMessages -&gt; io a
</span><a href="GHC.Driver.Types.html#throwErrors"><span class="hs-identifier hs-var hs-var">throwErrors</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; io a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; io a)
-&gt; (WarningMessages -&gt; IO a) -&gt; WarningMessages -&gt; io a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SourceError -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">(SourceError -&gt; IO a)
-&gt; (WarningMessages -&gt; SourceError) -&gt; WarningMessages -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages -&gt; SourceError
</span><a href="GHC.Driver.Types.html#mkSrcErr"><span class="hs-identifier hs-var">mkSrcErr</span></a></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span id="local-6989586621680920903"><span id="local-6989586621680920905"><span class="annot"><a href="GHC.Driver.Types.html#throwOneError"><span class="hs-identifier hs-type">throwOneError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920905"><span class="hs-identifier hs-type">io</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#ErrMsg"><span class="hs-identifier hs-type">ErrMsg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920905"><span class="hs-identifier hs-type">io</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920903"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-328"></span><span id="throwOneError"><span class="annot"><span class="annottext">throwOneError :: forall (io :: * -&gt; *) a. MonadIO io =&gt; ErrMsg -&gt; io a
</span><a href="GHC.Driver.Types.html#throwOneError"><span class="hs-identifier hs-var hs-var">throwOneError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningMessages -&gt; io a
forall (io :: * -&gt; *) a. MonadIO io =&gt; WarningMessages -&gt; io a
</span><a href="GHC.Driver.Types.html#throwErrors"><span class="hs-identifier hs-var">throwErrors</span></a></span><span> </span><span class="annot"><span class="annottext">(WarningMessages -&gt; io a)
-&gt; (ErrMsg -&gt; WarningMessages) -&gt; ErrMsg -&gt; io a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ErrMsg -&gt; WarningMessages
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">-- | A source error is an error that is caused by one or more errors in the</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- source code.  A 'SourceError' is thrown by many functions in the</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- compilation pipeline.  Inside GHC these errors are merely printed via</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- 'log_action', but API clients may treat them differently, for example,</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- insert them into a list box.  If you want the default behaviour, use the</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- idiom:</span><span>
</span><span id="line-336"></span><span class="hs-comment">--</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- &gt; handleSourceError printExceptionAndWarnings $ do</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- &gt;   ... api calls that may fail ...</span><span>
</span><span id="line-339"></span><span class="hs-comment">--</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- The 'SourceError's error messages can be accessed via 'srcErrorMessages'.</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- This list may be empty if the compiler failed due to @-Werror@</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- ('Opt_WarnIsError').</span><span>
</span><span id="line-343"></span><span class="hs-comment">--</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- See 'printExceptionAndWarnings' for more information on what to take care</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- of when writing a custom error handler.</span><span>
</span><span id="line-346"></span><span class="hs-keyword">newtype</span><span> </span><span id="SourceError"><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-var">SourceError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SourceError"><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-var">SourceError</span></a></span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#ErrorMessages"><span class="hs-identifier hs-type">ErrorMessages</span></a></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919973"><span id="local-6989586621680919976"><span class="annot"><a href="../../base/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-349"></span><span>  </span><span id="local-6989586621680919969"><span class="annot"><span class="annottext">show :: SourceError -&gt; FieldName
</span><a href="../../base/src/GHC.Show.html#show"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span><span> </span><span id="local-6989586621680919967"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919967"><span class="hs-identifier hs-var">msgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldName] -&gt; FieldName
</span><a href="../../base/src/Data.OldList.html#unlines"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldName] -&gt; FieldName)
-&gt; (WarningMessages -&gt; [FieldName]) -&gt; WarningMessages -&gt; FieldName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ErrMsg -&gt; FieldName) -&gt; [ErrMsg] -&gt; [FieldName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ErrMsg -&gt; FieldName
forall a. Show a =&gt; a -&gt; FieldName
</span><a href="../../base/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">([ErrMsg] -&gt; [FieldName])
-&gt; (WarningMessages -&gt; [ErrMsg]) -&gt; WarningMessages -&gt; [FieldName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages -&gt; [ErrMsg]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">(WarningMessages -&gt; FieldName) -&gt; WarningMessages -&gt; FieldName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919967"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919955"><span id="local-6989586621680919957"><span id="local-6989586621680919959"><span class="annot"><a href="../../base/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span></span></span></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- | Perform the given action and call the exception handler if the action</span><span>
</span><span id="line-354"></span><span class="hs-comment">-- throws a 'SourceError'.  See 'SourceError' for more information.</span><span>
</span><span id="line-355"></span><span id="local-6989586621680920890"><span id="local-6989586621680920892"><span class="annot"><a href="GHC.Driver.Types.html#handleSourceError"><span class="hs-identifier hs-type">handleSourceError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../exceptions/src/Control.Monad.Catch.html#MonadCatch"><span class="hs-identifier hs-type">MonadCatch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920892"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-356"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920890"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ exception handler</span><span>
</span><span id="line-357"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920890"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- ^ action to perform</span><span>
</span><span id="line-358"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920890"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-359"></span><span id="handleSourceError"><span class="annot"><span class="annottext">handleSourceError :: forall (m :: * -&gt; *) a.
MonadCatch m =&gt;
(SourceError -&gt; m a) -&gt; m a -&gt; m a
</span><a href="GHC.Driver.Types.html#handleSourceError"><span class="hs-identifier hs-var hs-var">handleSourceError</span></a></span></span><span> </span><span id="local-6989586621680919950"><span class="annot"><span class="annottext">SourceError -&gt; m a
</span><a href="#local-6989586621680919950"><span class="hs-identifier hs-var">handler</span></a></span></span><span> </span><span id="local-6989586621680919949"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621680919949"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-360"></span><span>  </span><span class="annot"><span class="annottext">m a -&gt; (SourceError -&gt; m a) -&gt; m a
forall (m :: * -&gt; *) e a.
(MonadCatch m, Exception e) =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="../../exceptions/src/Control.Monad.Catch.html#catch"><span class="hs-identifier hs-var">MC.catch</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621680919949"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680919948"><span class="annot"><span class="annottext">SourceError
</span><a href="#local-6989586621680919948"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#SourceError"><span class="hs-identifier hs-type">SourceError</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SourceError -&gt; m a
</span><a href="#local-6989586621680919950"><span class="hs-identifier hs-var">handler</span></a></span><span> </span><span class="annot"><span class="annottext">SourceError
</span><a href="#local-6989586621680919948"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- | An error thrown if the GHC API is used in an incorrect fashion.</span><span>
</span><span id="line-363"></span><span class="hs-keyword">newtype</span><span> </span><span id="GhcApiError"><span class="annot"><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier hs-var">GhcApiError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GhcApiError"><span class="annot"><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier hs-var">GhcApiError</span></a></span></span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919943"><span id="local-6989586621680919946"><span class="annot"><a href="../../base/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier hs-type">GhcApiError</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621680919942"><span class="annot"><span class="annottext">show :: GhcApiError -&gt; FieldName
</span><a href="#local-6989586621680919942"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier hs-type">GhcApiError</span></a></span><span> </span><span id="local-6989586621680919941"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680919941"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680919941"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919931"><span id="local-6989586621680919933"><span id="local-6989586621680919935"><span class="annot"><a href="../../base/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#GhcApiError"><span class="hs-identifier hs-type">GhcApiError</span></a></span></span></span></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="hs-comment">-- | Given a bag of warnings, turn them into an exception if</span><span>
</span><span id="line-371"></span><span class="hs-comment">-- -Werror is enabled, or print them out otherwise.</span><span>
</span><span id="line-372"></span><span class="annot"><a href="GHC.Driver.Types.html#printOrThrowWarnings"><span class="hs-identifier hs-type">printOrThrowWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#WarnMsg"><span class="hs-identifier hs-type">WarnMsg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span id="printOrThrowWarnings"><span class="annot"><span class="annottext">printOrThrowWarnings :: DynFlags -&gt; WarningMessages -&gt; IO ()
</span><a href="GHC.Driver.Types.html#printOrThrowWarnings"><span class="hs-identifier hs-var hs-var">printOrThrowWarnings</span></a></span></span><span> </span><span id="local-6989586621680919929"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919929"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621680919928"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919928"><span class="hs-identifier hs-var">warns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680919927"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919927"><span class="hs-identifier hs-var">make_error</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680919926"><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919926"><span class="hs-identifier hs-var">warns'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-375"></span><span>        </span><span class="annot"><span class="annottext">(Bool -&gt; ErrMsg -&gt; (Bool, ErrMsg))
-&gt; Bool -&gt; WarningMessages -&gt; (Bool, WarningMessages)
forall acc x y.
(acc -&gt; x -&gt; (acc, y)) -&gt; acc -&gt; Bag x -&gt; (acc, Bag y)
</span><a href="GHC.Data.Bag.html#mapAccumBagL"><span class="hs-identifier hs-var">mapAccumBagL</span></a></span><span>
</span><span id="line-376"></span><span>          </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680919924"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919924"><span class="hs-identifier hs-var">make_err</span></a></span></span><span> </span><span id="local-6989586621680919923"><span class="annot"><span class="annottext">ErrMsg
</span><a href="#local-6989586621680919923"><span class="hs-identifier hs-var">warn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-377"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; ErrMsg -&gt; Maybe (Maybe WarningFlag)
</span><a href="GHC.Utils.Error.html#isWarnMsgFatal"><span class="hs-identifier hs-var">isWarnMsgFatal</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919929"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">ErrMsg
</span><a href="#local-6989586621680919923"><span class="hs-identifier hs-var">warn</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-378"></span><span>              </span><span class="annot"><span class="annottext">Maybe (Maybe WarningFlag)
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-379"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919924"><span class="hs-identifier hs-var">make_err</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ErrMsg
</span><a href="#local-6989586621680919923"><span class="hs-identifier hs-var">warn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>              </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919921"><span class="annot"><span class="annottext">Maybe WarningFlag
</span><a href="#local-6989586621680919921"><span class="hs-identifier hs-var">err_reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-381"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ErrMsg
</span><a href="#local-6989586621680919923"><span class="hs-identifier hs-var">warn</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">errMsgSeverity :: Severity
</span><a href="GHC.Utils.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Utils.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>
</span><span id="line-382"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgReason :: WarnReason
</span><a href="GHC.Utils.Error.html#errMsgReason"><span class="hs-identifier hs-var">errMsgReason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe WarningFlag -&gt; WarnReason
</span><a href="GHC.Driver.Flags.html#ErrReason"><span class="hs-identifier hs-var">ErrReason</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe WarningFlag
</span><a href="#local-6989586621680919921"><span class="hs-identifier hs-var">err_reason</span></a></span><span>
</span><span id="line-383"></span><span>                           </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919928"><span class="hs-identifier hs-var">warns</span></a></span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919927"><span class="hs-identifier hs-var">make_error</span></a></span><span>
</span><span id="line-386"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SourceError -&gt; IO ()
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningMessages -&gt; SourceError
</span><a href="GHC.Driver.Types.html#mkSrcErr"><span class="hs-identifier hs-var">mkSrcErr</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919926"><span class="hs-identifier hs-var">warns'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; WarningMessages -&gt; IO ()
</span><a href="GHC.Utils.Error.html#printBagOfErrors"><span class="hs-identifier hs-var">printBagOfErrors</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919929"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919928"><span class="hs-identifier hs-var">warns</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="annot"><a href="GHC.Driver.Types.html#handleFlagWarnings"><span class="hs-identifier hs-type">handleFlagWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.CmdLine.html#Warn"><span class="hs-identifier hs-type">Warn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span id="handleFlagWarnings"><span class="annot"><span class="annottext">handleFlagWarnings :: DynFlags -&gt; [Warn] -&gt; IO ()
</span><a href="GHC.Driver.Types.html#handleFlagWarnings"><span class="hs-identifier hs-var hs-var">handleFlagWarnings</span></a></span></span><span> </span><span id="local-6989586621680919915"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919915"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621680919914"><span class="annot"><span class="annottext">[Warn]
</span><a href="#local-6989586621680919914"><span class="hs-identifier hs-var">warns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680919913"><span class="annot"><span class="annottext">warns' :: [Warn]
</span><a href="#local-6989586621680919913"><span class="hs-identifier hs-var hs-var">warns'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Warn -&gt; Bool) -&gt; [Warn] -&gt; [Warn]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; WarnReason -&gt; Bool
</span><a href="GHC.Driver.Types.html#shouldPrintWarning"><span class="hs-identifier hs-var">shouldPrintWarning</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919915"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">(WarnReason -&gt; Bool) -&gt; (Warn -&gt; WarnReason) -&gt; Warn -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Warn -&gt; WarnReason
</span><a href="GHC.Driver.CmdLine.html#warnReason"><span class="hs-identifier hs-var hs-var">warnReason</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">[Warn]
</span><a href="#local-6989586621680919914"><span class="hs-identifier hs-var">warns</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span>      </span><span class="hs-comment">-- It would be nicer if warns :: [Located MsgDoc], but that</span><span>
</span><span id="line-394"></span><span>      </span><span class="hs-comment">-- has circular import problems.</span><span>
</span><span id="line-395"></span><span>      </span><span id="local-6989586621680919910"><span class="annot"><span class="annottext">bag :: WarningMessages
</span><a href="#local-6989586621680919910"><span class="hs-identifier hs-var hs-var">bag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ErrMsg] -&gt; WarningMessages
forall a. [a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#listToBag"><span class="hs-identifier hs-var">listToBag</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; SrcSpan -&gt; SDoc -&gt; ErrMsg
</span><a href="GHC.Utils.Error.html#mkPlainWarnMsg"><span class="hs-identifier hs-var">mkPlainWarnMsg</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919915"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621680919907"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680919905"><span class="hs-identifier hs-var">warn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Driver.CmdLine.html#Warn"><span class="hs-identifier hs-type">Warn</span></a></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621680919907"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621680919907"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621680919905"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680919905"><span class="hs-identifier hs-var">warn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Warn]
</span><a href="#local-6989586621680919913"><span class="hs-identifier hs-var">warns'</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span>  </span><span class="annot"><span class="annottext">DynFlags -&gt; WarningMessages -&gt; IO ()
</span><a href="GHC.Driver.Types.html#printOrThrowWarnings"><span class="hs-identifier hs-var">printOrThrowWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919915"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WarningMessages
</span><a href="#local-6989586621680919910"><span class="hs-identifier hs-var">bag</span></a></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-comment">-- Given a warn reason, check to see if it's associated -W opt is enabled</span><span>
</span><span id="line-401"></span><span class="annot"><a href="GHC.Driver.Types.html#shouldPrintWarning"><span class="hs-identifier hs-type">shouldPrintWarning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.CmdLine.html#WarnReason"><span class="hs-identifier hs-type">GHC.Driver.CmdLine.WarnReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-402"></span><span id="shouldPrintWarning"><span class="annot"><span class="annottext">shouldPrintWarning :: DynFlags -&gt; WarnReason -&gt; Bool
</span><a href="GHC.Driver.Types.html#shouldPrintWarning"><span class="hs-identifier hs-var hs-var">shouldPrintWarning</span></a></span></span><span> </span><span id="local-6989586621680919902"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919902"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.CmdLine.html#ReasonDeprecatedFlag"><span class="hs-identifier hs-var">ReasonDeprecatedFlag</span></a></span><span>
</span><span id="line-403"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#wopt"><span class="hs-identifier hs-var">wopt</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnDeprecatedFlags"><span class="hs-identifier hs-var">Opt_WarnDeprecatedFlags</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919902"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-404"></span><span class="annot"><a href="GHC.Driver.Types.html#shouldPrintWarning"><span class="hs-identifier hs-var">shouldPrintWarning</span></a></span><span> </span><span id="local-6989586621680919898"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919898"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><a href="GHC.Driver.CmdLine.html#ReasonUnrecognisedFlag"><span class="hs-identifier hs-var">ReasonUnrecognisedFlag</span></a></span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#wopt"><span class="hs-identifier hs-var">wopt</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="GHC.Driver.Flags.html#Opt_WarnUnrecognisedWarningFlags"><span class="hs-identifier hs-var">Opt_WarnUnrecognisedWarningFlags</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919898"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-406"></span><span class="annot"><a href="GHC.Driver.Types.html#shouldPrintWarning"><span class="hs-identifier hs-var">shouldPrintWarning</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">WarnReason
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{HscEnv}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- | HscEnv is like 'Session', except that some of the fields are immutable.</span><span>
</span><span id="line-418"></span><span class="hs-comment">-- An HscEnv is used to compile a single module from plain Haskell source</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- code (after preprocessing) to either C, assembly or C--. It's also used</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- to store the dynamic linker state to allow for multiple linkers in the</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- same address space.</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- Things like the module graph don't change during a single compilation.</span><span>
</span><span id="line-423"></span><span class="hs-comment">--</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- Historical note: \&quot;hsc\&quot; used to be the name of the compiler binary,</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- when there was a separate driver and compiler.  To compile a single</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- module, the driver would invoke hsc on the source code... so nowadays</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- we think of hsc as the layer of the compiler that deals with compiling</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- a single module.</span><span>
</span><span id="line-429"></span><span class="hs-keyword">data</span><span> </span><span id="HscEnv"><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-var">HscEnv</span></a></span></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HscEnv"><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-var">HscEnv</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-431"></span><span>        </span><span id="hsc_dflags"><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var hs-var">hsc_dflags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-432"></span><span>                </span><span class="hs-comment">-- ^ The dynamic flag settings</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span>        </span><span id="hsc_targets"><span class="annot"><span class="annottext">HscEnv -&gt; [Target]
</span><a href="GHC.Driver.Types.html#hsc_targets"><span class="hs-identifier hs-var hs-var">hsc_targets</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-435"></span><span>                </span><span class="hs-comment">-- ^ The targets (or roots) of the current session</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span>        </span><span id="hsc_mod_graph"><span class="annot"><span class="annottext">HscEnv -&gt; ModuleGraph
</span><a href="GHC.Driver.Types.html#hsc_mod_graph"><span class="hs-identifier hs-var hs-var">hsc_mod_graph</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-438"></span><span>                </span><span class="hs-comment">-- ^ The module graph of the current session</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span>        </span><span id="hsc_IC"><span class="annot"><span class="annottext">HscEnv -&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#hsc_IC"><span class="hs-identifier hs-var hs-var">hsc_IC</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-441"></span><span>                </span><span class="hs-comment">-- ^ The context for evaluating interactive statements</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span>        </span><span id="hsc_HPT"><span class="annot"><span class="annottext">HscEnv -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#hsc_HPT"><span class="hs-identifier hs-var hs-var">hsc_HPT</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-444"></span><span>                </span><span class="hs-comment">-- ^ The home package table describes already-compiled</span><span>
</span><span id="line-445"></span><span>                </span><span class="hs-comment">-- home-package modules, /excluding/ the module we</span><span>
</span><span id="line-446"></span><span>                </span><span class="hs-comment">-- are compiling right now.</span><span>
</span><span id="line-447"></span><span>                </span><span class="hs-comment">-- (In one-shot mode the current module is the only</span><span>
</span><span id="line-448"></span><span>                </span><span class="hs-comment">-- home-package module, so hsc_HPT is empty.  All other</span><span>
</span><span id="line-449"></span><span>                </span><span class="hs-comment">-- modules count as \&quot;external-package\&quot; modules.</span><span>
</span><span id="line-450"></span><span>                </span><span class="hs-comment">-- However, even in GHCi mode, hi-boot interfaces are</span><span>
</span><span id="line-451"></span><span>                </span><span class="hs-comment">-- demand-loaded into the external-package table.)</span><span>
</span><span id="line-452"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-453"></span><span>                </span><span class="hs-comment">-- 'hsc_HPT' is not mutable because we only demand-load</span><span>
</span><span id="line-454"></span><span>                </span><span class="hs-comment">-- external packages; the home package is eagerly</span><span>
</span><span id="line-455"></span><span>                </span><span class="hs-comment">-- loaded, module by module, by the compilation manager.</span><span>
</span><span id="line-456"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-457"></span><span>                </span><span class="hs-comment">-- The HPT may contain modules compiled earlier by @--make@</span><span>
</span><span id="line-458"></span><span>                </span><span class="hs-comment">-- but not actually below the current module in the dependency</span><span>
</span><span id="line-459"></span><span>                </span><span class="hs-comment">-- graph.</span><span>
</span><span id="line-460"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-461"></span><span>                </span><span class="hs-comment">-- (This changes a previous invariant: changed Jan 05.)</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span>        </span><span id="hsc_EPS"><span class="annot"><span class="annottext">HscEnv -&gt; IORef ExternalPackageState
</span><a href="GHC.Driver.Types.html#hsc_EPS"><span class="hs-identifier hs-var hs-var">hsc_EPS</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExternalPackageState"><span class="hs-identifier hs-type">ExternalPackageState</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-464"></span><span>                </span><span class="hs-comment">-- ^ Information about the currently loaded external packages.</span><span>
</span><span id="line-465"></span><span>                </span><span class="hs-comment">-- This is mutable because packages will be demand-loaded during</span><span>
</span><span id="line-466"></span><span>                </span><span class="hs-comment">-- a compilation run as required.</span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span>        </span><span id="hsc_NC"><span class="annot"><span class="annottext">HscEnv -&gt; IORef NameCache
</span><a href="GHC.Driver.Types.html#hsc_NC"><span class="hs-identifier hs-var hs-var">hsc_NC</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Cache.html#NameCache"><span class="hs-identifier hs-type">NameCache</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-469"></span><span>                </span><span class="hs-comment">-- ^ As with 'hsc_EPS', this is side-effected by compiling to</span><span>
</span><span id="line-470"></span><span>                </span><span class="hs-comment">-- reflect sucking in interface files.  They cache the state of</span><span>
</span><span id="line-471"></span><span>                </span><span class="hs-comment">-- external interface files, in effect.</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span>        </span><span id="hsc_FC"><span class="annot"><span class="annottext">HscEnv -&gt; IORef FinderCache
</span><a href="GHC.Driver.Types.html#hsc_FC"><span class="hs-identifier hs-var hs-var">hsc_FC</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FinderCache"><span class="hs-identifier hs-type">FinderCache</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-474"></span><span>                </span><span class="hs-comment">-- ^ The cached result of performing finding in the file system</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>        </span><span id="hsc_type_env_var"><span class="annot"><span class="annottext">HscEnv -&gt; Maybe (Module, IORef TypeEnv)
</span><a href="GHC.Driver.Types.html#hsc_type_env_var"><span class="hs-identifier hs-var hs-var">hsc_type_env_var</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>                </span><span class="hs-comment">-- ^ Used for one-shot compilation only, to initialise</span><span>
</span><span id="line-478"></span><span>                </span><span class="hs-comment">-- the 'IfGblEnv'. See 'GHC.Tc.Utils.tcg_type_env_var' for</span><span>
</span><span id="line-479"></span><span>                </span><span class="hs-comment">-- 'GHC.Tc.Utils.TcGblEnv'.  See also Note [hsc_type_env_var hack]</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="hsc_interp"><span class="annot"><span class="annottext">HscEnv -&gt; Maybe Interp
</span><a href="GHC.Driver.Types.html#hsc_interp"><span class="hs-identifier hs-var hs-var">hsc_interp</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Runtime.Interpreter.Types.html#Interp"><span class="hs-identifier hs-type">Interp</span></a></span><span>
</span><span id="line-482"></span><span>                </span><span class="hs-comment">-- ^ target code interpreter (if any) to use for TH and GHCi.</span><span>
</span><span id="line-483"></span><span>                </span><span class="hs-comment">-- See Note [Target code interpreter]</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="hsc_dynLinker"><span class="annot"><span class="annottext">HscEnv -&gt; DynLinker
</span><a href="GHC.Driver.Types.html#hsc_dynLinker"><span class="hs-identifier hs-var hs-var">hsc_dynLinker</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DynLinker"><span class="hs-identifier hs-type">DynLinker</span></a></span><span>
</span><span id="line-486"></span><span>                </span><span class="hs-comment">-- ^ dynamic linker.</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="hs-comment">{-

Note [Target code interpreter]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Template Haskell and GHCi use an interpreter to execute code that is built for
the compiler target platform (= code host platform) on the compiler host
platform (= code build platform).

The internal interpreter can be used when both platforms are the same and when
the built code is compatible with the compiler itself (same way, etc.). This
interpreter is not always available: for instance stage1 compiler doesn't have
it because there might be an ABI mismatch between the code objects (built by
stage1 compiler) and the stage1 compiler itself (built by stage0 compiler).

In most cases, an external interpreter can be used instead: it runs in a
separate process and it communicates with the compiler via a two-way message
passing channel. The process is lazily spawned to avoid overhead when it is not
used.

The target code interpreter to use can be selected per session via the
`hsc_interp` field of `HscEnv`. There may be no interpreter available at all, in
which case Template Haskell and GHCi will fail to run. The interpreter to use is
configured via command-line flags (in `GHC.setSessionDynFlags`).


-}</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-comment">-- Note [hsc_type_env_var hack]</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- hsc_type_env_var is used to initialize tcg_type_env_var, and</span><span>
</span><span id="line-521"></span><span class="hs-comment">-- eventually it is the mutable variable that is queried from</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- if_rec_types to get a TypeEnv.  So, clearly, it's something</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- related to knot-tying (see Note [Tying the knot]).</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- hsc_type_env_var is used in two places: initTcRn (where</span><span>
</span><span id="line-525"></span><span class="hs-comment">-- it initializes tcg_type_env_var) and initIfaceCheck</span><span>
</span><span id="line-526"></span><span class="hs-comment">-- (where it initializes if_rec_types).</span><span>
</span><span id="line-527"></span><span class="hs-comment">--</span><span>
</span><span id="line-528"></span><span class="hs-comment">-- But why do we need a way to feed a mutable variable in?  Why</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- can't we just initialize tcg_type_env_var when we start</span><span>
</span><span id="line-530"></span><span class="hs-comment">-- typechecking?  The problem is we need to knot-tie the</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- EPS, and we may start adding things to the EPS before type</span><span>
</span><span id="line-532"></span><span class="hs-comment">-- checking starts.</span><span>
</span><span id="line-533"></span><span class="hs-comment">--</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- Here is a concrete example. Suppose we are running</span><span>
</span><span id="line-535"></span><span class="hs-comment">-- &quot;ghc -c A.hs&quot;, and we have this file system state:</span><span>
</span><span id="line-536"></span><span class="hs-comment">--</span><span>
</span><span id="line-537"></span><span class="hs-comment">--  A.hs-boot   A.hi-boot **up to date**</span><span>
</span><span id="line-538"></span><span class="hs-comment">--  B.hs        B.hi      **up to date**</span><span>
</span><span id="line-539"></span><span class="hs-comment">--  A.hs        A.hi      **stale**</span><span>
</span><span id="line-540"></span><span class="hs-comment">--</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- The first thing we do is run checkOldIface on A.hi.</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- checkOldIface will call loadInterface on B.hi so it can</span><span>
</span><span id="line-543"></span><span class="hs-comment">-- get its hands on the fingerprints, to find out if A.hi</span><span>
</span><span id="line-544"></span><span class="hs-comment">-- needs recompilation.  But loadInterface also populates</span><span>
</span><span id="line-545"></span><span class="hs-comment">-- the EPS!  And so if compilation turns out to be necessary,</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- as it is in this case, the thunks we put into the EPS for</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- B.hi need to have the correct if_rec_types mutable variable</span><span>
</span><span id="line-548"></span><span class="hs-comment">-- to query.</span><span>
</span><span id="line-549"></span><span class="hs-comment">--</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- If the mutable variable is only allocated WHEN we start</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- typechecking, then that's too late: we can't get the</span><span>
</span><span id="line-552"></span><span class="hs-comment">-- information to the thunks.  So we need to pre-commit</span><span>
</span><span id="line-553"></span><span class="hs-comment">-- to a type variable in 'hscIncrementalCompile' BEFORE we</span><span>
</span><span id="line-554"></span><span class="hs-comment">-- check the old interface.</span><span>
</span><span id="line-555"></span><span class="hs-comment">--</span><span>
</span><span id="line-556"></span><span class="hs-comment">-- This is all a massive hack because arguably checkOldIface</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- should not populate the EPS. But that's a refactor for</span><span>
</span><span id="line-558"></span><span class="hs-comment">-- another day.</span><span>
</span><span id="line-559"></span><span>
</span><span id="line-560"></span><span class="hs-comment">-- | Retrieve the ExternalPackageState cache.</span><span>
</span><span id="line-561"></span><span class="annot"><a href="GHC.Driver.Types.html#hscEPS"><span class="hs-identifier hs-type">hscEPS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExternalPackageState"><span class="hs-identifier hs-type">ExternalPackageState</span></a></span><span>
</span><span id="line-562"></span><span id="hscEPS"><span class="annot"><span class="annottext">hscEPS :: HscEnv -&gt; IO ExternalPackageState
</span><a href="GHC.Driver.Types.html#hscEPS"><span class="hs-identifier hs-var hs-var">hscEPS</span></a></span></span><span> </span><span id="local-6989586621680919885"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919885"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef ExternalPackageState -&gt; IO ExternalPackageState
forall a. IORef a -&gt; IO a
</span><a href="../../base/src/GHC.IORef.html#readIORef"><span class="hs-identifier hs-var">readIORef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; IORef ExternalPackageState
</span><a href="GHC.Driver.Types.html#hsc_EPS"><span class="hs-identifier hs-var hs-var">hsc_EPS</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919885"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="hs-comment">-- | A compilation target.</span><span>
</span><span id="line-565"></span><span class="hs-comment">--</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- A target may be supplied with the actual text of the</span><span>
</span><span id="line-567"></span><span class="hs-comment">-- module.  If so, use this instead of the file contents (this</span><span>
</span><span id="line-568"></span><span class="hs-comment">-- is for use in an IDE where the file hasn't been saved by</span><span>
</span><span id="line-569"></span><span class="hs-comment">-- the user yet).</span><span>
</span><span id="line-570"></span><span class="hs-keyword">data</span><span> </span><span id="Target"><span class="annot"><a href="GHC.Driver.Types.html#Target"><span class="hs-identifier hs-var">Target</span></a></span></span><span>
</span><span id="line-571"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Target"><span class="annot"><a href="GHC.Driver.Types.html#Target"><span class="hs-identifier hs-var">Target</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-572"></span><span>      </span><span id="targetId"><span class="annot"><span class="annottext">Target -&gt; TargetId
</span><a href="GHC.Driver.Types.html#targetId"><span class="hs-identifier hs-var hs-var">targetId</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#TargetId"><span class="hs-identifier hs-type">TargetId</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ module or filename</span><span>
</span><span id="line-573"></span><span>      </span><span id="targetAllowObjCode"><span class="annot"><span class="annottext">Target -&gt; Bool
</span><a href="GHC.Driver.Types.html#targetAllowObjCode"><span class="hs-identifier hs-var hs-var">targetAllowObjCode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ object code allowed?</span><span>
</span><span id="line-574"></span><span>      </span><span id="targetContents"><span class="annot"><span class="annottext">Target -&gt; Maybe (InputFileBuffer, UTCTime)
</span><a href="GHC.Driver.Types.html#targetContents"><span class="hs-identifier hs-var hs-var">targetContents</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#InputFileBuffer"><span class="hs-identifier hs-type">InputFileBuffer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../time/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>      </span><span class="hs-comment">-- ^ Optional in-memory buffer containing the source code GHC should</span><span>
</span><span id="line-576"></span><span>      </span><span class="hs-comment">-- use for this target instead of reading it from disk.</span><span>
</span><span id="line-577"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-578"></span><span>      </span><span class="hs-comment">-- Since GHC version 8.10 modules which require preprocessors such as</span><span>
</span><span id="line-579"></span><span>      </span><span class="hs-comment">-- Literate Haskell or CPP to run are also supported.</span><span>
</span><span id="line-580"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-581"></span><span>      </span><span class="hs-comment">-- If a corresponding source file does not exist on disk this will</span><span>
</span><span id="line-582"></span><span>      </span><span class="hs-comment">-- result in a 'SourceError' exception if @targetId = TargetModule _@</span><span>
</span><span id="line-583"></span><span>      </span><span class="hs-comment">-- is used. However together with @targetId = TargetFile _@ GHC will</span><span>
</span><span id="line-584"></span><span>      </span><span class="hs-comment">-- not complain about the file missing.</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-586"></span><span>
</span><span id="line-587"></span><span class="hs-keyword">data</span><span> </span><span id="TargetId"><span class="annot"><a href="GHC.Driver.Types.html#TargetId"><span class="hs-identifier hs-var">TargetId</span></a></span></span><span>
</span><span id="line-588"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TargetModule"><span class="annot"><a href="GHC.Driver.Types.html#TargetModule"><span class="hs-identifier hs-var">TargetModule</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-589"></span><span>        </span><span class="hs-comment">-- ^ A module name: search for the file</span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TargetFile"><span class="annot"><a href="GHC.Driver.Types.html#TargetFile"><span class="hs-identifier hs-var">TargetFile</span></a></span></span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#Phase"><span class="hs-identifier hs-type">Phase</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>        </span><span class="hs-comment">-- ^ A filename: preprocess &amp; parse it to find the module name.</span><span>
</span><span id="line-592"></span><span>        </span><span class="hs-comment">-- If specified, the Phase indicates how to compile this file</span><span>
</span><span id="line-593"></span><span>        </span><span class="hs-comment">-- (which phase to start from).  Nothing indicates the starting phase</span><span>
</span><span id="line-594"></span><span>        </span><span class="hs-comment">-- should be determined from the suffix of the filename.</span><span>
</span><span id="line-595"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621680919866"><span id="local-6989586621680919875"><span class="annot"><span class="annottext">TargetId -&gt; TargetId -&gt; Bool
(TargetId -&gt; TargetId -&gt; Bool)
-&gt; (TargetId -&gt; TargetId -&gt; Bool) -&gt; Eq TargetId
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TargetId -&gt; TargetId -&gt; Bool
$c/= :: TargetId -&gt; TargetId -&gt; Bool
== :: TargetId -&gt; TargetId -&gt; Bool
$c== :: TargetId -&gt; TargetId -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span class="hs-keyword">type</span><span> </span><span id="InputFileBuffer"><span class="annot"><a href="GHC.Driver.Types.html#InputFileBuffer"><span class="hs-identifier hs-var">InputFileBuffer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html#StringBuffer"><span class="hs-identifier hs-type">StringBuffer</span></a></span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span class="annot"><a href="GHC.Driver.Types.html#pprTarget"><span class="hs-identifier hs-type">pprTarget</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-600"></span><span id="pprTarget"><span class="annot"><span class="annottext">pprTarget :: Target -&gt; SDoc
</span><a href="GHC.Driver.Types.html#pprTarget"><span class="hs-identifier hs-var hs-var">pprTarget</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span id="local-6989586621680919862"><span class="annot"><span class="annottext">TargetId
</span><a href="#local-6989586621680919862"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621680919861"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919861"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (InputFileBuffer, UTCTime)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-601"></span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919861"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'*'</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TargetId -&gt; SDoc
</span><a href="GHC.Driver.Types.html#pprTargetId"><span class="hs-identifier hs-var">pprTargetId</span></a></span><span> </span><span class="annot"><span class="annottext">TargetId
</span><a href="#local-6989586621680919862"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919855"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Target"><span class="hs-identifier hs-type">Target</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-604"></span><span>    </span><span id="local-6989586621680919853"><span class="annot"><span class="annottext">ppr :: Target -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Target -&gt; SDoc
</span><a href="GHC.Driver.Types.html#pprTarget"><span class="hs-identifier hs-var">pprTarget</span></a></span><span>
</span><span id="line-605"></span><span>
</span><span id="line-606"></span><span class="annot"><a href="GHC.Driver.Types.html#pprTargetId"><span class="hs-identifier hs-type">pprTargetId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TargetId"><span class="hs-identifier hs-type">TargetId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-607"></span><span id="pprTargetId"><span class="annot"><span class="annottext">pprTargetId :: TargetId -&gt; SDoc
</span><a href="GHC.Driver.Types.html#pprTargetId"><span class="hs-identifier hs-var hs-var">pprTargetId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TargetModule"><span class="hs-identifier hs-type">TargetModule</span></a></span><span> </span><span id="local-6989586621680919851"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919851"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919851"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-608"></span><span class="annot"><a href="GHC.Driver.Types.html#pprTargetId"><span class="hs-identifier hs-var">pprTargetId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TargetFile"><span class="hs-identifier hs-type">TargetFile</span></a></span><span> </span><span id="local-6989586621680919850"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680919850"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Phase
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680919850"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-609"></span><span>
</span><span id="line-610"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919847"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TargetId"><span class="hs-identifier hs-type">TargetId</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-611"></span><span>    </span><span id="local-6989586621680919846"><span class="annot"><span class="annottext">ppr :: TargetId -&gt; SDoc
</span><a href="#local-6989586621680919846"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TargetId -&gt; SDoc
</span><a href="GHC.Driver.Types.html#pprTargetId"><span class="hs-identifier hs-var">pprTargetId</span></a></span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Package and Module Tables}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-620"></span><span>
</span><span id="line-621"></span><span class="hs-comment">-- | Helps us find information about modules in the home package</span><span>
</span><span id="line-622"></span><span class="hs-keyword">type</span><span> </span><span id="HomePackageTable"><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-var">HomePackageTable</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#DModuleNameEnv"><span class="hs-identifier hs-type">DModuleNameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span>
</span><span id="line-623"></span><span>        </span><span class="hs-comment">-- Domain = modules in the home package that have been fully compiled</span><span>
</span><span id="line-624"></span><span>        </span><span class="hs-comment">-- &quot;home&quot; unit id cached here for convenience</span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="hs-comment">-- | Helps us find information about modules in the imported packages</span><span>
</span><span id="line-627"></span><span class="hs-keyword">type</span><span> </span><span id="PackageIfaceTable"><span class="annot"><a href="GHC.Driver.Types.html#PackageIfaceTable"><span class="hs-identifier hs-var">PackageIfaceTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleEnv"><span class="hs-identifier hs-type">ModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-628"></span><span>        </span><span class="hs-comment">-- Domain = modules in the imported packages</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span class="hs-comment">-- | Constructs an empty HomePackageTable</span><span>
</span><span id="line-631"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyHomePackageTable"><span class="hs-identifier hs-type">emptyHomePackageTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-632"></span><span id="emptyHomePackageTable"><span class="annot"><span class="annottext">emptyHomePackageTable :: HomePackageTable
</span><a href="GHC.Driver.Types.html#emptyHomePackageTable"><span class="hs-identifier hs-var hs-var">emptyHomePackageTable</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable
forall key elt. UniqDFM key elt
</span><a href="GHC.Types.Unique.DFM.html#emptyUDFM"><span class="hs-identifier hs-var">emptyUDFM</span></a></span><span>
</span><span id="line-633"></span><span>
</span><span id="line-634"></span><span class="hs-comment">-- | Constructs an empty PackageIfaceTable</span><span>
</span><span id="line-635"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyPackageIfaceTable"><span class="hs-identifier hs-type">emptyPackageIfaceTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PackageIfaceTable"><span class="hs-identifier hs-type">PackageIfaceTable</span></a></span><span>
</span><span id="line-636"></span><span id="emptyPackageIfaceTable"><span class="annot"><span class="annottext">emptyPackageIfaceTable :: PackageIfaceTable
</span><a href="GHC.Driver.Types.html#emptyPackageIfaceTable"><span class="hs-identifier hs-var hs-var">emptyPackageIfaceTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageIfaceTable
forall a. ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#emptyModuleEnv"><span class="hs-identifier hs-var">emptyModuleEnv</span></a></span><span>
</span><span id="line-637"></span><span>
</span><span id="line-638"></span><span class="annot"><a href="GHC.Driver.Types.html#pprHPT"><span class="hs-identifier hs-type">pprHPT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-639"></span><span class="hs-comment">-- A bit arbitrary for now</span><span>
</span><span id="line-640"></span><span id="pprHPT"><span class="annot"><span class="annottext">pprHPT :: HomePackageTable -&gt; SDoc
</span><a href="GHC.Driver.Types.html#pprHPT"><span class="hs-identifier hs-var hs-var">pprHPT</span></a></span></span><span> </span><span id="local-6989586621680919842"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919842"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ([HomeModInfo] -&gt; SDoc) -&gt; SDoc
forall key a. UniqDFM key a -&gt; ([a] -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Types.Unique.DFM.html#pprUDFM"><span class="hs-identifier hs-var">pprUDFM</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919842"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="annot"><span class="annottext">(([HomeModInfo] -&gt; SDoc) -&gt; SDoc)
-&gt; ([HomeModInfo] -&gt; SDoc) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680919840"><span class="annot"><span class="annottext">[HomeModInfo]
</span><a href="#local-6989586621680919840"><span class="hs-identifier hs-var">hms</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-641"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; Module
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var hs-var">mi_module</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Driver.Types.html#hm_iface"><span class="hs-identifier hs-var hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919835"><span class="hs-identifier hs-var">hm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-642"></span><span>              </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeEnv -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModDetails -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#md_types"><span class="hs-identifier hs-var hs-var">md_types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919835"><span class="hs-identifier hs-var">hm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680919835"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919835"><span class="hs-identifier hs-var">hm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[HomeModInfo]
</span><a href="#local-6989586621680919840"><span class="hs-identifier hs-var">hms</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupHpt"><span class="hs-identifier hs-type">lookupHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span>
</span><span id="line-646"></span><span id="lookupHpt"><span class="annot"><span class="annottext">lookupHpt :: HomePackageTable -&gt; ModuleName -&gt; Maybe HomeModInfo
</span><a href="GHC.Driver.Types.html#lookupHpt"><span class="hs-identifier hs-var hs-var">lookupHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ModuleName -&gt; Maybe HomeModInfo
forall key elt.
Uniquable key =&gt;
UniqDFM key elt -&gt; key -&gt; Maybe elt
</span><a href="GHC.Types.Unique.DFM.html#lookupUDFM"><span class="hs-identifier hs-var">lookupUDFM</span></a></span><span>
</span><span id="line-647"></span><span>
</span><span id="line-648"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupHptDirectly"><span class="hs-identifier hs-type">lookupHptDirectly</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span>
</span><span id="line-649"></span><span id="lookupHptDirectly"><span class="annot"><span class="annottext">lookupHptDirectly :: HomePackageTable -&gt; Unique -&gt; Maybe HomeModInfo
</span><a href="GHC.Driver.Types.html#lookupHptDirectly"><span class="hs-identifier hs-var hs-var">lookupHptDirectly</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; Unique -&gt; Maybe HomeModInfo
forall key elt. UniqDFM key elt -&gt; Unique -&gt; Maybe elt
</span><a href="GHC.Types.Unique.DFM.html#lookupUDFM_Directly"><span class="hs-identifier hs-var">lookupUDFM_Directly</span></a></span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span class="annot"><a href="GHC.Driver.Types.html#eltsHpt"><span class="hs-identifier hs-type">eltsHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-652"></span><span id="eltsHpt"><span class="annot"><span class="annottext">eltsHpt :: HomePackageTable -&gt; [HomeModInfo]
</span><a href="GHC.Driver.Types.html#eltsHpt"><span class="hs-identifier hs-var hs-var">eltsHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; [HomeModInfo]
forall key elt. UniqDFM key elt -&gt; [elt]
</span><a href="GHC.Types.Unique.DFM.html#eltsUDFM"><span class="hs-identifier hs-var">eltsUDFM</span></a></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span class="annot"><a href="GHC.Driver.Types.html#filterHpt"><span class="hs-identifier hs-type">filterHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-655"></span><span id="filterHpt"><span class="annot"><span class="annottext">filterHpt :: (HomeModInfo -&gt; Bool) -&gt; HomePackageTable -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#filterHpt"><span class="hs-identifier hs-var hs-var">filterHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; Bool) -&gt; HomePackageTable -&gt; HomePackageTable
forall elt key. (elt -&gt; Bool) -&gt; UniqDFM key elt -&gt; UniqDFM key elt
</span><a href="GHC.Types.Unique.DFM.html#filterUDFM"><span class="hs-identifier hs-var">filterUDFM</span></a></span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="annot"><a href="GHC.Driver.Types.html#allHpt"><span class="hs-identifier hs-type">allHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-658"></span><span id="allHpt"><span class="annot"><span class="annottext">allHpt :: (HomeModInfo -&gt; Bool) -&gt; HomePackageTable -&gt; Bool
</span><a href="GHC.Driver.Types.html#allHpt"><span class="hs-identifier hs-var hs-var">allHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; Bool) -&gt; HomePackageTable -&gt; Bool
forall elt key. (elt -&gt; Bool) -&gt; UniqDFM key elt -&gt; Bool
</span><a href="GHC.Types.Unique.DFM.html#allUDFM"><span class="hs-identifier hs-var">allUDFM</span></a></span><span>
</span><span id="line-659"></span><span>
</span><span id="line-660"></span><span class="annot"><a href="GHC.Driver.Types.html#anyHpt"><span class="hs-identifier hs-type">anyHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-661"></span><span id="anyHpt"><span class="annot"><span class="annottext">anyHpt :: (HomeModInfo -&gt; Bool) -&gt; HomePackageTable -&gt; Bool
</span><a href="GHC.Driver.Types.html#anyHpt"><span class="hs-identifier hs-var hs-var">anyHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; Bool) -&gt; HomePackageTable -&gt; Bool
forall elt key. (elt -&gt; Bool) -&gt; UniqDFM key elt -&gt; Bool
</span><a href="GHC.Types.Unique.DFM.html#anyUDFM"><span class="hs-identifier hs-var">anyUDFM</span></a></span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span class="annot"><a href="GHC.Driver.Types.html#mapHpt"><span class="hs-identifier hs-type">mapHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-664"></span><span id="mapHpt"><span class="annot"><span class="annottext">mapHpt :: (HomeModInfo -&gt; HomeModInfo)
-&gt; HomePackageTable -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#mapHpt"><span class="hs-identifier hs-var hs-var">mapHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; HomeModInfo)
-&gt; HomePackageTable -&gt; HomePackageTable
forall elt1 elt2 key.
(elt1 -&gt; elt2) -&gt; UniqDFM key elt1 -&gt; UniqDFM key elt2
</span><a href="GHC.Types.Unique.DFM.html#mapUDFM"><span class="hs-identifier hs-var">mapUDFM</span></a></span><span>
</span><span id="line-665"></span><span>
</span><span id="line-666"></span><span class="annot"><a href="GHC.Driver.Types.html#delFromHpt"><span class="hs-identifier hs-type">delFromHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-667"></span><span id="delFromHpt"><span class="annot"><span class="annottext">delFromHpt :: HomePackageTable -&gt; ModuleName -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#delFromHpt"><span class="hs-identifier hs-var hs-var">delFromHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ModuleName -&gt; HomePackageTable
forall key elt.
Uniquable key =&gt;
UniqDFM key elt -&gt; key -&gt; UniqDFM key elt
</span><a href="GHC.Types.Unique.DFM.html#delFromUDFM"><span class="hs-identifier hs-var">delFromUDFM</span></a></span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span class="annot"><a href="GHC.Driver.Types.html#addToHpt"><span class="hs-identifier hs-type">addToHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-670"></span><span id="addToHpt"><span class="annot"><span class="annottext">addToHpt :: HomePackageTable -&gt; ModuleName -&gt; HomeModInfo -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#addToHpt"><span class="hs-identifier hs-var hs-var">addToHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ModuleName -&gt; HomeModInfo -&gt; HomePackageTable
forall key elt.
Uniquable key =&gt;
UniqDFM key elt -&gt; key -&gt; elt -&gt; UniqDFM key elt
</span><a href="GHC.Types.Unique.DFM.html#addToUDFM"><span class="hs-identifier hs-var">addToUDFM</span></a></span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span class="annot"><a href="GHC.Driver.Types.html#addListToHpt"><span class="hs-identifier hs-type">addListToHpt</span></a></span><span>
</span><span id="line-673"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-674"></span><span id="addListToHpt"><span class="annot"><span class="annottext">addListToHpt :: HomePackageTable -&gt; [(ModuleName, HomeModInfo)] -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#addListToHpt"><span class="hs-identifier hs-var hs-var">addListToHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; [(ModuleName, HomeModInfo)] -&gt; HomePackageTable
forall key elt.
Uniquable key =&gt;
UniqDFM key elt -&gt; [(key, elt)] -&gt; UniqDFM key elt
</span><a href="GHC.Types.Unique.DFM.html#addListToUDFM"><span class="hs-identifier hs-var">addListToUDFM</span></a></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span class="annot"><a href="GHC.Driver.Types.html#listToHpt"><span class="hs-identifier hs-type">listToHpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-677"></span><span id="listToHpt"><span class="annot"><span class="annottext">listToHpt :: [(ModuleName, HomeModInfo)] -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#listToHpt"><span class="hs-identifier hs-var hs-var">listToHpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ModuleName, HomeModInfo)] -&gt; HomePackageTable
forall key elt. Uniquable key =&gt; [(key, elt)] -&gt; UniqDFM key elt
</span><a href="GHC.Types.Unique.DFM.html#listToUDFM"><span class="hs-identifier hs-var">listToUDFM</span></a></span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupHptByModule"><span class="hs-identifier hs-type">lookupHptByModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span>
</span><span id="line-680"></span><span class="hs-comment">-- The HPT is indexed by ModuleName, not Module,</span><span>
</span><span id="line-681"></span><span class="hs-comment">-- we must check for a hit on the right Module</span><span>
</span><span id="line-682"></span><span id="lookupHptByModule"><span class="annot"><span class="annottext">lookupHptByModule :: HomePackageTable -&gt; Module -&gt; Maybe HomeModInfo
</span><a href="GHC.Driver.Types.html#lookupHptByModule"><span class="hs-identifier hs-var hs-var">lookupHptByModule</span></a></span></span><span> </span><span id="local-6989586621680919821"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919821"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span id="local-6989586621680919820"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919820"><span class="hs-identifier hs-var">mod</span></a></span></span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ModuleName -&gt; Maybe HomeModInfo
</span><a href="GHC.Driver.Types.html#lookupHpt"><span class="hs-identifier hs-var">lookupHpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919821"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919820"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-684"></span><span>      </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919818"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919818"><span class="hs-identifier hs-var">hm</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; Module
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var hs-var">mi_module</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Driver.Types.html#hm_iface"><span class="hs-identifier hs-var hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919818"><span class="hs-identifier hs-var">hm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919820"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; Maybe HomeModInfo
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919818"><span class="hs-identifier hs-var">hm</span></a></span><span>
</span><span id="line-685"></span><span>      </span><span id="local-6989586621680919817"><span class="annot"><span class="annottext">Maybe HomeModInfo
</span><a href="#local-6989586621680919817"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span>                               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe HomeModInfo
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span class="hs-comment">-- | Information about modules in the package being compiled</span><span>
</span><span id="line-688"></span><span class="hs-keyword">data</span><span> </span><span id="HomeModInfo"><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-var">HomeModInfo</span></a></span></span><span>
</span><span id="line-689"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HomeModInfo"><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-var">HomeModInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-690"></span><span>      </span><span id="hm_iface"><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Driver.Types.html#hm_iface"><span class="hs-identifier hs-var hs-var">hm_iface</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-691"></span><span>        </span><span class="hs-comment">-- ^ The basic loaded interface file: every loaded module has one of</span><span>
</span><span id="line-692"></span><span>        </span><span class="hs-comment">-- these, even if it is imported from another package</span><span>
</span><span id="line-693"></span><span>      </span><span id="hm_details"><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-694"></span><span>        </span><span class="hs-comment">-- ^ Extra information that has been created from the 'ModIface' for</span><span>
</span><span id="line-695"></span><span>        </span><span class="hs-comment">-- the module, typically during typechecking</span><span>
</span><span id="line-696"></span><span>      </span><span id="hm_linkable"><span class="annot"><span class="annottext">HomeModInfo -&gt; Maybe Linkable
</span><a href="GHC.Driver.Types.html#hm_linkable"><span class="hs-identifier hs-var hs-var">hm_linkable</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Linkable"><span class="hs-identifier hs-type">Linkable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>        </span><span class="hs-comment">-- ^ The actual artifact we would like to link to access things in</span><span>
</span><span id="line-698"></span><span>        </span><span class="hs-comment">-- this module.</span><span>
</span><span id="line-699"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-700"></span><span>        </span><span class="hs-comment">-- 'hm_linkable' might be Nothing:</span><span>
</span><span id="line-701"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-702"></span><span>        </span><span class="hs-comment">--   1. If this is an .hs-boot module</span><span>
</span><span id="line-703"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-704"></span><span>        </span><span class="hs-comment">--   2. Temporarily during compilation if we pruned away</span><span>
</span><span id="line-705"></span><span>        </span><span class="hs-comment">--      the old linkable because it was out of date.</span><span>
</span><span id="line-706"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-707"></span><span>        </span><span class="hs-comment">-- After a complete compilation ('GHC.load'), all 'hm_linkable' fields</span><span>
</span><span id="line-708"></span><span>        </span><span class="hs-comment">-- in the 'HomePackageTable' will be @Just@.</span><span>
</span><span id="line-709"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-710"></span><span>        </span><span class="hs-comment">-- When re-linking a module ('GHC.Driver.Main.HscNoRecomp'), we construct the</span><span>
</span><span id="line-711"></span><span>        </span><span class="hs-comment">-- 'HomeModInfo' by building a new 'ModDetails' from the old</span><span>
</span><span id="line-712"></span><span>        </span><span class="hs-comment">-- 'ModIface' (only).</span><span>
</span><span id="line-713"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="hs-comment">-- | Find the 'ModIface' for a 'Module', searching in both the loaded home</span><span>
</span><span id="line-716"></span><span class="hs-comment">-- and external package module information</span><span>
</span><span id="line-717"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupIfaceByModule"><span class="hs-identifier hs-type">lookupIfaceByModule</span></a></span><span>
</span><span id="line-718"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-719"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PackageIfaceTable"><span class="hs-identifier hs-type">PackageIfaceTable</span></a></span><span>
</span><span id="line-720"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-721"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-722"></span><span id="lookupIfaceByModule"><span class="annot"><span class="annottext">lookupIfaceByModule :: HomePackageTable -&gt; PackageIfaceTable -&gt; Module -&gt; Maybe ModIface
</span><a href="GHC.Driver.Types.html#lookupIfaceByModule"><span class="hs-identifier hs-var hs-var">lookupIfaceByModule</span></a></span></span><span> </span><span id="local-6989586621680919814"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919814"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span id="local-6989586621680919813"><span class="annot"><span class="annottext">PackageIfaceTable
</span><a href="#local-6989586621680919813"><span class="hs-identifier hs-var">pit</span></a></span></span><span> </span><span id="local-6989586621680919812"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919812"><span class="hs-identifier hs-var">mod</span></a></span></span><span>
</span><span id="line-723"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; Module -&gt; Maybe HomeModInfo
</span><a href="GHC.Driver.Types.html#lookupHptByModule"><span class="hs-identifier hs-var">lookupHptByModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919814"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919812"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-724"></span><span>       </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919811"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919811"><span class="hs-identifier hs-var">hm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; Maybe ModIface
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Driver.Types.html#hm_iface"><span class="hs-identifier hs-var hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919811"><span class="hs-identifier hs-var">hm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>       </span><span class="annot"><span class="annottext">Maybe HomeModInfo
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PackageIfaceTable -&gt; Module -&gt; Maybe ModIface
forall a. ModuleEnv a -&gt; Module -&gt; Maybe a
</span><a href="GHC.Unit.Module.Env.html#lookupModuleEnv"><span class="hs-identifier hs-var">lookupModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">PackageIfaceTable
</span><a href="#local-6989586621680919813"><span class="hs-identifier hs-var">pit</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919812"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="hs-comment">-- If the module does come from the home package, why do we look in the PIT as well?</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- (a) In OneShot mode, even home-package modules accumulate in the PIT</span><span>
</span><span id="line-729"></span><span class="hs-comment">-- (b) Even in Batch (--make) mode, there is *one* case where a home-package</span><span>
</span><span id="line-730"></span><span class="hs-comment">--     module is in the PIT, namely GHC.Prim when compiling the base package.</span><span>
</span><span id="line-731"></span><span class="hs-comment">-- We could eliminate (b) if we wanted, by making GHC.Prim belong to a package</span><span>
</span><span id="line-732"></span><span class="hs-comment">-- of its own, but it doesn't seem worth the bother.</span><span>
</span><span id="line-733"></span><span>
</span><span id="line-734"></span><span class="annot"><a href="GHC.Driver.Types.html#hptCompleteSigs"><span class="hs-identifier hs-type">hptCompleteSigs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-735"></span><span id="hptCompleteSigs"><span class="annot"><span class="annottext">hptCompleteSigs :: HscEnv -&gt; [CompleteMatch]
</span><a href="GHC.Driver.Types.html#hptCompleteSigs"><span class="hs-identifier hs-var hs-var">hptCompleteSigs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; [CompleteMatch]) -&gt; HscEnv -&gt; [CompleteMatch]
forall a. (HomeModInfo -&gt; [a]) -&gt; HscEnv -&gt; [a]
</span><a href="GHC.Driver.Types.html#hptAllThings"><span class="hs-identifier hs-var">hptAllThings</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModDetails -&gt; [CompleteMatch]
</span><a href="GHC.Driver.Types.html#md_complete_sigs"><span class="hs-identifier hs-var hs-var">md_complete_sigs</span></a></span><span> </span><span class="annot"><span class="annottext">(ModDetails -&gt; [CompleteMatch])
-&gt; (HomeModInfo -&gt; ModDetails) -&gt; HomeModInfo -&gt; [CompleteMatch]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span class="hs-comment">-- | Find all the instance declarations (of classes and families) from</span><span>
</span><span id="line-738"></span><span class="hs-comment">-- the Home Package Table filtered by the provided predicate function.</span><span>
</span><span id="line-739"></span><span class="hs-comment">-- Used in @tcRnImports@, to select the instances that are in the</span><span>
</span><span id="line-740"></span><span class="hs-comment">-- transitive closure of imports from the currently compiled module.</span><span>
</span><span id="line-741"></span><span class="annot"><a href="GHC.Driver.Types.html#hptInstances"><span class="hs-identifier hs-type">hptInstances</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-742"></span><span id="hptInstances"><span class="annot"><span class="annottext">hptInstances :: HscEnv -&gt; (ModuleName -&gt; Bool) -&gt; ([ClsInst], [FamInst])
</span><a href="GHC.Driver.Types.html#hptInstances"><span class="hs-identifier hs-var hs-var">hptInstances</span></a></span></span><span> </span><span id="local-6989586621680919807"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919807"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621680919806"><span class="annot"><span class="annottext">ModuleName -&gt; Bool
</span><a href="#local-6989586621680919806"><span class="hs-identifier hs-var">want_this_module</span></a></span></span><span>
</span><span id="line-743"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680919805"><span class="annot"><span class="annottext">[[ClsInst]]
</span><a href="#local-6989586621680919805"><span class="hs-identifier hs-var">insts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680919804"><span class="annot"><span class="annottext">[[FamInst]]
</span><a href="#local-6989586621680919804"><span class="hs-identifier hs-var">famInsts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[([ClsInst], [FamInst])] -&gt; ([[ClsInst]], [[FamInst]])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base/src/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">([([ClsInst], [FamInst])] -&gt; ([[ClsInst]], [[FamInst]]))
-&gt; [([ClsInst], [FamInst])] -&gt; ([[ClsInst]], [[FamInst]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((HomeModInfo -&gt; [([ClsInst], [FamInst])])
 -&gt; HscEnv -&gt; [([ClsInst], [FamInst])])
-&gt; HscEnv
-&gt; (HomeModInfo -&gt; [([ClsInst], [FamInst])])
-&gt; [([ClsInst], [FamInst])]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; [([ClsInst], [FamInst])])
-&gt; HscEnv -&gt; [([ClsInst], [FamInst])]
forall a. (HomeModInfo -&gt; [a]) -&gt; HscEnv -&gt; [a]
</span><a href="GHC.Driver.Types.html#hptAllThings"><span class="hs-identifier hs-var">hptAllThings</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919807"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">((HomeModInfo -&gt; [([ClsInst], [FamInst])])
 -&gt; [([ClsInst], [FamInst])])
-&gt; (HomeModInfo -&gt; [([ClsInst], [FamInst])])
-&gt; [([ClsInst], [FamInst])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680919801"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919801"><span class="hs-identifier hs-var">mod_info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-744"></span><span>                </span><span class="annot"><span class="annottext">Bool -&gt; [()]
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="../../base/src/Control.Monad.html#guard"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; Bool
</span><a href="#local-6989586621680919806"><span class="hs-identifier hs-var">want_this_module</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; Module
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var hs-var">mi_module</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModIface
</span><a href="GHC.Driver.Types.html#hm_iface"><span class="hs-identifier hs-var hs-var">hm_iface</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919801"><span class="hs-identifier hs-var">mod_info</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-745"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680919800"><span class="annot"><span class="annottext">details :: ModDetails
</span><a href="#local-6989586621680919800"><span class="hs-identifier hs-var hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919801"><span class="hs-identifier hs-var">mod_info</span></a></span><span>
</span><span id="line-746"></span><span>                </span><span class="annot"><span class="annottext">([ClsInst], [FamInst]) -&gt; [([ClsInst], [FamInst])]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModDetails -&gt; [ClsInst]
</span><a href="GHC.Driver.Types.html#md_insts"><span class="hs-identifier hs-var hs-var">md_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModDetails
</span><a href="#local-6989586621680919800"><span class="hs-identifier hs-var">details</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ModDetails -&gt; [FamInst]
</span><a href="GHC.Driver.Types.html#md_fam_insts"><span class="hs-identifier hs-var hs-var">md_fam_insts</span></a></span><span> </span><span class="annot"><span class="annottext">ModDetails
</span><a href="#local-6989586621680919800"><span class="hs-identifier hs-var">details</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-747"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[ClsInst]] -&gt; [ClsInst]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base/src/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[ClsInst]]
</span><a href="#local-6989586621680919805"><span class="hs-identifier hs-var">insts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[[FamInst]] -&gt; [FamInst]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base/src/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[FamInst]]
</span><a href="#local-6989586621680919804"><span class="hs-identifier hs-var">famInsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="hs-comment">-- | Get rules from modules &quot;below&quot; this one (in the dependency sense)</span><span>
</span><span id="line-750"></span><span class="annot"><a href="GHC.Driver.Types.html#hptRules"><span class="hs-identifier hs-type">hptRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-751"></span><span id="hptRules"><span class="annot"><span class="annottext">hptRules :: HscEnv -&gt; [ModuleNameWithIsBoot] -&gt; [CoreRule]
</span><a href="GHC.Driver.Types.html#hptRules"><span class="hs-identifier hs-var hs-var">hptRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; [CoreRule])
-&gt; Bool -&gt; HscEnv -&gt; [ModuleNameWithIsBoot] -&gt; [CoreRule]
forall a.
(HomeModInfo -&gt; [a])
-&gt; Bool -&gt; HscEnv -&gt; [ModuleNameWithIsBoot] -&gt; [a]
</span><a href="GHC.Driver.Types.html#hptSomeThingsBelowUs"><span class="hs-identifier hs-var">hptSomeThingsBelowUs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModDetails -&gt; [CoreRule]
</span><a href="GHC.Driver.Types.html#md_rules"><span class="hs-identifier hs-var hs-var">md_rules</span></a></span><span> </span><span class="annot"><span class="annottext">(ModDetails -&gt; [CoreRule])
-&gt; (HomeModInfo -&gt; ModDetails) -&gt; HomeModInfo -&gt; [CoreRule]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-752"></span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span class="hs-comment">-- | Get annotations from modules &quot;below&quot; this one (in the dependency sense)</span><span>
</span><span id="line-755"></span><span class="annot"><a href="GHC.Driver.Types.html#hptAnns"><span class="hs-identifier hs-type">hptAnns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-756"></span><span id="hptAnns"><span class="annot"><span class="annottext">hptAnns :: HscEnv -&gt; Maybe [ModuleNameWithIsBoot] -&gt; [Annotation]
</span><a href="GHC.Driver.Types.html#hptAnns"><span class="hs-identifier hs-var hs-var">hptAnns</span></a></span></span><span> </span><span id="local-6989586621680919793"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919793"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919792"><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621680919792"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; [Annotation])
-&gt; Bool -&gt; HscEnv -&gt; [ModuleNameWithIsBoot] -&gt; [Annotation]
forall a.
(HomeModInfo -&gt; [a])
-&gt; Bool -&gt; HscEnv -&gt; [ModuleNameWithIsBoot] -&gt; [a]
</span><a href="GHC.Driver.Types.html#hptSomeThingsBelowUs"><span class="hs-identifier hs-var">hptSomeThingsBelowUs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModDetails -&gt; [Annotation]
</span><a href="GHC.Driver.Types.html#md_anns"><span class="hs-identifier hs-var hs-var">md_anns</span></a></span><span> </span><span class="annot"><span class="annottext">(ModDetails -&gt; [Annotation])
-&gt; (HomeModInfo -&gt; ModDetails) -&gt; HomeModInfo -&gt; [Annotation]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919793"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621680919792"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-757"></span><span class="annot"><a href="GHC.Driver.Types.html#hptAnns"><span class="hs-identifier hs-var">hptAnns</span></a></span><span> </span><span id="local-6989586621680919790"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919790"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe [ModuleNameWithIsBoot]
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; [Annotation]) -&gt; HscEnv -&gt; [Annotation]
forall a. (HomeModInfo -&gt; [a]) -&gt; HscEnv -&gt; [a]
</span><a href="GHC.Driver.Types.html#hptAllThings"><span class="hs-identifier hs-var">hptAllThings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModDetails -&gt; [Annotation]
</span><a href="GHC.Driver.Types.html#md_anns"><span class="hs-identifier hs-var hs-var">md_anns</span></a></span><span> </span><span class="annot"><span class="annottext">(ModDetails -&gt; [Annotation])
-&gt; (HomeModInfo -&gt; ModDetails) -&gt; HomeModInfo -&gt; [Annotation]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919790"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span id="local-6989586621680920819"><span class="annot"><a href="GHC.Driver.Types.html#hptAllThings"><span class="hs-identifier hs-type">hptAllThings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680920819"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680920819"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-760"></span><span id="hptAllThings"><span class="annot"><span class="annottext">hptAllThings :: forall a. (HomeModInfo -&gt; [a]) -&gt; HscEnv -&gt; [a]
</span><a href="GHC.Driver.Types.html#hptAllThings"><span class="hs-identifier hs-var hs-var">hptAllThings</span></a></span></span><span> </span><span id="local-6989586621680919788"><span class="annot"><span class="annottext">HomeModInfo -&gt; [a]
</span><a href="#local-6989586621680919788"><span class="hs-identifier hs-var">extract</span></a></span></span><span> </span><span id="local-6989586621680919787"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919787"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HomeModInfo -&gt; [a]) -&gt; [HomeModInfo] -&gt; [a]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; [a]
</span><a href="#local-6989586621680919788"><span class="hs-identifier hs-var">extract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomePackageTable -&gt; [HomeModInfo]
</span><a href="GHC.Driver.Types.html#eltsHpt"><span class="hs-identifier hs-var">eltsHpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#hsc_HPT"><span class="hs-identifier hs-var hs-var">hsc_HPT</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919787"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-comment">-- | Get things from modules &quot;below&quot; this one (in the dependency sense)</span><span>
</span><span id="line-763"></span><span class="hs-comment">-- C.f Inst.hptInstances</span><span>
</span><span id="line-764"></span><span id="local-6989586621680920806"><span class="annot"><a href="GHC.Driver.Types.html#hptSomeThingsBelowUs"><span class="hs-identifier hs-type">hptSomeThingsBelowUs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HomeModInfo"><span class="hs-identifier hs-type">HomeModInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680920806"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680920806"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-765"></span><span id="hptSomeThingsBelowUs"><span class="annot"><span class="annottext">hptSomeThingsBelowUs :: forall a.
(HomeModInfo -&gt; [a])
-&gt; Bool -&gt; HscEnv -&gt; [ModuleNameWithIsBoot] -&gt; [a]
</span><a href="GHC.Driver.Types.html#hptSomeThingsBelowUs"><span class="hs-identifier hs-var hs-var">hptSomeThingsBelowUs</span></a></span></span><span> </span><span id="local-6989586621680919782"><span class="annot"><span class="annottext">HomeModInfo -&gt; [a]
</span><a href="#local-6989586621680919782"><span class="hs-identifier hs-var">extract</span></a></span></span><span> </span><span id="local-6989586621680919781"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919781"><span class="hs-identifier hs-var">include_hi_boot</span></a></span></span><span> </span><span id="local-6989586621680919780"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919780"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621680919779"><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621680919779"><span class="hs-identifier hs-var">deps</span></a></span></span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GhcMode -&gt; Bool
</span><a href="GHC.Driver.Session.html#isOneShot"><span class="hs-identifier hs-var">isOneShot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; GhcMode
</span><a href="GHC.Driver.Session.html#ghcMode"><span class="hs-identifier hs-var hs-var">ghcMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919780"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680919776"><span class="annot"><span class="annottext">hpt :: HomePackageTable
</span><a href="#local-6989586621680919776"><span class="hs-identifier hs-var hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#hsc_HPT"><span class="hs-identifier hs-var hs-var">hsc_HPT</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919780"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-770"></span><span>    </span><span class="hs-keyword">in</span><span>
</span><span id="line-771"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680919775"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-772"></span><span>    </span><span class="hs-glyph">|</span><span>   </span><span class="hs-comment">-- Find each non-hi-boot module below me</span><span>
</span><span id="line-773"></span><span>      </span><span class="annot"><a href="GHC.Unit.Types.html#GWIB"><span class="hs-identifier hs-type">GWIB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gwib_mod :: forall mod. GenWithIsBoot mod -&gt; mod
</span><a href="GHC.Unit.Types.html#gwib_mod"><span class="hs-identifier hs-var">gwib_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919772"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919772"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gwib_isBoot :: forall mod. GenWithIsBoot mod -&gt; IsBootInterface
</span><a href="GHC.Unit.Types.html#gwib_isBoot"><span class="hs-identifier hs-var">gwib_isBoot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919770"><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621680919770"><span class="hs-identifier hs-var">is_boot</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621680919779"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-774"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919781"><span class="hs-identifier hs-var">include_hi_boot</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="#local-6989586621680919770"><span class="hs-identifier hs-var">is_boot</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface -&gt; IsBootInterface -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span>        </span><span class="hs-comment">-- unsavoury: when compiling the base package with --make, we</span><span>
</span><span id="line-777"></span><span>        </span><span class="hs-comment">-- sometimes try to look up RULES etc for GHC.Prim. GHC.Prim won't</span><span>
</span><span id="line-778"></span><span>        </span><span class="hs-comment">-- be in the HPT, because we never compile it; it's in the EPT</span><span>
</span><span id="line-779"></span><span>        </span><span class="hs-comment">-- instead. ToDo: clean up, and remove this slightly bogus filter:</span><span>
</span><span id="line-780"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919772"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="GHC.Builtin.Names.html#gHC_PRIM"><span class="hs-identifier hs-var">gHC_PRIM</span></a></span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span>        </span><span class="hs-comment">-- Look it up in the HPT</span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680919766"><span class="annot"><span class="annottext">things :: [a]
</span><a href="#local-6989586621680919766"><span class="hs-identifier hs-var hs-var">things</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; ModuleName -&gt; Maybe HomeModInfo
</span><a href="GHC.Driver.Types.html#lookupHpt"><span class="hs-identifier hs-var">lookupHpt</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919776"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919772"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-784"></span><span>                    </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919765"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919765"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HomeModInfo -&gt; [a]
</span><a href="#local-6989586621680919782"><span class="hs-identifier hs-var">extract</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919765"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-785"></span><span>                    </span><span class="annot"><span class="annottext">Maybe HomeModInfo
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; [a] -&gt; [a]
forall a. FieldName -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprTrace"><span class="hs-identifier hs-var">pprTrace</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;WARNING in hptSomeThingsBelowUs&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919763"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-786"></span><span>          </span><span id="local-6989586621680919763"><span class="annot"><span class="annottext">msg :: SDoc
</span><a href="#local-6989586621680919763"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;missing module&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919772"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-787"></span><span>                      </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;Probable cause: out-of-date interface files&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-788"></span><span>                        </span><span class="hs-comment">-- This really shouldn't happen, but see #962</span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span>        </span><span class="hs-comment">-- And get its dfuns</span><span>
</span><span id="line-791"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680919775"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680919775"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621680919766"><span class="hs-identifier hs-var">things</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Metaprogramming}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span class="hs-comment">-- | The supported metaprogramming result types</span><span>
</span><span id="line-803"></span><span class="hs-keyword">data</span><span> </span><span id="MetaRequest"><span class="annot"><a href="GHC.Driver.Types.html#MetaRequest"><span class="hs-identifier hs-var">MetaRequest</span></a></span></span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MetaE"><span class="annot"><a href="GHC.Driver.Types.html#MetaE"><span class="hs-identifier hs-var">MetaE</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier hs-type">MetaResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaP"><span class="annot"><a href="GHC.Driver.Types.html#MetaP"><span class="hs-identifier hs-var">MetaP</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier hs-type">MetaResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaT"><span class="annot"><a href="GHC.Driver.Types.html#MetaT"><span class="hs-identifier hs-var">MetaT</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier hs-type">MetaResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaD"><span class="annot"><a href="GHC.Driver.Types.html#MetaD"><span class="hs-identifier hs-var">MetaD</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier hs-type">MetaResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaAW"><span class="annot"><a href="GHC.Driver.Types.html#MetaAW"><span class="hs-identifier hs-var">MetaAW</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-boot/src/GHC.Serialized.html#Serialized"><span class="hs-identifier hs-type">Serialized</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier hs-type">MetaResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>
</span><span id="line-810"></span><span class="hs-comment">-- | data constructors not exported to ensure correct result type</span><span>
</span><span id="line-811"></span><span class="hs-keyword">data</span><span> </span><span id="MetaResult"><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier hs-var">MetaResult</span></a></span></span><span>
</span><span id="line-812"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MetaResE"><span class="annot"><a href="GHC.Driver.Types.html#MetaResE"><span class="hs-identifier hs-var">MetaResE</span></a></span></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unMetaResE"><span class="annot"><span class="annottext">MetaResult -&gt; LHsExpr GhcPs
</span><a href="GHC.Driver.Types.html#unMetaResE"><span class="hs-identifier hs-var hs-var">unMetaResE</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>   </span><span class="hs-special">}</span><span>
</span><span id="line-813"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaResP"><span class="annot"><a href="GHC.Driver.Types.html#MetaResP"><span class="hs-identifier hs-var">MetaResP</span></a></span></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unMetaResP"><span class="annot"><span class="annottext">MetaResult -&gt; LPat GhcPs
</span><a href="GHC.Driver.Types.html#unMetaResP"><span class="hs-identifier hs-var hs-var">unMetaResP</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-814"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaResT"><span class="annot"><a href="GHC.Driver.Types.html#MetaResT"><span class="hs-identifier hs-var">MetaResT</span></a></span></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unMetaResT"><span class="annot"><span class="annottext">MetaResult -&gt; LHsType GhcPs
</span><a href="GHC.Driver.Types.html#unMetaResT"><span class="hs-identifier hs-var hs-var">unMetaResT</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>   </span><span class="hs-special">}</span><span>
</span><span id="line-815"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaResD"><span class="annot"><a href="GHC.Driver.Types.html#MetaResD"><span class="hs-identifier hs-var">MetaResD</span></a></span></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unMetaResD"><span class="annot"><span class="annottext">MetaResult -&gt; [LHsDecl GhcPs]
</span><a href="GHC.Driver.Types.html#unMetaResD"><span class="hs-identifier hs-var hs-var">unMetaResD</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-816"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MetaResAW"><span class="annot"><a href="GHC.Driver.Types.html#MetaResAW"><span class="hs-identifier hs-var">MetaResAW</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unMetaResAW"><span class="annot"><span class="annottext">MetaResult -&gt; Serialized
</span><a href="GHC.Driver.Types.html#unMetaResAW"><span class="hs-identifier hs-var hs-var">unMetaResAW</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Serialized.html#Serialized"><span class="hs-identifier hs-type">Serialized</span></a></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span class="hs-keyword">type</span><span> </span><span id="MetaHook"><span class="annot"><a href="GHC.Driver.Types.html#MetaHook"><span class="hs-identifier hs-var">MetaHook</span></a></span></span><span> </span><span id="local-6989586621680919746"><span class="annot"><a href="#local-6989586621680919746"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaRequest"><span class="hs-identifier hs-type">MetaRequest</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680919746"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaResult"><span class="hs-identifier hs-type">MetaResult</span></a></span><span>
</span><span id="line-819"></span><span>
</span><span id="line-820"></span><span id="local-6989586621680920785"><span class="annot"><a href="GHC.Driver.Types.html#metaRequestE"><span class="hs-identifier hs-type">metaRequestE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920785"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaHook"><span class="hs-identifier hs-type">MetaHook</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920785"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920785"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-821"></span><span id="metaRequestE"><span class="annot"><span class="annottext">metaRequestE :: forall (f :: * -&gt; *).
Functor f =&gt;
MetaHook f -&gt; LHsExpr GhcTc -&gt; f (LHsExpr GhcPs)
</span><a href="GHC.Driver.Types.html#metaRequestE"><span class="hs-identifier hs-var hs-var">metaRequestE</span></a></span></span><span> </span><span id="local-6989586621680919743"><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919743"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MetaResult -&gt; LHsExpr GhcPs) -&gt; f MetaResult -&gt; f (LHsExpr GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">MetaResult -&gt; LHsExpr GhcPs
</span><a href="GHC.Driver.Types.html#unMetaResE"><span class="hs-identifier hs-var hs-var">unMetaResE</span></a></span><span> </span><span class="annot"><span class="annottext">(f MetaResult -&gt; f (LHsExpr GhcPs))
-&gt; (LHsExpr GhcTc -&gt; f MetaResult)
-&gt; LHsExpr GhcTc
-&gt; f (LHsExpr GhcPs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919743"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LHsExpr GhcPs -&gt; MetaResult) -&gt; MetaRequest
</span><a href="GHC.Driver.Types.html#MetaE"><span class="hs-identifier hs-var">MetaE</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; MetaResult
</span><a href="GHC.Driver.Types.html#MetaResE"><span class="hs-identifier hs-var">MetaResE</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span>
</span><span id="line-823"></span><span id="local-6989586621680920780"><span class="annot"><a href="GHC.Driver.Types.html#metaRequestP"><span class="hs-identifier hs-type">metaRequestP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920780"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaHook"><span class="hs-identifier hs-type">MetaHook</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920780"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920780"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-824"></span><span id="metaRequestP"><span class="annot"><span class="annottext">metaRequestP :: forall (f :: * -&gt; *).
Functor f =&gt;
MetaHook f -&gt; LHsExpr GhcTc -&gt; f (LPat GhcPs)
</span><a href="GHC.Driver.Types.html#metaRequestP"><span class="hs-identifier hs-var hs-var">metaRequestP</span></a></span></span><span> </span><span id="local-6989586621680919740"><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919740"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MetaResult -&gt; Located (Pat GhcPs))
-&gt; f MetaResult -&gt; f (Located (Pat GhcPs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">MetaResult -&gt; Located (Pat GhcPs)
MetaResult -&gt; LPat GhcPs
</span><a href="GHC.Driver.Types.html#unMetaResP"><span class="hs-identifier hs-var hs-var">unMetaResP</span></a></span><span> </span><span class="annot"><span class="annottext">(f MetaResult -&gt; f (Located (Pat GhcPs)))
-&gt; (LHsExpr GhcTc -&gt; f MetaResult)
-&gt; LHsExpr GhcTc
-&gt; f (Located (Pat GhcPs))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919740"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LPat GhcPs -&gt; MetaResult) -&gt; MetaRequest
</span><a href="GHC.Driver.Types.html#MetaP"><span class="hs-identifier hs-var">MetaP</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs -&gt; MetaResult
</span><a href="GHC.Driver.Types.html#MetaResP"><span class="hs-identifier hs-var">MetaResP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>
</span><span id="line-826"></span><span id="local-6989586621680920778"><span class="annot"><a href="GHC.Driver.Types.html#metaRequestT"><span class="hs-identifier hs-type">metaRequestT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920778"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaHook"><span class="hs-identifier hs-type">MetaHook</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920778"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920778"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-827"></span><span id="metaRequestT"><span class="annot"><span class="annottext">metaRequestT :: forall (f :: * -&gt; *).
Functor f =&gt;
MetaHook f -&gt; LHsExpr GhcTc -&gt; f (LHsType GhcPs)
</span><a href="GHC.Driver.Types.html#metaRequestT"><span class="hs-identifier hs-var hs-var">metaRequestT</span></a></span></span><span> </span><span id="local-6989586621680919737"><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919737"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MetaResult -&gt; LHsType GhcPs) -&gt; f MetaResult -&gt; f (LHsType GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">MetaResult -&gt; LHsType GhcPs
</span><a href="GHC.Driver.Types.html#unMetaResT"><span class="hs-identifier hs-var hs-var">unMetaResT</span></a></span><span> </span><span class="annot"><span class="annottext">(f MetaResult -&gt; f (LHsType GhcPs))
-&gt; (LHsExpr GhcTc -&gt; f MetaResult)
-&gt; LHsExpr GhcTc
-&gt; f (LHsType GhcPs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919737"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LHsType GhcPs -&gt; MetaResult) -&gt; MetaRequest
</span><a href="GHC.Driver.Types.html#MetaT"><span class="hs-identifier hs-var">MetaT</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; MetaResult
</span><a href="GHC.Driver.Types.html#MetaResT"><span class="hs-identifier hs-var">MetaResT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span id="local-6989586621680920776"><span class="annot"><a href="GHC.Driver.Types.html#metaRequestD"><span class="hs-identifier hs-type">metaRequestD</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920776"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaHook"><span class="hs-identifier hs-type">MetaHook</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920776"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920776"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-830"></span><span id="metaRequestD"><span class="annot"><span class="annottext">metaRequestD :: forall (f :: * -&gt; *).
Functor f =&gt;
MetaHook f -&gt; LHsExpr GhcTc -&gt; f [LHsDecl GhcPs]
</span><a href="GHC.Driver.Types.html#metaRequestD"><span class="hs-identifier hs-var hs-var">metaRequestD</span></a></span></span><span> </span><span id="local-6989586621680919734"><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919734"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MetaResult -&gt; [LHsDecl GhcPs])
-&gt; f MetaResult -&gt; f [LHsDecl GhcPs]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">MetaResult -&gt; [LHsDecl GhcPs]
</span><a href="GHC.Driver.Types.html#unMetaResD"><span class="hs-identifier hs-var hs-var">unMetaResD</span></a></span><span> </span><span class="annot"><span class="annottext">(f MetaResult -&gt; f [LHsDecl GhcPs])
-&gt; (LHsExpr GhcTc -&gt; f MetaResult)
-&gt; LHsExpr GhcTc
-&gt; f [LHsDecl GhcPs]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919734"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([LHsDecl GhcPs] -&gt; MetaResult) -&gt; MetaRequest
</span><a href="GHC.Driver.Types.html#MetaD"><span class="hs-identifier hs-var">MetaD</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs] -&gt; MetaResult
</span><a href="GHC.Driver.Types.html#MetaResD"><span class="hs-identifier hs-var">MetaResD</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-831"></span><span>
</span><span id="line-832"></span><span id="local-6989586621680920774"><span class="annot"><a href="GHC.Driver.Types.html#metaRequestAW"><span class="hs-identifier hs-type">metaRequestAW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920774"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MetaHook"><span class="hs-identifier hs-type">MetaHook</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920774"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920774"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Serialized.html#Serialized"><span class="hs-identifier hs-type">Serialized</span></a></span></span><span>
</span><span id="line-833"></span><span id="metaRequestAW"><span class="annot"><span class="annottext">metaRequestAW :: forall (f :: * -&gt; *).
Functor f =&gt;
MetaHook f -&gt; LHsExpr GhcTc -&gt; f Serialized
</span><a href="GHC.Driver.Types.html#metaRequestAW"><span class="hs-identifier hs-var hs-var">metaRequestAW</span></a></span></span><span> </span><span id="local-6989586621680919731"><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919731"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MetaResult -&gt; Serialized) -&gt; f MetaResult -&gt; f Serialized
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">MetaResult -&gt; Serialized
</span><a href="GHC.Driver.Types.html#unMetaResAW"><span class="hs-identifier hs-var hs-var">unMetaResAW</span></a></span><span> </span><span class="annot"><span class="annottext">(f MetaResult -&gt; f Serialized)
-&gt; (LHsExpr GhcTc -&gt; f MetaResult) -&gt; LHsExpr GhcTc -&gt; f Serialized
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">MetaHook f
</span><a href="#local-6989586621680919731"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Serialized -&gt; MetaResult) -&gt; MetaRequest
</span><a href="GHC.Driver.Types.html#MetaAW"><span class="hs-identifier hs-var">MetaAW</span></a></span><span> </span><span class="annot"><span class="annottext">Serialized -&gt; MetaResult
</span><a href="GHC.Driver.Types.html#MetaResAW"><span class="hs-identifier hs-var">MetaResAW</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Dealing with Annotations}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-842"></span><span>
</span><span id="line-843"></span><span class="hs-comment">-- | Deal with gathering annotations in from all possible places</span><span>
</span><span id="line-844"></span><span class="hs-comment">--   and combining them into a single 'AnnEnv'</span><span>
</span><span id="line-845"></span><span class="annot"><a href="GHC.Driver.Types.html#prepareAnnotations"><span class="hs-identifier hs-type">prepareAnnotations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModGuts"><span class="hs-identifier hs-type">ModGuts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#AnnEnv"><span class="hs-identifier hs-type">AnnEnv</span></a></span><span>
</span><span id="line-846"></span><span id="prepareAnnotations"><span class="annot"><span class="annottext">prepareAnnotations :: HscEnv -&gt; Maybe ModGuts -&gt; IO AnnEnv
</span><a href="GHC.Driver.Types.html#prepareAnnotations"><span class="hs-identifier hs-var hs-var">prepareAnnotations</span></a></span></span><span> </span><span id="local-6989586621680919730"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919730"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621680919729"><span class="annot"><span class="annottext">Maybe ModGuts
</span><a href="#local-6989586621680919729"><span class="hs-identifier hs-var">mb_guts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-847"></span><span>    </span><span id="local-6989586621680919728"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621680919728"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; IO ExternalPackageState
</span><a href="GHC.Driver.Types.html#hscEPS"><span class="hs-identifier hs-var">hscEPS</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919730"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-848"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- Extract annotations from the module being compiled if supplied one</span><span>
</span><span id="line-849"></span><span>        </span><span id="local-6989586621680919727"><span class="annot"><span class="annottext">mb_this_module_anns :: Maybe AnnEnv
</span><a href="#local-6989586621680919727"><span class="hs-identifier hs-var hs-var">mb_this_module_anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ModGuts -&gt; AnnEnv) -&gt; Maybe ModGuts -&gt; Maybe AnnEnv
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Annotation] -&gt; AnnEnv
</span><a href="GHC.Types.Annotations.html#mkAnnEnv"><span class="hs-identifier hs-var">mkAnnEnv</span></a></span><span> </span><span class="annot"><span class="annottext">([Annotation] -&gt; AnnEnv)
-&gt; (ModGuts -&gt; [Annotation]) -&gt; ModGuts -&gt; AnnEnv
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts -&gt; [Annotation]
</span><a href="GHC.Driver.Types.html#mg_anns"><span class="hs-identifier hs-var hs-var">mg_anns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe ModGuts
</span><a href="#local-6989586621680919729"><span class="hs-identifier hs-var">mb_guts</span></a></span><span>
</span><span id="line-850"></span><span>        </span><span class="hs-comment">-- Extract dependencies of the module if we are supplied one,</span><span>
</span><span id="line-851"></span><span>        </span><span class="hs-comment">-- otherwise load annotations from all home package table</span><span>
</span><span id="line-852"></span><span>        </span><span class="hs-comment">-- entries regardless of dependency ordering.</span><span>
</span><span id="line-853"></span><span>        </span><span id="local-6989586621680919725"><span class="annot"><span class="annottext">home_pkg_anns :: AnnEnv
</span><a href="#local-6989586621680919725"><span class="hs-identifier hs-var hs-var">home_pkg_anns</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Annotation] -&gt; AnnEnv
</span><a href="GHC.Types.Annotations.html#mkAnnEnv"><span class="hs-identifier hs-var">mkAnnEnv</span></a></span><span> </span><span class="annot"><span class="annottext">([Annotation] -&gt; AnnEnv)
-&gt; (Maybe [ModuleNameWithIsBoot] -&gt; [Annotation])
-&gt; Maybe [ModuleNameWithIsBoot]
-&gt; AnnEnv
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; Maybe [ModuleNameWithIsBoot] -&gt; [Annotation]
</span><a href="GHC.Driver.Types.html#hptAnns"><span class="hs-identifier hs-var">hptAnns</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919730"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe [ModuleNameWithIsBoot] -&gt; AnnEnv)
-&gt; Maybe [ModuleNameWithIsBoot] -&gt; AnnEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(ModGuts -&gt; [ModuleNameWithIsBoot])
-&gt; Maybe ModGuts -&gt; Maybe [ModuleNameWithIsBoot]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleNameWithIsBoot]
</span><a href="GHC.Driver.Types.html#dep_mods"><span class="hs-identifier hs-var hs-var">dep_mods</span></a></span><span> </span><span class="annot"><span class="annottext">(Dependencies -&gt; [ModuleNameWithIsBoot])
-&gt; (ModGuts -&gt; Dependencies) -&gt; ModGuts -&gt; [ModuleNameWithIsBoot]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ModGuts -&gt; Dependencies
</span><a href="GHC.Driver.Types.html#mg_deps"><span class="hs-identifier hs-var hs-var">mg_deps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe ModGuts
</span><a href="#local-6989586621680919729"><span class="hs-identifier hs-var">mb_guts</span></a></span><span>
</span><span id="line-854"></span><span>        </span><span id="local-6989586621680919722"><span class="annot"><span class="annottext">other_pkg_anns :: AnnEnv
</span><a href="#local-6989586621680919722"><span class="hs-identifier hs-var hs-var">other_pkg_anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExternalPackageState -&gt; AnnEnv
</span><a href="GHC.Driver.Types.html#eps_ann_env"><span class="hs-identifier hs-var hs-var">eps_ann_env</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621680919728"><span class="hs-identifier hs-var">eps</span></a></span><span>
</span><span id="line-855"></span><span>        </span><span id="local-6989586621680919720"><span class="annot"><span class="annottext">ann_env :: AnnEnv
</span><a href="#local-6989586621680919720"><span class="hs-identifier hs-var hs-var">ann_env</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(AnnEnv -&gt; AnnEnv -&gt; AnnEnv) -&gt; [AnnEnv] -&gt; AnnEnv
forall a. (a -&gt; a -&gt; a) -&gt; [a] -&gt; a
</span><a href="../../base/src/GHC.List.html#foldl1%27"><span class="hs-identifier hs-var">foldl1'</span></a></span><span> </span><span class="annot"><span class="annottext">AnnEnv -&gt; AnnEnv -&gt; AnnEnv
</span><a href="GHC.Types.Annotations.html#plusAnnEnv"><span class="hs-identifier hs-var">plusAnnEnv</span></a></span><span> </span><span class="annot"><span class="annottext">([AnnEnv] -&gt; AnnEnv) -&gt; [AnnEnv] -&gt; AnnEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe AnnEnv] -&gt; [AnnEnv]
forall a. [Maybe a] -&gt; [a]
</span><a href="../../base/src/Data.Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe AnnEnv
</span><a href="#local-6989586621680919727"><span class="hs-identifier hs-var">mb_this_module_anns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-856"></span><span>                                                         </span><span class="annot"><span class="annottext">AnnEnv -&gt; Maybe AnnEnv
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">AnnEnv
</span><a href="#local-6989586621680919725"><span class="hs-identifier hs-var">home_pkg_anns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-857"></span><span>                                                         </span><span class="annot"><span class="annottext">AnnEnv -&gt; Maybe AnnEnv
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">AnnEnv
</span><a href="#local-6989586621680919722"><span class="hs-identifier hs-var">other_pkg_anns</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-858"></span><span>    </span><span class="annot"><span class="annottext">AnnEnv -&gt; IO AnnEnv
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">AnnEnv
</span><a href="#local-6989586621680919720"><span class="hs-identifier hs-var">ann_env</span></a></span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{The Finder cache}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-867"></span><span>
</span><span id="line-868"></span><span class="hs-comment">-- | The 'FinderCache' maps modules to the result of</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- searching for that module. It records the results of searching for</span><span>
</span><span id="line-870"></span><span class="hs-comment">-- modules along the search path. On @:load@, we flush the entire</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- contents of this cache.</span><span>
</span><span id="line-872"></span><span class="hs-comment">--</span><span>
</span><span id="line-873"></span><span class="hs-keyword">type</span><span> </span><span id="FinderCache"><span class="annot"><a href="GHC.Driver.Types.html#FinderCache"><span class="hs-identifier hs-var">FinderCache</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#InstalledModuleEnv"><span class="hs-identifier hs-type">InstalledModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InstalledFindResult"><span class="hs-identifier hs-type">InstalledFindResult</span></a></span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span class="hs-keyword">data</span><span> </span><span id="InstalledFindResult"><span class="annot"><a href="GHC.Driver.Types.html#InstalledFindResult"><span class="hs-identifier hs-var">InstalledFindResult</span></a></span></span><span>
</span><span id="line-876"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="InstalledFound"><span class="annot"><a href="GHC.Driver.Types.html#InstalledFound"><span class="hs-identifier hs-var">InstalledFound</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#InstalledModule"><span class="hs-identifier hs-type">InstalledModule</span></a></span><span>
</span><span id="line-877"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InstalledNoPackage"><span class="annot"><a href="GHC.Driver.Types.html#InstalledNoPackage"><span class="hs-identifier hs-var">InstalledNoPackage</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InstalledNotFound"><span class="annot"><a href="GHC.Driver.Types.html#InstalledNotFound"><span class="hs-identifier hs-var">InstalledNotFound</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span>
</span><span id="line-880"></span><span class="hs-comment">-- | The result of searching for an imported module.</span><span>
</span><span id="line-881"></span><span class="hs-comment">--</span><span>
</span><span id="line-882"></span><span class="hs-comment">-- NB: FindResult manages both user source-import lookups</span><span>
</span><span id="line-883"></span><span class="hs-comment">-- (which can result in 'Module') as well as direct imports</span><span>
</span><span id="line-884"></span><span class="hs-comment">-- for interfaces (which always result in 'InstalledModule').</span><span>
</span><span id="line-885"></span><span class="hs-keyword">data</span><span> </span><span id="FindResult"><span class="annot"><a href="GHC.Driver.Types.html#FindResult"><span class="hs-identifier hs-var">FindResult</span></a></span></span><span>
</span><span id="line-886"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Found"><span class="annot"><a href="GHC.Driver.Types.html#Found"><span class="hs-identifier hs-var">Found</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-887"></span><span>        </span><span class="hs-comment">-- ^ The module was found</span><span>
</span><span id="line-888"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoPackage"><span class="annot"><a href="GHC.Driver.Types.html#NoPackage"><span class="hs-identifier hs-var">NoPackage</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span>
</span><span id="line-889"></span><span>        </span><span class="hs-comment">-- ^ The requested unit was not found</span><span>
</span><span id="line-890"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FoundMultiple"><span class="annot"><a href="GHC.Driver.Types.html#FoundMultiple"><span class="hs-identifier hs-var">FoundMultiple</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#ModuleOrigin"><span class="hs-identifier hs-type">ModuleOrigin</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-891"></span><span>        </span><span class="hs-comment">-- ^ _Error_: both in multiple packages</span><span>
</span><span id="line-892"></span><span>
</span><span id="line-893"></span><span>        </span><span class="hs-comment">-- | Not found</span><span>
</span><span id="line-894"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotFound"><span class="annot"><a href="GHC.Driver.Types.html#NotFound"><span class="hs-identifier hs-var">NotFound</span></a></span></span><span>
</span><span id="line-895"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="fr_paths"><span class="annot"><span class="annottext">FindResult -&gt; [FieldName]
</span><a href="GHC.Driver.Types.html#fr_paths"><span class="hs-identifier hs-var hs-var">fr_paths</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>       </span><span class="hs-comment">-- ^ Places where I looked</span><span>
</span><span id="line-896"></span><span>
</span><span id="line-897"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_pkg"><span class="annot"><span class="annottext">FindResult -&gt; Maybe Unit
</span><a href="GHC.Driver.Types.html#fr_pkg"><span class="hs-identifier hs-var hs-var">fr_pkg</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span>       </span><span class="hs-comment">-- ^ Just p =&gt; module is in this unit's</span><span>
</span><span id="line-898"></span><span>                                           </span><span class="hs-comment">--   manifest, but couldn't find the</span><span>
</span><span id="line-899"></span><span>                                           </span><span class="hs-comment">--   .hi file</span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_mods_hidden"><span class="annot"><span class="annottext">FindResult -&gt; [Unit]
</span><a href="GHC.Driver.Types.html#fr_mods_hidden"><span class="hs-identifier hs-var hs-var">fr_mods_hidden</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span class="hs-special">]</span><span>           </span><span class="hs-comment">-- ^ Module is in these units,</span><span>
</span><span id="line-902"></span><span>                                           </span><span class="hs-comment">--   but the *module* is hidden</span><span>
</span><span id="line-903"></span><span>
</span><span id="line-904"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_pkgs_hidden"><span class="annot"><span class="annottext">FindResult -&gt; [Unit]
</span><a href="GHC.Driver.Types.html#fr_pkgs_hidden"><span class="hs-identifier hs-var hs-var">fr_pkgs_hidden</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span class="hs-special">]</span><span>           </span><span class="hs-comment">-- ^ Module is in these units,</span><span>
</span><span id="line-905"></span><span>                                           </span><span class="hs-comment">--   but the *unit* is hidden</span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span>        </span><span class="hs-comment">-- | Module is in these units, but it is unusable</span><span>
</span><span id="line-908"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_unusables"><span class="annot"><span class="annottext">FindResult -&gt; [(Unit, UnusableUnitReason)]
</span><a href="GHC.Driver.Types.html#fr_unusables"><span class="hs-identifier hs-var hs-var">fr_unusables</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#Unit"><span class="hs-identifier hs-type">Unit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnusableUnitReason"><span class="hs-identifier hs-type">UnusableUnitReason</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="fr_suggestions"><span class="annot"><span class="annottext">FindResult -&gt; [ModuleSuggestion]
</span><a href="GHC.Driver.Types.html#fr_suggestions"><span class="hs-identifier hs-var hs-var">fr_suggestions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.State.html#ModuleSuggestion"><span class="hs-identifier hs-type">ModuleSuggestion</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ Possible mis-spelled modules</span><span>
</span><span id="line-911"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-912"></span><span>
</span><span id="line-913"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Symbol tables and Module details}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span class="hs-comment">{- Note [Interface file stages]
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Interface files have two possible stages.

* A partial stage built from the result of the core pipeline.
* A fully instantiated form. Which also includes fingerprints and
  potentially information provided by backends.

We can build a full interface file two ways:
* Directly from a partial one:
  Then we omit backend information and mostly compute fingerprints.
* From a partial one + information produced by a backend.
  Then we store the provided information and fingerprint both.
-}</span><span>
</span><span id="line-936"></span><span>
</span><span id="line-937"></span><span class="hs-keyword">type</span><span> </span><span id="PartialModIface"><span class="annot"><a href="GHC.Driver.Types.html#PartialModIface"><span class="hs-identifier hs-var">PartialModIface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface_"><span class="hs-identifier hs-type">ModIface_</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceCore"><span class="hs-identifier hs-type">ModIfaceCore</span></a></span><span>
</span><span id="line-938"></span><span class="hs-keyword">type</span><span> </span><span id="ModIface"><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-var">ModIface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface_"><span class="hs-identifier hs-type">ModIface_</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceFinal"><span class="hs-identifier hs-type">ModIfaceFinal</span></a></span><span>
</span><span id="line-939"></span><span>
</span><span id="line-940"></span><span class="hs-comment">-- | Extends a PartialModIface with information which is either:</span><span>
</span><span id="line-941"></span><span class="hs-comment">-- * Computed after codegen</span><span>
</span><span id="line-942"></span><span class="hs-comment">-- * Or computed just before writing the iface to disk. (Hashes)</span><span>
</span><span id="line-943"></span><span class="hs-comment">-- In order to fully instantiate it.</span><span>
</span><span id="line-944"></span><span class="hs-keyword">data</span><span> </span><span id="ModIfaceBackend"><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceBackend"><span class="hs-identifier hs-var">ModIfaceBackend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ModIfaceBackend"><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceBackend"><span class="hs-identifier hs-var">ModIfaceBackend</span></a></span></span><span>
</span><span id="line-945"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="mi_iface_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_iface_hash"><span class="hs-identifier hs-var hs-var">mi_iface_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-946"></span><span>    </span><span class="hs-comment">-- ^ Hash of the whole interface</span><span>
</span><span id="line-947"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_mod_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_mod_hash"><span class="hs-identifier hs-var hs-var">mi_mod_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-948"></span><span>    </span><span class="hs-comment">-- ^ Hash of the ABI only</span><span>
</span><span id="line-949"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_flag_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_flag_hash"><span class="hs-identifier hs-var hs-var">mi_flag_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-950"></span><span>    </span><span class="hs-comment">-- ^ Hash of the important flags used when compiling the module, excluding</span><span>
</span><span id="line-951"></span><span>    </span><span class="hs-comment">-- optimisation flags</span><span>
</span><span id="line-952"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_opt_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_opt_hash"><span class="hs-identifier hs-var hs-var">mi_opt_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-953"></span><span>    </span><span class="hs-comment">-- ^ Hash of optimisation flags</span><span>
</span><span id="line-954"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_hpc_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_hpc_hash"><span class="hs-identifier hs-var hs-var">mi_hpc_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-955"></span><span>    </span><span class="hs-comment">-- ^ Hash of hpc flags</span><span>
</span><span id="line-956"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_plugin_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_plugin_hash"><span class="hs-identifier hs-var hs-var">mi_plugin_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-957"></span><span>    </span><span class="hs-comment">-- ^ Hash of plugins</span><span>
</span><span id="line-958"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_orphan"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_orphan"><span class="hs-identifier hs-var hs-var">mi_orphan</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#WhetherHasOrphans"><span class="hs-identifier hs-type">WhetherHasOrphans</span></a></span><span>
</span><span id="line-959"></span><span>    </span><span class="hs-comment">-- ^ Whether this module has orphans</span><span>
</span><span id="line-960"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_finsts"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_finsts"><span class="hs-identifier hs-var hs-var">mi_finsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#WhetherHasFamInst"><span class="hs-identifier hs-type">WhetherHasFamInst</span></a></span><span>
</span><span id="line-961"></span><span>    </span><span class="hs-comment">-- ^ Whether this module has family instances. See Note [The type family</span><span>
</span><span id="line-962"></span><span>    </span><span class="hs-comment">-- instance consistency story].</span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_exp_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_exp_hash"><span class="hs-identifier hs-var hs-var">mi_exp_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-964"></span><span>    </span><span class="hs-comment">-- ^ Hash of export list</span><span>
</span><span id="line-965"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_orphan_hash"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_orphan_hash"><span class="hs-identifier hs-var hs-var">mi_orphan_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-966"></span><span>    </span><span class="hs-comment">-- ^ Hash for orphan rules, class and family instances combined</span><span>
</span><span id="line-967"></span><span>
</span><span id="line-968"></span><span>    </span><span class="hs-comment">-- Cached environments for easy lookup. These are computed (lazily) from</span><span>
</span><span id="line-969"></span><span>    </span><span class="hs-comment">-- other fields and are not put into the interface file.</span><span>
</span><span id="line-970"></span><span>    </span><span class="hs-comment">-- Not really produced by the backend but there is no need to create them</span><span>
</span><span id="line-971"></span><span>    </span><span class="hs-comment">-- any earlier.</span><span>
</span><span id="line-972"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_warn_fn"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; OccName -&gt; Maybe WarningTxt
</span><a href="GHC.Driver.Types.html#mi_warn_fn"><span class="hs-identifier hs-var hs-var">mi_warn_fn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-973"></span><span>    </span><span class="hs-comment">-- ^ Cached lookup for 'mi_warns'</span><span>
</span><span id="line-974"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_fix_fn"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#mi_fix_fn"><span class="hs-identifier hs-var hs-var">mi_fix_fn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-975"></span><span>    </span><span class="hs-comment">-- ^ Cached lookup for 'mi_fixities'</span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mi_hash_fn"><span class="annot"><span class="annottext">ModIfaceBackend -&gt; OccName -&gt; Maybe (OccName, Fingerprint)
</span><a href="GHC.Driver.Types.html#mi_hash_fn"><span class="hs-identifier hs-var hs-var">mi_hash_fn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-977"></span><span>    </span><span class="hs-comment">-- ^ Cached lookup for 'mi_decls'. The @Nothing@ in 'mi_hash_fn' means that</span><span>
</span><span id="line-978"></span><span>    </span><span class="hs-comment">-- the thing isn't in decls. It's useful to know that when seeing if we are</span><span>
</span><span id="line-979"></span><span>    </span><span class="hs-comment">-- up to date wrt. the old interface. The 'OccName' is the parent of the</span><span>
</span><span id="line-980"></span><span>    </span><span class="hs-comment">-- name, if it has one.</span><span>
</span><span id="line-981"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-982"></span><span>
</span><span id="line-983"></span><span class="hs-keyword">data</span><span> </span><span id="ModIfacePhase"><span class="annot"><a href="GHC.Driver.Types.html#ModIfacePhase"><span class="hs-identifier hs-var">ModIfacePhase</span></a></span></span><span>
</span><span id="line-984"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ModIfaceCore"><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceCore"><span class="hs-identifier hs-var">ModIfaceCore</span></a></span></span><span>
</span><span id="line-985"></span><span>  </span><span class="hs-comment">-- ^ Partial interface built based on output of core pipeline.</span><span>
</span><span id="line-986"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ModIfaceFinal"><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceFinal"><span class="hs-identifier hs-var">ModIfaceFinal</span></a></span></span><span>
</span><span id="line-987"></span><span>
</span><span id="line-988"></span><span class="hs-comment">-- | Selects a IfaceDecl representation.</span><span>
</span><span id="line-989"></span><span class="hs-comment">-- For fully instantiated interfaces we also maintain</span><span>
</span><span id="line-990"></span><span class="hs-comment">-- a fingerprint, which is used for recompilation checks.</span><span>
</span><span id="line-991"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="IfaceDeclExts"><span class="annot"><a href="GHC.Driver.Types.html#IfaceDeclExts"><span class="hs-identifier hs-var">IfaceDeclExts</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680919688"><span class="annot"><a href="#local-6989586621680919688"><span class="hs-identifier hs-type">phase</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfacePhase"><span class="hs-identifier hs-type">ModIfacePhase</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-992"></span><span>  </span><span id="IfaceDeclExts"><span class="annot"><a href="GHC.Driver.Types.html#IfaceDeclExts"><span class="hs-identifier hs-var">IfaceDeclExts</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceCore"><span class="hs-identifier hs-type">ModIfaceCore</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span>
</span><span id="line-993"></span><span>  </span><span id="IfaceDeclExts"><span class="annot"><a href="GHC.Driver.Types.html#IfaceDeclExts"><span class="hs-identifier hs-var">IfaceDeclExts</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceFinal"><span class="hs-identifier hs-type">ModIfaceFinal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-994"></span><span>
</span><span id="line-995"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="IfaceBackendExts"><span class="annot"><a href="GHC.Driver.Types.html#IfaceBackendExts"><span class="hs-identifier hs-var">IfaceBackendExts</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680919687"><span class="annot"><a href="#local-6989586621680919687"><span class="hs-identifier hs-type">phase</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfacePhase"><span class="hs-identifier hs-type">ModIfacePhase</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-996"></span><span>  </span><span id="IfaceBackendExts"><span class="annot"><a href="GHC.Driver.Types.html#IfaceBackendExts"><span class="hs-identifier hs-var">IfaceBackendExts</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceCore"><span class="hs-identifier hs-type">ModIfaceCore</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-997"></span><span>  </span><span id="IfaceBackendExts"><span class="annot"><a href="GHC.Driver.Types.html#IfaceBackendExts"><span class="hs-identifier hs-var">IfaceBackendExts</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceFinal"><span class="hs-identifier hs-type">ModIfaceFinal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceBackend"><span class="hs-identifier hs-type">ModIfaceBackend</span></a></span><span>
</span><span id="line-998"></span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span class="hs-comment">-- | A 'ModIface' plus a 'ModDetails' summarises everything we know</span><span>
</span><span id="line-1002"></span><span class="hs-comment">-- about a compiled module.  The 'ModIface' is the stuff *before* linking,</span><span>
</span><span id="line-1003"></span><span class="hs-comment">-- and can be written out to an interface file. The 'ModDetails is after</span><span>
</span><span id="line-1004"></span><span class="hs-comment">-- linking and can be completely recovered from just the 'ModIface'.</span><span>
</span><span id="line-1005"></span><span class="hs-comment">--</span><span>
</span><span id="line-1006"></span><span class="hs-comment">-- When we read an interface file, we also construct a 'ModIface' from it,</span><span>
</span><span id="line-1007"></span><span class="hs-comment">-- except that we explicitly make the 'mi_decls' and a few other fields empty;</span><span>
</span><span id="line-1008"></span><span class="hs-comment">-- as when reading we consolidate the declarations etc. into a number of indexed</span><span>
</span><span id="line-1009"></span><span class="hs-comment">-- maps and environments in the 'ExternalPackageState'.</span><span>
</span><span id="line-1010"></span><span class="hs-keyword">data</span><span> </span><span id="ModIface_"><span class="annot"><a href="GHC.Driver.Types.html#ModIface_"><span class="hs-identifier hs-var">ModIface_</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680920847"><span class="annot"><a href="#local-6989586621680920847"><span class="hs-identifier hs-type">phase</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfacePhase"><span class="hs-identifier hs-type">ModIfacePhase</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1011"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ModIface"><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-var">ModIface</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1012"></span><span>        </span><span id="mi_module"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var hs-var">mi_module</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>             </span><span class="hs-comment">-- ^ Name of the module we are for</span><span>
</span><span id="line-1013"></span><span>        </span><span id="mi_sig_of"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Maybe Module
</span><a href="GHC.Driver.Types.html#mi_sig_of"><span class="hs-identifier hs-var hs-var">mi_sig_of</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ Are we a sig of another mod?</span><span>
</span><span id="line-1014"></span><span>
</span><span id="line-1015"></span><span>        </span><span id="mi_hsc_src"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; HscSource
</span><a href="GHC.Driver.Types.html#mi_hsc_src"><span class="hs-identifier hs-var hs-var">mi_hsc_src</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Phases.html#HscSource"><span class="hs-identifier hs-type">HscSource</span></a></span><span class="hs-special">,</span><span>          </span><span class="hs-comment">-- ^ Boot? Signature?</span><span>
</span><span id="line-1016"></span><span>
</span><span id="line-1017"></span><span>        </span><span id="mi_deps"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Dependencies
</span><a href="GHC.Driver.Types.html#mi_deps"><span class="hs-identifier hs-var hs-var">mi_deps</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1018"></span><span>                </span><span class="hs-comment">-- ^ The dependencies of the module.  This is</span><span>
</span><span id="line-1019"></span><span>                </span><span class="hs-comment">-- consulted for directly-imported modules, but not</span><span>
</span><span id="line-1020"></span><span>                </span><span class="hs-comment">-- for anything else (hence lazy)</span><span>
</span><span id="line-1021"></span><span>
</span><span id="line-1022"></span><span>        </span><span id="mi_usages"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [Usage]
</span><a href="GHC.Driver.Types.html#mi_usages"><span class="hs-identifier hs-var hs-var">mi_usages</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1023"></span><span>                </span><span class="hs-comment">-- ^ Usages; kept sorted so that it's easy to decide</span><span>
</span><span id="line-1024"></span><span>                </span><span class="hs-comment">-- whether to write a new iface file (changing usages</span><span>
</span><span id="line-1025"></span><span>                </span><span class="hs-comment">-- doesn't affect the hash of this module)</span><span>
</span><span id="line-1026"></span><span>                </span><span class="hs-comment">-- NOT STRICT!  we read this field lazily from the interface file</span><span>
</span><span id="line-1027"></span><span>                </span><span class="hs-comment">-- It is *only* consulted by the recompilation checker</span><span>
</span><span id="line-1028"></span><span>
</span><span id="line-1029"></span><span>        </span><span id="mi_exports"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceExport]
</span><a href="GHC.Driver.Types.html#mi_exports"><span class="hs-identifier hs-var hs-var">mi_exports</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#IfaceExport"><span class="hs-identifier hs-type">IfaceExport</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1030"></span><span>                </span><span class="hs-comment">-- ^ Exports</span><span>
</span><span id="line-1031"></span><span>                </span><span class="hs-comment">-- Kept sorted by (mod,occ), to make version comparisons easier</span><span>
</span><span id="line-1032"></span><span>                </span><span class="hs-comment">-- Records the modules that are the declaration points for things</span><span>
</span><span id="line-1033"></span><span>                </span><span class="hs-comment">-- exported by this module, and the 'OccName's of those things</span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span>        </span><span id="mi_used_th"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_used_th"><span class="hs-identifier hs-var hs-var">mi_used_th</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-1037"></span><span>                </span><span class="hs-comment">-- ^ Module required TH splices when it was compiled.</span><span>
</span><span id="line-1038"></span><span>                </span><span class="hs-comment">-- This disables recompilation avoidance (see #481).</span><span>
</span><span id="line-1039"></span><span>
</span><span id="line-1040"></span><span>        </span><span id="mi_fixities"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [(OccName, Fixity)]
</span><a href="GHC.Driver.Types.html#mi_fixities"><span class="hs-identifier hs-var hs-var">mi_fixities</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1041"></span><span>                </span><span class="hs-comment">-- ^ Fixities</span><span>
</span><span id="line-1042"></span><span>                </span><span class="hs-comment">-- NOT STRICT!  we read this field lazily from the interface file</span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span>        </span><span id="mi_warns"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Warnings
</span><a href="GHC.Driver.Types.html#mi_warns"><span class="hs-identifier hs-var hs-var">mi_warns</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1045"></span><span>                </span><span class="hs-comment">-- ^ Warnings</span><span>
</span><span id="line-1046"></span><span>                </span><span class="hs-comment">-- NOT STRICT!  we read this field lazily from the interface file</span><span>
</span><span id="line-1047"></span><span>
</span><span id="line-1048"></span><span>        </span><span id="mi_anns"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceAnnotation]
</span><a href="GHC.Driver.Types.html#mi_anns"><span class="hs-identifier hs-var hs-var">mi_anns</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceAnnotation"><span class="hs-identifier hs-type">IfaceAnnotation</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1049"></span><span>                </span><span class="hs-comment">-- ^ Annotations</span><span>
</span><span id="line-1050"></span><span>                </span><span class="hs-comment">-- NOT STRICT!  we read this field lazily from the interface file</span><span>
</span><span id="line-1051"></span><span>
</span><span id="line-1052"></span><span>
</span><span id="line-1053"></span><span>        </span><span id="mi_decls"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Driver.Types.html#mi_decls"><span class="hs-identifier hs-var hs-var">mi_decls</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#IfaceDeclExts"><span class="hs-identifier hs-type">IfaceDeclExts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920847"><span class="hs-identifier hs-type">phase</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1054"></span><span>                </span><span class="hs-comment">-- ^ Type, class and variable declarations</span><span>
</span><span id="line-1055"></span><span>                </span><span class="hs-comment">-- The hash of an Id changes if its fixity or deprecations change</span><span>
</span><span id="line-1056"></span><span>                </span><span class="hs-comment">--      (as well as its type of course)</span><span>
</span><span id="line-1057"></span><span>                </span><span class="hs-comment">-- Ditto data constructors, class operations, except that</span><span>
</span><span id="line-1058"></span><span>                </span><span class="hs-comment">-- the hash of the parent class/tycon changes</span><span>
</span><span id="line-1059"></span><span>
</span><span id="line-1060"></span><span>        </span><span id="mi_globals"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; Maybe GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#mi_globals"><span class="hs-identifier hs-var hs-var">mi_globals</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1061"></span><span>                </span><span class="hs-comment">-- ^ Binds all the things defined at the top level in</span><span>
</span><span id="line-1062"></span><span>                </span><span class="hs-comment">-- the /original source/ code for this module. which</span><span>
</span><span id="line-1063"></span><span>                </span><span class="hs-comment">-- is NOT the same as mi_exports, nor mi_decls (which</span><span>
</span><span id="line-1064"></span><span>                </span><span class="hs-comment">-- may contains declarations for things not actually</span><span>
</span><span id="line-1065"></span><span>                </span><span class="hs-comment">-- defined by the user).  Used for GHCi and for inspecting</span><span>
</span><span id="line-1066"></span><span>                </span><span class="hs-comment">-- the contents of modules via the GHC API only.</span><span>
</span><span id="line-1067"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-1068"></span><span>                </span><span class="hs-comment">-- (We need the source file to figure out the</span><span>
</span><span id="line-1069"></span><span>                </span><span class="hs-comment">-- top-level environment, if we didn't compile this module</span><span>
</span><span id="line-1070"></span><span>                </span><span class="hs-comment">-- from source then this field contains @Nothing@).</span><span>
</span><span id="line-1071"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-1072"></span><span>                </span><span class="hs-comment">-- Strictly speaking this field should live in the</span><span>
</span><span id="line-1073"></span><span>                </span><span class="hs-comment">-- 'HomeModInfo', but that leads to more plumbing.</span><span>
</span><span id="line-1074"></span><span>
</span><span id="line-1075"></span><span>                </span><span class="hs-comment">-- Instance declarations and rules</span><span>
</span><span id="line-1076"></span><span>        </span><span id="mi_insts"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceClsInst]
</span><a href="GHC.Driver.Types.html#mi_insts"><span class="hs-identifier hs-var hs-var">mi_insts</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceClsInst"><span class="hs-identifier hs-type">IfaceClsInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ Sorted class instance</span><span>
</span><span id="line-1077"></span><span>        </span><span id="mi_fam_insts"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceFamInst]
</span><a href="GHC.Driver.Types.html#mi_fam_insts"><span class="hs-identifier hs-var hs-var">mi_fam_insts</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceFamInst"><span class="hs-identifier hs-type">IfaceFamInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- ^ Sorted family instances</span><span>
</span><span id="line-1078"></span><span>        </span><span id="mi_rules"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceRule]
</span><a href="GHC.Driver.Types.html#mi_rules"><span class="hs-identifier hs-var hs-var">mi_rules</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceRule"><span class="hs-identifier hs-type">IfaceRule</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ Sorted rules</span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span>        </span><span id="mi_hpc"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_hpc"><span class="hs-identifier hs-var hs-var">mi_hpc</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#AnyHpcUsage"><span class="hs-identifier hs-type">AnyHpcUsage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1081"></span><span>                </span><span class="hs-comment">-- ^ True if this program uses Hpc at any point in the program.</span><span>
</span><span id="line-1082"></span><span>
</span><span id="line-1083"></span><span>        </span><span id="mi_trust"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#mi_trust"><span class="hs-identifier hs-var hs-var">mi_trust</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1084"></span><span>                </span><span class="hs-comment">-- ^ Safe Haskell Trust information for this module.</span><span>
</span><span id="line-1085"></span><span>
</span><span id="line-1086"></span><span>        </span><span id="mi_trust_pkg"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_trust_pkg"><span class="hs-identifier hs-var hs-var">mi_trust_pkg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-1087"></span><span>                </span><span class="hs-comment">-- ^ Do we require the package this module resides in be trusted</span><span>
</span><span id="line-1088"></span><span>                </span><span class="hs-comment">-- to trust this module? This is used for the situation where a</span><span>
</span><span id="line-1089"></span><span>                </span><span class="hs-comment">-- module is Safe (so doesn't require the package be trusted</span><span>
</span><span id="line-1090"></span><span>                </span><span class="hs-comment">-- itself) but imports some trustworthy modules from its own</span><span>
</span><span id="line-1091"></span><span>                </span><span class="hs-comment">-- package (which does require its own package be trusted).</span><span>
</span><span id="line-1092"></span><span>                </span><span class="hs-comment">-- See Note [Trust Own Package] in GHC.Rename.Names</span><span>
</span><span id="line-1093"></span><span>        </span><span id="mi_complete_sigs"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceCompleteMatch]
</span><a href="GHC.Driver.Types.html#mi_complete_sigs"><span class="hs-identifier hs-var hs-var">mi_complete_sigs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceCompleteMatch"><span class="hs-identifier hs-type">IfaceCompleteMatch</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1094"></span><span>
</span><span id="line-1095"></span><span>        </span><span id="mi_doc_hdr"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; Maybe HsDocString
</span><a href="GHC.Driver.Types.html#mi_doc_hdr"><span class="hs-identifier hs-var hs-var">mi_doc_hdr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Doc.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1096"></span><span>                </span><span class="hs-comment">-- ^ Module header.</span><span>
</span><span id="line-1097"></span><span>
</span><span id="line-1098"></span><span>        </span><span id="mi_decl_docs"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; DeclDocMap
</span><a href="GHC.Driver.Types.html#mi_decl_docs"><span class="hs-identifier hs-var hs-var">mi_decl_docs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Doc.html#DeclDocMap"><span class="hs-identifier hs-type">DeclDocMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1099"></span><span>                </span><span class="hs-comment">-- ^ Docs on declarations.</span><span>
</span><span id="line-1100"></span><span>
</span><span id="line-1101"></span><span>        </span><span id="mi_arg_docs"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase). ModIface_ phase -&gt; ArgDocMap
</span><a href="GHC.Driver.Types.html#mi_arg_docs"><span class="hs-identifier hs-var hs-var">mi_arg_docs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Doc.html#ArgDocMap"><span class="hs-identifier hs-type">ArgDocMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1102"></span><span>                </span><span class="hs-comment">-- ^ Docs on arguments.</span><span>
</span><span id="line-1103"></span><span>
</span><span id="line-1104"></span><span>        </span><span id="mi_final_exts"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Driver.Types.html#mi_final_exts"><span class="hs-identifier hs-var hs-var">mi_final_exts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#IfaceBackendExts"><span class="hs-identifier hs-type">IfaceBackendExts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920847"><span class="hs-identifier hs-type">phase</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1105"></span><span>                </span><span class="hs-comment">-- ^ Either `()` or `ModIfaceBackend` for</span><span>
</span><span id="line-1106"></span><span>                </span><span class="hs-comment">-- a fully instantiated interface.</span><span>
</span><span id="line-1107"></span><span>
</span><span id="line-1108"></span><span>        </span><span id="mi_ext_fields"><span class="annot"><span class="annottext">forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var hs-var">mi_ext_fields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span>
</span><span id="line-1109"></span><span>                </span><span class="hs-comment">-- ^ Additional optional fields, where the Map key represents</span><span>
</span><span id="line-1110"></span><span>                </span><span class="hs-comment">-- the field name, resulting in a (size, serialized data) pair.</span><span>
</span><span id="line-1111"></span><span>                </span><span class="hs-comment">-- Because the data is intended to be serialized through the</span><span>
</span><span id="line-1112"></span><span>                </span><span class="hs-comment">-- internal `Binary` class (increasing compatibility with types</span><span>
</span><span id="line-1113"></span><span>                </span><span class="hs-comment">-- using `Name` and `FastString`, such as HIE), this format is</span><span>
</span><span id="line-1114"></span><span>                </span><span class="hs-comment">-- chosen over `ByteString`s.</span><span>
</span><span id="line-1115"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-1116"></span><span>
</span><span id="line-1117"></span><span class="hs-comment">-- | Old-style accessor for whether or not the ModIface came from an hs-boot</span><span>
</span><span id="line-1118"></span><span class="hs-comment">-- file.</span><span>
</span><span id="line-1119"></span><span class="annot"><a href="GHC.Driver.Types.html#mi_boot"><span class="hs-identifier hs-type">mi_boot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span>
</span><span id="line-1120"></span><span id="mi_boot"><span class="annot"><span class="annottext">mi_boot :: ModIface -&gt; IsBootInterface
</span><a href="GHC.Driver.Types.html#mi_boot"><span class="hs-identifier hs-var hs-var">mi_boot</span></a></span></span><span> </span><span id="local-6989586621680919662"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680919662"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; HscSource
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; HscSource
</span><a href="GHC.Driver.Types.html#mi_hsc_src"><span class="hs-identifier hs-var hs-var">mi_hsc_src</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680919662"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource -&gt; HscSource -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="GHC.Driver.Phases.html#HsBootFile"><span class="hs-identifier hs-var">HsBootFile</span></a></span><span>
</span><span id="line-1121"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span>
</span><span id="line-1122"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span>
</span><span id="line-1123"></span><span>
</span><span id="line-1124"></span><span class="hs-comment">-- | Lookups up a (possibly cached) fixity from a 'ModIface'. If one cannot be</span><span>
</span><span id="line-1125"></span><span class="hs-comment">-- found, 'defaultFixity' is returned instead.</span><span>
</span><span id="line-1126"></span><span class="annot"><a href="GHC.Driver.Types.html#mi_fix"><span class="hs-identifier hs-type">mi_fix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span>
</span><span id="line-1127"></span><span id="mi_fix"><span class="annot"><span class="annottext">mi_fix :: ModIface -&gt; OccName -&gt; Fixity
</span><a href="GHC.Driver.Types.html#mi_fix"><span class="hs-identifier hs-var hs-var">mi_fix</span></a></span></span><span> </span><span id="local-6989586621680919659"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680919659"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span id="local-6989586621680919658"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919658"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend -&gt; OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#mi_fix_fn"><span class="hs-identifier hs-var hs-var">mi_fix_fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; IfaceBackendExts 'ModIfaceFinal
forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Driver.Types.html#mi_final_exts"><span class="hs-identifier hs-var hs-var">mi_final_exts</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680919659"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919658"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Fixity -&gt; Fixity -&gt; Fixity
forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="GHC.Types.Basic.html#defaultFixity"><span class="hs-identifier hs-var">defaultFixity</span></a></span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span class="hs-comment">-- | The semantic module for this interface; e.g., if it's a interface</span><span>
</span><span id="line-1130"></span><span class="hs-comment">-- for a signature, if 'mi_module' is @p[A=&lt;A&gt;]:A@, 'mi_semantic_module'</span><span>
</span><span id="line-1131"></span><span class="hs-comment">-- will be @&lt;A&gt;@.</span><span>
</span><span id="line-1132"></span><span id="local-6989586621680919655"><span class="annot"><a href="GHC.Driver.Types.html#mi_semantic_module"><span class="hs-identifier hs-type">mi_semantic_module</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface_"><span class="hs-identifier hs-type">ModIface_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680919655"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span></span><span>
</span><span id="line-1133"></span><span id="mi_semantic_module"><span class="annot"><span class="annottext">mi_semantic_module :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_semantic_module"><span class="hs-identifier hs-var hs-var">mi_semantic_module</span></a></span></span><span> </span><span id="local-6989586621680919654"><span class="annot"><span class="annottext">ModIface_ a
</span><a href="#local-6989586621680919654"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ModIface_ a -&gt; Maybe Module
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Maybe Module
</span><a href="GHC.Driver.Types.html#mi_sig_of"><span class="hs-identifier hs-var hs-var">mi_sig_of</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface_ a
</span><a href="#local-6989586621680919654"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1134"></span><span>                            </span><span class="annot"><span class="annottext">Maybe Module
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModIface_ a -&gt; Module
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface_ a
</span><a href="#local-6989586621680919654"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-1135"></span><span>                            </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919653"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919653"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919653"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1136"></span><span>
</span><span id="line-1137"></span><span class="hs-comment">-- | The &quot;precise&quot; free holes, e.g., the signatures that this</span><span>
</span><span id="line-1138"></span><span class="hs-comment">-- 'ModIface' depends on.</span><span>
</span><span id="line-1139"></span><span class="annot"><a href="GHC.Driver.Types.html#mi_free_holes"><span class="hs-identifier hs-type">mi_free_holes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html#UniqDSet"><span class="hs-identifier hs-type">UniqDSet</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-1140"></span><span id="mi_free_holes"><span class="annot"><span class="annottext">mi_free_holes :: ModIface -&gt; UniqDSet ModuleName
</span><a href="GHC.Driver.Types.html#mi_free_holes"><span class="hs-identifier hs-var hs-var">mi_free_holes</span></a></span></span><span> </span><span id="local-6989586621680919652"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680919652"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1141"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Module -&gt; (InstalledModule, Maybe InstantiatedModule)
</span><a href="GHC.Unit.Module.html#getModuleInstantiation"><span class="hs-identifier hs-var">getModuleInstantiation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; Module
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var hs-var">mi_module</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680919652"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1142"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModule
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919650"><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621680919650"><span class="hs-identifier hs-var">indef</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1143"></span><span>        </span><span class="hs-comment">-- A mini-hack: we rely on the fact that 'renameFreeHoles'</span><span>
</span><span id="line-1144"></span><span>        </span><span class="hs-comment">-- drops things that aren't holes.</span><span>
</span><span id="line-1145"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
-&gt; [(ModuleName, Module)] -&gt; UniqDSet ModuleName
</span><a href="GHC.Driver.Types.html#renameFreeHoles"><span class="hs-identifier hs-var">renameFreeHoles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ModuleName] -&gt; UniqDSet ModuleName
forall a. Uniquable a =&gt; [a] -&gt; UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#mkUniqDSet"><span class="hs-identifier hs-var">mkUniqDSet</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621680919648"><span class="hs-identifier hs-var">cands</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenInstantiatedUnit UnitId -&gt; [(ModuleName, Module)]
forall unit. GenInstantiatedUnit unit -&gt; GenInstantiations unit
</span><a href="GHC.Unit.Types.html#instUnitInsts"><span class="hs-identifier hs-var hs-var">instUnitInsts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstantiatedModule -&gt; GenInstantiatedUnit UnitId
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">InstantiatedModule
</span><a href="#local-6989586621680919650"><span class="hs-identifier hs-var">indef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1146"></span><span>    </span><span class="annot"><span class="annottext">(InstalledModule, Maybe InstantiatedModule)
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
forall a. UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#emptyUniqDSet"><span class="hs-identifier hs-var">emptyUniqDSet</span></a></span><span>
</span><span id="line-1147"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1148"></span><span>    </span><span id="local-6989586621680919648"><span class="annot"><span class="annottext">cands :: [ModuleName]
</span><a href="#local-6989586621680919648"><span class="hs-identifier hs-var hs-var">cands</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ModuleNameWithIsBoot -&gt; ModuleName)
-&gt; [ModuleNameWithIsBoot] -&gt; [ModuleName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleNameWithIsBoot -&gt; ModuleName
forall mod. GenWithIsBoot mod -&gt; mod
</span><a href="GHC.Unit.Types.html#gwib_mod"><span class="hs-identifier hs-var hs-var">gwib_mod</span></a></span><span> </span><span class="annot"><span class="annottext">([ModuleNameWithIsBoot] -&gt; [ModuleName])
-&gt; [ModuleNameWithIsBoot] -&gt; [ModuleName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleNameWithIsBoot]
</span><a href="GHC.Driver.Types.html#dep_mods"><span class="hs-identifier hs-var hs-var">dep_mods</span></a></span><span> </span><span class="annot"><span class="annottext">(Dependencies -&gt; [ModuleNameWithIsBoot])
-&gt; Dependencies -&gt; [ModuleNameWithIsBoot]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface -&gt; Dependencies
forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Dependencies
</span><a href="GHC.Driver.Types.html#mi_deps"><span class="hs-identifier hs-var hs-var">mi_deps</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680919652"><span class="hs-identifier hs-var">iface</span></a></span><span>
</span><span id="line-1149"></span><span>
</span><span id="line-1150"></span><span class="hs-comment">-- | Given a set of free holes, and a unit identifier, rename</span><span>
</span><span id="line-1151"></span><span class="hs-comment">-- the free holes according to the instantiation of the unit</span><span>
</span><span id="line-1152"></span><span class="hs-comment">-- identifier.  For example, if we have A and B free, and</span><span>
</span><span id="line-1153"></span><span class="hs-comment">-- our unit identity is @p[A=&lt;C&gt;,B=impl:B]@, the renamed free</span><span>
</span><span id="line-1154"></span><span class="hs-comment">-- holes are just C.</span><span>
</span><span id="line-1155"></span><span class="annot"><a href="GHC.Driver.Types.html#renameFreeHoles"><span class="hs-identifier hs-type">renameFreeHoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html#UniqDSet"><span class="hs-identifier hs-type">UniqDSet</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html#UniqDSet"><span class="hs-identifier hs-type">UniqDSet</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-1156"></span><span id="renameFreeHoles"><span class="annot"><span class="annottext">renameFreeHoles :: UniqDSet ModuleName
-&gt; [(ModuleName, Module)] -&gt; UniqDSet ModuleName
</span><a href="GHC.Driver.Types.html#renameFreeHoles"><span class="hs-identifier hs-var hs-var">renameFreeHoles</span></a></span></span><span> </span><span id="local-6989586621680919644"><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621680919644"><span class="hs-identifier hs-var">fhs</span></a></span></span><span> </span><span id="local-6989586621680919643"><span class="annot"><span class="annottext">[(ModuleName, Module)]
</span><a href="#local-6989586621680919643"><span class="hs-identifier hs-var">insts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1157"></span><span>    </span><span class="annot"><span class="annottext">[UniqDSet ModuleName] -&gt; UniqDSet ModuleName
forall a. [UniqDSet a] -&gt; UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#unionManyUniqDSets"><span class="hs-identifier hs-var">unionManyUniqDSets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ModuleName -&gt; UniqDSet ModuleName)
-&gt; [ModuleName] -&gt; [UniqDSet ModuleName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; UniqDSet ModuleName
</span><a href="#local-6989586621680919641"><span class="hs-identifier hs-var">lookup_impl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UniqDSet ModuleName -&gt; [ModuleName]
forall a. UniqDSet a -&gt; [a]
</span><a href="GHC.Types.Unique.DSet.html#uniqDSetToList"><span class="hs-identifier hs-var">uniqDSetToList</span></a></span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
</span><a href="#local-6989586621680919644"><span class="hs-identifier hs-var">fhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1159"></span><span>    </span><span id="local-6989586621680919639"><span class="annot"><span class="annottext">hmap :: UniqFM ModuleName Module
</span><a href="#local-6989586621680919639"><span class="hs-identifier hs-var hs-var">hmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ModuleName, Module)] -&gt; UniqFM ModuleName Module
forall key elt. Uniquable key =&gt; [(key, elt)] -&gt; UniqFM key elt
</span><a href="GHC.Types.Unique.FM.html#listToUFM"><span class="hs-identifier hs-var">listToUFM</span></a></span><span> </span><span class="annot"><span class="annottext">[(ModuleName, Module)]
</span><a href="#local-6989586621680919643"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-1160"></span><span>    </span><span id="local-6989586621680919641"><span class="annot"><span class="annottext">lookup_impl :: ModuleName -&gt; UniqDSet ModuleName
</span><a href="#local-6989586621680919641"><span class="hs-identifier hs-var hs-var">lookup_impl</span></a></span></span><span> </span><span id="local-6989586621680919637"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919637"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span>
</span><span id="line-1161"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919636"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919636"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UniqFM ModuleName Module -&gt; ModuleName -&gt; Maybe Module
forall key elt. Uniquable key =&gt; UniqFM key elt -&gt; key -&gt; Maybe elt
</span><a href="GHC.Types.Unique.FM.html#lookupUFM"><span class="hs-identifier hs-var">lookupUFM</span></a></span><span> </span><span class="annot"><span class="annottext">UniqFM ModuleName Module
</span><a href="#local-6989586621680919639"><span class="hs-identifier hs-var">hmap</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919637"><span class="hs-identifier hs-var">mod_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; UniqDSet ModuleName
forall u. GenModule (GenUnit u) -&gt; UniqDSet ModuleName
</span><a href="GHC.Unit.Types.html#moduleFreeHoles"><span class="hs-identifier hs-var">moduleFreeHoles</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919636"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1162"></span><span>        </span><span class="hs-comment">-- It wasn't actually a hole</span><span>
</span><span id="line-1163"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqDSet ModuleName
forall a. UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#emptyUniqDSet"><span class="hs-identifier hs-var">emptyUniqDSet</span></a></span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919631"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1166"></span><span>   </span><span id="local-6989586621680919533"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; ModIface -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621680919531"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1167"></span><span>                 </span><span class="annot"><span class="annottext">mi_module :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919530"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919530"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1168"></span><span>                 </span><span class="annot"><span class="annottext">mi_sig_of :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Maybe Module
</span><a href="GHC.Driver.Types.html#mi_sig_of"><span class="hs-identifier hs-var">mi_sig_of</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919529"><span class="annot"><span class="annottext">Maybe Module
</span><a href="#local-6989586621680919529"><span class="hs-identifier hs-var">sig_of</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1169"></span><span>                 </span><span class="annot"><span class="annottext">mi_hsc_src :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; HscSource
</span><a href="GHC.Driver.Types.html#mi_hsc_src"><span class="hs-identifier hs-var">mi_hsc_src</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919528"><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621680919528"><span class="hs-identifier hs-var">hsc_src</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1170"></span><span>                 </span><span class="annot"><span class="annottext">mi_deps :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Dependencies
</span><a href="GHC.Driver.Types.html#mi_deps"><span class="hs-identifier hs-var">mi_deps</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919527"><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680919527"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1171"></span><span>                 </span><span class="annot"><span class="annottext">mi_usages :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [Usage]
</span><a href="GHC.Driver.Types.html#mi_usages"><span class="hs-identifier hs-var">mi_usages</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919526"><span class="annot"><span class="annottext">[Usage]
</span><a href="#local-6989586621680919526"><span class="hs-identifier hs-var">usages</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1172"></span><span>                 </span><span class="annot"><span class="annottext">mi_exports :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceExport]
</span><a href="GHC.Driver.Types.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919525"><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680919525"><span class="hs-identifier hs-var">exports</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1173"></span><span>                 </span><span class="annot"><span class="annottext">mi_used_th :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_used_th"><span class="hs-identifier hs-var">mi_used_th</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919524"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919524"><span class="hs-identifier hs-var">used_th</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1174"></span><span>                 </span><span class="annot"><span class="annottext">mi_fixities :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [(OccName, Fixity)]
</span><a href="GHC.Driver.Types.html#mi_fixities"><span class="hs-identifier hs-var">mi_fixities</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919523"><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680919523"><span class="hs-identifier hs-var">fixities</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1175"></span><span>                 </span><span class="annot"><span class="annottext">mi_warns :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Warnings
</span><a href="GHC.Driver.Types.html#mi_warns"><span class="hs-identifier hs-var">mi_warns</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919522"><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680919522"><span class="hs-identifier hs-var">warns</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1176"></span><span>                 </span><span class="annot"><span class="annottext">mi_anns :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceAnnotation]
</span><a href="GHC.Driver.Types.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919521"><span class="annot"><span class="annottext">[IfaceAnnotation]
</span><a href="#local-6989586621680919521"><span class="hs-identifier hs-var">anns</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1177"></span><span>                 </span><span class="annot"><span class="annottext">mi_decls :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceDeclExts phase]
</span><a href="GHC.Driver.Types.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919520"><span class="annot"><span class="annottext">[IfaceDeclExts 'ModIfaceFinal]
</span><a href="#local-6989586621680919520"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1178"></span><span>                 </span><span class="annot"><span class="annottext">mi_insts :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceClsInst]
</span><a href="GHC.Driver.Types.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919519"><span class="annot"><span class="annottext">[IfaceClsInst]
</span><a href="#local-6989586621680919519"><span class="hs-identifier hs-var">insts</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1179"></span><span>                 </span><span class="annot"><span class="annottext">mi_fam_insts :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceFamInst]
</span><a href="GHC.Driver.Types.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919518"><span class="annot"><span class="annottext">[IfaceFamInst]
</span><a href="#local-6989586621680919518"><span class="hs-identifier hs-var">fam_insts</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1180"></span><span>                 </span><span class="annot"><span class="annottext">mi_rules :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; [IfaceRule]
</span><a href="GHC.Driver.Types.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919517"><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621680919517"><span class="hs-identifier hs-var">rules</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1181"></span><span>                 </span><span class="annot"><span class="annottext">mi_hpc :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_hpc"><span class="hs-identifier hs-var">mi_hpc</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919516"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919516"><span class="hs-identifier hs-var">hpc_info</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1182"></span><span>                 </span><span class="annot"><span class="annottext">mi_trust :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#mi_trust"><span class="hs-identifier hs-var">mi_trust</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919515"><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680919515"><span class="hs-identifier hs-var">trust</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1183"></span><span>                 </span><span class="annot"><span class="annottext">mi_trust_pkg :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_trust_pkg"><span class="hs-identifier hs-var">mi_trust_pkg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919514"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919514"><span class="hs-identifier hs-var">trust_pkg</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1184"></span><span>                 </span><span class="annot"><span class="annottext">mi_complete_sigs :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; [IfaceCompleteMatch]
</span><a href="GHC.Driver.Types.html#mi_complete_sigs"><span class="hs-identifier hs-var">mi_complete_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919513"><span class="annot"><span class="annottext">[IfaceCompleteMatch]
</span><a href="#local-6989586621680919513"><span class="hs-identifier hs-var">complete_sigs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1185"></span><span>                 </span><span class="annot"><span class="annottext">mi_doc_hdr :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; Maybe HsDocString
</span><a href="GHC.Driver.Types.html#mi_doc_hdr"><span class="hs-identifier hs-var">mi_doc_hdr</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919512"><span class="annot"><span class="annottext">Maybe HsDocString
</span><a href="#local-6989586621680919512"><span class="hs-identifier hs-var">doc_hdr</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1186"></span><span>                 </span><span class="annot"><span class="annottext">mi_decl_docs :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; DeclDocMap
</span><a href="GHC.Driver.Types.html#mi_decl_docs"><span class="hs-identifier hs-var">mi_decl_docs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919511"><span class="annot"><span class="annottext">DeclDocMap
</span><a href="#local-6989586621680919511"><span class="hs-identifier hs-var">decl_docs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1187"></span><span>                 </span><span class="annot"><span class="annottext">mi_arg_docs :: forall (phase :: ModIfacePhase). ModIface_ phase -&gt; ArgDocMap
</span><a href="GHC.Driver.Types.html#mi_arg_docs"><span class="hs-identifier hs-var">mi_arg_docs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919510"><span class="annot"><span class="annottext">ArgDocMap
</span><a href="#local-6989586621680919510"><span class="hs-identifier hs-var">arg_docs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1188"></span><span>                 </span><span class="annot"><span class="annottext">mi_ext_fields :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var">mi_ext_fields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919509"><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680919509"><span class="hs-identifier hs-var">_ext_fields</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Don't `put_` this in the instance so we</span><span>
</span><span id="line-1189"></span><span>                                              </span><span class="hs-comment">-- can deal with it's pointer in the header</span><span>
</span><span id="line-1190"></span><span>                                              </span><span class="hs-comment">-- when we write the actual file</span><span>
</span><span id="line-1191"></span><span>                 </span><span class="annot"><span class="annottext">mi_final_exts :: forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; IfaceBackendExts phase
</span><a href="GHC.Driver.Types.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfaceBackend"><span class="hs-identifier hs-type">ModIfaceBackend</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1192"></span><span>                   </span><span class="annot"><span class="annottext">mi_iface_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_iface_hash"><span class="hs-identifier hs-var">mi_iface_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919508"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919508"><span class="hs-identifier hs-var">iface_hash</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1193"></span><span>                   </span><span class="annot"><span class="annottext">mi_mod_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_mod_hash"><span class="hs-identifier hs-var">mi_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919507"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919507"><span class="hs-identifier hs-var">mod_hash</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1194"></span><span>                   </span><span class="annot"><span class="annottext">mi_flag_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_flag_hash"><span class="hs-identifier hs-var">mi_flag_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919506"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919506"><span class="hs-identifier hs-var">flag_hash</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1195"></span><span>                   </span><span class="annot"><span class="annottext">mi_opt_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_opt_hash"><span class="hs-identifier hs-var">mi_opt_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919505"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919505"><span class="hs-identifier hs-var">opt_hash</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1196"></span><span>                   </span><span class="annot"><span class="annottext">mi_hpc_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_hpc_hash"><span class="hs-identifier hs-var">mi_hpc_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919504"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919504"><span class="hs-identifier hs-var">hpc_hash</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1197"></span><span>                   </span><span class="annot"><span class="annottext">mi_plugin_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_plugin_hash"><span class="hs-identifier hs-var">mi_plugin_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919503"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919503"><span class="hs-identifier hs-var">plugin_hash</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1198"></span><span>                   </span><span class="annot"><span class="annottext">mi_orphan :: ModIfaceBackend -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_orphan"><span class="hs-identifier hs-var">mi_orphan</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919502"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919502"><span class="hs-identifier hs-var">orphan</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1199"></span><span>                   </span><span class="annot"><span class="annottext">mi_finsts :: ModIfaceBackend -&gt; Bool
</span><a href="GHC.Driver.Types.html#mi_finsts"><span class="hs-identifier hs-var">mi_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919501"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919501"><span class="hs-identifier hs-var">hasFamInsts</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1200"></span><span>                   </span><span class="annot"><span class="annottext">mi_exp_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_exp_hash"><span class="hs-identifier hs-var">mi_exp_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919500"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919500"><span class="hs-identifier hs-var">exp_hash</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1201"></span><span>                   </span><span class="annot"><span class="annottext">mi_orphan_hash :: ModIfaceBackend -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#mi_orphan_hash"><span class="hs-identifier hs-var">mi_orphan_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919499"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919499"><span class="hs-identifier hs-var">orphan_hash</span></a></span></span><span>
</span><span id="line-1202"></span><span>                 </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1203"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Module -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919530"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1204"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Maybe Module -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Module
</span><a href="#local-6989586621680919529"><span class="hs-identifier hs-var">sig_of</span></a></span><span>
</span><span id="line-1205"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; HscSource -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621680919528"><span class="hs-identifier hs-var">hsc_src</span></a></span><span>
</span><span id="line-1206"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919508"><span class="hs-identifier hs-var">iface_hash</span></a></span><span>
</span><span id="line-1207"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919507"><span class="hs-identifier hs-var">mod_hash</span></a></span><span>
</span><span id="line-1208"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919506"><span class="hs-identifier hs-var">flag_hash</span></a></span><span>
</span><span id="line-1209"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919505"><span class="hs-identifier hs-var">opt_hash</span></a></span><span>
</span><span id="line-1210"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919504"><span class="hs-identifier hs-var">hpc_hash</span></a></span><span>
</span><span id="line-1211"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919503"><span class="hs-identifier hs-var">plugin_hash</span></a></span><span>
</span><span id="line-1212"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919502"><span class="hs-identifier hs-var">orphan</span></a></span><span>
</span><span id="line-1213"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919501"><span class="hs-identifier hs-var">hasFamInsts</span></a></span><span>
</span><span id="line-1214"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Dependencies -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680919527"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-1215"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [Usage] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[Usage]
</span><a href="#local-6989586621680919526"><span class="hs-identifier hs-var">usages</span></a></span><span>
</span><span id="line-1216"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [IfaceExport] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680919525"><span class="hs-identifier hs-var">exports</span></a></span><span>
</span><span id="line-1217"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919500"><span class="hs-identifier hs-var">exp_hash</span></a></span><span>
</span><span id="line-1218"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919524"><span class="hs-identifier hs-var">used_th</span></a></span><span>
</span><span id="line-1219"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [(OccName, Fixity)] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680919523"><span class="hs-identifier hs-var">fixities</span></a></span><span>
</span><span id="line-1220"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Warnings -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680919522"><span class="hs-identifier hs-var">warns</span></a></span><span>
</span><span id="line-1221"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [IfaceAnnotation] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation]
</span><a href="#local-6989586621680919521"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-1222"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [(Fingerprint, IfaceDecl)] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
[IfaceDeclExts 'ModIfaceFinal]
</span><a href="#local-6989586621680919520"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-1223"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [IfaceClsInst] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceClsInst]
</span><a href="#local-6989586621680919519"><span class="hs-identifier hs-var">insts</span></a></span><span>
</span><span id="line-1224"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [IfaceFamInst] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceFamInst]
</span><a href="#local-6989586621680919518"><span class="hs-identifier hs-var">fam_insts</span></a></span><span>
</span><span id="line-1225"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [IfaceRule] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621680919517"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-1226"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919499"><span class="hs-identifier hs-var">orphan_hash</span></a></span><span>
</span><span id="line-1227"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919516"><span class="hs-identifier hs-var">hpc_info</span></a></span><span>
</span><span id="line-1228"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; IfaceTrustInfo -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680919515"><span class="hs-identifier hs-var">trust</span></a></span><span>
</span><span id="line-1229"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919514"><span class="hs-identifier hs-var">trust_pkg</span></a></span><span>
</span><span id="line-1230"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [IfaceCompleteMatch] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch]
</span><a href="#local-6989586621680919513"><span class="hs-identifier hs-var">complete_sigs</span></a></span><span>
</span><span id="line-1231"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Maybe HsDocString -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe HsDocString
</span><a href="#local-6989586621680919512"><span class="hs-identifier hs-var">doc_hdr</span></a></span><span>
</span><span id="line-1232"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; DeclDocMap -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">DeclDocMap
</span><a href="#local-6989586621680919511"><span class="hs-identifier hs-var">decl_docs</span></a></span><span>
</span><span id="line-1233"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; ArgDocMap -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#lazyPut"><span class="hs-identifier hs-var">lazyPut</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919531"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">ArgDocMap
</span><a href="#local-6989586621680919510"><span class="hs-identifier hs-var">arg_docs</span></a></span><span>
</span><span id="line-1234"></span><span>
</span><span id="line-1235"></span><span>   </span><span id="local-6989586621680919420"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO ModIface
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621680919418"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1236"></span><span>        </span><span id="local-6989586621680919417"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919417"><span class="hs-identifier hs-var">mod</span></a></span></span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Module
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1237"></span><span>        </span><span id="local-6989586621680919416"><span class="annot"><span class="annottext">Maybe Module
</span><a href="#local-6989586621680919416"><span class="hs-identifier hs-var">sig_of</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Maybe Module)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1238"></span><span>        </span><span id="local-6989586621680919415"><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621680919415"><span class="hs-identifier hs-var">hsc_src</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO HscSource
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1239"></span><span>        </span><span id="local-6989586621680919414"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919414"><span class="hs-identifier hs-var">iface_hash</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1240"></span><span>        </span><span id="local-6989586621680919413"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919413"><span class="hs-identifier hs-var">mod_hash</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1241"></span><span>        </span><span id="local-6989586621680919412"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919412"><span class="hs-identifier hs-var">flag_hash</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1242"></span><span>        </span><span id="local-6989586621680919411"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919411"><span class="hs-identifier hs-var">opt_hash</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1243"></span><span>        </span><span id="local-6989586621680919410"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919410"><span class="hs-identifier hs-var">hpc_hash</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1244"></span><span>        </span><span id="local-6989586621680919409"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919409"><span class="hs-identifier hs-var">plugin_hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1245"></span><span>        </span><span id="local-6989586621680919408"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919408"><span class="hs-identifier hs-var">orphan</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1246"></span><span>        </span><span id="local-6989586621680919407"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919407"><span class="hs-identifier hs-var">hasFamInsts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1247"></span><span>        </span><span id="local-6989586621680919406"><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680919406"><span class="hs-identifier hs-var">deps</span></a></span></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Dependencies
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1248"></span><span>        </span><span id="local-6989586621680919404"><span class="annot"><span class="annottext">[Usage]
</span><a href="#local-6989586621680919404"><span class="hs-identifier hs-var">usages</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_usages&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [Usage]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1249"></span><span>        </span><span id="local-6989586621680919403"><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680919403"><span class="hs-identifier hs-var">exports</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_exports&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [IfaceExport]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1250"></span><span>        </span><span id="local-6989586621680919402"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919402"><span class="hs-identifier hs-var">exp_hash</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1251"></span><span>        </span><span id="local-6989586621680919401"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919401"><span class="hs-identifier hs-var">used_th</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1252"></span><span>        </span><span id="local-6989586621680919400"><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680919400"><span class="hs-identifier hs-var">fixities</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_fixities&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [(OccName, Fixity)]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1253"></span><span>        </span><span id="local-6989586621680919399"><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680919399"><span class="hs-identifier hs-var">warns</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_warns&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Warnings
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1254"></span><span>        </span><span id="local-6989586621680919398"><span class="annot"><span class="annottext">[IfaceAnnotation]
</span><a href="#local-6989586621680919398"><span class="hs-identifier hs-var">anns</span></a></span></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_anns&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [IfaceAnnotation]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1255"></span><span>        </span><span id="local-6989586621680919397"><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
</span><a href="#local-6989586621680919397"><span class="hs-identifier hs-var">decls</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_tycldecls&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [(Fingerprint, IfaceDecl)]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1256"></span><span>        </span><span id="local-6989586621680919396"><span class="annot"><span class="annottext">[IfaceClsInst]
</span><a href="#local-6989586621680919396"><span class="hs-identifier hs-var">insts</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_insts&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [IfaceClsInst]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1257"></span><span>        </span><span id="local-6989586621680919395"><span class="annot"><span class="annottext">[IfaceFamInst]
</span><a href="#local-6989586621680919395"><span class="hs-identifier hs-var">fam_insts</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_fam_insts&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [IfaceFamInst]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1258"></span><span>        </span><span id="local-6989586621680919394"><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621680919394"><span class="hs-identifier hs-var">rules</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;bin_rules&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [IfaceRule]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1259"></span><span>        </span><span id="local-6989586621680919393"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919393"><span class="hs-identifier hs-var">orphan_hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1260"></span><span>        </span><span id="local-6989586621680919392"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919392"><span class="hs-identifier hs-var">hpc_info</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1261"></span><span>        </span><span id="local-6989586621680919391"><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680919391"><span class="hs-identifier hs-var">trust</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO IfaceTrustInfo
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1262"></span><span>        </span><span id="local-6989586621680919390"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919390"><span class="hs-identifier hs-var">trust_pkg</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1263"></span><span>        </span><span id="local-6989586621680919389"><span class="annot"><span class="annottext">[IfaceCompleteMatch]
</span><a href="#local-6989586621680919389"><span class="hs-identifier hs-var">complete_sigs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [IfaceCompleteMatch]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1264"></span><span>        </span><span id="local-6989586621680919388"><span class="annot"><span class="annottext">Maybe HsDocString
</span><a href="#local-6989586621680919388"><span class="hs-identifier hs-var">doc_hdr</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Maybe HsDocString)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1265"></span><span>        </span><span id="local-6989586621680919387"><span class="annot"><span class="annottext">DeclDocMap
</span><a href="#local-6989586621680919387"><span class="hs-identifier hs-var">decl_docs</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO DeclDocMap
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1266"></span><span>        </span><span id="local-6989586621680919386"><span class="annot"><span class="annottext">ArgDocMap
</span><a href="#local-6989586621680919386"><span class="hs-identifier hs-var">arg_docs</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO ArgDocMap
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#lazyGet"><span class="hs-identifier hs-var">lazyGet</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680919418"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1267"></span><span>        </span><span class="annot"><span class="annottext">ModIface -&gt; IO ModIface
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface :: forall (phase :: ModIfacePhase).
Module
-&gt; Maybe Module
-&gt; HscSource
-&gt; Dependencies
-&gt; [Usage]
-&gt; [IfaceExport]
-&gt; Bool
-&gt; [(OccName, Fixity)]
-&gt; Warnings
-&gt; [IfaceAnnotation]
-&gt; [IfaceDeclExts phase]
-&gt; Maybe GlobalRdrEnv
-&gt; [IfaceClsInst]
-&gt; [IfaceFamInst]
-&gt; [IfaceRule]
-&gt; Bool
-&gt; IfaceTrustInfo
-&gt; Bool
-&gt; [IfaceCompleteMatch]
-&gt; Maybe HsDocString
-&gt; DeclDocMap
-&gt; ArgDocMap
-&gt; IfaceBackendExts phase
-&gt; ExtensibleFields
-&gt; ModIface_ phase
</span><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1268"></span><span>                 </span><span class="annot"><span class="annottext">mi_module :: Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919417"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1269"></span><span>                 </span><span class="annot"><span class="annottext">mi_sig_of :: Maybe Module
</span><a href="GHC.Driver.Types.html#mi_sig_of"><span class="hs-identifier hs-var">mi_sig_of</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Module
</span><a href="#local-6989586621680919416"><span class="hs-identifier hs-var">sig_of</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1270"></span><span>                 </span><span class="annot"><span class="annottext">mi_hsc_src :: HscSource
</span><a href="GHC.Driver.Types.html#mi_hsc_src"><span class="hs-identifier hs-var">mi_hsc_src</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621680919415"><span class="hs-identifier hs-var">hsc_src</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1271"></span><span>                 </span><span class="annot"><span class="annottext">mi_deps :: Dependencies
</span><a href="GHC.Driver.Types.html#mi_deps"><span class="hs-identifier hs-var">mi_deps</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680919406"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1272"></span><span>                 </span><span class="annot"><span class="annottext">mi_usages :: [Usage]
</span><a href="GHC.Driver.Types.html#mi_usages"><span class="hs-identifier hs-var">mi_usages</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Usage]
</span><a href="#local-6989586621680919404"><span class="hs-identifier hs-var">usages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1273"></span><span>                 </span><span class="annot"><span class="annottext">mi_exports :: [IfaceExport]
</span><a href="GHC.Driver.Types.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680919403"><span class="hs-identifier hs-var">exports</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1274"></span><span>                 </span><span class="annot"><span class="annottext">mi_used_th :: Bool
</span><a href="GHC.Driver.Types.html#mi_used_th"><span class="hs-identifier hs-var">mi_used_th</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919401"><span class="hs-identifier hs-var">used_th</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1275"></span><span>                 </span><span class="annot"><span class="annottext">mi_anns :: [IfaceAnnotation]
</span><a href="GHC.Driver.Types.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation]
</span><a href="#local-6989586621680919398"><span class="hs-identifier hs-var">anns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1276"></span><span>                 </span><span class="annot"><span class="annottext">mi_fixities :: [(OccName, Fixity)]
</span><a href="GHC.Driver.Types.html#mi_fixities"><span class="hs-identifier hs-var">mi_fixities</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680919400"><span class="hs-identifier hs-var">fixities</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1277"></span><span>                 </span><span class="annot"><span class="annottext">mi_warns :: Warnings
</span><a href="GHC.Driver.Types.html#mi_warns"><span class="hs-identifier hs-var">mi_warns</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680919399"><span class="hs-identifier hs-var">warns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1278"></span><span>                 </span><span class="annot"><span class="annottext">mi_decls :: [IfaceDeclExts 'ModIfaceFinal]
</span><a href="GHC.Driver.Types.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
[IfaceDeclExts 'ModIfaceFinal]
</span><a href="#local-6989586621680919397"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1279"></span><span>                 </span><span class="annot"><span class="annottext">mi_globals :: Maybe GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#mi_globals"><span class="hs-identifier hs-var">mi_globals</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe GlobalRdrEnv
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1280"></span><span>                 </span><span class="annot"><span class="annottext">mi_insts :: [IfaceClsInst]
</span><a href="GHC.Driver.Types.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceClsInst]
</span><a href="#local-6989586621680919396"><span class="hs-identifier hs-var">insts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1281"></span><span>                 </span><span class="annot"><span class="annottext">mi_fam_insts :: [IfaceFamInst]
</span><a href="GHC.Driver.Types.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceFamInst]
</span><a href="#local-6989586621680919395"><span class="hs-identifier hs-var">fam_insts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1282"></span><span>                 </span><span class="annot"><span class="annottext">mi_rules :: [IfaceRule]
</span><a href="GHC.Driver.Types.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621680919394"><span class="hs-identifier hs-var">rules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1283"></span><span>                 </span><span class="annot"><span class="annottext">mi_hpc :: Bool
</span><a href="GHC.Driver.Types.html#mi_hpc"><span class="hs-identifier hs-var">mi_hpc</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919392"><span class="hs-identifier hs-var">hpc_info</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1284"></span><span>                 </span><span class="annot"><span class="annottext">mi_trust :: IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#mi_trust"><span class="hs-identifier hs-var">mi_trust</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680919391"><span class="hs-identifier hs-var">trust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1285"></span><span>                 </span><span class="annot"><span class="annottext">mi_trust_pkg :: Bool
</span><a href="GHC.Driver.Types.html#mi_trust_pkg"><span class="hs-identifier hs-var">mi_trust_pkg</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919390"><span class="hs-identifier hs-var">trust_pkg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1286"></span><span>                        </span><span class="hs-comment">-- And build the cached values</span><span>
</span><span id="line-1287"></span><span>                 </span><span class="annot"><span class="annottext">mi_complete_sigs :: [IfaceCompleteMatch]
</span><a href="GHC.Driver.Types.html#mi_complete_sigs"><span class="hs-identifier hs-var">mi_complete_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch]
</span><a href="#local-6989586621680919389"><span class="hs-identifier hs-var">complete_sigs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1288"></span><span>                 </span><span class="annot"><span class="annottext">mi_doc_hdr :: Maybe HsDocString
</span><a href="GHC.Driver.Types.html#mi_doc_hdr"><span class="hs-identifier hs-var">mi_doc_hdr</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe HsDocString
</span><a href="#local-6989586621680919388"><span class="hs-identifier hs-var">doc_hdr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1289"></span><span>                 </span><span class="annot"><span class="annottext">mi_decl_docs :: DeclDocMap
</span><a href="GHC.Driver.Types.html#mi_decl_docs"><span class="hs-identifier hs-var">mi_decl_docs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclDocMap
</span><a href="#local-6989586621680919387"><span class="hs-identifier hs-var">decl_docs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1290"></span><span>                 </span><span class="annot"><span class="annottext">mi_arg_docs :: ArgDocMap
</span><a href="GHC.Driver.Types.html#mi_arg_docs"><span class="hs-identifier hs-var">mi_arg_docs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgDocMap
</span><a href="#local-6989586621680919386"><span class="hs-identifier hs-var">arg_docs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1291"></span><span>                 </span><span class="annot"><span class="annottext">mi_ext_fields :: ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var">mi_ext_fields</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="GHC.Driver.Types.html#emptyExtensibleFields"><span class="hs-identifier hs-var">emptyExtensibleFields</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- placeholder because this is dealt</span><span>
</span><span id="line-1292"></span><span>                                                         </span><span class="hs-comment">-- with specially when the file is read</span><span>
</span><span id="line-1293"></span><span>                 </span><span class="annot"><span class="annottext">mi_final_exts :: IfaceBackendExts 'ModIfaceFinal
</span><a href="GHC.Driver.Types.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend :: Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Bool
-&gt; Bool
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; (OccName -&gt; Maybe WarningTxt)
-&gt; (OccName -&gt; Maybe Fixity)
-&gt; (OccName -&gt; Maybe (OccName, Fingerprint))
-&gt; ModIfaceBackend
</span><a href="GHC.Driver.Types.html#ModIfaceBackend"><span class="hs-identifier hs-type">ModIfaceBackend</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1294"></span><span>                   </span><span class="annot"><span class="annottext">mi_iface_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_iface_hash"><span class="hs-identifier hs-var">mi_iface_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919414"><span class="hs-identifier hs-var">iface_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1295"></span><span>                   </span><span class="annot"><span class="annottext">mi_mod_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_mod_hash"><span class="hs-identifier hs-var">mi_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919413"><span class="hs-identifier hs-var">mod_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1296"></span><span>                   </span><span class="annot"><span class="annottext">mi_flag_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_flag_hash"><span class="hs-identifier hs-var">mi_flag_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919412"><span class="hs-identifier hs-var">flag_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1297"></span><span>                   </span><span class="annot"><span class="annottext">mi_opt_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_opt_hash"><span class="hs-identifier hs-var">mi_opt_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919411"><span class="hs-identifier hs-var">opt_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1298"></span><span>                   </span><span class="annot"><span class="annottext">mi_hpc_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_hpc_hash"><span class="hs-identifier hs-var">mi_hpc_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919410"><span class="hs-identifier hs-var">hpc_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1299"></span><span>                   </span><span class="annot"><span class="annottext">mi_plugin_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_plugin_hash"><span class="hs-identifier hs-var">mi_plugin_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919409"><span class="hs-identifier hs-var">plugin_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1300"></span><span>                   </span><span class="annot"><span class="annottext">mi_orphan :: Bool
</span><a href="GHC.Driver.Types.html#mi_orphan"><span class="hs-identifier hs-var">mi_orphan</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919408"><span class="hs-identifier hs-var">orphan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1301"></span><span>                   </span><span class="annot"><span class="annottext">mi_finsts :: Bool
</span><a href="GHC.Driver.Types.html#mi_finsts"><span class="hs-identifier hs-var">mi_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680919407"><span class="hs-identifier hs-var">hasFamInsts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1302"></span><span>                   </span><span class="annot"><span class="annottext">mi_exp_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_exp_hash"><span class="hs-identifier hs-var">mi_exp_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919402"><span class="hs-identifier hs-var">exp_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1303"></span><span>                   </span><span class="annot"><span class="annottext">mi_orphan_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_orphan_hash"><span class="hs-identifier hs-var">mi_orphan_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919393"><span class="hs-identifier hs-var">orphan_hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1304"></span><span>                   </span><span class="annot"><span class="annottext">mi_warn_fn :: OccName -&gt; Maybe WarningTxt
</span><a href="GHC.Driver.Types.html#mi_warn_fn"><span class="hs-identifier hs-var">mi_warn_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Warnings -&gt; OccName -&gt; Maybe WarningTxt
</span><a href="GHC.Driver.Types.html#mkIfaceWarnCache"><span class="hs-identifier hs-var">mkIfaceWarnCache</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680919399"><span class="hs-identifier hs-var">warns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1305"></span><span>                   </span><span class="annot"><span class="annottext">mi_fix_fn :: OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#mi_fix_fn"><span class="hs-identifier hs-var">mi_fix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)] -&gt; OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#mkIfaceFixCache"><span class="hs-identifier hs-var">mkIfaceFixCache</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680919400"><span class="hs-identifier hs-var">fixities</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1306"></span><span>                   </span><span class="annot"><span class="annottext">mi_hash_fn :: OccName -&gt; Maybe (OccName, Fingerprint)
</span><a href="GHC.Driver.Types.html#mi_hash_fn"><span class="hs-identifier hs-var">mi_hash_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
-&gt; OccName -&gt; Maybe (OccName, Fingerprint)
</span><a href="GHC.Driver.Types.html#mkIfaceHashCache"><span class="hs-identifier hs-var">mkIfaceHashCache</span></a></span><span> </span><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
</span><a href="#local-6989586621680919397"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-1307"></span><span>                 </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1308"></span><span>
</span><span id="line-1309"></span><span class="hs-comment">-- | The original names declared of a certain module that are exported</span><span>
</span><span id="line-1310"></span><span class="hs-keyword">type</span><span> </span><span id="IfaceExport"><span class="annot"><a href="GHC.Driver.Types.html#IfaceExport"><span class="hs-identifier hs-var">IfaceExport</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span>
</span><span id="line-1311"></span><span>
</span><span id="line-1312"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyPartialModIface"><span class="hs-identifier hs-type">emptyPartialModIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PartialModIface"><span class="hs-identifier hs-type">PartialModIface</span></a></span><span>
</span><span id="line-1313"></span><span id="emptyPartialModIface"><span class="annot"><span class="annottext">emptyPartialModIface :: Module -&gt; PartialModIface
</span><a href="GHC.Driver.Types.html#emptyPartialModIface"><span class="hs-identifier hs-var hs-var">emptyPartialModIface</span></a></span></span><span> </span><span id="local-6989586621680919384"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919384"><span class="hs-identifier hs-var">mod</span></a></span></span><span>
</span><span id="line-1314"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIface :: forall (phase :: ModIfacePhase).
Module
-&gt; Maybe Module
-&gt; HscSource
-&gt; Dependencies
-&gt; [Usage]
-&gt; [IfaceExport]
-&gt; Bool
-&gt; [(OccName, Fixity)]
-&gt; Warnings
-&gt; [IfaceAnnotation]
-&gt; [IfaceDeclExts phase]
-&gt; Maybe GlobalRdrEnv
-&gt; [IfaceClsInst]
-&gt; [IfaceFamInst]
-&gt; [IfaceRule]
-&gt; Bool
-&gt; IfaceTrustInfo
-&gt; Bool
-&gt; [IfaceCompleteMatch]
-&gt; Maybe HsDocString
-&gt; DeclDocMap
-&gt; ArgDocMap
-&gt; IfaceBackendExts phase
-&gt; ExtensibleFields
-&gt; ModIface_ phase
</span><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mi_module :: Module
</span><a href="GHC.Driver.Types.html#mi_module"><span class="hs-identifier hs-var">mi_module</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919384"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1315"></span><span>               </span><span class="annot"><span class="annottext">mi_sig_of :: Maybe Module
</span><a href="GHC.Driver.Types.html#mi_sig_of"><span class="hs-identifier hs-var">mi_sig_of</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Module
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1316"></span><span>               </span><span class="annot"><span class="annottext">mi_hsc_src :: HscSource
</span><a href="GHC.Driver.Types.html#mi_hsc_src"><span class="hs-identifier hs-var">mi_hsc_src</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="GHC.Driver.Phases.html#HsSrcFile"><span class="hs-identifier hs-var">HsSrcFile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1317"></span><span>               </span><span class="annot"><span class="annottext">mi_deps :: Dependencies
</span><a href="GHC.Driver.Types.html#mi_deps"><span class="hs-identifier hs-var">mi_deps</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="GHC.Driver.Types.html#noDependencies"><span class="hs-identifier hs-var">noDependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1318"></span><span>               </span><span class="annot"><span class="annottext">mi_usages :: [Usage]
</span><a href="GHC.Driver.Types.html#mi_usages"><span class="hs-identifier hs-var">mi_usages</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1319"></span><span>               </span><span class="annot"><span class="annottext">mi_exports :: [IfaceExport]
</span><a href="GHC.Driver.Types.html#mi_exports"><span class="hs-identifier hs-var">mi_exports</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1320"></span><span>               </span><span class="annot"><span class="annottext">mi_used_th :: Bool
</span><a href="GHC.Driver.Types.html#mi_used_th"><span class="hs-identifier hs-var">mi_used_th</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-1321"></span><span>               </span><span class="annot"><span class="annottext">mi_fixities :: [(OccName, Fixity)]
</span><a href="GHC.Driver.Types.html#mi_fixities"><span class="hs-identifier hs-var">mi_fixities</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1322"></span><span>               </span><span class="annot"><span class="annottext">mi_warns :: Warnings
</span><a href="GHC.Driver.Types.html#mi_warns"><span class="hs-identifier hs-var">mi_warns</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Driver.Types.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1323"></span><span>               </span><span class="annot"><span class="annottext">mi_anns :: [IfaceAnnotation]
</span><a href="GHC.Driver.Types.html#mi_anns"><span class="hs-identifier hs-var">mi_anns</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1324"></span><span>               </span><span class="annot"><span class="annottext">mi_insts :: [IfaceClsInst]
</span><a href="GHC.Driver.Types.html#mi_insts"><span class="hs-identifier hs-var">mi_insts</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1325"></span><span>               </span><span class="annot"><span class="annottext">mi_fam_insts :: [IfaceFamInst]
</span><a href="GHC.Driver.Types.html#mi_fam_insts"><span class="hs-identifier hs-var">mi_fam_insts</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1326"></span><span>               </span><span class="annot"><span class="annottext">mi_rules :: [IfaceRule]
</span><a href="GHC.Driver.Types.html#mi_rules"><span class="hs-identifier hs-var">mi_rules</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1327"></span><span>               </span><span class="annot"><span class="annottext">mi_decls :: [IfaceDeclExts 'ModIfaceCore]
</span><a href="GHC.Driver.Types.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1328"></span><span>               </span><span class="annot"><span class="annottext">mi_globals :: Maybe GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#mi_globals"><span class="hs-identifier hs-var">mi_globals</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe GlobalRdrEnv
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1329"></span><span>               </span><span class="annot"><span class="annottext">mi_hpc :: Bool
</span><a href="GHC.Driver.Types.html#mi_hpc"><span class="hs-identifier hs-var">mi_hpc</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-1330"></span><span>               </span><span class="annot"><span class="annottext">mi_trust :: IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#mi_trust"><span class="hs-identifier hs-var">mi_trust</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#noIfaceTrustInfo"><span class="hs-identifier hs-var">noIfaceTrustInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1331"></span><span>               </span><span class="annot"><span class="annottext">mi_trust_pkg :: Bool
</span><a href="GHC.Driver.Types.html#mi_trust_pkg"><span class="hs-identifier hs-var">mi_trust_pkg</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-1332"></span><span>               </span><span class="annot"><span class="annottext">mi_complete_sigs :: [IfaceCompleteMatch]
</span><a href="GHC.Driver.Types.html#mi_complete_sigs"><span class="hs-identifier hs-var">mi_complete_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1333"></span><span>               </span><span class="annot"><span class="annottext">mi_doc_hdr :: Maybe HsDocString
</span><a href="GHC.Driver.Types.html#mi_doc_hdr"><span class="hs-identifier hs-var">mi_doc_hdr</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe HsDocString
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1334"></span><span>               </span><span class="annot"><span class="annottext">mi_decl_docs :: DeclDocMap
</span><a href="GHC.Driver.Types.html#mi_decl_docs"><span class="hs-identifier hs-var">mi_decl_docs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclDocMap
</span><a href="GHC.Hs.Doc.html#emptyDeclDocMap"><span class="hs-identifier hs-var">emptyDeclDocMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1335"></span><span>               </span><span class="annot"><span class="annottext">mi_arg_docs :: ArgDocMap
</span><a href="GHC.Driver.Types.html#mi_arg_docs"><span class="hs-identifier hs-var">mi_arg_docs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgDocMap
</span><a href="GHC.Hs.Doc.html#emptyArgDocMap"><span class="hs-identifier hs-var">emptyArgDocMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1336"></span><span>               </span><span class="annot"><span class="annottext">mi_final_exts :: IfaceBackendExts 'ModIfaceCore
</span><a href="GHC.Driver.Types.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1337"></span><span>               </span><span class="annot"><span class="annottext">mi_ext_fields :: ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var">mi_ext_fields</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="GHC.Driver.Types.html#emptyExtensibleFields"><span class="hs-identifier hs-var">emptyExtensibleFields</span></a></span><span>
</span><span id="line-1338"></span><span>             </span><span class="hs-special">}</span><span>
</span><span id="line-1339"></span><span>
</span><span id="line-1340"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyFullModIface"><span class="hs-identifier hs-type">emptyFullModIface</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-1341"></span><span id="emptyFullModIface"><span class="annot"><span class="annottext">emptyFullModIface :: Module -&gt; ModIface
</span><a href="GHC.Driver.Types.html#emptyFullModIface"><span class="hs-identifier hs-var hs-var">emptyFullModIface</span></a></span></span><span> </span><span id="local-6989586621680919379"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919379"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1342"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; PartialModIface
</span><a href="GHC.Driver.Types.html#emptyPartialModIface"><span class="hs-identifier hs-var">emptyPartialModIface</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919379"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mi_decls :: [IfaceDeclExts 'ModIfaceFinal]
</span><a href="GHC.Driver.Types.html#mi_decls"><span class="hs-identifier hs-var">mi_decls</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1344"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mi_final_exts :: IfaceBackendExts 'ModIfaceFinal
</span><a href="GHC.Driver.Types.html#mi_final_exts"><span class="hs-identifier hs-var">mi_final_exts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIfaceBackend :: Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; Bool
-&gt; Bool
-&gt; Fingerprint
-&gt; Fingerprint
-&gt; (OccName -&gt; Maybe WarningTxt)
-&gt; (OccName -&gt; Maybe Fixity)
-&gt; (OccName -&gt; Maybe (OccName, Fingerprint))
-&gt; ModIfaceBackend
</span><a href="GHC.Driver.Types.html#ModIfaceBackend"><span class="hs-identifier hs-type">ModIfaceBackend</span></a></span><span>
</span><span id="line-1345"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mi_iface_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_iface_hash"><span class="hs-identifier hs-var">mi_iface_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1346"></span><span>          </span><span class="annot"><span class="annottext">mi_mod_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_mod_hash"><span class="hs-identifier hs-var">mi_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1347"></span><span>          </span><span class="annot"><span class="annottext">mi_flag_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_flag_hash"><span class="hs-identifier hs-var">mi_flag_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1348"></span><span>          </span><span class="annot"><span class="annottext">mi_opt_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_opt_hash"><span class="hs-identifier hs-var">mi_opt_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1349"></span><span>          </span><span class="annot"><span class="annottext">mi_hpc_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_hpc_hash"><span class="hs-identifier hs-var">mi_hpc_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1350"></span><span>          </span><span class="annot"><span class="annottext">mi_plugin_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_plugin_hash"><span class="hs-identifier hs-var">mi_plugin_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1351"></span><span>          </span><span class="annot"><span class="annottext">mi_orphan :: Bool
</span><a href="GHC.Driver.Types.html#mi_orphan"><span class="hs-identifier hs-var">mi_orphan</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-1352"></span><span>          </span><span class="annot"><span class="annottext">mi_finsts :: Bool
</span><a href="GHC.Driver.Types.html#mi_finsts"><span class="hs-identifier hs-var">mi_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-1353"></span><span>          </span><span class="annot"><span class="annottext">mi_exp_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_exp_hash"><span class="hs-identifier hs-var">mi_exp_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1354"></span><span>          </span><span class="annot"><span class="annottext">mi_orphan_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#mi_orphan_hash"><span class="hs-identifier hs-var">mi_orphan_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="../../base/src/GHC.Fingerprint.html#fingerprint0"><span class="hs-identifier hs-var">fingerprint0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1355"></span><span>          </span><span class="annot"><span class="annottext">mi_warn_fn :: OccName -&gt; Maybe WarningTxt
</span><a href="GHC.Driver.Types.html#mi_warn_fn"><span class="hs-identifier hs-var">mi_warn_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Maybe WarningTxt
</span><a href="GHC.Driver.Types.html#emptyIfaceWarnCache"><span class="hs-identifier hs-var">emptyIfaceWarnCache</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1356"></span><span>          </span><span class="annot"><span class="annottext">mi_fix_fn :: OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#mi_fix_fn"><span class="hs-identifier hs-var">mi_fix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#emptyIfaceFixCache"><span class="hs-identifier hs-var">emptyIfaceFixCache</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1357"></span><span>          </span><span class="annot"><span class="annottext">mi_hash_fn :: OccName -&gt; Maybe (OccName, Fingerprint)
</span><a href="GHC.Driver.Types.html#mi_hash_fn"><span class="hs-identifier hs-var">mi_hash_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Maybe (OccName, Fingerprint)
</span><a href="GHC.Driver.Types.html#emptyIfaceHashCache"><span class="hs-identifier hs-var">emptyIfaceHashCache</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1358"></span><span>
</span><span id="line-1359"></span><span class="hs-comment">-- | Constructs cache for the 'mi_hash_fn' field of a 'ModIface'</span><span>
</span><span id="line-1360"></span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceHashCache"><span class="hs-identifier hs-type">mkIfaceHashCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Iface.Syntax.html#IfaceDecl"><span class="hs-identifier hs-type">IfaceDecl</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1361"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1362"></span><span id="mkIfaceHashCache"><span class="annot"><span class="annottext">mkIfaceHashCache :: [(Fingerprint, IfaceDecl)]
-&gt; OccName -&gt; Maybe (OccName, Fingerprint)
</span><a href="GHC.Driver.Types.html#mkIfaceHashCache"><span class="hs-identifier hs-var hs-var">mkIfaceHashCache</span></a></span></span><span> </span><span id="local-6989586621680919375"><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
</span><a href="#local-6989586621680919375"><span class="hs-identifier hs-var">pairs</span></a></span></span><span>
</span><span id="line-1363"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680919374"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919374"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, Fingerprint)
-&gt; OccName -&gt; Maybe (OccName, Fingerprint)
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, Fingerprint)
</span><a href="#local-6989586621680919372"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919374"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1364"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1365"></span><span>    </span><span id="local-6989586621680919372"><span class="annot"><span class="annottext">env :: OccEnv (OccName, Fingerprint)
</span><a href="#local-6989586621680919372"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccEnv (OccName, Fingerprint)
 -&gt; (Fingerprint, IfaceDecl) -&gt; OccEnv (OccName, Fingerprint))
-&gt; OccEnv (OccName, Fingerprint)
-&gt; [(Fingerprint, IfaceDecl)]
-&gt; OccEnv (OccName, Fingerprint)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, Fingerprint)
-&gt; (Fingerprint, IfaceDecl) -&gt; OccEnv (OccName, Fingerprint)
</span><a href="#local-6989586621680919370"><span class="hs-identifier hs-var">add_decl</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, Fingerprint)
forall a. OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#emptyOccEnv"><span class="hs-identifier hs-var">emptyOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(Fingerprint, IfaceDecl)]
</span><a href="#local-6989586621680919375"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1366"></span><span>    </span><span id="local-6989586621680919370"><span class="annot"><span class="annottext">add_decl :: OccEnv (OccName, Fingerprint)
-&gt; (Fingerprint, IfaceDecl) -&gt; OccEnv (OccName, Fingerprint)
</span><a href="#local-6989586621680919370"><span class="hs-identifier hs-var hs-var">add_decl</span></a></span></span><span> </span><span id="local-6989586621680919367"><span class="annot"><span class="annottext">OccEnv (OccName, Fingerprint)
</span><a href="#local-6989586621680919367"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680919366"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919366"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680919365"><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621680919365"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OccEnv (OccName, Fingerprint)
 -&gt; (OccName, Fingerprint) -&gt; OccEnv (OccName, Fingerprint))
-&gt; OccEnv (OccName, Fingerprint)
-&gt; [(OccName, Fingerprint)]
-&gt; OccEnv (OccName, Fingerprint)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, Fingerprint)
-&gt; (OccName, Fingerprint) -&gt; OccEnv (OccName, Fingerprint)
forall {b}.
OccEnv (OccName, b) -&gt; (OccName, b) -&gt; OccEnv (OccName, b)
</span><a href="#local-6989586621680919364"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, Fingerprint)
</span><a href="#local-6989586621680919367"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Fingerprint -&gt; IfaceDecl -&gt; [(OccName, Fingerprint)]
</span><a href="GHC.Iface.Syntax.html#ifaceDeclFingerprints"><span class="hs-identifier hs-var">ifaceDeclFingerprints</span></a></span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680919366"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceDecl
</span><a href="#local-6989586621680919365"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1368"></span><span>        </span><span id="local-6989586621680919364"><span class="annot"><span class="annottext">add :: OccEnv (OccName, b) -&gt; (OccName, b) -&gt; OccEnv (OccName, b)
</span><a href="#local-6989586621680919364"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621680919362"><span class="annot"><span class="annottext">OccEnv (OccName, b)
</span><a href="#local-6989586621680919362"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680919361"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919361"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621680919360"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680919360"><span class="hs-identifier hs-var">hash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, b)
-&gt; OccName -&gt; (OccName, b) -&gt; OccEnv (OccName, b)
forall a. OccEnv a -&gt; OccName -&gt; a -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#extendOccEnv"><span class="hs-identifier hs-var">extendOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv (OccName, b)
</span><a href="#local-6989586621680919362"><span class="hs-identifier hs-var">env0</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919361"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919361"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680919360"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyIfaceHashCache"><span class="hs-identifier hs-type">emptyIfaceHashCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span id="emptyIfaceHashCache"><span class="annot"><span class="annottext">emptyIfaceHashCache :: OccName -&gt; Maybe (OccName, Fingerprint)
</span><a href="GHC.Driver.Types.html#emptyIfaceHashCache"><span class="hs-identifier hs-var hs-var">emptyIfaceHashCache</span></a></span></span><span> </span><span id="local-6989586621680919358"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919358"><span class="hs-identifier hs-var">_occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (OccName, Fingerprint)
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1372"></span><span>
</span><span id="line-1373"></span><span>
</span><span id="line-1374"></span><span class="hs-comment">-- | The 'ModDetails' is essentially a cache for information in the 'ModIface'</span><span>
</span><span id="line-1375"></span><span class="hs-comment">-- for home modules only. Information relating to packages will be loaded into</span><span>
</span><span id="line-1376"></span><span class="hs-comment">-- global environments in 'ExternalPackageState'.</span><span>
</span><span id="line-1377"></span><span class="hs-keyword">data</span><span> </span><span id="ModDetails"><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-var">ModDetails</span></a></span></span><span>
</span><span id="line-1378"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ModDetails"><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-var">ModDetails</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1379"></span><span>        </span><span class="hs-comment">-- The next two fields are created by the typechecker</span><span>
</span><span id="line-1380"></span><span>        </span><span id="md_exports"><span class="annot"><span class="annottext">ModDetails -&gt; [IfaceExport]
</span><a href="GHC.Driver.Types.html#md_exports"><span class="hs-identifier hs-var hs-var">md_exports</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1381"></span><span>        </span><span id="md_types"><span class="annot"><span class="annottext">ModDetails -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#md_types"><span class="hs-identifier hs-var hs-var">md_types</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- ^ Local type environment for this particular module</span><span>
</span><span id="line-1382"></span><span>                                        </span><span class="hs-comment">-- Includes Ids, TyCons, PatSyns</span><span>
</span><span id="line-1383"></span><span>        </span><span id="md_insts"><span class="annot"><span class="annottext">ModDetails -&gt; [ClsInst]
</span><a href="GHC.Driver.Types.html#md_insts"><span class="hs-identifier hs-var hs-var">md_insts</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ 'DFunId's for the instances in this module</span><span>
</span><span id="line-1384"></span><span>        </span><span id="md_fam_insts"><span class="annot"><span class="annottext">ModDetails -&gt; [FamInst]
</span><a href="GHC.Driver.Types.html#md_fam_insts"><span class="hs-identifier hs-var hs-var">md_fam_insts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1385"></span><span>        </span><span id="md_rules"><span class="annot"><span class="annottext">ModDetails -&gt; [CoreRule]
</span><a href="GHC.Driver.Types.html#md_rules"><span class="hs-identifier hs-var hs-var">md_rules</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- ^ Domain may include 'Id's from other modules</span><span>
</span><span id="line-1386"></span><span>        </span><span id="md_anns"><span class="annot"><span class="annottext">ModDetails -&gt; [Annotation]
</span><a href="GHC.Driver.Types.html#md_anns"><span class="hs-identifier hs-var hs-var">md_anns</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- ^ Annotations present in this module: currently</span><span>
</span><span id="line-1387"></span><span>                                        </span><span class="hs-comment">-- they only annotate things also declared in this module</span><span>
</span><span id="line-1388"></span><span>        </span><span id="md_complete_sigs"><span class="annot"><span class="annottext">ModDetails -&gt; [CompleteMatch]
</span><a href="GHC.Driver.Types.html#md_complete_sigs"><span class="hs-identifier hs-var hs-var">md_complete_sigs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1389"></span><span>          </span><span class="hs-comment">-- ^ Complete match pragmas for this module</span><span>
</span><span id="line-1390"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-1391"></span><span>
</span><span id="line-1392"></span><span class="hs-comment">-- | Constructs an empty ModDetails</span><span>
</span><span id="line-1393"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyModDetails"><span class="hs-identifier hs-type">emptyModDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span>
</span><span id="line-1394"></span><span id="emptyModDetails"><span class="annot"><span class="annottext">emptyModDetails :: ModDetails
</span><a href="GHC.Driver.Types.html#emptyModDetails"><span class="hs-identifier hs-var hs-var">emptyModDetails</span></a></span></span><span>
</span><span id="line-1395"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModDetails :: [IfaceExport]
-&gt; TypeEnv
-&gt; [ClsInst]
-&gt; [FamInst]
-&gt; [CoreRule]
-&gt; [Annotation]
-&gt; [CompleteMatch]
-&gt; ModDetails
</span><a href="GHC.Driver.Types.html#ModDetails"><span class="hs-identifier hs-type">ModDetails</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">md_types :: TypeEnv
</span><a href="GHC.Driver.Types.html#md_types"><span class="hs-identifier hs-var">md_types</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="GHC.Driver.Types.html#emptyTypeEnv"><span class="hs-identifier hs-var">emptyTypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1396"></span><span>                 </span><span class="annot"><span class="annottext">md_exports :: [IfaceExport]
</span><a href="GHC.Driver.Types.html#md_exports"><span class="hs-identifier hs-var">md_exports</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1397"></span><span>                 </span><span class="annot"><span class="annottext">md_insts :: [ClsInst]
</span><a href="GHC.Driver.Types.html#md_insts"><span class="hs-identifier hs-var">md_insts</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1398"></span><span>                 </span><span class="annot"><span class="annottext">md_rules :: [CoreRule]
</span><a href="GHC.Driver.Types.html#md_rules"><span class="hs-identifier hs-var">md_rules</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1399"></span><span>                 </span><span class="annot"><span class="annottext">md_fam_insts :: [FamInst]
</span><a href="GHC.Driver.Types.html#md_fam_insts"><span class="hs-identifier hs-var">md_fam_insts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1400"></span><span>                 </span><span class="annot"><span class="annottext">md_anns :: [Annotation]
</span><a href="GHC.Driver.Types.html#md_anns"><span class="hs-identifier hs-var">md_anns</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1401"></span><span>                 </span><span class="annot"><span class="annottext">md_complete_sigs :: [CompleteMatch]
</span><a href="GHC.Driver.Types.html#md_complete_sigs"><span class="hs-identifier hs-var">md_complete_sigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1402"></span><span>
</span><span id="line-1403"></span><span class="hs-comment">-- | Records the modules directly imported by a module for extracting e.g.</span><span>
</span><span id="line-1404"></span><span class="hs-comment">-- usage information, and also to give better error message</span><span>
</span><span id="line-1405"></span><span class="hs-keyword">type</span><span> </span><span id="ImportedMods"><span class="annot"><a href="GHC.Driver.Types.html#ImportedMods"><span class="hs-identifier hs-var">ImportedMods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleEnv"><span class="hs-identifier hs-type">ModuleEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#ImportedBy"><span class="hs-identifier hs-type">ImportedBy</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1406"></span><span>
</span><span id="line-1407"></span><span class="hs-comment">-- | If a module was &quot;imported&quot; by the user, we associate it with</span><span>
</span><span id="line-1408"></span><span class="hs-comment">-- more detailed usage information 'ImportedModsVal'; a module</span><span>
</span><span id="line-1409"></span><span class="hs-comment">-- imported by the system only gets used for usage information.</span><span>
</span><span id="line-1410"></span><span class="hs-keyword">data</span><span> </span><span id="ImportedBy"><span class="annot"><a href="GHC.Driver.Types.html#ImportedBy"><span class="hs-identifier hs-var">ImportedBy</span></a></span></span><span>
</span><span id="line-1411"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="ImportedByUser"><span class="annot"><a href="GHC.Driver.Types.html#ImportedByUser"><span class="hs-identifier hs-var">ImportedByUser</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ImportedModsVal"><span class="hs-identifier hs-type">ImportedModsVal</span></a></span><span>
</span><span id="line-1412"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ImportedBySystem"><span class="annot"><a href="GHC.Driver.Types.html#ImportedBySystem"><span class="hs-identifier hs-var">ImportedBySystem</span></a></span></span><span>
</span><span id="line-1413"></span><span>
</span><span id="line-1414"></span><span class="annot"><a href="GHC.Driver.Types.html#importedByUser"><span class="hs-identifier hs-type">importedByUser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#ImportedBy"><span class="hs-identifier hs-type">ImportedBy</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#ImportedModsVal"><span class="hs-identifier hs-type">ImportedModsVal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1415"></span><span id="importedByUser"><span class="annot"><span class="annottext">importedByUser :: [ImportedBy] -&gt; [ImportedModsVal]
</span><a href="GHC.Driver.Types.html#importedByUser"><span class="hs-identifier hs-var hs-var">importedByUser</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ImportedByUser"><span class="hs-identifier hs-type">ImportedByUser</span></a></span><span> </span><span id="local-6989586621680919353"><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621680919353"><span class="hs-identifier hs-var">imv</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680919352"><span class="annot"><span class="annottext">[ImportedBy]
</span><a href="#local-6989586621680919352"><span class="hs-identifier hs-var">bys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621680919353"><span class="hs-identifier hs-var">imv</span></a></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal -&gt; [ImportedModsVal] -&gt; [ImportedModsVal]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[ImportedBy] -&gt; [ImportedModsVal]
</span><a href="GHC.Driver.Types.html#importedByUser"><span class="hs-identifier hs-var">importedByUser</span></a></span><span> </span><span class="annot"><span class="annottext">[ImportedBy]
</span><a href="#local-6989586621680919352"><span class="hs-identifier hs-var">bys</span></a></span><span>
</span><span id="line-1416"></span><span class="annot"><a href="GHC.Driver.Types.html#importedByUser"><span class="hs-identifier hs-var">importedByUser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportedBy
</span><a href="GHC.Driver.Types.html#ImportedBySystem"><span class="hs-identifier hs-var">ImportedBySystem</span></a></span><span>   </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680919351"><span class="annot"><span class="annottext">[ImportedBy]
</span><a href="#local-6989586621680919351"><span class="hs-identifier hs-var">bys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>       </span><span class="annot"><span class="annottext">[ImportedBy] -&gt; [ImportedModsVal]
</span><a href="GHC.Driver.Types.html#importedByUser"><span class="hs-identifier hs-var">importedByUser</span></a></span><span> </span><span class="annot"><span class="annottext">[ImportedBy]
</span><a href="#local-6989586621680919351"><span class="hs-identifier hs-var">bys</span></a></span><span>
</span><span id="line-1417"></span><span class="annot"><a href="GHC.Driver.Types.html#importedByUser"><span class="hs-identifier hs-var">importedByUser</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1418"></span><span>
</span><span id="line-1419"></span><span class="hs-keyword">data</span><span> </span><span id="ImportedModsVal"><span class="annot"><a href="GHC.Driver.Types.html#ImportedModsVal"><span class="hs-identifier hs-var">ImportedModsVal</span></a></span></span><span>
</span><span id="line-1420"></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImportedModsVal"><span class="annot"><a href="GHC.Driver.Types.html#ImportedModsVal"><span class="hs-identifier hs-var">ImportedModsVal</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1421"></span><span>        </span><span id="imv_name"><span class="annot"><span class="annottext">ImportedModsVal -&gt; ModuleName
</span><a href="GHC.Driver.Types.html#imv_name"><span class="hs-identifier hs-var hs-var">imv_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span>          </span><span class="hs-comment">-- ^ The name the module is imported with</span><span>
</span><span id="line-1422"></span><span>        </span><span id="imv_span"><span class="annot"><span class="annottext">ImportedModsVal -&gt; SrcSpan
</span><a href="GHC.Driver.Types.html#imv_span"><span class="hs-identifier hs-var hs-var">imv_span</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span>             </span><span class="hs-comment">-- ^ the source span of the whole import</span><span>
</span><span id="line-1423"></span><span>        </span><span id="imv_is_safe"><span class="annot"><span class="annottext">ImportedModsVal -&gt; Bool
</span><a href="GHC.Driver.Types.html#imv_is_safe"><span class="hs-identifier hs-var hs-var">imv_is_safe</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IsSafeImport"><span class="hs-identifier hs-type">IsSafeImport</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ whether this is a safe import</span><span>
</span><span id="line-1424"></span><span>        </span><span id="imv_is_hiding"><span class="annot"><span class="annottext">ImportedModsVal -&gt; Bool
</span><a href="GHC.Driver.Types.html#imv_is_hiding"><span class="hs-identifier hs-var hs-var">imv_is_hiding</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- ^ whether this is an &quot;hiding&quot; import</span><span>
</span><span id="line-1425"></span><span>        </span><span id="imv_all_exports"><span class="annot"><span class="annottext">ImportedModsVal -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#imv_all_exports"><span class="hs-identifier hs-var hs-var">imv_all_exports</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ all the things the module could provide</span><span>
</span><span id="line-1426"></span><span>          </span><span class="hs-comment">-- NB. BangPattern here: otherwise this leaks. (#15111)</span><span>
</span><span id="line-1427"></span><span>        </span><span id="imv_qualified"><span class="annot"><span class="annottext">ImportedModsVal -&gt; Bool
</span><a href="GHC.Driver.Types.html#imv_qualified"><span class="hs-identifier hs-var hs-var">imv_qualified</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>            </span><span class="hs-comment">-- ^ whether this is a qualified import</span><span>
</span><span id="line-1428"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1429"></span><span>
</span><span id="line-1430"></span><span class="hs-comment">-- | A ModGuts is carried through the compiler, accumulating stuff as it goes</span><span>
</span><span id="line-1431"></span><span class="hs-comment">-- There is only one ModGuts at any time, the one for the module</span><span>
</span><span id="line-1432"></span><span class="hs-comment">-- being compiled right now.  Once it is compiled, a 'ModIface' and</span><span>
</span><span id="line-1433"></span><span class="hs-comment">-- 'ModDetails' are extracted and the ModGuts is discarded.</span><span>
</span><span id="line-1434"></span><span class="hs-keyword">data</span><span> </span><span id="ModGuts"><span class="annot"><a href="GHC.Driver.Types.html#ModGuts"><span class="hs-identifier hs-var">ModGuts</span></a></span></span><span>
</span><span id="line-1435"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ModGuts"><span class="annot"><a href="GHC.Driver.Types.html#ModGuts"><span class="hs-identifier hs-var">ModGuts</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1436"></span><span>        </span><span id="mg_module"><span class="annot"><span class="annottext">ModGuts -&gt; Module
</span><a href="GHC.Driver.Types.html#mg_module"><span class="hs-identifier hs-var hs-var">mg_module</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- ^ Module being compiled</span><span>
</span><span id="line-1437"></span><span>        </span><span id="mg_hsc_src"><span class="annot"><span class="annottext">ModGuts -&gt; HscSource
</span><a href="GHC.Driver.Types.html#mg_hsc_src"><span class="hs-identifier hs-var hs-var">mg_hsc_src</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#HscSource"><span class="hs-identifier hs-type">HscSource</span></a></span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- ^ Whether it's an hs-boot module</span><span>
</span><span id="line-1438"></span><span>        </span><span id="mg_loc"><span class="annot"><span class="annottext">ModGuts -&gt; SrcSpan
</span><a href="GHC.Driver.Types.html#mg_loc"><span class="hs-identifier hs-var hs-var">mg_loc</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- ^ For error messages from inner passes</span><span>
</span><span id="line-1439"></span><span>        </span><span id="mg_exports"><span class="annot"><span class="annottext">ModGuts -&gt; [IfaceExport]
</span><a href="GHC.Driver.Types.html#mg_exports"><span class="hs-identifier hs-var hs-var">mg_exports</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- ^ What it exports</span><span>
</span><span id="line-1440"></span><span>        </span><span id="mg_deps"><span class="annot"><span class="annottext">ModGuts -&gt; Dependencies
</span><a href="GHC.Driver.Types.html#mg_deps"><span class="hs-identifier hs-var hs-var">mg_deps</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ What it depends on, directly or</span><span>
</span><span id="line-1441"></span><span>                                         </span><span class="hs-comment">-- otherwise</span><span>
</span><span id="line-1442"></span><span>        </span><span id="mg_usages"><span class="annot"><span class="annottext">ModGuts -&gt; [Usage]
</span><a href="GHC.Driver.Types.html#mg_usages"><span class="hs-identifier hs-var hs-var">mg_usages</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- ^ What was used?  Used for interfaces.</span><span>
</span><span id="line-1443"></span><span>
</span><span id="line-1444"></span><span>        </span><span id="mg_used_th"><span class="annot"><span class="annottext">ModGuts -&gt; Bool
</span><a href="GHC.Driver.Types.html#mg_used_th"><span class="hs-identifier hs-var hs-var">mg_used_th</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- ^ Did we run a TH splice?</span><span>
</span><span id="line-1445"></span><span>        </span><span id="mg_rdr_env"><span class="annot"><span class="annottext">ModGuts -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#mg_rdr_env"><span class="hs-identifier hs-var hs-var">mg_rdr_env</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ Top-level lexical environment</span><span>
</span><span id="line-1446"></span><span>
</span><span id="line-1447"></span><span>        </span><span class="hs-comment">-- These fields all describe the things **declared in this module**</span><span>
</span><span id="line-1448"></span><span>        </span><span id="mg_fix_env"><span class="annot"><span class="annottext">ModGuts -&gt; FixityEnv
</span><a href="GHC.Driver.Types.html#mg_fix_env"><span class="hs-identifier hs-var hs-var">mg_fix_env</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#FixityEnv"><span class="hs-identifier hs-type">FixityEnv</span></a></span><span class="hs-special">,</span><span>      </span><span class="hs-comment">-- ^ Fixities declared in this module.</span><span>
</span><span id="line-1449"></span><span>                                         </span><span class="hs-comment">-- Used for creating interface files.</span><span>
</span><span id="line-1450"></span><span>        </span><span id="mg_tcs"><span class="annot"><span class="annottext">ModGuts -&gt; [TyCon]
</span><a href="GHC.Driver.Types.html#mg_tcs"><span class="hs-identifier hs-var hs-var">mg_tcs</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- ^ TyCons declared in this module</span><span>
</span><span id="line-1451"></span><span>                                         </span><span class="hs-comment">-- (includes TyCons for classes)</span><span>
</span><span id="line-1452"></span><span>        </span><span id="mg_insts"><span class="annot"><span class="annottext">ModGuts -&gt; [ClsInst]
</span><a href="GHC.Driver.Types.html#mg_insts"><span class="hs-identifier hs-var hs-var">mg_insts</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>      </span><span class="hs-comment">-- ^ Class instances declared in this module</span><span>
</span><span id="line-1453"></span><span>        </span><span id="mg_fam_insts"><span class="annot"><span class="annottext">ModGuts -&gt; [FamInst]
</span><a href="GHC.Driver.Types.html#mg_fam_insts"><span class="hs-identifier hs-var hs-var">mg_fam_insts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1454"></span><span>                                         </span><span class="hs-comment">-- ^ Family instances declared in this module</span><span>
</span><span id="line-1455"></span><span>        </span><span id="mg_patsyns"><span class="annot"><span class="annottext">ModGuts -&gt; [PatSyn]
</span><a href="GHC.Driver.Types.html#mg_patsyns"><span class="hs-identifier hs-var hs-var">mg_patsyns</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.PatSyn.html#PatSyn"><span class="hs-identifier hs-type">PatSyn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- ^ Pattern synonyms declared in this module</span><span>
</span><span id="line-1456"></span><span>        </span><span id="mg_rules"><span class="annot"><span class="annottext">ModGuts -&gt; [CoreRule]
</span><a href="GHC.Driver.Types.html#mg_rules"><span class="hs-identifier hs-var hs-var">mg_rules</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ Before the core pipeline starts, contains</span><span>
</span><span id="line-1457"></span><span>                                         </span><span class="hs-comment">-- See Note [Overall plumbing for rules] in &quot;GHC.Core.Rules&quot;</span><span>
</span><span id="line-1458"></span><span>        </span><span id="mg_binds"><span class="annot"><span class="annottext">ModGuts -&gt; CoreProgram
</span><a href="GHC.Driver.Types.html#mg_binds"><span class="hs-identifier hs-var hs-var">mg_binds</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-type">CoreProgram</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- ^ Bindings for this module</span><span>
</span><span id="line-1459"></span><span>        </span><span id="mg_foreign"><span class="annot"><span class="annottext">ModGuts -&gt; ForeignStubs
</span><a href="GHC.Driver.Types.html#mg_foreign"><span class="hs-identifier hs-var hs-var">mg_foreign</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ Foreign exports declared in this module</span><span>
</span><span id="line-1460"></span><span>        </span><span id="mg_foreign_files"><span class="annot"><span class="annottext">ModGuts -&gt; [(ForeignSrcLang, FieldName)]
</span><a href="GHC.Driver.Types.html#mg_foreign_files"><span class="hs-identifier hs-var hs-var">mg_foreign_files</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#ForeignSrcLang"><span class="hs-identifier hs-type">ForeignSrcLang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1461"></span><span>        </span><span class="hs-comment">-- ^ Files to be compiled with the C compiler</span><span>
</span><span id="line-1462"></span><span>        </span><span id="mg_warns"><span class="annot"><span class="annottext">ModGuts -&gt; Warnings
</span><a href="GHC.Driver.Types.html#mg_warns"><span class="hs-identifier hs-var hs-var">mg_warns</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- ^ Warnings declared in the module</span><span>
</span><span id="line-1463"></span><span>        </span><span id="mg_anns"><span class="annot"><span class="annottext">ModGuts -&gt; [Annotation]
</span><a href="GHC.Driver.Types.html#mg_anns"><span class="hs-identifier hs-var hs-var">mg_anns</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Annotations.html#Annotation"><span class="hs-identifier hs-type">Annotation</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- ^ Annotations declared in this module</span><span>
</span><span id="line-1464"></span><span>        </span><span id="mg_complete_sigs"><span class="annot"><span class="annottext">ModGuts -&gt; [CompleteMatch]
</span><a href="GHC.Driver.Types.html#mg_complete_sigs"><span class="hs-identifier hs-var hs-var">mg_complete_sigs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ Complete Matches</span><span>
</span><span id="line-1465"></span><span>        </span><span id="mg_hpc_info"><span class="annot"><span class="annottext">ModGuts -&gt; HpcInfo
</span><a href="GHC.Driver.Types.html#mg_hpc_info"><span class="hs-identifier hs-var hs-var">mg_hpc_info</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier hs-type">HpcInfo</span></a></span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- ^ Coverage tick boxes in the module</span><span>
</span><span id="line-1466"></span><span>        </span><span id="mg_modBreaks"><span class="annot"><span class="annottext">ModGuts -&gt; Maybe ModBreaks
</span><a href="GHC.Driver.Types.html#mg_modBreaks"><span class="hs-identifier hs-var hs-var">mg_modBreaks</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.ByteCode.Types.html#ModBreaks"><span class="hs-identifier hs-type">ModBreaks</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ Breakpoints for the module</span><span>
</span><span id="line-1467"></span><span>
</span><span id="line-1468"></span><span>                        </span><span class="hs-comment">-- The next two fields are unusual, because they give instance</span><span>
</span><span id="line-1469"></span><span>                        </span><span class="hs-comment">-- environments for *all* modules in the home package, including</span><span>
</span><span id="line-1470"></span><span>                        </span><span class="hs-comment">-- this module, rather than for *just* this module.</span><span>
</span><span id="line-1471"></span><span>                        </span><span class="hs-comment">-- Reason: when looking up an instance we don't want to have to</span><span>
</span><span id="line-1472"></span><span>                        </span><span class="hs-comment">--         look at each module in the home package in turn</span><span>
</span><span id="line-1473"></span><span>        </span><span id="mg_inst_env"><span class="annot"><span class="annottext">ModGuts -&gt; InstEnv
</span><a href="GHC.Driver.Types.html#mg_inst_env"><span class="hs-identifier hs-var hs-var">mg_inst_env</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#InstEnv"><span class="hs-identifier hs-type">InstEnv</span></a></span><span class="hs-special">,</span><span>             </span><span class="hs-comment">-- ^ Class instance environment for</span><span>
</span><span id="line-1474"></span><span>                                                </span><span class="hs-comment">-- /home-package/ modules (including this</span><span>
</span><span id="line-1475"></span><span>                                                </span><span class="hs-comment">-- one); c.f. 'tcg_inst_env'</span><span>
</span><span id="line-1476"></span><span>        </span><span id="mg_fam_inst_env"><span class="annot"><span class="annottext">ModGuts -&gt; FamInstEnv
</span><a href="GHC.Driver.Types.html#mg_fam_inst_env"><span class="hs-identifier hs-var hs-var">mg_fam_inst_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInstEnv"><span class="hs-identifier hs-type">FamInstEnv</span></a></span><span class="hs-special">,</span><span>          </span><span class="hs-comment">-- ^ Type-family instance environment for</span><span>
</span><span id="line-1477"></span><span>                                                </span><span class="hs-comment">-- /home-package/ modules (including this</span><span>
</span><span id="line-1478"></span><span>                                                </span><span class="hs-comment">-- one); c.f. 'tcg_fam_inst_env'</span><span>
</span><span id="line-1479"></span><span>
</span><span id="line-1480"></span><span>        </span><span id="mg_safe_haskell"><span class="annot"><span class="annottext">ModGuts -&gt; SafeHaskellMode
</span><a href="GHC.Driver.Types.html#mg_safe_haskell"><span class="hs-identifier hs-var hs-var">mg_safe_haskell</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#SafeHaskellMode"><span class="hs-identifier hs-type">SafeHaskellMode</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ Safe Haskell mode</span><span>
</span><span id="line-1481"></span><span>        </span><span id="mg_trust_pkg"><span class="annot"><span class="annottext">ModGuts -&gt; Bool
</span><a href="GHC.Driver.Types.html#mg_trust_pkg"><span class="hs-identifier hs-var hs-var">mg_trust_pkg</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>                </span><span class="hs-comment">-- ^ Do we need to trust our</span><span>
</span><span id="line-1482"></span><span>                                                </span><span class="hs-comment">-- own package for Safe Haskell?</span><span>
</span><span id="line-1483"></span><span>                                                </span><span class="hs-comment">-- See Note [Trust Own Package]</span><span>
</span><span id="line-1484"></span><span>                                                </span><span class="hs-comment">-- in &quot;GHC.Rename.Names&quot;</span><span>
</span><span id="line-1485"></span><span>
</span><span id="line-1486"></span><span>        </span><span id="mg_doc_hdr"><span class="annot"><span class="annottext">ModGuts -&gt; Maybe HsDocString
</span><a href="GHC.Driver.Types.html#mg_doc_hdr"><span class="hs-identifier hs-var hs-var">mg_doc_hdr</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Doc.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ Module header.</span><span>
</span><span id="line-1487"></span><span>        </span><span id="mg_decl_docs"><span class="annot"><span class="annottext">ModGuts -&gt; DeclDocMap
</span><a href="GHC.Driver.Types.html#mg_decl_docs"><span class="hs-identifier hs-var hs-var">mg_decl_docs</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Hs.Doc.html#DeclDocMap"><span class="hs-identifier hs-type">DeclDocMap</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- ^ Docs on declarations.</span><span>
</span><span id="line-1488"></span><span>        </span><span id="mg_arg_docs"><span class="annot"><span class="annottext">ModGuts -&gt; ArgDocMap
</span><a href="GHC.Driver.Types.html#mg_arg_docs"><span class="hs-identifier hs-var hs-var">mg_arg_docs</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Hs.Doc.html#ArgDocMap"><span class="hs-identifier hs-type">ArgDocMap</span></a></span><span>       </span><span class="hs-comment">-- ^ Docs on arguments.</span><span>
</span><span id="line-1489"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1490"></span><span>
</span><span id="line-1491"></span><span class="hs-comment">-- The ModGuts takes on several slightly different forms:</span><span>
</span><span id="line-1492"></span><span class="hs-comment">--</span><span>
</span><span id="line-1493"></span><span class="hs-comment">-- After simplification, the following fields change slightly:</span><span>
</span><span id="line-1494"></span><span class="hs-comment">--      mg_rules        Orphan rules only (local ones now attached to binds)</span><span>
</span><span id="line-1495"></span><span class="hs-comment">--      mg_binds        With rules attached</span><span>
</span><span id="line-1496"></span><span>
</span><span id="line-1497"></span><span class="hs-comment">---------------------------------------------------------</span><span>
</span><span id="line-1498"></span><span class="hs-comment">-- The Tidy pass forks the information about this module:</span><span>
</span><span id="line-1499"></span><span class="hs-comment">--      * one lot goes to interface file generation (ModIface)</span><span>
</span><span id="line-1500"></span><span class="hs-comment">--        and later compilations (ModDetails)</span><span>
</span><span id="line-1501"></span><span class="hs-comment">--      * the other lot goes to code generation (CgGuts)</span><span>
</span><span id="line-1502"></span><span>
</span><span id="line-1503"></span><span class="hs-comment">-- | A restricted form of 'ModGuts' for code generation purposes</span><span>
</span><span id="line-1504"></span><span class="hs-keyword">data</span><span> </span><span id="CgGuts"><span class="annot"><a href="GHC.Driver.Types.html#CgGuts"><span class="hs-identifier hs-var">CgGuts</span></a></span></span><span>
</span><span id="line-1505"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CgGuts"><span class="annot"><a href="GHC.Driver.Types.html#CgGuts"><span class="hs-identifier hs-var">CgGuts</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1506"></span><span>        </span><span id="cg_module"><span class="annot"><span class="annottext">CgGuts -&gt; Module
</span><a href="GHC.Driver.Types.html#cg_module"><span class="hs-identifier hs-var hs-var">cg_module</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1507"></span><span>                </span><span class="hs-comment">-- ^ Module being compiled</span><span>
</span><span id="line-1508"></span><span>
</span><span id="line-1509"></span><span>        </span><span id="cg_tycons"><span class="annot"><span class="annottext">CgGuts -&gt; [TyCon]
</span><a href="GHC.Driver.Types.html#cg_tycons"><span class="hs-identifier hs-var hs-var">cg_tycons</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1510"></span><span>                </span><span class="hs-comment">-- ^ Algebraic data types (including ones that started</span><span>
</span><span id="line-1511"></span><span>                </span><span class="hs-comment">-- life as classes); generate constructors and info</span><span>
</span><span id="line-1512"></span><span>                </span><span class="hs-comment">-- tables. Includes newtypes, just for the benefit of</span><span>
</span><span id="line-1513"></span><span>                </span><span class="hs-comment">-- External Core</span><span>
</span><span id="line-1514"></span><span>
</span><span id="line-1515"></span><span>        </span><span id="cg_binds"><span class="annot"><span class="annottext">CgGuts -&gt; CoreProgram
</span><a href="GHC.Driver.Types.html#cg_binds"><span class="hs-identifier hs-var hs-var">cg_binds</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-type">CoreProgram</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1516"></span><span>                </span><span class="hs-comment">-- ^ The tidied main bindings, including</span><span>
</span><span id="line-1517"></span><span>                </span><span class="hs-comment">-- previously-implicit bindings for record and class</span><span>
</span><span id="line-1518"></span><span>                </span><span class="hs-comment">-- selectors, and data constructor wrappers.  But *not*</span><span>
</span><span id="line-1519"></span><span>                </span><span class="hs-comment">-- data constructor workers; reason: we regard them</span><span>
</span><span id="line-1520"></span><span>                </span><span class="hs-comment">-- as part of the code-gen of tycons</span><span>
</span><span id="line-1521"></span><span>
</span><span id="line-1522"></span><span>        </span><span id="cg_foreign"><span class="annot"><span class="annottext">CgGuts -&gt; ForeignStubs
</span><a href="GHC.Driver.Types.html#cg_foreign"><span class="hs-identifier hs-var hs-var">cg_foreign</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ Foreign export stubs</span><span>
</span><span id="line-1523"></span><span>        </span><span id="cg_foreign_files"><span class="annot"><span class="annottext">CgGuts -&gt; [(ForeignSrcLang, FieldName)]
</span><a href="GHC.Driver.Types.html#cg_foreign_files"><span class="hs-identifier hs-var hs-var">cg_foreign_files</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#ForeignSrcLang"><span class="hs-identifier hs-type">ForeignSrcLang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1524"></span><span>        </span><span id="cg_dep_pkgs"><span class="annot"><span class="annottext">CgGuts -&gt; [UnitId]
</span><a href="GHC.Driver.Types.html#cg_dep_pkgs"><span class="hs-identifier hs-var hs-var">cg_dep_pkgs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ Dependent packages, used to</span><span>
</span><span id="line-1525"></span><span>                                            </span><span class="hs-comment">-- generate #includes for C code gen</span><span>
</span><span id="line-1526"></span><span>        </span><span id="cg_hpc_info"><span class="annot"><span class="annottext">CgGuts -&gt; HpcInfo
</span><a href="GHC.Driver.Types.html#cg_hpc_info"><span class="hs-identifier hs-var hs-var">cg_hpc_info</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier hs-type">HpcInfo</span></a></span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- ^ Program coverage tick box information</span><span>
</span><span id="line-1527"></span><span>        </span><span id="cg_modBreaks"><span class="annot"><span class="annottext">CgGuts -&gt; Maybe ModBreaks
</span><a href="GHC.Driver.Types.html#cg_modBreaks"><span class="hs-identifier hs-var hs-var">cg_modBreaks</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.ByteCode.Types.html#ModBreaks"><span class="hs-identifier hs-type">ModBreaks</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ Module breakpoints</span><span>
</span><span id="line-1528"></span><span>        </span><span id="cg_spt_entries"><span class="annot"><span class="annottext">CgGuts -&gt; [SptEntry]
</span><a href="GHC.Driver.Types.html#cg_spt_entries"><span class="hs-identifier hs-var hs-var">cg_spt_entries</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#SptEntry"><span class="hs-identifier hs-type">SptEntry</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1529"></span><span>                </span><span class="hs-comment">-- ^ Static pointer table entries for static forms defined in</span><span>
</span><span id="line-1530"></span><span>                </span><span class="hs-comment">-- the module.</span><span>
</span><span id="line-1531"></span><span>                </span><span class="hs-comment">-- See Note [Grand plan for static forms] in &quot;GHC.Iface.Tidy.StaticPtrTable&quot;</span><span>
</span><span id="line-1532"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1533"></span><span>
</span><span id="line-1534"></span><span class="hs-comment">-----------------------------------</span><span>
</span><span id="line-1535"></span><span class="hs-comment">-- | Foreign export stubs</span><span>
</span><span id="line-1536"></span><span class="hs-keyword">data</span><span> </span><span id="ForeignStubs"><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-var">ForeignStubs</span></a></span></span><span>
</span><span id="line-1537"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoStubs"><span class="annot"><a href="GHC.Driver.Types.html#NoStubs"><span class="hs-identifier hs-var">NoStubs</span></a></span></span><span>
</span><span id="line-1538"></span><span>      </span><span class="hs-comment">-- ^ We don't have any stubs</span><span>
</span><span id="line-1539"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ForeignStubs"><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-var">ForeignStubs</span></a></span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1540"></span><span>      </span><span class="hs-comment">-- ^ There are some stubs. Parameters:</span><span>
</span><span id="line-1541"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1542"></span><span>      </span><span class="hs-comment">--  1) Header file prototypes for</span><span>
</span><span id="line-1543"></span><span>      </span><span class="hs-comment">--     &quot;foreign exported&quot; functions</span><span>
</span><span id="line-1544"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1545"></span><span>      </span><span class="hs-comment">--  2) C stubs to use when calling</span><span>
</span><span id="line-1546"></span><span>      </span><span class="hs-comment">--     &quot;foreign exported&quot; functions</span><span>
</span><span id="line-1547"></span><span>
</span><span id="line-1548"></span><span class="annot"><a href="GHC.Driver.Types.html#appendStubC"><span class="hs-identifier hs-type">appendStubC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span>
</span><span id="line-1549"></span><span id="appendStubC"><span class="annot"><span class="annottext">appendStubC :: ForeignStubs -&gt; SDoc -&gt; ForeignStubs
</span><a href="GHC.Driver.Types.html#appendStubC"><span class="hs-identifier hs-var hs-var">appendStubC</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignStubs
</span><a href="GHC.Driver.Types.html#NoStubs"><span class="hs-identifier hs-var">NoStubs</span></a></span><span>            </span><span id="local-6989586621680919303"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919303"><span class="hs-identifier hs-var">c_code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; ForeignStubs
</span><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-var">ForeignStubs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919303"><span class="hs-identifier hs-var">c_code</span></a></span><span>
</span><span id="line-1550"></span><span class="annot"><a href="GHC.Driver.Types.html#appendStubC"><span class="hs-identifier hs-var">appendStubC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-type">ForeignStubs</span></a></span><span> </span><span id="local-6989586621680919302"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919302"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621680919301"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919301"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680919300"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919300"><span class="hs-identifier hs-var">c_code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; ForeignStubs
</span><a href="GHC.Driver.Types.html#ForeignStubs"><span class="hs-identifier hs-var">ForeignStubs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919302"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919301"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621680919300"><span class="hs-identifier hs-var">c_code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>
</span><span id="line-1552"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                The interactive context
*                                                                      *
************************************************************************

Note [The interactive package]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Type, class, and value declarations at the command prompt are treated
as if they were defined in modules
   interactive:Ghci1
   interactive:Ghci2
   ...etc...
with each bunch of declarations using a new module, all sharing a
common package 'interactive' (see Module.interactiveUnitId, and
GHC.Builtin.Names.mkInteractiveModule).

This scheme deals well with shadowing.  For example:

   ghci&gt; data T = A
   ghci&gt; data T = B
   ghci&gt; :i A
   data Ghci1.T = A  -- Defined at &lt;interactive&gt;:2:10

Here we must display info about constructor A, but its type T has been
shadowed by the second declaration.  But it has a respectable
qualified name (Ghci1.T), and its source location says where it was
defined.

So the main invariant continues to hold, that in any session an
original name M.T only refers to one unique thing.  (In a previous
iteration both the T's above were called :Interactive.T, albeit with
different uniques, which gave rise to all sorts of trouble.)

The details are a bit tricky though:

 * The field ic_mod_index counts which Ghci module we've got up to.
   It is incremented when extending ic_tythings

 * ic_tythings contains only things from the 'interactive' package.

 * Module from the 'interactive' package (Ghci1, Ghci2 etc) never go
   in the Home Package Table (HPT).  When you say :load, that's when we
   extend the HPT.

 * The 'homeUnitId' field of DynFlags is *not* set to 'interactive'.
   It stays as 'main' (or whatever -this-unit-id says), and is the
   package to which :load'ed modules are added to.

 * So how do we arrange that declarations at the command prompt get to
   be in the 'interactive' package?  Simply by setting the tcg_mod
   field of the TcGblEnv to &quot;interactive:Ghci1&quot;.  This is done by the
   call to initTc in initTcInteractive, which in turn get the module
   from it 'icInteractiveModule' field of the interactive context.

   The 'homeUnitId' field stays as 'main' (or whatever -this-unit-id says.

 * The main trickiness is that the type environment (tcg_type_env) and
   fixity envt (tcg_fix_env), now contain entities from all the
   interactive-package modules (Ghci1, Ghci2, ...) together, rather
   than just a single module as is usually the case.  So you can't use
   &quot;nameIsLocalOrFrom&quot; to decide whether to look in the TcGblEnv vs
   the HPT/PTE.  This is a change, but not a problem provided you
   know.

* However, the tcg_binds, tcg_sigs, tcg_insts, tcg_fam_insts, etc fields
  of the TcGblEnv, which collect &quot;things defined in this module&quot;, all
  refer to stuff define in a single GHCi command, *not* all the commands
  so far.

  In contrast, tcg_inst_env, tcg_fam_inst_env, have instances from
  all GhciN modules, which makes sense -- they are all &quot;home package&quot;
  modules.


Note [Interactively-bound Ids in GHCi]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The Ids bound by previous Stmts in GHCi are currently
        a) GlobalIds, with
        b) An External Name, like Ghci4.foo
           See Note [The interactive package] above
        c) A tidied type

 (a) They must be GlobalIds (not LocalIds) otherwise when we come to
     compile an expression using these ids later, the byte code
     generator will consider the occurrences to be free rather than
     global.

 (b) Having an External Name is important because of Note
     [GlobalRdrEnv shadowing] in GHC.Types.Names.RdrName

 (c) Their types are tidied. This is important, because :info may ask
     to look at them, and :info expects the things it looks up to have
     tidy types

Where do interactively-bound Ids come from?

  - GHCi REPL Stmts   e.g.
         ghci&gt; let foo x = x+1
    These start with an Internal Name because a Stmt is a local
    construct, so the renamer naturally builds an Internal name for
    each of its binders.  Then in tcRnStmt they are externalised via
    GHC.Tc.Module.externaliseAndTidyId, so they get Names like Ghic4.foo.

  - Ids bound by the debugger etc have Names constructed by
    GHC.Iface.Env.newInteractiveBinder; at the call sites it is followed by
    mkVanillaGlobal or mkVanillaGlobalWithInfo.  So again, they are
    all Global, External.

  - TyCons, Classes, and Ids bound by other top-level declarations in
    GHCi (eg foreign import, record selectors) also get External
    Names, with Ghci9 (or 8, or 7, etc) as the module name.


Note [ic_tythings]
~~~~~~~~~~~~~~~~~~
The ic_tythings field contains
  * The TyThings declared by the user at the command prompt
    (eg Ids, TyCons, Classes)

  * The user-visible Ids that arise from such things, which
    *don't* come from 'implicitTyThings', notably:
       - record selectors
       - class ops
    The implicitTyThings are readily obtained from the TyThings
    but record selectors etc are not

It does *not* contain
  * DFunIds (they can be gotten from ic_instances)
  * CoAxioms (ditto)

See also Note [Interactively-bound Ids in GHCi]

Note [Override identical instances in GHCi]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If you declare a new instance in GHCi that is identical to a previous one,
we simply override the previous one; we don't regard it as overlapping.
e.g.    Prelude&gt; data T = A | B
        Prelude&gt; instance Eq T where ...
        Prelude&gt; instance Eq T where ...   -- This one overrides

It's exactly the same for type-family instances.  See #7102
-}</span><span>
</span><span id="line-1696"></span><span>
</span><span id="line-1697"></span><span class="hs-comment">-- | Interactive context, recording information about the state of the</span><span>
</span><span id="line-1698"></span><span class="hs-comment">-- context in which statements are executed in a GHCi session.</span><span>
</span><span id="line-1699"></span><span class="hs-keyword">data</span><span> </span><span id="InteractiveContext"><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-var">InteractiveContext</span></a></span></span><span>
</span><span id="line-1700"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="InteractiveContext"><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-var">InteractiveContext</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1701"></span><span>         </span><span id="ic_dflags"><span class="annot"><span class="annottext">InteractiveContext -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#ic_dflags"><span class="hs-identifier hs-var hs-var">ic_dflags</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1702"></span><span>             </span><span class="hs-comment">-- ^ The 'DynFlags' used to evaluate interactive expressions</span><span>
</span><span id="line-1703"></span><span>             </span><span class="hs-comment">-- and statements.</span><span>
</span><span id="line-1704"></span><span>
</span><span id="line-1705"></span><span>         </span><span id="ic_mod_index"><span class="annot"><span class="annottext">InteractiveContext -&gt; Int
</span><a href="GHC.Driver.Types.html#ic_mod_index"><span class="hs-identifier hs-var hs-var">ic_mod_index</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-1706"></span><span>             </span><span class="hs-comment">-- ^ Each GHCi stmt or declaration brings some new things into</span><span>
</span><span id="line-1707"></span><span>             </span><span class="hs-comment">-- scope. We give them names like interactive:Ghci9.T,</span><span>
</span><span id="line-1708"></span><span>             </span><span class="hs-comment">-- where the ic_index is the '9'.  The ic_mod_index is</span><span>
</span><span id="line-1709"></span><span>             </span><span class="hs-comment">-- incremented whenever we add something to ic_tythings</span><span>
</span><span id="line-1710"></span><span>             </span><span class="hs-comment">-- See Note [The interactive package]</span><span>
</span><span id="line-1711"></span><span>
</span><span id="line-1712"></span><span>         </span><span id="ic_imports"><span class="annot"><span class="annottext">InteractiveContext -&gt; [InteractiveImport]
</span><a href="GHC.Driver.Types.html#ic_imports"><span class="hs-identifier hs-var hs-var">ic_imports</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveImport"><span class="hs-identifier hs-type">InteractiveImport</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1713"></span><span>             </span><span class="hs-comment">-- ^ The GHCi top-level scope (ic_rn_gbl_env) is extended with</span><span>
</span><span id="line-1714"></span><span>             </span><span class="hs-comment">-- these imports</span><span>
</span><span id="line-1715"></span><span>             </span><span class="hs-comment">--</span><span>
</span><span id="line-1716"></span><span>             </span><span class="hs-comment">-- This field is only stored here so that the client</span><span>
</span><span id="line-1717"></span><span>             </span><span class="hs-comment">-- can retrieve it with GHC.getContext. GHC itself doesn't</span><span>
</span><span id="line-1718"></span><span>             </span><span class="hs-comment">-- use it, but does reset it to empty sometimes (such</span><span>
</span><span id="line-1719"></span><span>             </span><span class="hs-comment">-- as before a GHC.load). The context is set with GHC.setContext.</span><span>
</span><span id="line-1720"></span><span>
</span><span id="line-1721"></span><span>         </span><span id="ic_tythings"><span class="annot"><span class="annottext">InteractiveContext -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var hs-var">ic_tythings</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1722"></span><span>             </span><span class="hs-comment">-- ^ TyThings defined by the user, in reverse order of</span><span>
</span><span id="line-1723"></span><span>             </span><span class="hs-comment">-- definition (ie most recent at the front)</span><span>
</span><span id="line-1724"></span><span>             </span><span class="hs-comment">-- See Note [ic_tythings]</span><span>
</span><span id="line-1725"></span><span>
</span><span id="line-1726"></span><span>         </span><span id="ic_rn_gbl_env"><span class="annot"><span class="annottext">InteractiveContext -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#ic_rn_gbl_env"><span class="hs-identifier hs-var hs-var">ic_rn_gbl_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1727"></span><span>             </span><span class="hs-comment">-- ^ The cached 'GlobalRdrEnv', built by</span><span>
</span><span id="line-1728"></span><span>             </span><span class="hs-comment">-- 'GHC.Runtime.Eval.setContext' and updated regularly</span><span>
</span><span id="line-1729"></span><span>             </span><span class="hs-comment">-- It contains everything in scope at the command line,</span><span>
</span><span id="line-1730"></span><span>             </span><span class="hs-comment">-- including everything in ic_tythings</span><span>
</span><span id="line-1731"></span><span>
</span><span id="line-1732"></span><span>         </span><span id="ic_instances"><span class="annot"><span class="annottext">InteractiveContext -&gt; ([ClsInst], [FamInst])
</span><a href="GHC.Driver.Types.html#ic_instances"><span class="hs-identifier hs-var hs-var">ic_instances</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1733"></span><span>             </span><span class="hs-comment">-- ^ All instances and family instances created during</span><span>
</span><span id="line-1734"></span><span>             </span><span class="hs-comment">-- this session.  These are grabbed en masse after each</span><span>
</span><span id="line-1735"></span><span>             </span><span class="hs-comment">-- update to be sure that proper overlapping is retained.</span><span>
</span><span id="line-1736"></span><span>             </span><span class="hs-comment">-- That is, rather than re-check the overlapping each</span><span>
</span><span id="line-1737"></span><span>             </span><span class="hs-comment">-- time we update the context, we just take the results</span><span>
</span><span id="line-1738"></span><span>             </span><span class="hs-comment">-- from the instance code that already does that.</span><span>
</span><span id="line-1739"></span><span>
</span><span id="line-1740"></span><span>         </span><span id="ic_fix_env"><span class="annot"><span class="annottext">InteractiveContext -&gt; FixityEnv
</span><a href="GHC.Driver.Types.html#ic_fix_env"><span class="hs-identifier hs-var hs-var">ic_fix_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FixityEnv"><span class="hs-identifier hs-type">FixityEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1741"></span><span>            </span><span class="hs-comment">-- ^ Fixities declared in let statements</span><span>
</span><span id="line-1742"></span><span>
</span><span id="line-1743"></span><span>         </span><span id="ic_default"><span class="annot"><span class="annottext">InteractiveContext -&gt; Maybe [Type]
</span><a href="GHC.Driver.Types.html#ic_default"><span class="hs-identifier hs-var hs-var">ic_default</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1744"></span><span>             </span><span class="hs-comment">-- ^ The current default types, set by a 'default' declaration</span><span>
</span><span id="line-1745"></span><span>
</span><span id="line-1746"></span><span>          </span><span id="ic_resume"><span class="annot"><span class="annottext">InteractiveContext -&gt; [Resume]
</span><a href="GHC.Driver.Types.html#ic_resume"><span class="hs-identifier hs-var hs-var">ic_resume</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Runtime.Eval.Types.html#Resume"><span class="hs-identifier hs-type">Resume</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1747"></span><span>             </span><span class="hs-comment">-- ^ The stack of breakpoint contexts</span><span>
</span><span id="line-1748"></span><span>
</span><span id="line-1749"></span><span>         </span><span id="ic_monad"><span class="annot"><span class="annottext">InteractiveContext -&gt; Name
</span><a href="GHC.Driver.Types.html#ic_monad"><span class="hs-identifier hs-var hs-var">ic_monad</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1750"></span><span>             </span><span class="hs-comment">-- ^ The monad that GHCi is executing in</span><span>
</span><span id="line-1751"></span><span>
</span><span id="line-1752"></span><span>         </span><span id="ic_int_print"><span class="annot"><span class="annottext">InteractiveContext -&gt; Name
</span><a href="GHC.Driver.Types.html#ic_int_print"><span class="hs-identifier hs-var hs-var">ic_int_print</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1753"></span><span>             </span><span class="hs-comment">-- ^ The function that is used for printing results</span><span>
</span><span id="line-1754"></span><span>             </span><span class="hs-comment">-- of expressions in ghci and -e mode.</span><span>
</span><span id="line-1755"></span><span>
</span><span id="line-1756"></span><span>         </span><span id="ic_cwd"><span class="annot"><span class="annottext">InteractiveContext -&gt; Maybe FieldName
</span><a href="GHC.Driver.Types.html#ic_cwd"><span class="hs-identifier hs-var hs-var">ic_cwd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-1757"></span><span>             </span><span class="hs-comment">-- virtual CWD of the program</span><span>
</span><span id="line-1758"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1759"></span><span>
</span><span id="line-1760"></span><span class="hs-keyword">data</span><span> </span><span id="InteractiveImport"><span class="annot"><a href="GHC.Driver.Types.html#InteractiveImport"><span class="hs-identifier hs-var">InteractiveImport</span></a></span></span><span>
</span><span id="line-1761"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IIDecl"><span class="annot"><a href="GHC.Driver.Types.html#IIDecl"><span class="hs-identifier hs-var">IIDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.ImpExp.html#ImportDecl"><span class="hs-identifier hs-type">ImportDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1762"></span><span>      </span><span class="hs-comment">-- ^ Bring the exports of a particular module</span><span>
</span><span id="line-1763"></span><span>      </span><span class="hs-comment">-- (filtered by an import decl) into scope</span><span>
</span><span id="line-1764"></span><span>
</span><span id="line-1765"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IIModule"><span class="annot"><a href="GHC.Driver.Types.html#IIModule"><span class="hs-identifier hs-var">IIModule</span></a></span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-1766"></span><span>      </span><span class="hs-comment">-- ^ Bring into scope the entire top-level envt of</span><span>
</span><span id="line-1767"></span><span>      </span><span class="hs-comment">-- of this module, including the things imported</span><span>
</span><span id="line-1768"></span><span>      </span><span class="hs-comment">-- into it.</span><span>
</span><span id="line-1769"></span><span>
</span><span id="line-1770"></span><span>
</span><span id="line-1771"></span><span class="hs-comment">-- | Constructs an empty InteractiveContext.</span><span>
</span><span id="line-1772"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyInteractiveContext"><span class="hs-identifier hs-type">emptyInteractiveContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span>
</span><span id="line-1773"></span><span id="emptyInteractiveContext"><span class="annot"><span class="annottext">emptyInteractiveContext :: DynFlags -&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#emptyInteractiveContext"><span class="hs-identifier hs-var hs-var">emptyInteractiveContext</span></a></span></span><span> </span><span id="local-6989586621680919284"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919284"><span class="hs-identifier hs-var">dflags</span></a></span></span><span>
</span><span id="line-1774"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext :: DynFlags
-&gt; Int
-&gt; [InteractiveImport]
-&gt; [TyThing]
-&gt; GlobalRdrEnv
-&gt; ([ClsInst], [FamInst])
-&gt; FixityEnv
-&gt; Maybe [Type]
-&gt; [Resume]
-&gt; Name
-&gt; Name
-&gt; Maybe FieldName
-&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1775"></span><span>       </span><span class="annot"><span class="annottext">ic_dflags :: DynFlags
</span><a href="GHC.Driver.Types.html#ic_dflags"><span class="hs-identifier hs-var">ic_dflags</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919284"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1776"></span><span>       </span><span class="annot"><span class="annottext">ic_imports :: [InteractiveImport]
</span><a href="GHC.Driver.Types.html#ic_imports"><span class="hs-identifier hs-var">ic_imports</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1777"></span><span>       </span><span class="annot"><span class="annottext">ic_rn_gbl_env :: GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#ic_rn_gbl_env"><span class="hs-identifier hs-var">ic_rn_gbl_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#emptyGlobalRdrEnv"><span class="hs-identifier hs-var">emptyGlobalRdrEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1778"></span><span>       </span><span class="annot"><span class="annottext">ic_mod_index :: Int
</span><a href="GHC.Driver.Types.html#ic_mod_index"><span class="hs-identifier hs-var">ic_mod_index</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span>
</span><span id="line-1779"></span><span>       </span><span class="annot"><span class="annottext">ic_tythings :: [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var">ic_tythings</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1780"></span><span>       </span><span class="annot"><span class="annottext">ic_instances :: ([ClsInst], [FamInst])
</span><a href="GHC.Driver.Types.html#ic_instances"><span class="hs-identifier hs-var">ic_instances</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1781"></span><span>       </span><span class="annot"><span class="annottext">ic_fix_env :: FixityEnv
</span><a href="GHC.Driver.Types.html#ic_fix_env"><span class="hs-identifier hs-var">ic_fix_env</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FixityEnv
forall a. NameEnv a
</span><a href="GHC.Types.Name.Env.html#emptyNameEnv"><span class="hs-identifier hs-var">emptyNameEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1782"></span><span>       </span><span class="annot"><span class="annottext">ic_monad :: Name
</span><a href="GHC.Driver.Types.html#ic_monad"><span class="hs-identifier hs-var">ic_monad</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#ioTyConName"><span class="hs-identifier hs-var">ioTyConName</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- IO monad by default</span><span>
</span><span id="line-1783"></span><span>       </span><span class="annot"><span class="annottext">ic_int_print :: Name
</span><a href="GHC.Driver.Types.html#ic_int_print"><span class="hs-identifier hs-var">ic_int_print</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#printName"><span class="hs-identifier hs-var">printName</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- System.IO.print by default</span><span>
</span><span id="line-1784"></span><span>       </span><span class="annot"><span class="annottext">ic_default :: Maybe [Type]
</span><a href="GHC.Driver.Types.html#ic_default"><span class="hs-identifier hs-var">ic_default</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Type]
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1785"></span><span>       </span><span class="annot"><span class="annottext">ic_resume :: [Resume]
</span><a href="GHC.Driver.Types.html#ic_resume"><span class="hs-identifier hs-var">ic_resume</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1786"></span><span>       </span><span class="annot"><span class="annottext">ic_cwd :: Maybe FieldName
</span><a href="GHC.Driver.Types.html#ic_cwd"><span class="hs-identifier hs-var">ic_cwd</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe FieldName
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1787"></span><span>
</span><span id="line-1788"></span><span class="annot"><a href="GHC.Driver.Types.html#icInteractiveModule"><span class="hs-identifier hs-type">icInteractiveModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-1789"></span><span id="icInteractiveModule"><span class="annot"><span class="annottext">icInteractiveModule :: InteractiveContext -&gt; Module
</span><a href="GHC.Driver.Types.html#icInteractiveModule"><span class="hs-identifier hs-var hs-var">icInteractiveModule</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_mod_index :: InteractiveContext -&gt; Int
</span><a href="GHC.Driver.Types.html#ic_mod_index"><span class="hs-identifier hs-var">ic_mod_index</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919281"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680919281"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1790"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Module
</span><a href="GHC.Builtin.Names.html#mkInteractiveModule"><span class="hs-identifier hs-var">mkInteractiveModule</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680919281"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-1791"></span><span>
</span><span id="line-1792"></span><span class="hs-comment">-- | This function returns the list of visible TyThings (useful for</span><span>
</span><span id="line-1793"></span><span class="hs-comment">-- e.g. showBindings)</span><span>
</span><span id="line-1794"></span><span class="annot"><a href="GHC.Driver.Types.html#icInScopeTTs"><span class="hs-identifier hs-type">icInScopeTTs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1795"></span><span id="icInScopeTTs"><span class="annot"><span class="annottext">icInScopeTTs :: InteractiveContext -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#icInScopeTTs"><span class="hs-identifier hs-var hs-var">icInScopeTTs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var hs-var">ic_tythings</span></a></span><span>
</span><span id="line-1796"></span><span>
</span><span id="line-1797"></span><span class="hs-comment">-- | Get the PrintUnqualified function based on the flags and this InteractiveContext</span><span>
</span><span id="line-1798"></span><span class="annot"><a href="GHC.Driver.Types.html#icPrintUnqual"><span class="hs-identifier hs-type">icPrintUnqual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PrintUnqualified"><span class="hs-identifier hs-type">PrintUnqualified</span></a></span><span>
</span><span id="line-1799"></span><span id="icPrintUnqual"><span class="annot"><span class="annottext">icPrintUnqual :: DynFlags -&gt; InteractiveContext -&gt; PrintUnqualified
</span><a href="GHC.Driver.Types.html#icPrintUnqual"><span class="hs-identifier hs-var hs-var">icPrintUnqual</span></a></span></span><span> </span><span id="local-6989586621680919280"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919280"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_rn_gbl_env :: InteractiveContext -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#ic_rn_gbl_env"><span class="hs-identifier hs-var">ic_rn_gbl_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919279"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919279"><span class="hs-identifier hs-var">grenv</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1800"></span><span>    </span><span class="annot"><span class="annottext">DynFlags -&gt; GlobalRdrEnv -&gt; PrintUnqualified
</span><a href="GHC.Driver.Types.html#mkPrintUnqualified"><span class="hs-identifier hs-var">mkPrintUnqualified</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919280"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919279"><span class="hs-identifier hs-var">grenv</span></a></span><span>
</span><span id="line-1801"></span><span>
</span><span id="line-1802"></span><span class="hs-comment">-- | extendInteractiveContext is called with new TyThings recently defined to update the</span><span>
</span><span id="line-1803"></span><span class="hs-comment">-- InteractiveContext to include them.  Ids are easily removed when shadowed,</span><span>
</span><span id="line-1804"></span><span class="hs-comment">-- but Classes and TyCons are not.  Some work could be done to determine</span><span>
</span><span id="line-1805"></span><span class="hs-comment">-- whether they are entirely shadowed, but as you could still have references</span><span>
</span><span id="line-1806"></span><span class="hs-comment">-- to them (e.g. instances for classes or values of the type for TyCons), it's</span><span>
</span><span id="line-1807"></span><span class="hs-comment">-- not clear whether removing them is even the appropriate behavior.</span><span>
</span><span id="line-1808"></span><span class="annot"><a href="GHC.Driver.Types.html#extendInteractiveContext"><span class="hs-identifier hs-type">extendInteractiveContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span>
</span><span id="line-1809"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1810"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.InstEnv.html#ClsInst"><span class="hs-identifier hs-type">ClsInst</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1811"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1812"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FixityEnv"><span class="hs-identifier hs-type">FixityEnv</span></a></span><span>
</span><span id="line-1813"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span>
</span><span id="line-1814"></span><span id="extendInteractiveContext"><span class="annot"><span class="annottext">extendInteractiveContext :: InteractiveContext
-&gt; [TyThing]
-&gt; [ClsInst]
-&gt; [FamInst]
-&gt; Maybe [Type]
-&gt; FixityEnv
-&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#extendInteractiveContext"><span class="hs-identifier hs-var hs-var">extendInteractiveContext</span></a></span></span><span> </span><span id="local-6989586621680919278"><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919278"><span class="hs-identifier hs-var">ictxt</span></a></span></span><span> </span><span id="local-6989586621680919277"><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919277"><span class="hs-identifier hs-var">new_tythings</span></a></span></span><span> </span><span id="local-6989586621680919276"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621680919276"><span class="hs-identifier hs-var">new_cls_insts</span></a></span></span><span> </span><span id="local-6989586621680919275"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621680919275"><span class="hs-identifier hs-var">new_fam_insts</span></a></span></span><span> </span><span id="local-6989586621680919274"><span class="annot"><span class="annottext">Maybe [Type]
</span><a href="#local-6989586621680919274"><span class="hs-identifier hs-var">defaults</span></a></span></span><span> </span><span id="local-6989586621680919273"><span class="annot"><span class="annottext">FixityEnv
</span><a href="#local-6989586621680919273"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span>
</span><span id="line-1815"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919278"><span class="hs-identifier hs-var">ictxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_mod_index :: Int
</span><a href="GHC.Driver.Types.html#ic_mod_index"><span class="hs-identifier hs-var">ic_mod_index</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; Int
</span><a href="GHC.Driver.Types.html#ic_mod_index"><span class="hs-identifier hs-var hs-var">ic_mod_index</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919278"><span class="hs-identifier hs-var">ictxt</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1816"></span><span>                            </span><span class="hs-comment">-- Always bump this; even instances should create</span><span>
</span><span id="line-1817"></span><span>                            </span><span class="hs-comment">-- a new mod_index (#9426)</span><span>
</span><span id="line-1818"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_tythings :: [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var">ic_tythings</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919277"><span class="hs-identifier hs-var">new_tythings</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919271"><span class="hs-identifier hs-var">old_tythings</span></a></span><span>
</span><span id="line-1819"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_rn_gbl_env :: GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#ic_rn_gbl_env"><span class="hs-identifier hs-var">ic_rn_gbl_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#ic_rn_gbl_env"><span class="hs-identifier hs-var hs-var">ic_rn_gbl_env</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919278"><span class="hs-identifier hs-var">ictxt</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [TyThing] -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#icExtendGblRdrEnv"><span class="hs-operator hs-var">`icExtendGblRdrEnv`</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919277"><span class="hs-identifier hs-var">new_tythings</span></a></span><span>
</span><span id="line-1820"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_instances :: ([ClsInst], [FamInst])
</span><a href="GHC.Driver.Types.html#ic_instances"><span class="hs-identifier hs-var">ic_instances</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621680919276"><span class="hs-identifier hs-var">new_cls_insts</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst] -&gt; [ClsInst] -&gt; [ClsInst]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621680919270"><span class="hs-identifier hs-var">old_cls_insts</span></a></span><span>
</span><span id="line-1821"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621680919275"><span class="hs-identifier hs-var">new_fam_insts</span></a></span><span> </span><span class="annot"><span class="annottext">[FamInst] -&gt; [FamInst] -&gt; [FamInst]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621680919269"><span class="hs-identifier hs-var">fam_insts</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1822"></span><span>                            </span><span class="hs-comment">-- we don't shadow old family instances (#7102),</span><span>
</span><span id="line-1823"></span><span>                            </span><span class="hs-comment">-- so don't need to remove them here</span><span>
</span><span id="line-1824"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_default :: Maybe [Type]
</span><a href="GHC.Driver.Types.html#ic_default"><span class="hs-identifier hs-var">ic_default</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Type]
</span><a href="#local-6989586621680919274"><span class="hs-identifier hs-var">defaults</span></a></span><span>
</span><span id="line-1825"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_fix_env :: FixityEnv
</span><a href="GHC.Driver.Types.html#ic_fix_env"><span class="hs-identifier hs-var">ic_fix_env</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FixityEnv
</span><a href="#local-6989586621680919273"><span class="hs-identifier hs-var">fix_env</span></a></span><span>  </span><span class="hs-comment">-- See Note [Fixity declarations in GHCi]</span><span>
</span><span id="line-1826"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1827"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1828"></span><span>    </span><span id="local-6989586621680919268"><span class="annot"><span class="annottext">new_ids :: [Id]
</span><a href="#local-6989586621680919268"><span class="hs-identifier hs-var hs-var">new_ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919267"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680919267"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919267"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919277"><span class="hs-identifier hs-var">new_tythings</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1829"></span><span>    </span><span id="local-6989586621680919271"><span class="annot"><span class="annottext">old_tythings :: [TyThing]
</span><a href="#local-6989586621680919271"><span class="hs-identifier hs-var hs-var">old_tythings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; Bool) -&gt; [TyThing] -&gt; [TyThing]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; TyThing -&gt; Bool
</span><a href="GHC.Driver.Types.html#shadowed_by"><span class="hs-identifier hs-var">shadowed_by</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919268"><span class="hs-identifier hs-var">new_ids</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractiveContext -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var hs-var">ic_tythings</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919278"><span class="hs-identifier hs-var">ictxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1830"></span><span>
</span><span id="line-1831"></span><span>    </span><span class="hs-comment">-- Discard old instances that have been fully overridden</span><span>
</span><span id="line-1832"></span><span>    </span><span class="hs-comment">-- See Note [Override identical instances in GHCi]</span><span>
</span><span id="line-1833"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680919263"><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621680919263"><span class="hs-identifier hs-var">cls_insts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680919269"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621680919269"><span class="hs-identifier hs-var">fam_insts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; ([ClsInst], [FamInst])
</span><a href="GHC.Driver.Types.html#ic_instances"><span class="hs-identifier hs-var hs-var">ic_instances</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919278"><span class="hs-identifier hs-var">ictxt</span></a></span><span>
</span><span id="line-1834"></span><span>    </span><span id="local-6989586621680919270"><span class="annot"><span class="annottext">old_cls_insts :: [ClsInst]
</span><a href="#local-6989586621680919270"><span class="hs-identifier hs-var hs-var">old_cls_insts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ClsInst -&gt; Bool) -&gt; [ClsInst] -&gt; [ClsInst]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680919262"><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621680919262"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ClsInst -&gt; Bool) -&gt; [ClsInst] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base/src/Data.Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClsInst -&gt; ClsInst -&gt; Bool
</span><a href="GHC.Core.InstEnv.html#identicalClsInstHead"><span class="hs-identifier hs-var">identicalClsInstHead</span></a></span><span> </span><span class="annot"><span class="annottext">ClsInst
</span><a href="#local-6989586621680919262"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621680919276"><span class="hs-identifier hs-var">new_cls_insts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ClsInst]
</span><a href="#local-6989586621680919263"><span class="hs-identifier hs-var">cls_insts</span></a></span><span>
</span><span id="line-1835"></span><span>
</span><span id="line-1836"></span><span class="annot"><a href="GHC.Driver.Types.html#extendInteractiveContextWithIds"><span class="hs-identifier hs-type">extendInteractiveContextWithIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span>
</span><span id="line-1837"></span><span class="hs-comment">-- Just a specialised version</span><span>
</span><span id="line-1838"></span><span id="extendInteractiveContextWithIds"><span class="annot"><span class="annottext">extendInteractiveContextWithIds :: InteractiveContext -&gt; [Id] -&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#extendInteractiveContextWithIds"><span class="hs-identifier hs-var hs-var">extendInteractiveContextWithIds</span></a></span></span><span> </span><span id="local-6989586621680919260"><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919260"><span class="hs-identifier hs-var">ictxt</span></a></span></span><span> </span><span id="local-6989586621680919259"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919259"><span class="hs-identifier hs-var">new_ids</span></a></span></span><span>
</span><span id="line-1839"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919259"><span class="hs-identifier hs-var">new_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919260"><span class="hs-identifier hs-var">ictxt</span></a></span><span>
</span><span id="line-1840"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919260"><span class="hs-identifier hs-var">ictxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_mod_index :: Int
</span><a href="GHC.Driver.Types.html#ic_mod_index"><span class="hs-identifier hs-var">ic_mod_index</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; Int
</span><a href="GHC.Driver.Types.html#ic_mod_index"><span class="hs-identifier hs-var hs-var">ic_mod_index</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919260"><span class="hs-identifier hs-var">ictxt</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1841"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_tythings :: [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var">ic_tythings</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919257"><span class="hs-identifier hs-var">new_tythings</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919256"><span class="hs-identifier hs-var">old_tythings</span></a></span><span>
</span><span id="line-1842"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_rn_gbl_env :: GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#ic_rn_gbl_env"><span class="hs-identifier hs-var">ic_rn_gbl_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#ic_rn_gbl_env"><span class="hs-identifier hs-var hs-var">ic_rn_gbl_env</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919260"><span class="hs-identifier hs-var">ictxt</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [TyThing] -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#icExtendGblRdrEnv"><span class="hs-operator hs-var">`icExtendGblRdrEnv`</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919257"><span class="hs-identifier hs-var">new_tythings</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1843"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1844"></span><span>    </span><span id="local-6989586621680919257"><span class="annot"><span class="annottext">new_tythings :: [TyThing]
</span><a href="#local-6989586621680919257"><span class="hs-identifier hs-var hs-var">new_tythings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; TyThing) -&gt; [Id] -&gt; [TyThing]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919259"><span class="hs-identifier hs-var">new_ids</span></a></span><span>
</span><span id="line-1845"></span><span>    </span><span id="local-6989586621680919256"><span class="annot"><span class="annottext">old_tythings :: [TyThing]
</span><a href="#local-6989586621680919256"><span class="hs-identifier hs-var hs-var">old_tythings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; Bool) -&gt; [TyThing] -&gt; [TyThing]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; TyThing -&gt; Bool
</span><a href="GHC.Driver.Types.html#shadowed_by"><span class="hs-identifier hs-var">shadowed_by</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919259"><span class="hs-identifier hs-var">new_ids</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractiveContext -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var hs-var">ic_tythings</span></a></span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919260"><span class="hs-identifier hs-var">ictxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1846"></span><span>
</span><span id="line-1847"></span><span class="annot"><a href="GHC.Driver.Types.html#shadowed_by"><span class="hs-identifier hs-type">shadowed_by</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1848"></span><span id="shadowed_by"><span class="annot"><span class="annottext">shadowed_by :: [Id] -&gt; TyThing -&gt; Bool
</span><a href="GHC.Driver.Types.html#shadowed_by"><span class="hs-identifier hs-var hs-var">shadowed_by</span></a></span></span><span> </span><span id="local-6989586621680919255"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919255"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; Bool
</span><a href="#local-6989586621680919254"><span class="hs-identifier hs-var">shadowed</span></a></span><span>
</span><span id="line-1849"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1850"></span><span>    </span><span id="local-6989586621680919254"><span class="annot"><span class="annottext">shadowed :: TyThing -&gt; Bool
</span><a href="#local-6989586621680919254"><span class="hs-identifier hs-var hs-var">shadowed</span></a></span></span><span> </span><span id="local-6989586621680919253"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919253"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919253"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccSet -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#elemOccSet"><span class="hs-operator hs-var">`elemOccSet`</span></a></span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621680919250"><span class="hs-identifier hs-var">new_occs</span></a></span><span>
</span><span id="line-1851"></span><span>    </span><span id="local-6989586621680919250"><span class="annot"><span class="annottext">new_occs :: OccSet
</span><a href="#local-6989586621680919250"><span class="hs-identifier hs-var hs-var">new_occs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[OccName] -&gt; OccSet
</span><a href="GHC.Types.Name.Occurrence.html#mkOccSet"><span class="hs-identifier hs-var">mkOccSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; OccName) -&gt; [Id] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919255"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1852"></span><span>
</span><span id="line-1853"></span><span class="hs-comment">-- | Set the 'DynFlags.homeUnitId' to 'interactive'</span><span>
</span><span id="line-1854"></span><span class="annot"><a href="GHC.Driver.Types.html#setInteractivePackage"><span class="hs-identifier hs-type">setInteractivePackage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span>
</span><span id="line-1855"></span><span id="setInteractivePackage"><span class="annot"><span class="annottext">setInteractivePackage :: HscEnv -&gt; HscEnv
</span><a href="GHC.Driver.Types.html#setInteractivePackage"><span class="hs-identifier hs-var hs-var">setInteractivePackage</span></a></span></span><span> </span><span id="local-6989586621680919248"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919248"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span>
</span><span id="line-1856"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919248"><span class="hs-identifier hs-var">hsc_env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsc_dflags :: DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var">hsc_dflags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919248"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1857"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">homeUnitId :: UnitId
</span><a href="GHC.Driver.Session.html#homeUnitId"><span class="hs-identifier hs-var">homeUnitId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="GHC.Unit.Types.html#interactiveUnitId"><span class="hs-identifier hs-var">interactiveUnitId</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1858"></span><span>
</span><span id="line-1859"></span><span class="annot"><a href="GHC.Driver.Types.html#setInteractivePrintName"><span class="hs-identifier hs-type">setInteractivePrintName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span>
</span><span id="line-1860"></span><span id="setInteractivePrintName"><span class="annot"><span class="annottext">setInteractivePrintName :: InteractiveContext -&gt; Name -&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#setInteractivePrintName"><span class="hs-identifier hs-var hs-var">setInteractivePrintName</span></a></span></span><span> </span><span id="local-6989586621680919245"><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919245"><span class="hs-identifier hs-var">ic</span></a></span></span><span> </span><span id="local-6989586621680919244"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919244"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919245"><span class="hs-identifier hs-var">ic</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">ic_int_print :: Name
</span><a href="GHC.Driver.Types.html#ic_int_print"><span class="hs-identifier hs-var">ic_int_print</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919244"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1861"></span><span>
</span><span id="line-1862"></span><span>    </span><span class="hs-comment">-- ToDo: should not add Ids to the gbl env here</span><span>
</span><span id="line-1863"></span><span>
</span><span id="line-1864"></span><span class="hs-comment">-- | Add TyThings to the GlobalRdrEnv, earlier ones in the list shadowing</span><span>
</span><span id="line-1865"></span><span class="hs-comment">-- later ones, and shadowing existing entries in the GlobalRdrEnv.</span><span>
</span><span id="line-1866"></span><span class="annot"><a href="GHC.Driver.Types.html#icExtendGblRdrEnv"><span class="hs-identifier hs-type">icExtendGblRdrEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-1867"></span><span id="icExtendGblRdrEnv"><span class="annot"><span class="annottext">icExtendGblRdrEnv :: GlobalRdrEnv -&gt; [TyThing] -&gt; GlobalRdrEnv
</span><a href="GHC.Driver.Types.html#icExtendGblRdrEnv"><span class="hs-identifier hs-var hs-var">icExtendGblRdrEnv</span></a></span></span><span> </span><span id="local-6989586621680919243"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919243"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680919242"><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919242"><span class="hs-identifier hs-var">tythings</span></a></span></span><span>
</span><span id="line-1868"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv)
-&gt; GlobalRdrEnv -&gt; [TyThing] -&gt; GlobalRdrEnv
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="#local-6989586621680919240"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919243"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919242"><span class="hs-identifier hs-var">tythings</span></a></span><span>  </span><span class="hs-comment">-- Foldr makes things in the front of</span><span>
</span><span id="line-1869"></span><span>                            </span><span class="hs-comment">-- the list shadow things at the back</span><span>
</span><span id="line-1870"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1871"></span><span>    </span><span class="hs-comment">-- One at a time, to ensure each shadows the previous ones</span><span>
</span><span id="line-1872"></span><span>    </span><span id="local-6989586621680919240"><span class="annot"><span class="annottext">add :: TyThing -&gt; GlobalRdrEnv -&gt; GlobalRdrEnv
</span><a href="#local-6989586621680919240"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621680919236"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919236"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span id="local-6989586621680919235"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919235"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-1873"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; Bool
</span><a href="#local-6989586621680919234"><span class="hs-identifier hs-var">is_sub_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919236"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-1874"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919235"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-1875"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1876"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEnv -&gt; GlobalRdrElt -&gt; GlobalRdrEnv)
-&gt; GlobalRdrEnv -&gt; [GlobalRdrElt] -&gt; GlobalRdrEnv
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; GlobalRdrElt -&gt; GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#extendGlobalRdrEnv"><span class="hs-identifier hs-var">extendGlobalRdrEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919232"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(IfaceExport -&gt; [GlobalRdrElt]) -&gt; [IfaceExport] -&gt; [GlobalRdrElt]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExport -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#localGREsFromAvail"><span class="hs-identifier hs-var">localGREsFromAvail</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680919230"><span class="hs-identifier hs-var">avail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1877"></span><span>       </span><span class="hs-keyword">where</span><span>
</span><span id="line-1878"></span><span>          </span><span id="local-6989586621680919232"><span class="annot"><span class="annottext">env1 :: GlobalRdrEnv
</span><a href="#local-6989586621680919232"><span class="hs-identifier hs-var hs-var">env1</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [Name] -&gt; GlobalRdrEnv
</span><a href="GHC.Types.Name.Reader.html#shadowNames"><span class="hs-identifier hs-var">shadowNames</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919235"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(IfaceExport -&gt; [Name]) -&gt; [IfaceExport] -&gt; [Name]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceExport -&gt; [Name]
</span><a href="GHC.Types.Avail.html#availNames"><span class="hs-identifier hs-var">availNames</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680919230"><span class="hs-identifier hs-var">avail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1879"></span><span>          </span><span id="local-6989586621680919230"><span class="annot"><span class="annottext">avail :: [IfaceExport]
</span><a href="#local-6989586621680919230"><span class="hs-identifier hs-var hs-var">avail</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; [IfaceExport]
</span><a href="GHC.Driver.Types.html#tyThingAvailInfo"><span class="hs-identifier hs-var">tyThingAvailInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919236"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-1880"></span><span>
</span><span id="line-1881"></span><span>    </span><span class="hs-comment">-- Ugh! The new_tythings may include record selectors, since they</span><span>
</span><span id="line-1882"></span><span>    </span><span class="hs-comment">-- are not implicit-ids, and must appear in the TypeEnv.  But they</span><span>
</span><span id="line-1883"></span><span>    </span><span class="hs-comment">-- will also be brought into scope by the corresponding (ATyCon</span><span>
</span><span id="line-1884"></span><span>    </span><span class="hs-comment">-- tc).  And we want the latter, because that has the correct</span><span>
</span><span id="line-1885"></span><span>    </span><span class="hs-comment">-- parent (#10520)</span><span>
</span><span id="line-1886"></span><span>    </span><span id="local-6989586621680919234"><span class="annot"><span class="annottext">is_sub_bndr :: TyThing -&gt; Bool
</span><a href="#local-6989586621680919234"><span class="hs-identifier hs-var hs-var">is_sub_bndr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680919227"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919227"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919227"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1887"></span><span>                             </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1888"></span><span>                             </span><span class="annot"><a href="GHC.Types.Id.Info.html#ClassOpId"><span class="hs-identifier hs-type">ClassOpId</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1889"></span><span>                             </span><span class="annot"><span class="annottext">IdDetails
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1890"></span><span>    </span><span class="annot"><a href="#local-6989586621680919234"><span class="hs-identifier hs-var">is_sub_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1891"></span><span>
</span><span id="line-1892"></span><span class="annot"><a href="GHC.Driver.Types.html#substInteractiveContext"><span class="hs-identifier hs-type">substInteractiveContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#TCvSubst"><span class="hs-identifier hs-type">TCvSubst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span>
</span><span id="line-1893"></span><span id="substInteractiveContext"><span class="annot"><span class="annottext">substInteractiveContext :: InteractiveContext -&gt; TCvSubst -&gt; InteractiveContext
</span><a href="GHC.Driver.Types.html#substInteractiveContext"><span class="hs-identifier hs-var hs-var">substInteractiveContext</span></a></span></span><span> </span><span id="local-6989586621680919223"><span class="annot"><span class="annottext">ictxt :: InteractiveContext
</span><a href="#local-6989586621680919223"><span class="hs-identifier hs-var">ictxt</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveContext"><span class="hs-identifier hs-type">InteractiveContext</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_tythings :: InteractiveContext -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var">ic_tythings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680919222"><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919222"><span class="hs-identifier hs-var">tts</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621680919221"><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621680919221"><span class="hs-identifier hs-var">subst</span></a></span></span><span>
</span><span id="line-1894"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TCvSubst -&gt; Bool
</span><a href="GHC.Core.TyCo.Subst.html#isEmptyTCvSubst"><span class="hs-identifier hs-var">isEmptyTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621680919221"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919223"><span class="hs-identifier hs-var">ictxt</span></a></span><span>
</span><span id="line-1895"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractiveContext
</span><a href="#local-6989586621680919223"><span class="hs-identifier hs-var">ictxt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_tythings :: [TyThing]
</span><a href="GHC.Driver.Types.html#ic_tythings"><span class="hs-identifier hs-var">ic_tythings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; TyThing) -&gt; [TyThing] -&gt; [TyThing]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; TyThing
</span><a href="#local-6989586621680919219"><span class="hs-identifier hs-var">subst_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919222"><span class="hs-identifier hs-var">tts</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1896"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1897"></span><span>    </span><span id="local-6989586621680919219"><span class="annot"><span class="annottext">subst_ty :: TyThing -&gt; TyThing
</span><a href="#local-6989586621680919219"><span class="hs-identifier hs-var hs-var">subst_ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680919218"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919218"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1898"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; TyThing) -&gt; Id -&gt; TyThing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Id -&gt; Id
</span><a href="GHC.Types.Var.html#updateIdTypeAndMult"><span class="hs-identifier hs-var">updateIdTypeAndMult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCvSubst -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Subst.html#substTyAddInScope"><span class="hs-identifier hs-var">substTyAddInScope</span></a></span><span> </span><span class="annot"><span class="annottext">TCvSubst
</span><a href="#local-6989586621680919221"><span class="hs-identifier hs-var">subst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919218"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1899"></span><span>      </span><span class="hs-comment">-- Variables in the interactive context *can* mention free type variables</span><span>
</span><span id="line-1900"></span><span>      </span><span class="hs-comment">-- because of the runtime debugger. Otherwise you'd expect all</span><span>
</span><span id="line-1901"></span><span>      </span><span class="hs-comment">-- variables bound in the interactive context to be closed.</span><span>
</span><span id="line-1902"></span><span>    </span><span class="annot"><a href="#local-6989586621680919219"><span class="hs-identifier hs-var">subst_ty</span></a></span><span> </span><span id="local-6989586621680919215"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919215"><span class="hs-identifier hs-var">tt</span></a></span></span><span>
</span><span id="line-1903"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919215"><span class="hs-identifier hs-var">tt</span></a></span><span>
</span><span id="line-1904"></span><span>
</span><span id="line-1905"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680919212"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#InteractiveImport"><span class="hs-identifier hs-type">InteractiveImport</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1906"></span><span>  </span><span id="local-6989586621680919201"><span class="annot"><span class="annottext">ppr :: InteractiveImport -&gt; SDoc
</span><a href="#local-6989586621680919201"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#IIModule"><span class="hs-identifier hs-type">IIModule</span></a></span><span> </span><span id="local-6989586621680919200"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919200"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'*'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680919200"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1907"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#IIDecl"><span class="hs-identifier hs-type">IIDecl</span></a></span><span> </span><span id="local-6989586621680919199"><span class="annot"><span class="annottext">ImportDecl GhcPs
</span><a href="#local-6989586621680919199"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportDecl GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ImportDecl GhcPs
</span><a href="#local-6989586621680919199"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1908"></span><span>
</span><span id="line-1909"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Building a PrintUnqualified
*                                                                      *
************************************************************************

Note [Printing original names]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Deciding how to print names is pretty tricky.  We are given a name
P:M.T, where P is the package name, M is the defining module, and T is
the occurrence name, and we have to decide in which form to display
the name given a GlobalRdrEnv describing the current scope.

Ideally we want to display the name in the form in which it is in
scope.  However, the name might not be in scope at all, and that's
where it gets tricky.  Here are the cases:

 1. T uniquely maps to  P:M.T      ---&gt;  &quot;T&quot;      NameUnqual
 2. There is an X for which X.T
       uniquely maps to  P:M.T     ---&gt;  &quot;X.T&quot;    NameQual X
 3. There is no binding for &quot;M.T&quot;  ---&gt;  &quot;M.T&quot;    NameNotInScope1
 4. Otherwise                      ---&gt;  &quot;P:M.T&quot;  NameNotInScope2

(3) and (4) apply when the entity P:M.T is not in the GlobalRdrEnv at
all. In these cases we still want to refer to the name as &quot;M.T&quot;, *but*
&quot;M.T&quot; might mean something else in the current scope (e.g. if there's
an &quot;import X as M&quot;), so to avoid confusion we avoid using &quot;M.T&quot; if
there's already a binding for it.  Instead we write P:M.T.

There's one further subtlety: in case (3), what if there are two
things around, P1:M.T and P2:M.T?  Then we don't want to print both of
them as M.T!  However only one of the modules P1:M and P2:M can be
exposed (say P2), so we use M.T for that, and P1:M.T for the other one.
This is handled by the qual_mod component of PrintUnqualified, inside
the (ppr mod) of case (3), in Name.pprModulePrefix

Note [Printing unit ids]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In the old days, original names were tied to PackageIds, which directly
corresponded to the entities that users wrote in Cabal files, and were perfectly
suitable for printing when we need to disambiguate packages.  However, with
instantiated units, the situation can be different: if the key is instantiated
with some holes, we should try to give the user some more useful information.
-}</span><span>
</span><span id="line-1954"></span><span>
</span><span id="line-1955"></span><span class="hs-comment">-- | Creates some functions that work out the best ways to format</span><span>
</span><span id="line-1956"></span><span class="hs-comment">-- names for the user according to a set of heuristics.</span><span>
</span><span id="line-1957"></span><span class="annot"><a href="GHC.Driver.Types.html#mkPrintUnqualified"><span class="hs-identifier hs-type">mkPrintUnqualified</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PrintUnqualified"><span class="hs-identifier hs-type">PrintUnqualified</span></a></span><span>
</span><span id="line-1958"></span><span id="mkPrintUnqualified"><span class="annot"><span class="annottext">mkPrintUnqualified :: DynFlags -&gt; GlobalRdrEnv -&gt; PrintUnqualified
</span><a href="GHC.Driver.Types.html#mkPrintUnqualified"><span class="hs-identifier hs-var hs-var">mkPrintUnqualified</span></a></span></span><span> </span><span id="local-6989586621680919198"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919198"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621680919197"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919197"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QueryQualifyName
-&gt; (Module -&gt; Bool) -&gt; QueryQualifyPackage -&gt; PrintUnqualified
</span><a href="GHC.Utils.Outputable.html#QueryQualify"><span class="hs-identifier hs-var">QueryQualify</span></a></span><span> </span><span class="annot"><span class="annottext">QueryQualifyName
</span><a href="#local-6989586621680919195"><span class="hs-identifier hs-var">qual_name</span></a></span><span>
</span><span id="line-1959"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Module -&gt; Bool
</span><a href="GHC.Driver.Types.html#mkQualModule"><span class="hs-identifier hs-var">mkQualModule</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919198"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1960"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitState -&gt; QueryQualifyPackage
</span><a href="GHC.Driver.Types.html#mkQualPackage"><span class="hs-identifier hs-var">mkQualPackage</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621680919194"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1961"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1962"></span><span>  </span><span id="local-6989586621680919194"><span class="annot"><span class="annottext">pkgs :: UnitState
</span><a href="#local-6989586621680919194"><span class="hs-identifier hs-var hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; UnitState
</span><a href="GHC.Driver.Session.html#unitState"><span class="hs-identifier hs-var hs-var">unitState</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919198"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-1963"></span><span>  </span><span id="local-6989586621680919195"><span class="annot"><span class="annottext">qual_name :: QueryQualifyName
</span><a href="#local-6989586621680919195"><span class="hs-identifier hs-var hs-var">qual_name</span></a></span></span><span> </span><span id="local-6989586621680919192"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919192"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621680919191"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919191"><span class="hs-identifier hs-var">occ</span></a></span></span><span>
</span><span id="line-1964"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621680919190"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621680919190"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621680919189"><span class="hs-identifier hs-var">unqual_gres</span></a></span><span>
</span><span id="line-1965"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="#local-6989586621680919188"><span class="hs-identifier hs-var">right_name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621680919190"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-1966"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameUnqual"><span class="hs-identifier hs-var">NameUnqual</span></a></span><span>   </span><span class="hs-comment">-- If there's a unique entity that's in scope</span><span>
</span><span id="line-1967"></span><span>                       </span><span class="hs-comment">-- unqualified with 'occ' AND that entity is</span><span>
</span><span id="line-1968"></span><span>                       </span><span class="hs-comment">-- the right one, then we can use the unqualified name</span><span>
</span><span id="line-1969"></span><span>
</span><span id="line-1970"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621680919189"><span class="hs-identifier hs-var">unqual_gres</span></a></span><span>
</span><span id="line-1971"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; [Name] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base/src/Data.Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="#local-6989586621680919186"><span class="hs-identifier hs-var">is_name</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621680919185"><span class="hs-identifier hs-var">forceUnqualNames</span></a></span><span>
</span><span id="line-1972"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDerivedOccName"><span class="hs-identifier hs-var">isDerivedOccName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919191"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1973"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameUnqual"><span class="hs-identifier hs-var">NameUnqual</span></a></span><span>   </span><span class="hs-comment">-- Don't qualify names that come from modules</span><span>
</span><span id="line-1974"></span><span>                       </span><span class="hs-comment">-- that come with GHC, often appear in error messages,</span><span>
</span><span id="line-1975"></span><span>                       </span><span class="hs-comment">-- but aren't typically in scope. Doing this does not</span><span>
</span><span id="line-1976"></span><span>                       </span><span class="hs-comment">-- cause ambiguity, and it reduces the amount of</span><span>
</span><span id="line-1977"></span><span>                       </span><span class="hs-comment">-- qualification in error messages thus improving</span><span>
</span><span id="line-1978"></span><span>                       </span><span class="hs-comment">-- readability.</span><span>
</span><span id="line-1979"></span><span>                       </span><span class="hs-comment">--</span><span>
</span><span id="line-1980"></span><span>                       </span><span class="hs-comment">-- A motivating example is 'Constraint'. It's often not</span><span>
</span><span id="line-1981"></span><span>                       </span><span class="hs-comment">-- in scope, but printing GHC.Prim.Constraint seems</span><span>
</span><span id="line-1982"></span><span>                       </span><span class="hs-comment">-- overkill.</span><span>
</span><span id="line-1983"></span><span>
</span><span id="line-1984"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span id="local-6989586621680919182"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621680919182"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621680919181"><span class="hs-identifier hs-var">qual_gres</span></a></span><span>
</span><span id="line-1985"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; QualifyName
</span><a href="GHC.Utils.Outputable.html#NameQual"><span class="hs-identifier hs-var">NameQual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#greQualModName"><span class="hs-identifier hs-var">greQualModName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621680919182"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1986"></span><span>
</span><span id="line-1987"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621680919181"><span class="hs-identifier hs-var">qual_gres</span></a></span><span>
</span><span id="line-1988"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; GlobalRdrEnv -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_RdrName"><span class="hs-identifier hs-var">lookupGRE_RdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrQual"><span class="hs-identifier hs-var">mkRdrQual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919192"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919191"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919197"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1989"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameNotInScope1"><span class="hs-identifier hs-var">NameNotInScope1</span></a></span><span>
</span><span id="line-1990"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameNotInScope2"><span class="hs-identifier hs-var">NameNotInScope2</span></a></span><span>
</span><span id="line-1991"></span><span>
</span><span id="line-1992"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1993"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifyName
</span><a href="GHC.Utils.Outputable.html#NameNotInScope1"><span class="hs-identifier hs-var">NameNotInScope1</span></a></span><span>   </span><span class="hs-comment">-- Can happen if 'f' is bound twice in the module</span><span>
</span><span id="line-1994"></span><span>                            </span><span class="hs-comment">-- Eg  f = True; g = 0; f = False</span><span>
</span><span id="line-1995"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1996"></span><span>        </span><span class="annot"><a href="#local-6989586621680919186"><span class="hs-identifier hs-type">is_name</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1997"></span><span>        </span><span id="local-6989586621680919186"><span class="annot"><span class="annottext">is_name :: Name -&gt; Bool
</span><a href="#local-6989586621680919186"><span class="hs-identifier hs-var hs-var">is_name</span></a></span></span><span> </span><span id="local-6989586621680919174"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919174"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isExternalName</span><span> </span><span class="hs-identifier">name</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1998"></span><span>                       </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919174"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919192"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919174"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919191"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1999"></span><span>
</span><span id="line-2000"></span><span>        </span><span class="annot"><a href="#local-6989586621680919185"><span class="hs-identifier hs-type">forceUnqualNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2001"></span><span>        </span><span id="local-6989586621680919185"><span class="annot"><span class="annottext">forceUnqualNames :: [Name]
</span><a href="#local-6989586621680919185"><span class="hs-identifier hs-var hs-var">forceUnqualNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2002"></span><span>          </span><span class="annot"><span class="annottext">(TyCon -&gt; Name) -&gt; [TyCon] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
</span><a href="GHC.Core.TyCon.html#tyConName"><span class="hs-identifier hs-var hs-var">tyConName</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="GHC.Builtin.Types.html#constraintKindTyCon"><span class="hs-identifier hs-var">constraintKindTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="GHC.Builtin.Types.html#heqTyCon"><span class="hs-identifier hs-var">heqTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="GHC.Builtin.Types.html#coercibleTyCon"><span class="hs-identifier hs-var">coercibleTyCon</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2003"></span><span>          </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; [Name]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Types.html#eqTyConName"><span class="hs-identifier hs-var">eqTyConName</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2004"></span><span>
</span><span id="line-2005"></span><span>        </span><span id="local-6989586621680919188"><span class="annot"><span class="annottext">right_name :: GlobalRdrElt -&gt; Bool
</span><a href="#local-6989586621680919188"><span class="hs-identifier hs-var hs-var">right_name</span></a></span></span><span> </span><span id="local-6989586621680919162"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621680919162"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Module
</span><a href="GHC.Types.Name.html#nameModule_maybe"><span class="hs-identifier hs-var">nameModule_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Name
</span><a href="GHC.Types.Name.Reader.html#gre_name"><span class="hs-identifier hs-var hs-var">gre_name</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621680919162"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Module -&gt; Maybe Module -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Maybe Module
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919192"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-2006"></span><span>
</span><span id="line-2007"></span><span>        </span><span id="local-6989586621680919189"><span class="annot"><span class="annottext">unqual_gres :: [GlobalRdrElt]
</span><a href="#local-6989586621680919189"><span class="hs-identifier hs-var hs-var">unqual_gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; GlobalRdrEnv -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE_RdrName"><span class="hs-identifier hs-var">lookupGRE_RdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919191"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919197"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-2008"></span><span>        </span><span id="local-6989586621680919181"><span class="annot"><span class="annottext">qual_gres :: [GlobalRdrElt]
</span><a href="#local-6989586621680919181"><span class="hs-identifier hs-var hs-var">qual_gres</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="#local-6989586621680919188"><span class="hs-identifier hs-var">right_name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; OccName -&gt; [GlobalRdrElt]
</span><a href="GHC.Types.Name.Reader.html#lookupGlobalRdrEnv"><span class="hs-identifier hs-var">lookupGlobalRdrEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621680919197"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680919191"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2009"></span><span>
</span><span id="line-2010"></span><span>    </span><span class="hs-comment">-- we can mention a module P:M without the P: qualifier iff</span><span>
</span><span id="line-2011"></span><span>    </span><span class="hs-comment">-- &quot;import M&quot; would resolve unambiguously to P:M.  (if P is the</span><span>
</span><span id="line-2012"></span><span>    </span><span class="hs-comment">-- current package we can just assume it is unqualified).</span><span>
</span><span id="line-2013"></span><span>
</span><span id="line-2014"></span><span class="hs-comment">-- | Creates a function for formatting modules based on two heuristics:</span><span>
</span><span id="line-2015"></span><span class="hs-comment">-- (1) if the module is the current module, don't qualify, and (2) if there</span><span>
</span><span id="line-2016"></span><span class="hs-comment">-- is only one exposed package which exports this module, don't qualify.</span><span>
</span><span id="line-2017"></span><span class="annot"><a href="GHC.Driver.Types.html#mkQualModule"><span class="hs-identifier hs-type">mkQualModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#QueryQualifyModule"><span class="hs-identifier hs-type">QueryQualifyModule</span></a></span><span>
</span><span id="line-2018"></span><span id="mkQualModule"><span class="annot"><span class="annottext">mkQualModule :: DynFlags -&gt; Module -&gt; Bool
</span><a href="GHC.Driver.Types.html#mkQualModule"><span class="hs-identifier hs-var hs-var">mkQualModule</span></a></span></span><span> </span><span id="local-6989586621680919156"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919156"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621680919155"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919155"><span class="hs-identifier hs-var">mod</span></a></span></span><span>
</span><span id="line-2019"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Module -&gt; Bool
</span><a href="GHC.Driver.Session.html#isHomeModule"><span class="hs-identifier hs-var">isHomeModule</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919156"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919155"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2020"></span><span>
</span><span id="line-2021"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680919153"><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621680919153"><span class="hs-identifier hs-var">pkgconfig</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Module, UnitInfo)]
</span><a href="#local-6989586621680919152"><span class="hs-identifier hs-var">lookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2022"></span><span>       </span><span class="annot"><span class="annottext">UnitInfo -&gt; Unit
</span><a href="GHC.Unit.Info.html#mkUnit"><span class="hs-identifier hs-var">mkUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621680919153"><span class="hs-identifier hs-var">pkgconfig</span></a></span><span> </span><span class="annot"><span class="annottext">Unit -&gt; QueryQualifyPackage
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Unit
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919155"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-2023"></span><span>        </span><span class="hs-comment">-- this says: we are given a module P:M, is there just one exposed package</span><span>
</span><span id="line-2024"></span><span>        </span><span class="hs-comment">-- that exposes a module M, and is it package P?</span><span>
</span><span id="line-2025"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2028"></span><span>     </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680919152"><span class="annot"><span class="annottext">lookup :: [(Module, UnitInfo)]
</span><a href="#local-6989586621680919152"><span class="hs-identifier hs-var hs-var">lookup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; ModuleName -&gt; [(Module, UnitInfo)]
</span><a href="GHC.Unit.State.html#lookupModuleInAllUnits"><span class="hs-identifier hs-var">lookupModuleInAllUnits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; UnitState
</span><a href="GHC.Driver.Session.html#unitState"><span class="hs-identifier hs-var hs-var">unitState</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919156"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919155"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2029"></span><span>
</span><span id="line-2030"></span><span class="hs-comment">-- | Creates a function for formatting packages based on two heuristics:</span><span>
</span><span id="line-2031"></span><span class="hs-comment">-- (1) don't qualify if the package in question is &quot;main&quot;, and (2) only qualify</span><span>
</span><span id="line-2032"></span><span class="hs-comment">-- with a unit id if the package ID would be ambiguous.</span><span>
</span><span id="line-2033"></span><span class="annot"><a href="GHC.Driver.Types.html#mkQualPackage"><span class="hs-identifier hs-type">mkQualPackage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#QueryQualifyPackage"><span class="hs-identifier hs-type">QueryQualifyPackage</span></a></span><span>
</span><span id="line-2034"></span><span id="mkQualPackage"><span class="annot"><span class="annottext">mkQualPackage :: UnitState -&gt; QueryQualifyPackage
</span><a href="GHC.Driver.Types.html#mkQualPackage"><span class="hs-identifier hs-var hs-var">mkQualPackage</span></a></span></span><span> </span><span id="local-6989586621680919149"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621680919149"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span> </span><span id="local-6989586621680919148"><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621680919148"><span class="hs-identifier hs-var">uid</span></a></span></span><span>
</span><span id="line-2035"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621680919148"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">Unit -&gt; QueryQualifyPackage
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="GHC.Unit.Types.html#mainUnit"><span class="hs-identifier hs-var">mainUnit</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621680919148"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">Unit -&gt; QueryQualifyPackage
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="GHC.Unit.Types.html#interactiveUnit"><span class="hs-identifier hs-var">interactiveUnit</span></a></span><span>
</span><span id="line-2036"></span><span>        </span><span class="hs-comment">-- Skip the lookup if it's main, since it won't be in the package</span><span>
</span><span id="line-2037"></span><span>        </span><span class="hs-comment">-- database!</span><span>
</span><span id="line-2038"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2039"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919145"><span class="annot"><span class="annottext">PackageId
</span><a href="#local-6989586621680919145"><span class="hs-identifier hs-var">pkgid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe PackageId
</span><a href="#local-6989586621680919144"><span class="hs-identifier hs-var">mb_pkgid</span></a></span><span>
</span><span id="line-2040"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; PackageId -&gt; [UnitInfo]
</span><a href="GHC.Unit.State.html#searchPackageId"><span class="hs-identifier hs-var">searchPackageId</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621680919149"><span class="hs-identifier hs-var">pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">PackageId
</span><a href="#local-6989586621680919145"><span class="hs-identifier hs-var">pkgid</span></a></span><span> </span><span class="annot"><span class="annottext">[UnitInfo] -&gt; Int -&gt; Bool
forall a. [a] -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthIs"><span class="hs-operator hs-var">`lengthIs`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-2041"></span><span>        </span><span class="hs-comment">-- this says: we are given a package pkg-0.1@MMM, are there only one</span><span>
</span><span id="line-2042"></span><span>        </span><span class="hs-comment">-- exposed packages whose package ID is pkg-0.1?</span><span>
</span><span id="line-2043"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2044"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2045"></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2046"></span><span>     </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680919144"><span class="annot"><span class="annottext">mb_pkgid :: Maybe PackageId
</span><a href="#local-6989586621680919144"><span class="hs-identifier hs-var hs-var">mb_pkgid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UnitInfo -&gt; PackageId) -&gt; Maybe UnitInfo -&gt; Maybe PackageId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo -&gt; PackageId
forall compid srcpkgid srcpkgname uid modulename mod.
GenericUnitInfo compid srcpkgid srcpkgname uid modulename mod
-&gt; srcpkgid
</span><a href="../../ghc-boot/src/GHC.Unit.Database.html#unitPackageId"><span class="hs-identifier hs-var hs-var">unitPackageId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitState -&gt; Unit -&gt; Maybe UnitInfo
</span><a href="GHC.Unit.State.html#lookupUnit"><span class="hs-identifier hs-var">lookupUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621680919149"><span class="hs-identifier hs-var">pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">Unit
</span><a href="#local-6989586621680919148"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2047"></span><span>
</span><span id="line-2048"></span><span class="hs-comment">-- | A function which only qualifies package names if necessary; but</span><span>
</span><span id="line-2049"></span><span class="hs-comment">-- qualifies all other identifiers.</span><span>
</span><span id="line-2050"></span><span class="annot"><a href="GHC.Driver.Types.html#pkgQual"><span class="hs-identifier hs-type">pkgQual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#PrintUnqualified"><span class="hs-identifier hs-type">PrintUnqualified</span></a></span><span>
</span><span id="line-2051"></span><span id="pkgQual"><span class="annot"><span class="annottext">pkgQual :: UnitState -&gt; PrintUnqualified
</span><a href="GHC.Driver.Types.html#pkgQual"><span class="hs-identifier hs-var hs-var">pkgQual</span></a></span></span><span> </span><span id="local-6989586621680919139"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621680919139"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrintUnqualified
</span><a href="GHC.Utils.Outputable.html#alwaysQualify"><span class="hs-identifier hs-var">alwaysQualify</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">queryQualifyPackage :: QueryQualifyPackage
</span><a href="GHC.Utils.Outputable.html#queryQualifyPackage"><span class="hs-identifier hs-var">queryQualifyPackage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; QueryQualifyPackage
</span><a href="GHC.Driver.Types.html#mkQualPackage"><span class="hs-identifier hs-var">mkQualPackage</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621680919139"><span class="hs-identifier hs-var">pkgs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2052"></span><span>
</span><span id="line-2053"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Implicit TyThings
*                                                                      *
************************************************************************

Note [Implicit TyThings]
~~~~~~~~~~~~~~~~~~~~~~~~
  DEFINITION: An &quot;implicit&quot; TyThing is one that does not have its own
  IfaceDecl in an interface file.  Instead, its binding in the type
  environment is created as part of typechecking the IfaceDecl for
  some other thing.

Examples:
  * All DataCons are implicit, because they are generated from the
    IfaceDecl for the data/newtype.  Ditto class methods.

  * Record selectors are *not* implicit, because they get their own
    free-standing IfaceDecl.

  * Associated data/type families are implicit because they are
    included in the IfaceDecl of the parent class.  (NB: the
    IfaceClass decl happens to use IfaceDecl recursively for the
    associated types, but that's irrelevant here.)

  * Dictionary function Ids are not implicit.

  * Axioms for newtypes are implicit (same as above), but axioms
    for data/type family instances are *not* implicit (like DFunIds).
-}</span><span>
</span><span id="line-2084"></span><span>
</span><span id="line-2085"></span><span class="hs-comment">-- | Determine the 'TyThing's brought into scope by another 'TyThing'</span><span>
</span><span id="line-2086"></span><span class="hs-comment">-- /other/ than itself. For example, Id's don't have any implicit TyThings</span><span>
</span><span id="line-2087"></span><span class="hs-comment">-- as they just bring themselves into scope, but classes bring their</span><span>
</span><span id="line-2088"></span><span class="hs-comment">-- dictionary datatype, type constructor and some selector functions into</span><span>
</span><span id="line-2089"></span><span class="hs-comment">-- scope, just for a start!</span><span>
</span><span id="line-2090"></span><span>
</span><span id="line-2091"></span><span class="hs-comment">-- N.B. the set of TyThings returned here *must* match the set of</span><span>
</span><span id="line-2092"></span><span class="hs-comment">-- names returned by 'GHC.Iface.Load.ifaceDeclImplicitBndrs', in the sense that</span><span>
</span><span id="line-2093"></span><span class="hs-comment">-- TyThing.getOccName should define a bijection between the two lists.</span><span>
</span><span id="line-2094"></span><span class="hs-comment">-- This invariant is used in 'GHC.Iface.Load.loadDecl' (see note [Tricky iface loop])</span><span>
</span><span id="line-2095"></span><span class="hs-comment">-- The order of the list does not matter.</span><span>
</span><span id="line-2096"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitTyThings"><span class="hs-identifier hs-type">implicitTyThings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2097"></span><span id="implicitTyThings"><span class="annot"><span class="annottext">implicitTyThings :: TyThing -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitTyThings"><span class="hs-identifier hs-var hs-var">implicitTyThings</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2098"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitTyThings"><span class="hs-identifier hs-var">implicitTyThings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-type">ACoAxiom</span></a></span><span> </span><span id="local-6989586621680919135"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680919135"><span class="hs-identifier hs-var">_cc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2099"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitTyThings"><span class="hs-identifier hs-var">implicitTyThings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621680919133"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919133"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitTyConThings"><span class="hs-identifier hs-var">implicitTyConThings</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919133"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2100"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitTyThings"><span class="hs-identifier hs-var">implicitTyThings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span id="local-6989586621680919131"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919131"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitConLikeThings"><span class="hs-identifier hs-var">implicitConLikeThings</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919131"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-2101"></span><span>
</span><span id="line-2102"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitConLikeThings"><span class="hs-identifier hs-type">implicitConLikeThings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier hs-type">ConLike</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2103"></span><span id="implicitConLikeThings"><span class="annot"><span class="annottext">implicitConLikeThings :: ConLike -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitConLikeThings"><span class="hs-identifier hs-var hs-var">implicitConLikeThings</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621680919128"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919128"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2104"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyThing]
</span><a href="GHC.Core.DataCon.html#dataConImplicitTyThings"><span class="hs-identifier hs-var">dataConImplicitTyThings</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919128"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-2105"></span><span>
</span><span id="line-2106"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitConLikeThings"><span class="hs-identifier hs-var">implicitConLikeThings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2107"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Pattern synonyms have no implicit Ids; the wrapper and matcher</span><span>
</span><span id="line-2108"></span><span>        </span><span class="hs-comment">-- are not &quot;implicit&quot;; they are simply new top-level bindings,</span><span>
</span><span id="line-2109"></span><span>        </span><span class="hs-comment">-- and they have their own declaration in an interface file</span><span>
</span><span id="line-2110"></span><span>        </span><span class="hs-comment">-- Unless a record pat syn when there are implicit selectors</span><span>
</span><span id="line-2111"></span><span>        </span><span class="hs-comment">-- They are still not included here as `implicitConLikeThings` is</span><span>
</span><span id="line-2112"></span><span>        </span><span class="hs-comment">-- used by `tcTyClsDecls` whilst pattern synonyms are typed checked</span><span>
</span><span id="line-2113"></span><span>        </span><span class="hs-comment">-- by `tcTopValBinds`.</span><span>
</span><span id="line-2114"></span><span>
</span><span id="line-2115"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitClassThings"><span class="hs-identifier hs-type">implicitClassThings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier hs-type">Class</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2116"></span><span id="implicitClassThings"><span class="annot"><span class="annottext">implicitClassThings :: Class -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitClassThings"><span class="hs-identifier hs-var hs-var">implicitClassThings</span></a></span></span><span> </span><span id="local-6989586621680919125"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919125"><span class="hs-identifier hs-var">cl</span></a></span></span><span>
</span><span id="line-2117"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Does not include default methods, because those Ids may have</span><span>
</span><span id="line-2118"></span><span>    </span><span class="hs-comment">--    their own pragmas, unfoldings etc, not derived from the Class object</span><span>
</span><span id="line-2119"></span><span>
</span><span id="line-2120"></span><span>    </span><span class="hs-comment">-- associated types</span><span>
</span><span id="line-2121"></span><span>    </span><span class="hs-comment">--    No recursive call for the classATs, because they</span><span>
</span><span id="line-2122"></span><span>    </span><span class="hs-comment">--    are only the family decls; they have no implicit things</span><span>
</span><span id="line-2123"></span><span>    </span><span class="annot"><span class="annottext">(TyCon -&gt; TyThing) -&gt; [TyCon] -&gt; [TyThing]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; [TyCon]
</span><a href="GHC.Core.Class.html#classATs"><span class="hs-identifier hs-var">classATs</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919125"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-2124"></span><span>
</span><span id="line-2125"></span><span>    </span><span class="hs-comment">-- superclass and operation selectors</span><span>
</span><span id="line-2126"></span><span>    </span><span class="annot"><span class="annottext">(Id -&gt; TyThing) -&gt; [Id] -&gt; [TyThing]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; [Id]
</span><a href="GHC.Core.Class.html#classAllSelIds"><span class="hs-identifier hs-var">classAllSelIds</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919125"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2127"></span><span>
</span><span id="line-2128"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitTyConThings"><span class="hs-identifier hs-type">implicitTyConThings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2129"></span><span id="implicitTyConThings"><span class="annot"><span class="annottext">implicitTyConThings :: TyCon -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitTyConThings"><span class="hs-identifier hs-var hs-var">implicitTyConThings</span></a></span></span><span> </span><span id="local-6989586621680919122"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919122"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-2130"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919121"><span class="hs-identifier hs-var">class_stuff</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-2131"></span><span>      </span><span class="hs-comment">-- fields (names of selectors)</span><span>
</span><span id="line-2132"></span><span>
</span><span id="line-2133"></span><span>      </span><span class="hs-comment">-- (possibly) implicit newtype axioms</span><span>
</span><span id="line-2134"></span><span>      </span><span class="hs-comment">-- or type family axioms</span><span>
</span><span id="line-2135"></span><span>    </span><span class="annot"><span class="annottext">TyCon -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitCoTyCon"><span class="hs-identifier hs-var">implicitCoTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919122"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-2136"></span><span>
</span><span id="line-2137"></span><span>      </span><span class="hs-comment">-- for each data constructor in order,</span><span>
</span><span id="line-2138"></span><span>      </span><span class="hs-comment">--   the constructor, worker, and (possibly) wrapper</span><span>
</span><span id="line-2139"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919119"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680919118"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919118"><span class="hs-identifier hs-var">dc</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919122"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2140"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621680919119"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919119"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; ConLike
</span><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-var">RealDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919118"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; [TyThing] -&gt; [TyThing]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyThing]
</span><a href="GHC.Core.DataCon.html#dataConImplicitTyThings"><span class="hs-identifier hs-var">dataConImplicitTyThings</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919118"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2141"></span><span>      </span><span class="hs-comment">-- NB. record selectors are *not* implicit, they have fully-fledged</span><span>
</span><span id="line-2142"></span><span>      </span><span class="hs-comment">-- bindings that pass through the compilation pipeline as normal.</span><span>
</span><span id="line-2143"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2144"></span><span>    </span><span id="local-6989586621680919121"><span class="annot"><span class="annottext">class_stuff :: [TyThing]
</span><a href="#local-6989586621680919121"><span class="hs-identifier hs-var hs-var">class_stuff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe Class
</span><a href="GHC.Core.TyCon.html#tyConClass_maybe"><span class="hs-identifier hs-var">tyConClass_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919122"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2145"></span><span>        </span><span class="annot"><span class="annottext">Maybe Class
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2146"></span><span>        </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919115"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919115"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Class -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitClassThings"><span class="hs-identifier hs-var">implicitClassThings</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919115"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-2147"></span><span>
</span><span id="line-2148"></span><span class="hs-comment">-- For newtypes and closed type families (only) add the implicit coercion tycon</span><span>
</span><span id="line-2149"></span><span class="annot"><a href="GHC.Driver.Types.html#implicitCoTyCon"><span class="hs-identifier hs-type">implicitCoTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2150"></span><span id="implicitCoTyCon"><span class="annot"><span class="annottext">implicitCoTyCon :: TyCon -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitCoTyCon"><span class="hs-identifier hs-var hs-var">implicitCoTyCon</span></a></span></span><span> </span><span id="local-6989586621680919114"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919114"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-2151"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919113"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621680919113"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe (CoAxiom Unbranched)
</span><a href="GHC.Core.TyCon.html#newTyConCo_maybe"><span class="hs-identifier hs-var">newTyConCo_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919114"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-var">ACoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">(CoAxiom Branched -&gt; TyThing) -&gt; CoAxiom Branched -&gt; TyThing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; CoAxiom Branched
forall (br :: BranchFlag). CoAxiom br -&gt; CoAxiom Branched
</span><a href="GHC.Core.Coercion.Axiom.html#toBranchedAxiom"><span class="hs-identifier hs-var">toBranchedAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621680919113"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2152"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919110"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680919110"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe (CoAxiom Branched)
</span><a href="GHC.Core.TyCon.html#isClosedSynFamilyTyConWithAxiom_maybe"><span class="hs-identifier hs-var">isClosedSynFamilyTyConWithAxiom_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919114"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2153"></span><span>                                   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-var">ACoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680919110"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2154"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2155"></span><span>
</span><span id="line-2156"></span><span class="hs-comment">-- | Returns @True@ if there should be no interface-file declaration</span><span>
</span><span id="line-2157"></span><span class="hs-comment">-- for this thing on its own: either it is built-in, or it is part</span><span>
</span><span id="line-2158"></span><span class="hs-comment">-- of some other declaration, or it is generated implicitly by some</span><span>
</span><span id="line-2159"></span><span class="hs-comment">-- other declaration.</span><span>
</span><span id="line-2160"></span><span class="annot"><a href="GHC.Driver.Types.html#isImplicitTyThing"><span class="hs-identifier hs-type">isImplicitTyThing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2161"></span><span id="isImplicitTyThing"><span class="annot"><span class="annottext">isImplicitTyThing :: TyThing -&gt; Bool
</span><a href="GHC.Driver.Types.html#isImplicitTyThing"><span class="hs-identifier hs-var hs-var">isImplicitTyThing</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span id="local-6989586621680919108"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919108"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919108"><span class="hs-identifier hs-var">cl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2162"></span><span>                                    </span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2163"></span><span>                                    </span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2164"></span><span class="annot"><a href="GHC.Driver.Types.html#isImplicitTyThing"><span class="hs-identifier hs-var">isImplicitTyThing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680919107"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919107"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Id.html#isImplicitId"><span class="hs-identifier hs-var">isImplicitId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919107"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-2165"></span><span class="annot"><a href="GHC.Driver.Types.html#isImplicitTyThing"><span class="hs-identifier hs-var">isImplicitTyThing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621680919105"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919105"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isImplicitTyCon"><span class="hs-identifier hs-var">isImplicitTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919105"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2166"></span><span class="annot"><a href="GHC.Driver.Types.html#isImplicitTyThing"><span class="hs-identifier hs-var">isImplicitTyThing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-type">ACoAxiom</span></a></span><span> </span><span id="local-6989586621680919103"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680919103"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; Bool
forall (br :: BranchFlag). CoAxiom br -&gt; Bool
</span><a href="GHC.Core.Coercion.Axiom.html#isImplicitCoAxiom"><span class="hs-identifier hs-var">isImplicitCoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680919103"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-2167"></span><span>
</span><span id="line-2168"></span><span class="hs-comment">-- | tyThingParent_maybe x returns (Just p)</span><span>
</span><span id="line-2169"></span><span class="hs-comment">-- when pprTyThingInContext should print a declaration for p</span><span>
</span><span id="line-2170"></span><span class="hs-comment">-- (albeit with some &quot;...&quot; in it) when asked to show x</span><span>
</span><span id="line-2171"></span><span class="hs-comment">-- It returns the *immediate* parent.  So a datacon returns its tycon</span><span>
</span><span id="line-2172"></span><span class="hs-comment">-- but the tycon could be the associated type of a class, so it in turn</span><span>
</span><span id="line-2173"></span><span class="hs-comment">-- might have a parent.</span><span>
</span><span id="line-2174"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingParent_maybe"><span class="hs-identifier hs-type">tyThingParent_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-2175"></span><span id="tyThingParent_maybe"><span class="annot"><span class="annottext">tyThingParent_maybe :: TyThing -&gt; Maybe TyThing
</span><a href="GHC.Driver.Types.html#tyThingParent_maybe"><span class="hs-identifier hs-var hs-var">tyThingParent_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span id="local-6989586621680919101"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919101"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919101"><span class="hs-identifier hs-var">cl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2176"></span><span>    </span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621680919100"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919100"><span class="hs-identifier hs-var">dc</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; Maybe TyThing
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919100"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2177"></span><span>    </span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TyThing
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2178"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingParent_maybe"><span class="hs-identifier hs-var">tyThingParent_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621680919098"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919098"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe TyCon
</span><a href="GHC.Core.TyCon.html#tyConAssoc_maybe"><span class="hs-identifier hs-var">tyConAssoc_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919098"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2179"></span><span>                                      </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919096"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919096"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; Maybe TyThing
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919096"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2180"></span><span>                                      </span><span class="annot"><span class="annottext">Maybe TyCon
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TyThing
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2181"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingParent_maybe"><span class="hs-identifier hs-var">tyThingParent_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680919095"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919095"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Id -&gt; IdDetails
</span><a href="GHC.Types.Var.html#idDetails"><span class="hs-identifier hs-var">idDetails</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919095"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2182"></span><span>                                      </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelId"><span class="hs-identifier hs-type">RecSelId</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sel_tycon :: IdDetails -&gt; RecSelParent
</span><a href="GHC.Types.Id.Info.html#sel_tycon"><span class="hs-identifier hs-var">sel_tycon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelData"><span class="hs-identifier hs-type">RecSelData</span></a></span><span> </span><span id="local-6989586621680919092"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919092"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2183"></span><span>                                          </span><span class="annot"><span class="annottext">TyThing -&gt; Maybe TyThing
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919092"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2184"></span><span>                                      </span><span class="annot"><a href="GHC.Types.Id.Info.html#ClassOpId"><span class="hs-identifier hs-type">ClassOpId</span></a></span><span> </span><span id="local-6989586621680919091"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919091"><span class="hs-identifier hs-var">cls</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2185"></span><span>                                          </span><span class="annot"><span class="annottext">TyThing -&gt; Maybe TyThing
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; TyCon
</span><a href="GHC.Core.Class.html#classTyCon"><span class="hs-identifier hs-var hs-var">classTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919091"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2186"></span><span>                                      </span><span id="local-6989586621680919089"><span class="annot"><span class="annottext">IdDetails
</span><a href="#local-6989586621680919089"><span class="hs-identifier hs-var">_other</span></a></span></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TyThing
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2187"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingParent_maybe"><span class="hs-identifier hs-var">tyThingParent_maybe</span></a></span><span> </span><span id="local-6989586621680919088"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919088"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe TyThing
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2188"></span><span>
</span><span id="line-2189"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingsTyCoVars"><span class="hs-identifier hs-type">tyThingsTyCoVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#TyCoVarSet"><span class="hs-identifier hs-type">TyCoVarSet</span></a></span><span>
</span><span id="line-2190"></span><span id="tyThingsTyCoVars"><span class="annot"><span class="annottext">tyThingsTyCoVars :: [TyThing] -&gt; TyCoVarSet
</span><a href="GHC.Driver.Types.html#tyThingsTyCoVars"><span class="hs-identifier hs-var hs-var">tyThingsTyCoVars</span></a></span></span><span> </span><span id="local-6989586621680919087"><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919087"><span class="hs-identifier hs-var">tts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2191"></span><span>    </span><span class="annot"><span class="annottext">[TyCoVarSet] -&gt; TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSets"><span class="hs-identifier hs-var">unionVarSets</span></a></span><span> </span><span class="annot"><span class="annottext">([TyCoVarSet] -&gt; TyCoVarSet) -&gt; [TyCoVarSet] -&gt; TyCoVarSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; TyCoVarSet) -&gt; [TyThing] -&gt; [TyCoVarSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; TyCoVarSet
</span><a href="#local-6989586621680919085"><span class="hs-identifier hs-var">ttToVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919087"><span class="hs-identifier hs-var">tts</span></a></span><span>
</span><span id="line-2192"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-2193"></span><span>        </span><span id="local-6989586621680919085"><span class="annot"><span class="annottext">ttToVarSet :: TyThing -&gt; TyCoVarSet
</span><a href="#local-6989586621680919085"><span class="hs-identifier hs-var hs-var">ttToVarSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680919084"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919084"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TyCoVarSet) -&gt; Type -&gt; TyCoVarSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919084"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-2194"></span><span>        </span><span class="annot"><a href="#local-6989586621680919085"><span class="hs-identifier hs-var">ttToVarSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span id="local-6989586621680919081"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919081"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680919081"><span class="hs-identifier hs-var">cl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2195"></span><span>            </span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621680919080"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919080"><span class="hs-identifier hs-var">dc</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TyCoVarSet) -&gt; Type -&gt; TyCoVarSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConRepType"><span class="hs-identifier hs-var">dataConRepType</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919080"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-2196"></span><span>            </span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-2197"></span><span>        </span><span class="annot"><a href="#local-6989586621680919085"><span class="hs-identifier hs-var">ttToVarSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621680919077"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919077"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2198"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe Class
</span><a href="GHC.Core.TyCon.html#tyConClass_maybe"><span class="hs-identifier hs-var">tyConClass_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919077"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2199"></span><span>              </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919076"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919076"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#mkVarSet"><span class="hs-identifier hs-var">mkVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">([Id] -&gt; TyCoVarSet) -&gt; (Class -&gt; [Id]) -&gt; Class -&gt; TyCoVarSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">([Id], [FunDep Id]) -&gt; [Id]
forall a b. (a, b) -&gt; a
</span><a href="../../base/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">(([Id], [FunDep Id]) -&gt; [Id])
-&gt; (Class -&gt; ([Id], [FunDep Id])) -&gt; Class -&gt; [Id]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Class -&gt; ([Id], [FunDep Id])
</span><a href="GHC.Core.Class.html#classTvsFds"><span class="hs-identifier hs-var">classTvsFds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919076"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-2200"></span><span>              </span><span class="annot"><span class="annottext">Maybe Class
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TyCoVarSet) -&gt; Type -&gt; TyCoVarSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Type
</span><a href="GHC.Core.TyCon.html#tyConKind"><span class="hs-identifier hs-var hs-var">tyConKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919077"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2201"></span><span>        </span><span class="annot"><a href="#local-6989586621680919085"><span class="hs-identifier hs-var">ttToVarSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-type">ACoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-2202"></span><span>
</span><span id="line-2203"></span><span class="hs-comment">-- | The Names that a TyThing should bring into scope.  Used to build</span><span>
</span><span id="line-2204"></span><span class="hs-comment">-- the GlobalRdrEnv for the InteractiveContext.</span><span>
</span><span id="line-2205"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingAvailInfo"><span class="hs-identifier hs-type">tyThingAvailInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Avail.html#AvailInfo"><span class="hs-identifier hs-type">AvailInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2206"></span><span id="tyThingAvailInfo"><span class="annot"><span class="annottext">tyThingAvailInfo :: TyThing -&gt; [IfaceExport]
</span><a href="GHC.Driver.Types.html#tyThingAvailInfo"><span class="hs-identifier hs-var hs-var">tyThingAvailInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621680919072"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919072"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2207"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe Class
</span><a href="GHC.Core.TyCon.html#tyConClass_maybe"><span class="hs-identifier hs-var">tyConClass_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919072"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2208"></span><span>        </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919071"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919071"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [FieldLabel] -&gt; IfaceExport
</span><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-var">AvailTC</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919069"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919069"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Name) -&gt; [Id] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; [Id]
</span><a href="GHC.Core.Class.html#classMethods"><span class="hs-identifier hs-var">classMethods</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919071"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2209"></span><span>                                 </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; [Name]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(TyCon -&gt; Name) -&gt; [TyCon] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; [TyCon]
</span><a href="GHC.Core.Class.html#classATs"><span class="hs-identifier hs-var">classATs</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919071"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2210"></span><span>                             </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2211"></span><span>             </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680919069"><span class="annot"><span class="annottext">n :: Name
</span><a href="#local-6989586621680919069"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Class -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919071"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-2212"></span><span>        </span><span class="annot"><span class="annottext">Maybe Class
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [FieldLabel] -&gt; IfaceExport
</span><a href="GHC.Types.Avail.html#AvailTC"><span class="hs-identifier hs-var">AvailTC</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919066"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919066"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(DataCon -&gt; Name) -&gt; [DataCon] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">[DataCon]
</span><a href="#local-6989586621680919065"><span class="hs-identifier hs-var">dcs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621680919064"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2213"></span><span>             </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680919066"><span class="annot"><span class="annottext">n :: Name
</span><a href="#local-6989586621680919066"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919072"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2214"></span><span>                   </span><span id="local-6989586621680919065"><span class="annot"><span class="annottext">dcs :: [DataCon]
</span><a href="#local-6989586621680919065"><span class="hs-identifier hs-var hs-var">dcs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919072"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2215"></span><span>                   </span><span id="local-6989586621680919064"><span class="annot"><span class="annottext">flds :: [FieldLabel]
</span><a href="#local-6989586621680919064"><span class="hs-identifier hs-var hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [FieldLabel]
</span><a href="GHC.Core.TyCon.html#tyConFieldLabels"><span class="hs-identifier hs-var">tyConFieldLabels</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919072"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2216"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingAvailInfo"><span class="hs-identifier hs-var">tyThingAvailInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span id="local-6989586621680919062"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621680919062"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2217"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; IfaceExport) -&gt; [Name] -&gt; [IfaceExport]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; IfaceExport
</span><a href="GHC.Types.Avail.html#avail"><span class="hs-identifier hs-var">avail</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSyn -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621680919062"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(FieldLabel -&gt; Name) -&gt; [FieldLabel] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
forall a. FieldLbl a -&gt; a
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var hs-var">flSelector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSyn -&gt; [FieldLabel]
</span><a href="GHC.Core.PatSyn.html#patSynFieldLabels"><span class="hs-identifier hs-var">patSynFieldLabels</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621680919062"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2218"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingAvailInfo"><span class="hs-identifier hs-var">tyThingAvailInfo</span></a></span><span> </span><span id="local-6989586621680919058"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919058"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-2219"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; IfaceExport
</span><a href="GHC.Types.Avail.html#avail"><span class="hs-identifier hs-var">avail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919058"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2220"></span><span>
</span><span id="line-2221"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                TypeEnv
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2228"></span><span>
</span><span id="line-2229"></span><span class="hs-comment">-- | A map from 'Name's to 'TyThing's, constructed by typechecking</span><span>
</span><span id="line-2230"></span><span class="hs-comment">-- local declarations or interface files</span><span>
</span><span id="line-2231"></span><span class="hs-keyword">type</span><span> </span><span id="TypeEnv"><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-var">TypeEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-2232"></span><span>
</span><span id="line-2233"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyTypeEnv"><span class="hs-identifier hs-type">emptyTypeEnv</span></a></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2234"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier hs-type">typeEnvElts</span></a></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2235"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvTyCons"><span class="hs-identifier hs-type">typeEnvTyCons</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2236"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvCoAxioms"><span class="hs-identifier hs-type">typeEnvCoAxioms</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2237"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvIds"><span class="hs-identifier hs-type">typeEnvIds</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2238"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvPatSyns"><span class="hs-identifier hs-type">typeEnvPatSyns</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.PatSyn.html#PatSyn"><span class="hs-identifier hs-type">PatSyn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2239"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvDataCons"><span class="hs-identifier hs-type">typeEnvDataCons</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2240"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvClasses"><span class="hs-identifier hs-type">typeEnvClasses</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier hs-type">Class</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2241"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupTypeEnv"><span class="hs-identifier hs-type">lookupTypeEnv</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-2242"></span><span>
</span><span id="line-2243"></span><span id="emptyTypeEnv"><span class="annot"><span class="annottext">emptyTypeEnv :: TypeEnv
</span><a href="GHC.Driver.Types.html#emptyTypeEnv"><span class="hs-identifier hs-var hs-var">emptyTypeEnv</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv
forall a. NameEnv a
</span><a href="GHC.Types.Name.Env.html#emptyNameEnv"><span class="hs-identifier hs-var">emptyNameEnv</span></a></span><span>
</span><span id="line-2244"></span><span id="typeEnvElts"><span class="annot"><span class="annottext">typeEnvElts :: TypeEnv -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier hs-var hs-var">typeEnvElts</span></a></span></span><span>     </span><span id="local-6989586621680919057"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919057"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyThing]
forall a. NameEnv a -&gt; [a]
</span><a href="GHC.Types.Name.Env.html#nameEnvElts"><span class="hs-identifier hs-var">nameEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919057"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-2245"></span><span id="typeEnvTyCons"><span class="annot"><span class="annottext">typeEnvTyCons :: TypeEnv -&gt; [TyCon]
</span><a href="GHC.Driver.Types.html#typeEnvTyCons"><span class="hs-identifier hs-var hs-var">typeEnvTyCons</span></a></span></span><span>   </span><span id="local-6989586621680919055"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919055"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919054"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621680919054"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919054"><span class="hs-identifier hs-var">tc</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier hs-var">typeEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919055"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2246"></span><span id="typeEnvCoAxioms"><span class="annot"><span class="annottext">typeEnvCoAxioms :: TypeEnv -&gt; [CoAxiom Branched]
</span><a href="GHC.Driver.Types.html#typeEnvCoAxioms"><span class="hs-identifier hs-var hs-var">typeEnvCoAxioms</span></a></span></span><span> </span><span id="local-6989586621680919053"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919053"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680919052"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-type">ACoAxiom</span></a></span><span> </span><span id="local-6989586621680919052"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680919052"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier hs-var">typeEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919053"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2247"></span><span id="typeEnvIds"><span class="annot"><span class="annottext">typeEnvIds :: TypeEnv -&gt; [Id]
</span><a href="GHC.Driver.Types.html#typeEnvIds"><span class="hs-identifier hs-var hs-var">typeEnvIds</span></a></span></span><span>      </span><span id="local-6989586621680919051"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919051"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919050"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680919050"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919050"><span class="hs-identifier hs-var">id</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier hs-var">typeEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919051"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2248"></span><span id="typeEnvPatSyns"><span class="annot"><span class="annottext">typeEnvPatSyns :: TypeEnv -&gt; [PatSyn]
</span><a href="GHC.Driver.Types.html#typeEnvPatSyns"><span class="hs-identifier hs-var hs-var">typeEnvPatSyns</span></a></span></span><span>  </span><span id="local-6989586621680919049"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919049"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621680919048"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-type">PatSynCon</span></a></span><span> </span><span id="local-6989586621680919048"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621680919048"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier hs-var">typeEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919049"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2249"></span><span id="typeEnvDataCons"><span class="annot"><span class="annottext">typeEnvDataCons :: TypeEnv -&gt; [DataCon]
</span><a href="GHC.Driver.Types.html#typeEnvDataCons"><span class="hs-identifier hs-var hs-var">typeEnvDataCons</span></a></span></span><span> </span><span id="local-6989586621680919047"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919047"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919046"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621680919046"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680919046"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#typeEnvElts"><span class="hs-identifier hs-var">typeEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919047"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2250"></span><span id="typeEnvClasses"><span class="annot"><span class="annottext">typeEnvClasses :: TypeEnv -&gt; [Class]
</span><a href="GHC.Driver.Types.html#typeEnvClasses"><span class="hs-identifier hs-var hs-var">typeEnvClasses</span></a></span></span><span>  </span><span id="local-6989586621680919045"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919045"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919044"><span class="hs-identifier hs-var">cl</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680919043"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919043"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyCon]
</span><a href="GHC.Driver.Types.html#typeEnvTyCons"><span class="hs-identifier hs-var">typeEnvTyCons</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919045"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2251"></span><span>                            </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919044"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621680919044"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TyCon -&gt; Maybe Class
</span><a href="GHC.Core.TyCon.html#tyConClass_maybe"><span class="hs-identifier hs-var">tyConClass_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919043"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-2252"></span><span>
</span><span id="line-2253"></span><span class="annot"><a href="GHC.Driver.Types.html#mkTypeEnv"><span class="hs-identifier hs-type">mkTypeEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2254"></span><span id="mkTypeEnv"><span class="annot"><span class="annottext">mkTypeEnv :: [TyThing] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#mkTypeEnv"><span class="hs-identifier hs-var hs-var">mkTypeEnv</span></a></span></span><span> </span><span id="local-6989586621680919042"><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919042"><span class="hs-identifier hs-var">things</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [TyThing] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#extendTypeEnvList"><span class="hs-identifier hs-var">extendTypeEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="GHC.Driver.Types.html#emptyTypeEnv"><span class="hs-identifier hs-var">emptyTypeEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919042"><span class="hs-identifier hs-var">things</span></a></span><span>
</span><span id="line-2255"></span><span>
</span><span id="line-2256"></span><span class="annot"><a href="GHC.Driver.Types.html#mkTypeEnvWithImplicits"><span class="hs-identifier hs-type">mkTypeEnvWithImplicits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2257"></span><span id="mkTypeEnvWithImplicits"><span class="annot"><span class="annottext">mkTypeEnvWithImplicits :: [TyThing] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#mkTypeEnvWithImplicits"><span class="hs-identifier hs-var hs-var">mkTypeEnvWithImplicits</span></a></span></span><span> </span><span id="local-6989586621680919041"><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919041"><span class="hs-identifier hs-var">things</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2258"></span><span>  </span><span class="annot"><span class="annottext">[TyThing] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#mkTypeEnv"><span class="hs-identifier hs-var">mkTypeEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919041"><span class="hs-identifier hs-var">things</span></a></span><span>
</span><span id="line-2259"></span><span>    </span><span class="annot"><span class="annottext">TypeEnv -&gt; TypeEnv -&gt; TypeEnv
forall a. NameEnv a -&gt; NameEnv a -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#plusNameEnv"><span class="hs-operator hs-var">`plusNameEnv`</span></a></span><span>
</span><span id="line-2260"></span><span>  </span><span class="annot"><span class="annottext">[TyThing] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#mkTypeEnv"><span class="hs-identifier hs-var">mkTypeEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TyThing -&gt; [TyThing]) -&gt; [TyThing] -&gt; [TyThing]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitTyThings"><span class="hs-identifier hs-var">implicitTyThings</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919041"><span class="hs-identifier hs-var">things</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2261"></span><span>
</span><span id="line-2262"></span><span class="annot"><a href="GHC.Driver.Types.html#typeEnvFromEntities"><span class="hs-identifier hs-type">typeEnvFromEntities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInst"><span class="hs-identifier hs-type">FamInst</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2263"></span><span id="typeEnvFromEntities"><span class="annot"><span class="annottext">typeEnvFromEntities :: [Id] -&gt; [TyCon] -&gt; [FamInst] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#typeEnvFromEntities"><span class="hs-identifier hs-var hs-var">typeEnvFromEntities</span></a></span></span><span> </span><span id="local-6989586621680919039"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919039"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span id="local-6989586621680919038"><span class="annot"><span class="annottext">[TyCon]
</span><a href="#local-6989586621680919038"><span class="hs-identifier hs-var">tcs</span></a></span></span><span> </span><span id="local-6989586621680919037"><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621680919037"><span class="hs-identifier hs-var">famInsts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2264"></span><span>  </span><span class="annot"><span class="annottext">[TyThing] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#mkTypeEnv"><span class="hs-identifier hs-var">mkTypeEnv</span></a></span><span> </span><span class="hs-special">(</span><span>   </span><span class="annot"><span class="annottext">(Id -&gt; TyThing) -&gt; [Id] -&gt; [TyThing]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919039"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-2265"></span><span>             </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(TyCon -&gt; TyThing) -&gt; [TyCon] -&gt; [TyThing]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-var">ATyCon</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCon]
</span><a href="#local-6989586621680919036"><span class="hs-identifier hs-var">all_tcs</span></a></span><span>
</span><span id="line-2266"></span><span>             </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(TyCon -&gt; [TyThing]) -&gt; [TyCon] -&gt; [TyThing]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [TyThing]
</span><a href="GHC.Driver.Types.html#implicitTyConThings"><span class="hs-identifier hs-var">implicitTyConThings</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCon]
</span><a href="#local-6989586621680919036"><span class="hs-identifier hs-var">all_tcs</span></a></span><span>
</span><span id="line-2267"></span><span>             </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(FamInst -&gt; TyThing) -&gt; [FamInst] -&gt; [TyThing]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-var">ACoAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">(CoAxiom Branched -&gt; TyThing)
-&gt; (FamInst -&gt; CoAxiom Branched) -&gt; FamInst -&gt; TyThing
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; CoAxiom Branched
forall (br :: BranchFlag). CoAxiom br -&gt; CoAxiom Branched
</span><a href="GHC.Core.Coercion.Axiom.html#toBranchedAxiom"><span class="hs-identifier hs-var">toBranchedAxiom</span></a></span><span> </span><span class="annot"><span class="annottext">(CoAxiom Unbranched -&gt; CoAxiom Branched)
-&gt; (FamInst -&gt; CoAxiom Unbranched) -&gt; FamInst -&gt; CoAxiom Branched
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FamInst -&gt; CoAxiom Unbranched
</span><a href="GHC.Core.FamInstEnv.html#famInstAxiom"><span class="hs-identifier hs-var">famInstAxiom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621680919037"><span class="hs-identifier hs-var">famInsts</span></a></span><span>
</span><span id="line-2268"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-2269"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2270"></span><span>  </span><span id="local-6989586621680919036"><span class="annot"><span class="annottext">all_tcs :: [TyCon]
</span><a href="#local-6989586621680919036"><span class="hs-identifier hs-var hs-var">all_tcs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyCon]
</span><a href="#local-6989586621680919038"><span class="hs-identifier hs-var">tcs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyCon] -&gt; [TyCon] -&gt; [TyCon]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[FamInst] -&gt; [TyCon]
</span><a href="GHC.Core.FamInstEnv.html#famInstsRepTyCons"><span class="hs-identifier hs-var">famInstsRepTyCons</span></a></span><span> </span><span class="annot"><span class="annottext">[FamInst]
</span><a href="#local-6989586621680919037"><span class="hs-identifier hs-var">famInsts</span></a></span><span>
</span><span id="line-2271"></span><span>
</span><span id="line-2272"></span><span id="lookupTypeEnv"><span class="annot"><span class="annottext">lookupTypeEnv :: TypeEnv -&gt; Name -&gt; Maybe TyThing
</span><a href="GHC.Driver.Types.html#lookupTypeEnv"><span class="hs-identifier hs-var hs-var">lookupTypeEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; Name -&gt; Maybe TyThing
forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span>
</span><span id="line-2273"></span><span>
</span><span id="line-2274"></span><span class="hs-comment">-- Extend the type environment</span><span>
</span><span id="line-2275"></span><span class="annot"><a href="GHC.Driver.Types.html#extendTypeEnv"><span class="hs-identifier hs-type">extendTypeEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2276"></span><span id="extendTypeEnv"><span class="annot"><span class="annottext">extendTypeEnv :: TypeEnv -&gt; TyThing -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#extendTypeEnv"><span class="hs-identifier hs-var hs-var">extendTypeEnv</span></a></span></span><span> </span><span id="local-6989586621680919032"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919032"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680919031"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919031"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; Name -&gt; TyThing -&gt; TypeEnv
forall a. NameEnv a -&gt; Name -&gt; a -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#extendNameEnv"><span class="hs-identifier hs-var">extendNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919032"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919031"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919031"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-2277"></span><span>
</span><span id="line-2278"></span><span class="annot"><a href="GHC.Driver.Types.html#extendTypeEnvList"><span class="hs-identifier hs-type">extendTypeEnvList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2279"></span><span id="extendTypeEnvList"><span class="annot"><span class="annottext">extendTypeEnvList :: TypeEnv -&gt; [TyThing] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#extendTypeEnvList"><span class="hs-identifier hs-var hs-var">extendTypeEnvList</span></a></span></span><span> </span><span id="local-6989586621680919029"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919029"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680919028"><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919028"><span class="hs-identifier hs-var">things</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypeEnv -&gt; TyThing -&gt; TypeEnv) -&gt; TypeEnv -&gt; [TyThing] -&gt; TypeEnv
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; TyThing -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#extendTypeEnv"><span class="hs-identifier hs-var">extendTypeEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919029"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621680919028"><span class="hs-identifier hs-var">things</span></a></span><span>
</span><span id="line-2280"></span><span>
</span><span id="line-2281"></span><span class="annot"><a href="GHC.Driver.Types.html#extendTypeEnvWithIds"><span class="hs-identifier hs-type">extendTypeEnvWithIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2282"></span><span id="extendTypeEnvWithIds"><span class="annot"><span class="annottext">extendTypeEnvWithIds :: TypeEnv -&gt; [Id] -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#extendTypeEnvWithIds"><span class="hs-identifier hs-var hs-var">extendTypeEnvWithIds</span></a></span></span><span> </span><span id="local-6989586621680919027"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919027"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680919026"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919026"><span class="hs-identifier hs-var">ids</span></a></span></span><span>
</span><span id="line-2283"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; [(Name, TyThing)] -&gt; TypeEnv
forall a. NameEnv a -&gt; [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#extendNameEnvList"><span class="hs-identifier hs-var">extendNameEnvList</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919027"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919024"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TyThing
</span><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919024"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680919024"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680919024"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621680919026"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2284"></span><span>
</span><span id="line-2285"></span><span class="annot"><a href="GHC.Driver.Types.html#plusTypeEnv"><span class="hs-identifier hs-type">plusTypeEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2286"></span><span id="plusTypeEnv"><span class="annot"><span class="annottext">plusTypeEnv :: TypeEnv -&gt; TypeEnv -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#plusTypeEnv"><span class="hs-identifier hs-var hs-var">plusTypeEnv</span></a></span></span><span> </span><span id="local-6989586621680919023"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919023"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span id="local-6989586621680919022"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919022"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; TypeEnv -&gt; TypeEnv
forall a. NameEnv a -&gt; NameEnv a -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#plusNameEnv"><span class="hs-identifier hs-var">plusNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919023"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919022"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-2287"></span><span>
</span><span id="line-2288"></span><span class="hs-comment">-- | Find the 'TyThing' for the given 'Name' by using all the resources</span><span>
</span><span id="line-2289"></span><span class="hs-comment">-- at our disposal: the compiled modules in the 'HomePackageTable' and the</span><span>
</span><span id="line-2290"></span><span class="hs-comment">-- compiled modules in other packages that live in 'PackageTypeEnv'. Note</span><span>
</span><span id="line-2291"></span><span class="hs-comment">-- that this does NOT look up the 'TyThing' in the module being compiled: you</span><span>
</span><span id="line-2292"></span><span class="hs-comment">-- have to do that yourself, if desired</span><span>
</span><span id="line-2293"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupType"><span class="hs-identifier hs-type">lookupType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-2294"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span>
</span><span id="line-2295"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#PackageTypeEnv"><span class="hs-identifier hs-type">PackageTypeEnv</span></a></span><span>
</span><span id="line-2296"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-2297"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-2298"></span><span>
</span><span id="line-2299"></span><span id="lookupType"><span class="annot"><span class="annottext">lookupType :: DynFlags -&gt; HomePackageTable -&gt; TypeEnv -&gt; Name -&gt; Maybe TyThing
</span><a href="GHC.Driver.Types.html#lookupType"><span class="hs-identifier hs-var hs-var">lookupType</span></a></span></span><span> </span><span id="local-6989586621680919021"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919021"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621680919020"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919020"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span id="local-6989586621680919019"><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919019"><span class="hs-identifier hs-var">pte</span></a></span></span><span> </span><span id="local-6989586621680919018"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919018"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-2300"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GhcMode -&gt; Bool
</span><a href="GHC.Driver.Session.html#isOneShot"><span class="hs-identifier hs-var">isOneShot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; GhcMode
</span><a href="GHC.Driver.Session.html#ghcMode"><span class="hs-identifier hs-var hs-var">ghcMode</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919021"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- in one-shot, we don't use the HPT</span><span>
</span><span id="line-2301"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; Name -&gt; Maybe TyThing
forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919019"><span class="hs-identifier hs-var">pte</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919018"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2302"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-2303"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HomePackageTable -&gt; Module -&gt; Maybe HomeModInfo
</span><a href="GHC.Driver.Types.html#lookupHptByModule"><span class="hs-identifier hs-var">lookupHptByModule</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919020"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680919017"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2304"></span><span>       </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680919016"><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919016"><span class="hs-identifier hs-var">hm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; Name -&gt; Maybe TyThing
forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModDetails -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#md_types"><span class="hs-identifier hs-var hs-var">md_types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeModInfo -&gt; ModDetails
</span><a href="GHC.Driver.Types.html#hm_details"><span class="hs-identifier hs-var hs-var">hm_details</span></a></span><span> </span><span class="annot"><span class="annottext">HomeModInfo
</span><a href="#local-6989586621680919016"><span class="hs-identifier hs-var">hm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919018"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2305"></span><span>       </span><span class="annot"><span class="annottext">Maybe HomeModInfo
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeEnv -&gt; Name -&gt; Maybe TyThing
forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeEnv
</span><a href="#local-6989586621680919019"><span class="hs-identifier hs-var">pte</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919018"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2306"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2307"></span><span>    </span><span id="local-6989586621680919017"><span class="annot"><span class="annottext">mod :: Module
</span><a href="#local-6989586621680919017"><span class="hs-identifier hs-var hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT2</span><span class="hs-special">(</span><span> </span><span class="hs-identifier">isExternalName</span><span> </span><span class="hs-identifier">name</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ppr</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2308"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isHoleName"><span class="hs-identifier hs-var">isHoleName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919018"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2309"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; ModuleName -&gt; Module
</span><a href="GHC.Driver.Session.html#mkHomeModule"><span class="hs-identifier hs-var">mkHomeModule</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919021"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919018"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2310"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919018"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2311"></span><span>
</span><span id="line-2312"></span><span class="hs-comment">-- | As 'lookupType', but with a marginally easier-to-use interface</span><span>
</span><span id="line-2313"></span><span class="hs-comment">-- if you have a 'HscEnv'</span><span>
</span><span id="line-2314"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupTypeHscEnv"><span class="hs-identifier hs-type">lookupTypeHscEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HscEnv"><span class="hs-identifier hs-type">HscEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2315"></span><span id="lookupTypeHscEnv"><span class="annot"><span class="annottext">lookupTypeHscEnv :: HscEnv -&gt; Name -&gt; IO (Maybe TyThing)
</span><a href="GHC.Driver.Types.html#lookupTypeHscEnv"><span class="hs-identifier hs-var hs-var">lookupTypeHscEnv</span></a></span></span><span> </span><span id="local-6989586621680919013"><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919013"><span class="hs-identifier hs-var">hsc_env</span></a></span></span><span> </span><span id="local-6989586621680919012"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919012"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2316"></span><span>    </span><span id="local-6989586621680919011"><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621680919011"><span class="hs-identifier hs-var">eps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef ExternalPackageState -&gt; IO ExternalPackageState
forall a. IORef a -&gt; IO a
</span><a href="../../base/src/GHC.IORef.html#readIORef"><span class="hs-identifier hs-var">readIORef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscEnv -&gt; IORef ExternalPackageState
</span><a href="GHC.Driver.Types.html#hsc_EPS"><span class="hs-identifier hs-var hs-var">hsc_EPS</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919013"><span class="hs-identifier hs-var">hsc_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2317"></span><span>    </span><span class="annot"><span class="annottext">Maybe TyThing -&gt; IO (Maybe TyThing)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe TyThing -&gt; IO (Maybe TyThing))
-&gt; Maybe TyThing -&gt; IO (Maybe TyThing)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24%21"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; HomePackageTable -&gt; TypeEnv -&gt; Name -&gt; Maybe TyThing
</span><a href="GHC.Driver.Types.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680919009"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621680919008"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExternalPackageState -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#eps_PTE"><span class="hs-identifier hs-var hs-var">eps_PTE</span></a></span><span> </span><span class="annot"><span class="annottext">ExternalPackageState
</span><a href="#local-6989586621680919011"><span class="hs-identifier hs-var">eps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680919012"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2318"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2319"></span><span>    </span><span id="local-6989586621680919009"><span class="annot"><span class="annottext">dflags :: DynFlags
</span><a href="#local-6989586621680919009"><span class="hs-identifier hs-var hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#hsc_dflags"><span class="hs-identifier hs-var hs-var">hsc_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919013"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-2320"></span><span>    </span><span id="local-6989586621680919008"><span class="annot"><span class="annottext">hpt :: HomePackageTable
</span><a href="#local-6989586621680919008"><span class="hs-identifier hs-var hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HscEnv -&gt; HomePackageTable
</span><a href="GHC.Driver.Types.html#hsc_HPT"><span class="hs-identifier hs-var hs-var">hsc_HPT</span></a></span><span> </span><span class="annot"><span class="annottext">HscEnv
</span><a href="#local-6989586621680919013"><span class="hs-identifier hs-var">hsc_env</span></a></span><span>
</span><span id="line-2321"></span><span>
</span><span id="line-2322"></span><span class="hs-comment">-- | Get the 'TyCon' from a 'TyThing' if it is a type constructor thing. Panics otherwise</span><span>
</span><span id="line-2323"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingTyCon"><span class="hs-identifier hs-type">tyThingTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-2324"></span><span id="tyThingTyCon"><span class="annot"><span class="annottext">tyThingTyCon :: HasDebugCallStack =&gt; TyThing -&gt; TyCon
</span><a href="GHC.Driver.Types.html#tyThingTyCon"><span class="hs-identifier hs-var hs-var">tyThingTyCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621680919002"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919002"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621680919002"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2325"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingTyCon"><span class="hs-identifier hs-var">tyThingTyCon</span></a></span><span> </span><span id="local-6989586621680919001"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919001"><span class="hs-identifier hs-var">other</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; TyCon
forall a. HasCallStack =&gt; FieldName -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;tyThingTyCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680919001"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2326"></span><span>
</span><span id="line-2327"></span><span class="hs-comment">-- | Get the 'CoAxiom' from a 'TyThing' if it is a coercion axiom thing. Panics otherwise</span><span>
</span><span id="line-2328"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingCoAxiom"><span class="hs-identifier hs-type">tyThingCoAxiom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span>
</span><span id="line-2329"></span><span id="tyThingCoAxiom"><span class="annot"><span class="annottext">tyThingCoAxiom :: HasDebugCallStack =&gt; TyThing -&gt; CoAxiom Branched
</span><a href="GHC.Driver.Types.html#tyThingCoAxiom"><span class="hs-identifier hs-var hs-var">tyThingCoAxiom</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ACoAxiom"><span class="hs-identifier hs-type">ACoAxiom</span></a></span><span> </span><span id="local-6989586621680918995"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680918995"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621680918995"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-2330"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingCoAxiom"><span class="hs-identifier hs-var">tyThingCoAxiom</span></a></span><span> </span><span id="local-6989586621680918994"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918994"><span class="hs-identifier hs-var">other</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; CoAxiom Branched
forall a. HasCallStack =&gt; FieldName -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;tyThingCoAxiom&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918994"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2331"></span><span>
</span><span id="line-2332"></span><span class="hs-comment">-- | Get the 'DataCon' from a 'TyThing' if it is a data constructor thing. Panics otherwise</span><span>
</span><span id="line-2333"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingDataCon"><span class="hs-identifier hs-type">tyThingDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-2334"></span><span id="tyThingDataCon"><span class="annot"><span class="annottext">tyThingDataCon :: HasDebugCallStack =&gt; TyThing -&gt; DataCon
</span><a href="GHC.Driver.Types.html#tyThingDataCon"><span class="hs-identifier hs-var hs-var">tyThingDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621680918989"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680918989"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680918989"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-2335"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingDataCon"><span class="hs-identifier hs-var">tyThingDataCon</span></a></span><span> </span><span id="local-6989586621680918988"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918988"><span class="hs-identifier hs-var">other</span></a></span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; DataCon
forall a. HasCallStack =&gt; FieldName -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;tyThingDataCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918988"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2336"></span><span>
</span><span id="line-2337"></span><span class="hs-comment">-- | Get the 'ConLike' from a 'TyThing' if it is a data constructor thing.</span><span>
</span><span id="line-2338"></span><span class="hs-comment">-- Panics otherwise</span><span>
</span><span id="line-2339"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingConLike"><span class="hs-identifier hs-type">tyThingConLike</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier hs-type">ConLike</span></a></span><span>
</span><span id="line-2340"></span><span id="tyThingConLike"><span class="annot"><span class="annottext">tyThingConLike :: HasDebugCallStack =&gt; TyThing -&gt; ConLike
</span><a href="GHC.Driver.Types.html#tyThingConLike"><span class="hs-identifier hs-var hs-var">tyThingConLike</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span id="local-6989586621680918983"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680918983"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621680918983"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-2341"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingConLike"><span class="hs-identifier hs-var">tyThingConLike</span></a></span><span> </span><span id="local-6989586621680918982"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918982"><span class="hs-identifier hs-var">other</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; ConLike
forall a. HasCallStack =&gt; FieldName -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;tyThingConLike&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918982"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2342"></span><span>
</span><span id="line-2343"></span><span class="hs-comment">-- | Get the 'Id' from a 'TyThing' if it is a id *or* data constructor thing. Panics otherwise</span><span>
</span><span id="line-2344"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingId"><span class="hs-identifier hs-type">tyThingId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-2345"></span><span id="tyThingId"><span class="annot"><span class="annottext">tyThingId :: HasDebugCallStack =&gt; TyThing -&gt; Id
</span><a href="GHC.Driver.Types.html#tyThingId"><span class="hs-identifier hs-var hs-var">tyThingId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AnId"><span class="hs-identifier hs-type">AnId</span></a></span><span> </span><span id="local-6989586621680918977"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680918977"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621680918977"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-2346"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingId"><span class="hs-identifier hs-var">tyThingId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621680918976"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680918976"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Id
</span><a href="GHC.Core.DataCon.html#dataConWrapId"><span class="hs-identifier hs-var">dataConWrapId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621680918976"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-2347"></span><span class="annot"><a href="GHC.Driver.Types.html#tyThingId"><span class="hs-identifier hs-var">tyThingId</span></a></span><span> </span><span id="local-6989586621680918974"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918974"><span class="hs-identifier hs-var">other</span></a></span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; Id
forall a. HasCallStack =&gt; FieldName -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;tyThingId&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621680918974"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2348"></span><span>
</span><span id="line-2349"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{MonadThings and friends}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2356"></span><span>
</span><span id="line-2357"></span><span class="hs-comment">-- | Class that abstracts out the common ability of the monads in GHC</span><span>
</span><span id="line-2358"></span><span class="hs-comment">-- to lookup a 'TyThing' in the monadic environment by 'Name'. Provides</span><span>
</span><span id="line-2359"></span><span class="hs-comment">-- a number of related convenience functions for accessing particular</span><span>
</span><span id="line-2360"></span><span class="hs-comment">-- kinds of 'TyThing'</span><span>
</span><span id="line-2361"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920613"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MonadThings"><span class="annot"><a href="GHC.Driver.Types.html#MonadThings"><span class="hs-identifier hs-var">MonadThings</span></a></span></span><span> </span><span id="local-6989586621680920613"><span class="annot"><a href="#local-6989586621680920613"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2362"></span><span>        </span><span id="lookupThing"><span class="annot"><a href="GHC.Driver.Types.html#lookupThing"><span class="hs-identifier hs-type">lookupThing</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920613"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span>
</span><span id="line-2363"></span><span>
</span><span id="line-2364"></span><span>        </span><span id="lookupId"><span class="annot"><a href="GHC.Driver.Types.html#lookupId"><span class="hs-identifier hs-type">lookupId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920613"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-2365"></span><span>        </span><span id="local-6989586621680918970"><span class="annot"><a href="GHC.Driver.Types.html#lookupId"><span class="hs-identifier hs-var hs-var">lookupId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; Id) -&gt; m TyThing -&gt; m Id
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../base/src/GHC.Base.html#liftM"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TyThing -&gt; Id
TyThing -&gt; Id
</span><a href="GHC.Driver.Types.html#tyThingId"><span class="hs-identifier hs-var">tyThingId</span></a></span><span> </span><span class="annot"><span class="annottext">(m TyThing -&gt; m Id) -&gt; (Name -&gt; m TyThing) -&gt; Name -&gt; m Id
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m TyThing
forall (m :: * -&gt; *). MonadThings m =&gt; Name -&gt; m TyThing
</span><a href="GHC.Driver.Types.html#lookupThing"><span class="hs-identifier hs-var">lookupThing</span></a></span></span><span>
</span><span id="line-2366"></span><span>
</span><span id="line-2367"></span><span>        </span><span id="lookupDataCon"><span class="annot"><a href="GHC.Driver.Types.html#lookupDataCon"><span class="hs-identifier hs-type">lookupDataCon</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920613"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-2368"></span><span>        </span><span id="local-6989586621680918964"><span class="annot"><a href="GHC.Driver.Types.html#lookupDataCon"><span class="hs-identifier hs-var hs-var">lookupDataCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; DataCon) -&gt; m TyThing -&gt; m DataCon
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../base/src/GHC.Base.html#liftM"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TyThing -&gt; DataCon
TyThing -&gt; DataCon
</span><a href="GHC.Driver.Types.html#tyThingDataCon"><span class="hs-identifier hs-var">tyThingDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">(m TyThing -&gt; m DataCon)
-&gt; (Name -&gt; m TyThing) -&gt; Name -&gt; m DataCon
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m TyThing
forall (m :: * -&gt; *). MonadThings m =&gt; Name -&gt; m TyThing
</span><a href="GHC.Driver.Types.html#lookupThing"><span class="hs-identifier hs-var">lookupThing</span></a></span></span><span>
</span><span id="line-2369"></span><span>
</span><span id="line-2370"></span><span>        </span><span id="lookupTyCon"><span class="annot"><a href="GHC.Driver.Types.html#lookupTyCon"><span class="hs-identifier hs-type">lookupTyCon</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920613"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-2371"></span><span>        </span><span id="local-6989586621680918958"><span class="annot"><a href="GHC.Driver.Types.html#lookupTyCon"><span class="hs-identifier hs-var hs-var">lookupTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyThing -&gt; TyCon) -&gt; m TyThing -&gt; m TyCon
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="../../base/src/GHC.Base.html#liftM"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; TyThing -&gt; TyCon
TyThing -&gt; TyCon
</span><a href="GHC.Driver.Types.html#tyThingTyCon"><span class="hs-identifier hs-var">tyThingTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">(m TyThing -&gt; m TyCon) -&gt; (Name -&gt; m TyThing) -&gt; Name -&gt; m TyCon
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m TyThing
forall (m :: * -&gt; *). MonadThings m =&gt; Name -&gt; m TyThing
</span><a href="GHC.Driver.Types.html#lookupThing"><span class="hs-identifier hs-var">lookupThing</span></a></span></span><span>
</span><span id="line-2372"></span><span>
</span><span id="line-2373"></span><span class="hs-comment">-- Instance used in GHC.HsToCore.Quote</span><span>
</span><span id="line-2374"></span><span id="local-6989586621680920606"><span id="local-6989586621680920607"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918944"><span id="local-6989586621680918946"><span id="local-6989586621680918948"><span class="annot"><a href="GHC.Driver.Types.html#MonadThings"><span class="hs-identifier hs-type">MonadThings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920607"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#MonadThings"><span class="hs-identifier hs-type">MonadThings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../transformers/src/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920606"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920607"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2375"></span><span>  </span><span id="local-6989586621680918938"><span class="annot"><span class="annottext">lookupThing :: Name -&gt; ReaderT s m TyThing
</span><a href="#local-6989586621680918938"><span class="hs-identifier hs-var hs-var hs-var hs-var">lookupThing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m TyThing -&gt; ReaderT s m TyThing
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(m TyThing -&gt; ReaderT s m TyThing)
-&gt; (Name -&gt; m TyThing) -&gt; Name -&gt; ReaderT s m TyThing
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m TyThing
forall (m :: * -&gt; *). MonadThings m =&gt; Name -&gt; m TyThing
</span><a href="GHC.Driver.Types.html#lookupThing"><span class="hs-identifier hs-var">lookupThing</span></a></span></span></span><span>
</span><span id="line-2376"></span><span>
</span><span id="line-2377"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Auxiliary types}
*                                                                      *
************************************************************************

These types are defined here because they are mentioned in ModDetails,
but they are mostly elaborated elsewhere
-}</span><span>
</span><span id="line-2387"></span><span>
</span><span id="line-2388"></span><span class="hs-comment">------------------ Warnings -------------------------</span><span>
</span><span id="line-2389"></span><span class="hs-comment">-- | Warning information for a module</span><span>
</span><span id="line-2390"></span><span class="hs-keyword">data</span><span> </span><span id="Warnings"><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-var">Warnings</span></a></span></span><span>
</span><span id="line-2391"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoWarnings"><span class="annot"><a href="GHC.Driver.Types.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span></span><span>                          </span><span class="hs-comment">-- ^ Nothing deprecated</span><span>
</span><span id="line-2392"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WarnAll"><span class="annot"><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-var">WarnAll</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a></span><span>                  </span><span class="hs-comment">-- ^ Whole module deprecated</span><span>
</span><span id="line-2393"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WarnSome"><span class="annot"><a href="GHC.Driver.Types.html#WarnSome"><span class="hs-identifier hs-var">WarnSome</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Types.Basic.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>     </span><span class="hs-comment">-- ^ Some specific things deprecated</span><span>
</span><span id="line-2394"></span><span>
</span><span id="line-2395"></span><span>     </span><span class="hs-comment">-- Only an OccName is needed because</span><span>
</span><span id="line-2396"></span><span>     </span><span class="hs-comment">--    (1) a deprecation always applies to a binding</span><span>
</span><span id="line-2397"></span><span>     </span><span class="hs-comment">--        defined in the module in which the deprecation appears.</span><span>
</span><span id="line-2398"></span><span>     </span><span class="hs-comment">--    (2) deprecations are only reported outside the defining module.</span><span>
</span><span id="line-2399"></span><span>     </span><span class="hs-comment">--        this is important because, otherwise, if we saw something like</span><span>
</span><span id="line-2400"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-2401"></span><span>     </span><span class="hs-comment">--        {-# DEPRECATED f &quot;&quot; #-}</span><span>
</span><span id="line-2402"></span><span>     </span><span class="hs-comment">--        f = ...</span><span>
</span><span id="line-2403"></span><span>     </span><span class="hs-comment">--        h = f</span><span>
</span><span id="line-2404"></span><span>     </span><span class="hs-comment">--        g = let f = undefined in f</span><span>
</span><span id="line-2405"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-2406"></span><span>     </span><span class="hs-comment">--        we'd need more information than an OccName to know to say something</span><span>
</span><span id="line-2407"></span><span>     </span><span class="hs-comment">--        about the use of f in h but not the use of the locally bound f in g</span><span>
</span><span id="line-2408"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-2409"></span><span>     </span><span class="hs-comment">--        however, because we only report about deprecations from the outside,</span><span>
</span><span id="line-2410"></span><span>     </span><span class="hs-comment">--        and a module can only export one value called f,</span><span>
</span><span id="line-2411"></span><span>     </span><span class="hs-comment">--        an OccName suffices.</span><span>
</span><span id="line-2412"></span><span>     </span><span class="hs-comment">--</span><span>
</span><span id="line-2413"></span><span>     </span><span class="hs-comment">--        this is in contrast with fixity declarations, where we need to map</span><span>
</span><span id="line-2414"></span><span>     </span><span class="hs-comment">--        a Name to its fixity declaration.</span><span>
</span><span id="line-2415"></span><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621680918927"><span id="local-6989586621680918933"><span class="annot"><span class="annottext">Warnings -&gt; Warnings -&gt; Bool
(Warnings -&gt; Warnings -&gt; Bool)
-&gt; (Warnings -&gt; Warnings -&gt; Bool) -&gt; Eq Warnings
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Warnings -&gt; Warnings -&gt; Bool
$c/= :: Warnings -&gt; Warnings -&gt; Bool
== :: Warnings -&gt; Warnings -&gt; Bool
$c== :: Warnings -&gt; Warnings -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2416"></span><span>
</span><span id="line-2417"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918923"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2418"></span><span>    </span><span id="local-6989586621680918911"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; Warnings -&gt; IO ()
</span><a href="#local-6989586621680918911"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621680918910"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918910"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Driver.Types.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918910"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-2419"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621680918908"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918908"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-type">WarnAll</span></a></span><span> </span><span id="local-6989586621680918907"><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918907"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2420"></span><span>            </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918908"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-2421"></span><span>            </span><span class="annot"><span class="annottext">BinHandle -&gt; WarningTxt -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918908"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918907"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2422"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621680918906"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918906"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnSome"><span class="hs-identifier hs-type">WarnSome</span></a></span><span> </span><span id="local-6989586621680918905"><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918905"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2423"></span><span>            </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918906"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-2424"></span><span>            </span><span class="annot"><span class="annottext">BinHandle -&gt; [(OccName, WarningTxt)] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918906"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918905"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-2425"></span><span>
</span><span id="line-2426"></span><span>    </span><span id="local-6989586621680918890"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO Warnings
</span><a href="#local-6989586621680918890"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621680918889"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918889"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2427"></span><span>            </span><span id="local-6989586621680918888"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918888"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918889"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2428"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918888"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2429"></span><span>              </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Warnings -&gt; IO Warnings
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Driver.Types.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span>
</span><span id="line-2430"></span><span>              </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621680918886"><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918886"><span class="hs-identifier hs-var">aa</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO WarningTxt
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918889"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2431"></span><span>                      </span><span class="annot"><span class="annottext">Warnings -&gt; IO Warnings
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningTxt -&gt; Warnings
</span><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-var">WarnAll</span></a></span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918886"><span class="hs-identifier hs-var">aa</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2432"></span><span>              </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621680918885"><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918885"><span class="hs-identifier hs-var">aa</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [(OccName, WarningTxt)]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918889"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2433"></span><span>                      </span><span class="annot"><span class="annottext">Warnings -&gt; IO Warnings
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(OccName, WarningTxt)] -&gt; Warnings
</span><a href="GHC.Driver.Types.html#WarnSome"><span class="hs-identifier hs-var">WarnSome</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918885"><span class="hs-identifier hs-var">aa</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2434"></span><span>
</span><span id="line-2435"></span><span class="hs-comment">-- | Constructs the cache for the 'mi_warn_fn' field of a 'ModIface'</span><span>
</span><span id="line-2436"></span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceWarnCache"><span class="hs-identifier hs-type">mkIfaceWarnCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a></span><span>
</span><span id="line-2437"></span><span id="mkIfaceWarnCache"><span class="annot"><span class="annottext">mkIfaceWarnCache :: Warnings -&gt; OccName -&gt; Maybe WarningTxt
</span><a href="GHC.Driver.Types.html#mkIfaceWarnCache"><span class="hs-identifier hs-var hs-var">mkIfaceWarnCache</span></a></span></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Driver.Types.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe WarningTxt
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2438"></span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceWarnCache"><span class="hs-identifier hs-var">mkIfaceWarnCache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-type">WarnAll</span></a></span><span> </span><span id="local-6989586621680918884"><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918884"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WarningTxt -&gt; Maybe WarningTxt
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918884"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2439"></span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceWarnCache"><span class="hs-identifier hs-var">mkIfaceWarnCache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnSome"><span class="hs-identifier hs-type">WarnSome</span></a></span><span> </span><span id="local-6989586621680918883"><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918883"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccEnv WarningTxt -&gt; OccName -&gt; Maybe WarningTxt
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(OccName, WarningTxt)] -&gt; OccEnv WarningTxt
forall a. [(OccName, a)] -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#mkOccEnv"><span class="hs-identifier hs-var">mkOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918883"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2440"></span><span>
</span><span id="line-2441"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyIfaceWarnCache"><span class="hs-identifier hs-type">emptyIfaceWarnCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#WarningTxt"><span class="hs-identifier hs-type">WarningTxt</span></a></span><span>
</span><span id="line-2442"></span><span id="emptyIfaceWarnCache"><span class="annot"><span class="annottext">emptyIfaceWarnCache :: OccName -&gt; Maybe WarningTxt
</span><a href="GHC.Driver.Types.html#emptyIfaceWarnCache"><span class="hs-identifier hs-var hs-var">emptyIfaceWarnCache</span></a></span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe WarningTxt
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2443"></span><span>
</span><span id="line-2444"></span><span class="annot"><a href="GHC.Driver.Types.html#plusWarns"><span class="hs-identifier hs-type">plusWarns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Warnings"><span class="hs-identifier hs-type">Warnings</span></a></span><span>
</span><span id="line-2445"></span><span id="plusWarns"><span class="annot"><span class="annottext">plusWarns :: Warnings -&gt; Warnings -&gt; Warnings
</span><a href="GHC.Driver.Types.html#plusWarns"><span class="hs-identifier hs-var hs-var">plusWarns</span></a></span></span><span> </span><span id="local-6989586621680918881"><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680918881"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Driver.Types.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680918881"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-2446"></span><span class="annot"><a href="GHC.Driver.Types.html#plusWarns"><span class="hs-identifier hs-var">plusWarns</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="GHC.Driver.Types.html#NoWarnings"><span class="hs-identifier hs-var">NoWarnings</span></a></span><span> </span><span id="local-6989586621680918880"><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680918880"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680918880"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-2447"></span><span class="annot"><a href="GHC.Driver.Types.html#plusWarns"><span class="hs-identifier hs-var">plusWarns</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-type">WarnAll</span></a></span><span> </span><span id="local-6989586621680918879"><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918879"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningTxt -&gt; Warnings
</span><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-var">WarnAll</span></a></span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918879"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2448"></span><span class="annot"><a href="GHC.Driver.Types.html#plusWarns"><span class="hs-identifier hs-var">plusWarns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-type">WarnAll</span></a></span><span> </span><span id="local-6989586621680918878"><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918878"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Warnings
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningTxt -&gt; Warnings
</span><a href="GHC.Driver.Types.html#WarnAll"><span class="hs-identifier hs-var">WarnAll</span></a></span><span> </span><span class="annot"><span class="annottext">WarningTxt
</span><a href="#local-6989586621680918878"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2449"></span><span class="annot"><a href="GHC.Driver.Types.html#plusWarns"><span class="hs-identifier hs-var">plusWarns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnSome"><span class="hs-identifier hs-type">WarnSome</span></a></span><span> </span><span id="local-6989586621680918877"><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918877"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#WarnSome"><span class="hs-identifier hs-type">WarnSome</span></a></span><span> </span><span id="local-6989586621680918876"><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918876"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, WarningTxt)] -&gt; Warnings
</span><a href="GHC.Driver.Types.html#WarnSome"><span class="hs-identifier hs-var">WarnSome</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918877"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
-&gt; [(OccName, WarningTxt)] -&gt; [(OccName, WarningTxt)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, WarningTxt)]
</span><a href="#local-6989586621680918876"><span class="hs-identifier hs-var">v2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2450"></span><span>
</span><span id="line-2451"></span><span class="hs-comment">-- | Creates cached lookup for the 'mi_fix_fn' field of 'ModIface'</span><span>
</span><span id="line-2452"></span><span class="annot"><a href="GHC.Driver.Types.html#mkIfaceFixCache"><span class="hs-identifier hs-type">mkIfaceFixCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span>
</span><span id="line-2453"></span><span id="mkIfaceFixCache"><span class="annot"><span class="annottext">mkIfaceFixCache :: [(OccName, Fixity)] -&gt; OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#mkIfaceFixCache"><span class="hs-identifier hs-var hs-var">mkIfaceFixCache</span></a></span></span><span> </span><span id="local-6989586621680918875"><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680918875"><span class="hs-identifier hs-var">pairs</span></a></span></span><span>
</span><span id="line-2454"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680918874"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680918874"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OccEnv Fixity -&gt; OccName -&gt; Maybe Fixity
forall a. OccEnv a -&gt; OccName -&gt; Maybe a
</span><a href="GHC.Types.Name.Occurrence.html#lookupOccEnv"><span class="hs-identifier hs-var">lookupOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">OccEnv Fixity
</span><a href="#local-6989586621680918873"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680918874"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-2455"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2456"></span><span>   </span><span id="local-6989586621680918873"><span class="annot"><span class="annottext">env :: OccEnv Fixity
</span><a href="#local-6989586621680918873"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)] -&gt; OccEnv Fixity
forall a. [(OccName, a)] -&gt; OccEnv a
</span><a href="GHC.Types.Name.Occurrence.html#mkOccEnv"><span class="hs-identifier hs-var">mkOccEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680918875"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-2457"></span><span>
</span><span id="line-2458"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyIfaceFixCache"><span class="hs-identifier hs-type">emptyIfaceFixCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span>
</span><span id="line-2459"></span><span id="emptyIfaceFixCache"><span class="annot"><span class="annottext">emptyIfaceFixCache :: OccName -&gt; Maybe Fixity
</span><a href="GHC.Driver.Types.html#emptyIfaceFixCache"><span class="hs-identifier hs-var hs-var">emptyIfaceFixCache</span></a></span></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Fixity
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-2460"></span><span>
</span><span id="line-2461"></span><span class="hs-comment">-- | Fixity environment mapping names to their fixities</span><span>
</span><span id="line-2462"></span><span class="hs-keyword">type</span><span> </span><span id="FixityEnv"><span class="annot"><a href="GHC.Driver.Types.html#FixityEnv"><span class="hs-identifier hs-var">FixityEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html#NameEnv"><span class="hs-identifier hs-type">NameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FixItem"><span class="hs-identifier hs-type">FixItem</span></a></span><span>
</span><span id="line-2463"></span><span>
</span><span id="line-2464"></span><span class="hs-comment">-- | Fixity information for an 'Name'. We keep the OccName in the range</span><span>
</span><span id="line-2465"></span><span class="hs-comment">-- so that we can generate an interface from it</span><span>
</span><span id="line-2466"></span><span class="hs-keyword">data</span><span> </span><span id="FixItem"><span class="annot"><a href="GHC.Driver.Types.html#FixItem"><span class="hs-identifier hs-var">FixItem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FixItem"><span class="annot"><a href="GHC.Driver.Types.html#FixItem"><span class="hs-identifier hs-var">FixItem</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span>
</span><span id="line-2467"></span><span>
</span><span id="line-2468"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918869"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FixItem"><span class="hs-identifier hs-type">FixItem</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2469"></span><span>  </span><span id="local-6989586621680918864"><span class="annot"><span class="annottext">ppr :: FixItem -&gt; SDoc
</span><a href="#local-6989586621680918864"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#FixItem"><span class="hs-identifier hs-type">FixItem</span></a></span><span> </span><span id="local-6989586621680918863"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680918863"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span id="local-6989586621680918862"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621680918862"><span class="hs-identifier hs-var">fix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fixity -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621680918862"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621680918863"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-2470"></span><span>
</span><span id="line-2471"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyFixityEnv"><span class="hs-identifier hs-type">emptyFixityEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FixityEnv"><span class="hs-identifier hs-type">FixityEnv</span></a></span><span>
</span><span id="line-2472"></span><span id="emptyFixityEnv"><span class="annot"><span class="annottext">emptyFixityEnv :: FixityEnv
</span><a href="GHC.Driver.Types.html#emptyFixityEnv"><span class="hs-identifier hs-var hs-var">emptyFixityEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FixityEnv
forall a. NameEnv a
</span><a href="GHC.Types.Name.Env.html#emptyNameEnv"><span class="hs-identifier hs-var">emptyNameEnv</span></a></span><span>
</span><span id="line-2473"></span><span>
</span><span id="line-2474"></span><span class="annot"><a href="GHC.Driver.Types.html#lookupFixity"><span class="hs-identifier hs-type">lookupFixity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FixityEnv"><span class="hs-identifier hs-type">FixityEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span>
</span><span id="line-2475"></span><span id="lookupFixity"><span class="annot"><span class="annottext">lookupFixity :: FixityEnv -&gt; Name -&gt; Fixity
</span><a href="GHC.Driver.Types.html#lookupFixity"><span class="hs-identifier hs-var hs-var">lookupFixity</span></a></span></span><span> </span><span id="local-6989586621680918861"><span class="annot"><span class="annottext">FixityEnv
</span><a href="#local-6989586621680918861"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621680918860"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680918860"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FixityEnv -&gt; Name -&gt; Maybe FixItem
forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FixityEnv
</span><a href="#local-6989586621680918861"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680918860"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2476"></span><span>                        </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#FixItem"><span class="hs-identifier hs-type">FixItem</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680918859"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621680918859"><span class="hs-identifier hs-var">fix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621680918859"><span class="hs-identifier hs-var">fix</span></a></span><span>
</span><span id="line-2477"></span><span>                        </span><span class="annot"><span class="annottext">Maybe FixItem
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="GHC.Types.Basic.html#defaultFixity"><span class="hs-identifier hs-var">defaultFixity</span></a></span><span>
</span><span id="line-2478"></span><span>
</span><span id="line-2479"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{WhatsImported}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2486"></span><span>
</span><span id="line-2487"></span><span class="hs-comment">-- | Records whether a module has orphans. An \&quot;orphan\&quot; is one of:</span><span>
</span><span id="line-2488"></span><span class="hs-comment">--</span><span>
</span><span id="line-2489"></span><span class="hs-comment">-- * An instance declaration in a module other than the definition</span><span>
</span><span id="line-2490"></span><span class="hs-comment">--   module for one of the type constructors or classes in the instance head</span><span>
</span><span id="line-2491"></span><span class="hs-comment">--</span><span>
</span><span id="line-2492"></span><span class="hs-comment">-- * A rewrite rule in a module other than the one defining</span><span>
</span><span id="line-2493"></span><span class="hs-comment">--   the function in the head of the rule</span><span>
</span><span id="line-2494"></span><span class="hs-comment">--</span><span>
</span><span id="line-2495"></span><span class="hs-keyword">type</span><span> </span><span id="WhetherHasOrphans"><span class="annot"><a href="GHC.Driver.Types.html#WhetherHasOrphans"><span class="hs-identifier hs-var">WhetherHasOrphans</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2496"></span><span>
</span><span id="line-2497"></span><span class="hs-comment">-- | Does this module define family instances?</span><span>
</span><span id="line-2498"></span><span class="hs-keyword">type</span><span> </span><span id="WhetherHasFamInst"><span class="annot"><a href="GHC.Driver.Types.html#WhetherHasFamInst"><span class="hs-identifier hs-var">WhetherHasFamInst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2499"></span><span>
</span><span id="line-2500"></span><span class="hs-comment">-- | Dependency information about ALL modules and packages below this one</span><span>
</span><span id="line-2501"></span><span class="hs-comment">-- in the import hierarchy.</span><span>
</span><span id="line-2502"></span><span class="hs-comment">--</span><span>
</span><span id="line-2503"></span><span class="hs-comment">-- Invariant: the dependencies of a module @M@ never includes @M@.</span><span>
</span><span id="line-2504"></span><span class="hs-comment">--</span><span>
</span><span id="line-2505"></span><span class="hs-comment">-- Invariant: none of the lists contain duplicates.</span><span>
</span><span id="line-2506"></span><span class="hs-keyword">data</span><span> </span><span id="Dependencies"><span class="annot"><a href="GHC.Driver.Types.html#Dependencies"><span class="hs-identifier hs-var">Dependencies</span></a></span></span><span>
</span><span id="line-2507"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Deps"><span class="annot"><a href="GHC.Driver.Types.html#Deps"><span class="hs-identifier hs-var">Deps</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="dep_mods"><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleNameWithIsBoot]
</span><a href="GHC.Driver.Types.html#dep_mods"><span class="hs-identifier hs-var hs-var">dep_mods</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2508"></span><span>                        </span><span class="hs-comment">-- ^ All home-package modules transitively below this one</span><span>
</span><span id="line-2509"></span><span>                        </span><span class="hs-comment">-- I.e. modules that this one imports, or that are in the</span><span>
</span><span id="line-2510"></span><span>                        </span><span class="hs-comment">--      dep_mods of those directly-imported modules</span><span>
</span><span id="line-2511"></span><span>
</span><span id="line-2512"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="dep_pkgs"><span class="annot"><span class="annottext">Dependencies -&gt; [(UnitId, Bool)]
</span><a href="GHC.Driver.Types.html#dep_pkgs"><span class="hs-identifier hs-var hs-var">dep_pkgs</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2513"></span><span>                        </span><span class="hs-comment">-- ^ All packages transitively below this module</span><span>
</span><span id="line-2514"></span><span>                        </span><span class="hs-comment">-- I.e. packages to which this module's direct imports belong,</span><span>
</span><span id="line-2515"></span><span>                        </span><span class="hs-comment">--      or that are in the dep_pkgs of those modules</span><span>
</span><span id="line-2516"></span><span>                        </span><span class="hs-comment">-- The bool indicates if the package is required to be</span><span>
</span><span id="line-2517"></span><span>                        </span><span class="hs-comment">-- trusted when the module is imported as a safe import</span><span>
</span><span id="line-2518"></span><span>                        </span><span class="hs-comment">-- (Safe Haskell). See Note [Tracking Trust Transitively] in GHC.Rename.Names</span><span>
</span><span id="line-2519"></span><span>
</span><span id="line-2520"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="dep_orphs"><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Driver.Types.html#dep_orphs"><span class="hs-identifier hs-var hs-var">dep_orphs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2521"></span><span>                        </span><span class="hs-comment">-- ^ Transitive closure of orphan modules (whether</span><span>
</span><span id="line-2522"></span><span>                        </span><span class="hs-comment">-- home or external pkg).</span><span>
</span><span id="line-2523"></span><span>                        </span><span class="hs-comment">--</span><span>
</span><span id="line-2524"></span><span>                        </span><span class="hs-comment">-- (Possible optimization: don't include family</span><span>
</span><span id="line-2525"></span><span>                        </span><span class="hs-comment">-- instance orphans as they are anyway included in</span><span>
</span><span id="line-2526"></span><span>                        </span><span class="hs-comment">-- 'dep_finsts'.  But then be careful about code</span><span>
</span><span id="line-2527"></span><span>                        </span><span class="hs-comment">-- which relies on dep_orphs having the complete list!)</span><span>
</span><span id="line-2528"></span><span>                        </span><span class="hs-comment">-- This does NOT include us, unlike 'imp_orphs'.</span><span>
</span><span id="line-2529"></span><span>
</span><span id="line-2530"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="dep_finsts"><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Driver.Types.html#dep_finsts"><span class="hs-identifier hs-var hs-var">dep_finsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2531"></span><span>                        </span><span class="hs-comment">-- ^ Transitive closure of depended upon modules which</span><span>
</span><span id="line-2532"></span><span>                        </span><span class="hs-comment">-- contain family instances (whether home or external).</span><span>
</span><span id="line-2533"></span><span>                        </span><span class="hs-comment">-- This is used by 'checkFamInstConsistency'.  This</span><span>
</span><span id="line-2534"></span><span>                        </span><span class="hs-comment">-- does NOT include us, unlike 'imp_finsts'. See Note</span><span>
</span><span id="line-2535"></span><span>                        </span><span class="hs-comment">-- [The type family instance consistency story].</span><span>
</span><span id="line-2536"></span><span>
</span><span id="line-2537"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="dep_plgins"><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleName]
</span><a href="GHC.Driver.Types.html#dep_plgins"><span class="hs-identifier hs-var hs-var">dep_plgins</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2538"></span><span>                        </span><span class="hs-comment">-- ^ All the plugins used while compiling this module.</span><span>
</span><span id="line-2539"></span><span>         </span><span class="hs-special">}</span><span>
</span><span id="line-2540"></span><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621680918842"><span id="local-6989586621680918852"><span class="annot"><span class="annottext">Dependencies -&gt; Dependencies -&gt; Bool
(Dependencies -&gt; Dependencies -&gt; Bool)
-&gt; (Dependencies -&gt; Dependencies -&gt; Bool) -&gt; Eq Dependencies
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Dependencies -&gt; Dependencies -&gt; Bool
$c/= :: Dependencies -&gt; Dependencies -&gt; Bool
== :: Dependencies -&gt; Dependencies -&gt; Bool
$c== :: Dependencies -&gt; Dependencies -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2541"></span><span>        </span><span class="hs-comment">-- Equality used only for old/new comparison in GHC.Iface.Recomp.addFingerprints</span><span>
</span><span id="line-2542"></span><span>        </span><span class="hs-comment">-- See 'GHC.Tc.Utils.ImportAvails' for details on dependencies.</span><span>
</span><span id="line-2543"></span><span>
</span><span id="line-2544"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918834"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2545"></span><span>    </span><span id="local-6989586621680918813"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; Dependencies -&gt; IO ()
</span><a href="#local-6989586621680918813"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621680918812"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918812"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621680918811"><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918811"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; [ModuleNameWithIsBoot] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918812"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleNameWithIsBoot]
</span><a href="GHC.Driver.Types.html#dep_mods"><span class="hs-identifier hs-var hs-var">dep_mods</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918811"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2546"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; [(UnitId, Bool)] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918812"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [(UnitId, Bool)]
</span><a href="GHC.Driver.Types.html#dep_pkgs"><span class="hs-identifier hs-var hs-var">dep_pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918811"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2547"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; [Module] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918812"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Driver.Types.html#dep_orphs"><span class="hs-identifier hs-var hs-var">dep_orphs</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918811"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2548"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; [Module] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918812"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Driver.Types.html#dep_finsts"><span class="hs-identifier hs-var hs-var">dep_finsts</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918811"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2549"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; [ModuleName] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918812"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleName]
</span><a href="GHC.Driver.Types.html#dep_plgins"><span class="hs-identifier hs-var hs-var">dep_plgins</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918811"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2550"></span><span>
</span><span id="line-2551"></span><span>    </span><span id="local-6989586621680918792"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO Dependencies
</span><a href="#local-6989586621680918792"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621680918791"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918791"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621680918790"><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621680918790"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [ModuleNameWithIsBoot]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918791"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2552"></span><span>                </span><span id="local-6989586621680918789"><span class="annot"><span class="annottext">[(UnitId, Bool)]
</span><a href="#local-6989586621680918789"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [(UnitId, Bool)]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918791"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2553"></span><span>                </span><span id="local-6989586621680918788"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621680918788"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [Module]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918791"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2554"></span><span>                </span><span id="local-6989586621680918787"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621680918787"><span class="hs-identifier hs-var">fis</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [Module]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918791"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2555"></span><span>                </span><span id="local-6989586621680918786"><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621680918786"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [ModuleName]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918791"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2556"></span><span>                </span><span class="annot"><span class="annottext">Dependencies -&gt; IO Dependencies
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Deps :: [ModuleNameWithIsBoot]
-&gt; [(UnitId, Bool)]
-&gt; [Module]
-&gt; [Module]
-&gt; [ModuleName]
-&gt; Dependencies
</span><a href="GHC.Driver.Types.html#Deps"><span class="hs-identifier hs-type">Deps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dep_mods :: [ModuleNameWithIsBoot]
</span><a href="GHC.Driver.Types.html#dep_mods"><span class="hs-identifier hs-var">dep_mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
</span><a href="#local-6989586621680918790"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_pkgs :: [(UnitId, Bool)]
</span><a href="GHC.Driver.Types.html#dep_pkgs"><span class="hs-identifier hs-var">dep_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(UnitId, Bool)]
</span><a href="#local-6989586621680918789"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_orphs :: [Module]
</span><a href="GHC.Driver.Types.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621680918788"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2557"></span><span>                               </span><span class="annot"><span class="annottext">dep_finsts :: [Module]
</span><a href="GHC.Driver.Types.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621680918787"><span class="hs-identifier hs-var">fis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_plgins :: [ModuleName]
</span><a href="GHC.Driver.Types.html#dep_plgins"><span class="hs-identifier hs-var">dep_plgins</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621680918786"><span class="hs-identifier hs-var">pl</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2558"></span><span>
</span><span id="line-2559"></span><span class="annot"><a href="GHC.Driver.Types.html#noDependencies"><span class="hs-identifier hs-type">noDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span>
</span><span id="line-2560"></span><span id="noDependencies"><span class="annot"><span class="annottext">noDependencies :: Dependencies
</span><a href="GHC.Driver.Types.html#noDependencies"><span class="hs-identifier hs-var hs-var">noDependencies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModuleNameWithIsBoot]
-&gt; [(UnitId, Bool)]
-&gt; [Module]
-&gt; [Module]
-&gt; [ModuleName]
-&gt; Dependencies
</span><a href="GHC.Driver.Types.html#Deps"><span class="hs-identifier hs-var">Deps</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2561"></span><span>
</span><span id="line-2562"></span><span class="hs-comment">-- | Records modules for which changes may force recompilation of this module</span><span>
</span><span id="line-2563"></span><span class="hs-comment">-- See wiki: https://gitlab.haskell.org/ghc/ghc/wikis/commentary/compiler/recompilation-avoidance</span><span>
</span><span id="line-2564"></span><span class="hs-comment">--</span><span>
</span><span id="line-2565"></span><span class="hs-comment">-- This differs from Dependencies.  A module X may be in the dep_mods of this</span><span>
</span><span id="line-2566"></span><span class="hs-comment">-- module (via an import chain) but if we don't use anything from X it won't</span><span>
</span><span id="line-2567"></span><span class="hs-comment">-- appear in our Usage</span><span>
</span><span id="line-2568"></span><span class="hs-keyword">data</span><span> </span><span id="Usage"><span class="annot"><a href="GHC.Driver.Types.html#Usage"><span class="hs-identifier hs-var">Usage</span></a></span></span><span>
</span><span id="line-2569"></span><span>  </span><span class="hs-comment">-- | Module from another package</span><span>
</span><span id="line-2570"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UsagePackageModule"><span class="annot"><a href="GHC.Driver.Types.html#UsagePackageModule"><span class="hs-identifier hs-var">UsagePackageModule</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2571"></span><span>        </span><span id="usg_mod"><span class="annot"><span class="annottext">Usage -&gt; Module
</span><a href="GHC.Driver.Types.html#usg_mod"><span class="hs-identifier hs-var hs-var">usg_mod</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2572"></span><span>           </span><span class="hs-comment">-- ^ External package module depended on</span><span>
</span><span id="line-2573"></span><span>        </span><span id="usg_mod_hash"><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var hs-var">usg_mod_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2574"></span><span>            </span><span class="hs-comment">-- ^ Cached module fingerprint</span><span>
</span><span id="line-2575"></span><span>        </span><span id="usg_safe"><span class="annot"><span class="annottext">Usage -&gt; Bool
</span><a href="GHC.Driver.Types.html#usg_safe"><span class="hs-identifier hs-var hs-var">usg_safe</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IsSafeImport"><span class="hs-identifier hs-type">IsSafeImport</span></a></span><span>
</span><span id="line-2576"></span><span>            </span><span class="hs-comment">-- ^ Was this module imported as a safe import</span><span>
</span><span id="line-2577"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-2578"></span><span>  </span><span class="hs-comment">-- | Module from the current package</span><span>
</span><span id="line-2579"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UsageHomeModule"><span class="annot"><a href="GHC.Driver.Types.html#UsageHomeModule"><span class="hs-identifier hs-var">UsageHomeModule</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2580"></span><span>        </span><span id="usg_mod_name"><span class="annot"><span class="annottext">Usage -&gt; ModuleName
</span><a href="GHC.Driver.Types.html#usg_mod_name"><span class="hs-identifier hs-var hs-var">usg_mod_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2581"></span><span>            </span><span class="hs-comment">-- ^ Name of the module</span><span>
</span><span id="line-2582"></span><span>        </span><span id="usg_mod_hash"><span class="annot"><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2583"></span><span>            </span><span class="hs-comment">-- ^ Cached module fingerprint</span><span>
</span><span id="line-2584"></span><span>        </span><span id="usg_entities"><span class="annot"><span class="annottext">Usage -&gt; [(OccName, Fingerprint)]
</span><a href="GHC.Driver.Types.html#usg_entities"><span class="hs-identifier hs-var hs-var">usg_entities</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-2585"></span><span>            </span><span class="hs-comment">-- ^ Entities we depend on, sorted by occurrence name and fingerprinted.</span><span>
</span><span id="line-2586"></span><span>            </span><span class="hs-comment">-- NB: usages are for parent names only, e.g. type constructors</span><span>
</span><span id="line-2587"></span><span>            </span><span class="hs-comment">-- but not the associated data constructors.</span><span>
</span><span id="line-2588"></span><span>        </span><span id="usg_exports"><span class="annot"><span class="annottext">Usage -&gt; Maybe Fingerprint
</span><a href="GHC.Driver.Types.html#usg_exports"><span class="hs-identifier hs-var hs-var">usg_exports</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2589"></span><span>            </span><span class="hs-comment">-- ^ Fingerprint for the export list of this module,</span><span>
</span><span id="line-2590"></span><span>            </span><span class="hs-comment">-- if we directly imported it (and hence we depend on its export list)</span><span>
</span><span id="line-2591"></span><span>        </span><span id="usg_safe"><span class="annot"><a href="GHC.Driver.Types.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IsSafeImport"><span class="hs-identifier hs-type">IsSafeImport</span></a></span><span>
</span><span id="line-2592"></span><span>            </span><span class="hs-comment">-- ^ Was this module imported as a safe import</span><span>
</span><span id="line-2593"></span><span>    </span><span class="hs-special">}</span><span>                                           </span><span class="hs-comment">-- ^ Module from the current package</span><span>
</span><span id="line-2594"></span><span>  </span><span class="hs-comment">-- | A file upon which the module depends, e.g. a CPP #include, or using TH's</span><span>
</span><span id="line-2595"></span><span>  </span><span class="hs-comment">-- 'addDependentFile'</span><span>
</span><span id="line-2596"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UsageFile"><span class="annot"><a href="GHC.Driver.Types.html#UsageFile"><span class="hs-identifier hs-var">UsageFile</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2597"></span><span>        </span><span id="usg_file_path"><span class="annot"><span class="annottext">Usage -&gt; FieldName
</span><a href="GHC.Driver.Types.html#usg_file_path"><span class="hs-identifier hs-var hs-var">usg_file_path</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2598"></span><span>        </span><span class="hs-comment">-- ^ External file dependency. From a CPP #include or TH</span><span>
</span><span id="line-2599"></span><span>        </span><span class="hs-comment">-- addDependentFile. Should be absolute.</span><span>
</span><span id="line-2600"></span><span>        </span><span id="usg_file_hash"><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#usg_file_hash"><span class="hs-identifier hs-var hs-var">usg_file_hash</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-2601"></span><span>        </span><span class="hs-comment">-- ^ 'Fingerprint' of the file contents.</span><span>
</span><span id="line-2602"></span><span>
</span><span id="line-2603"></span><span>        </span><span class="hs-comment">-- Note: We don't consider things like modification timestamps</span><span>
</span><span id="line-2604"></span><span>        </span><span class="hs-comment">-- here, because there's no reason to recompile if the actual</span><span>
</span><span id="line-2605"></span><span>        </span><span class="hs-comment">-- contents don't change.  This previously lead to odd</span><span>
</span><span id="line-2606"></span><span>        </span><span class="hs-comment">-- recompilation behaviors; see #8114</span><span>
</span><span id="line-2607"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-2608"></span><span>  </span><span class="hs-comment">-- | A requirement which was merged into this one.</span><span>
</span><span id="line-2609"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UsageMergedRequirement"><span class="annot"><a href="GHC.Driver.Types.html#UsageMergedRequirement"><span class="hs-identifier hs-var">UsageMergedRequirement</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2610"></span><span>        </span><span id="usg_mod"><span class="annot"><a href="GHC.Driver.Types.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2611"></span><span>        </span><span id="usg_mod_hash"><span class="annot"><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-2612"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-2613"></span><span>    </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621680918755"><span id="local-6989586621680918772"><span class="annot"><span class="annottext">Usage -&gt; Usage -&gt; Bool
(Usage -&gt; Usage -&gt; Bool) -&gt; (Usage -&gt; Usage -&gt; Bool) -&gt; Eq Usage
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Usage -&gt; Usage -&gt; Bool
$c/= :: Usage -&gt; Usage -&gt; Bool
== :: Usage -&gt; Usage -&gt; Bool
$c== :: Usage -&gt; Usage -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-2614"></span><span>        </span><span class="hs-comment">-- The export list field is (Just v) if we depend on the export list:</span><span>
</span><span id="line-2615"></span><span>        </span><span class="hs-comment">--      i.e. we imported the module directly, whether or not we</span><span>
</span><span id="line-2616"></span><span>        </span><span class="hs-comment">--           enumerated the things we imported, or just imported</span><span>
</span><span id="line-2617"></span><span>        </span><span class="hs-comment">--           everything</span><span>
</span><span id="line-2618"></span><span>        </span><span class="hs-comment">-- We need to recompile if M's exports change, because</span><span>
</span><span id="line-2619"></span><span>        </span><span class="hs-comment">-- if the import was    import M,       we might now have a name clash</span><span>
</span><span id="line-2620"></span><span>        </span><span class="hs-comment">--                                      in the importing module.</span><span>
</span><span id="line-2621"></span><span>        </span><span class="hs-comment">-- if the import was    import M(x)     M might no longer export x</span><span>
</span><span id="line-2622"></span><span>        </span><span class="hs-comment">-- The only way we don't depend on the export list is if we have</span><span>
</span><span id="line-2623"></span><span>        </span><span class="hs-comment">--                      import M()</span><span>
</span><span id="line-2624"></span><span>        </span><span class="hs-comment">-- And of course, for modules that aren't imported directly we don't</span><span>
</span><span id="line-2625"></span><span>        </span><span class="hs-comment">-- depend on their export lists</span><span>
</span><span id="line-2626"></span><span>
</span><span id="line-2627"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918752"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2628"></span><span>    </span><span id="local-6989586621680918717"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; Usage -&gt; IO ()
</span><a href="#local-6989586621680918717"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621680918716"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918716"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621680918715"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621680918715"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Driver.Types.html#UsagePackageModule"><span class="hs-identifier hs-type">UsagePackageModule</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2629"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918716"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-2630"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Module -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918716"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Module
</span><a href="GHC.Driver.Types.html#usg_mod"><span class="hs-identifier hs-var hs-var">usg_mod</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918715"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2631"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918716"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918715"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2632"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918716"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Bool
</span><a href="GHC.Driver.Types.html#usg_safe"><span class="hs-identifier hs-var hs-var">usg_safe</span></a></span><span>     </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918715"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2633"></span><span>
</span><span id="line-2634"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621680918714"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918714"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621680918713"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621680918713"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Driver.Types.html#UsageHomeModule"><span class="hs-identifier hs-type">UsageHomeModule</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2635"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918714"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-2636"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; ModuleName -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918714"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; ModuleName
</span><a href="GHC.Driver.Types.html#usg_mod_name"><span class="hs-identifier hs-var hs-var">usg_mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918713"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2637"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918714"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918713"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2638"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Maybe Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918714"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Maybe Fingerprint
</span><a href="GHC.Driver.Types.html#usg_exports"><span class="hs-identifier hs-var hs-var">usg_exports</span></a></span><span>  </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918713"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2639"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [(OccName, Fingerprint)] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918714"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; [(OccName, Fingerprint)]
</span><a href="GHC.Driver.Types.html#usg_entities"><span class="hs-identifier hs-var hs-var">usg_entities</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918713"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2640"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918714"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Bool
</span><a href="GHC.Driver.Types.html#usg_safe"><span class="hs-identifier hs-var hs-var">usg_safe</span></a></span><span>     </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918713"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2641"></span><span>
</span><span id="line-2642"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621680918712"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918712"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621680918711"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621680918711"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Driver.Types.html#UsageFile"><span class="hs-identifier hs-type">UsageFile</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2643"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918712"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-2644"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; FieldName -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918712"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; FieldName
</span><a href="GHC.Driver.Types.html#usg_file_path"><span class="hs-identifier hs-var hs-var">usg_file_path</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918711"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2645"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918712"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#usg_file_hash"><span class="hs-identifier hs-var hs-var">usg_file_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918711"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2646"></span><span>
</span><span id="line-2647"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621680918710"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918710"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621680918709"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621680918709"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Driver.Types.html#UsageMergedRequirement"><span class="hs-identifier hs-type">UsageMergedRequirement</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2648"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918710"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span>
</span><span id="line-2649"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Module -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918710"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Module
</span><a href="GHC.Driver.Types.html#usg_mod"><span class="hs-identifier hs-var hs-var">usg_mod</span></a></span><span>      </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918709"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2650"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918710"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621680918709"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2651"></span><span>
</span><span id="line-2652"></span><span>    </span><span id="local-6989586621680918664"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO Usage
</span><a href="#local-6989586621680918664"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621680918663"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2653"></span><span>        </span><span id="local-6989586621680918662"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918662"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2654"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918662"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2655"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2656"></span><span>            </span><span id="local-6989586621680918661"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918661"><span class="hs-identifier hs-var">nm</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Module
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2657"></span><span>            </span><span id="local-6989586621680918660"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918660"><span class="hs-identifier hs-var">mod</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2658"></span><span>            </span><span id="local-6989586621680918659"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918659"><span class="hs-keyword hs-var">safe</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2659"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsagePackageModule :: Module -&gt; Fingerprint -&gt; Bool -&gt; Usage
</span><a href="GHC.Driver.Types.html#UsagePackageModule"><span class="hs-identifier hs-type">UsagePackageModule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_mod :: Module
</span><a href="GHC.Driver.Types.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918661"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_mod_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918660"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_safe :: Bool
</span><a href="GHC.Driver.Types.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918659"><span class="hs-keyword hs-var">safe</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2660"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2661"></span><span>            </span><span id="local-6989586621680918658"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680918658"><span class="hs-identifier hs-var">nm</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO ModuleName
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2662"></span><span>            </span><span id="local-6989586621680918657"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918657"><span class="hs-identifier hs-var">mod</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2663"></span><span>            </span><span id="local-6989586621680918656"><span class="annot"><span class="annottext">Maybe Fingerprint
</span><a href="#local-6989586621680918656"><span class="hs-identifier hs-var">exps</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Maybe Fingerprint)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2664"></span><span>            </span><span id="local-6989586621680918655"><span class="annot"><span class="annottext">[(OccName, Fingerprint)]
</span><a href="#local-6989586621680918655"><span class="hs-identifier hs-var">ents</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [(OccName, Fingerprint)]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2665"></span><span>            </span><span id="local-6989586621680918654"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918654"><span class="hs-keyword hs-var">safe</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2666"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsageHomeModule :: ModuleName
-&gt; Fingerprint
-&gt; [(OccName, Fingerprint)]
-&gt; Maybe Fingerprint
-&gt; Bool
-&gt; Usage
</span><a href="GHC.Driver.Types.html#UsageHomeModule"><span class="hs-identifier hs-type">UsageHomeModule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_mod_name :: ModuleName
</span><a href="GHC.Driver.Types.html#usg_mod_name"><span class="hs-identifier hs-var">usg_mod_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680918658"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_mod_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918657"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2667"></span><span>                     </span><span class="annot"><span class="annottext">usg_exports :: Maybe Fingerprint
</span><a href="GHC.Driver.Types.html#usg_exports"><span class="hs-identifier hs-var">usg_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Fingerprint
</span><a href="#local-6989586621680918656"><span class="hs-identifier hs-var">exps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_entities :: [(OccName, Fingerprint)]
</span><a href="GHC.Driver.Types.html#usg_entities"><span class="hs-identifier hs-var">usg_entities</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fingerprint)]
</span><a href="#local-6989586621680918655"><span class="hs-identifier hs-var">ents</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_safe :: Bool
</span><a href="GHC.Driver.Types.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918654"><span class="hs-keyword hs-var">safe</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2668"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2669"></span><span>            </span><span id="local-6989586621680918653"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918653"><span class="hs-identifier hs-var">fp</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO FieldName
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2670"></span><span>            </span><span id="local-6989586621680918652"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918652"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2671"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsageFile :: FieldName -&gt; Fingerprint -&gt; Usage
</span><a href="GHC.Driver.Types.html#UsageFile"><span class="hs-identifier hs-type">UsageFile</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_file_path :: FieldName
</span><a href="GHC.Driver.Types.html#usg_file_path"><span class="hs-identifier hs-var">usg_file_path</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918653"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_file_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#usg_file_hash"><span class="hs-identifier hs-var">usg_file_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918652"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2672"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2673"></span><span>            </span><span id="local-6989586621680918651"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918651"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Module
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2674"></span><span>            </span><span id="local-6989586621680918650"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918650"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918663"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-2675"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">UsageMergedRequirement :: Module -&gt; Fingerprint -&gt; Usage
</span><a href="GHC.Driver.Types.html#UsageMergedRequirement"><span class="hs-identifier hs-type">UsageMergedRequirement</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_mod :: Module
</span><a href="GHC.Driver.Types.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918651"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_mod_hash :: Fingerprint
</span><a href="GHC.Driver.Types.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621680918650"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2676"></span><span>          </span><span id="local-6989586621680918649"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918649"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; IO Usage
forall a. HasCallStack =&gt; FieldName -&gt; a
</span><a href="../../base/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;Binary.get(Usage): &quot;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; FieldName
forall a. Show a =&gt; a -&gt; FieldName
</span><a href="../../base/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918649"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2677"></span><span>
</span><span id="line-2678"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                The External Package State
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2685"></span><span>
</span><span id="line-2686"></span><span class="hs-keyword">type</span><span> </span><span id="PackageTypeEnv"><span class="annot"><a href="GHC.Driver.Types.html#PackageTypeEnv"><span class="hs-identifier hs-var">PackageTypeEnv</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-2687"></span><span class="hs-keyword">type</span><span> </span><span id="PackageRuleBase"><span class="annot"><a href="GHC.Driver.Types.html#PackageRuleBase"><span class="hs-identifier hs-var">PackageRuleBase</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#RuleBase"><span class="hs-identifier hs-type">RuleBase</span></a></span><span>
</span><span id="line-2688"></span><span class="hs-keyword">type</span><span> </span><span id="PackageInstEnv"><span class="annot"><a href="GHC.Driver.Types.html#PackageInstEnv"><span class="hs-identifier hs-var">PackageInstEnv</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.InstEnv.html#InstEnv"><span class="hs-identifier hs-type">InstEnv</span></a></span><span>
</span><span id="line-2689"></span><span class="hs-keyword">type</span><span> </span><span id="PackageFamInstEnv"><span class="annot"><a href="GHC.Driver.Types.html#PackageFamInstEnv"><span class="hs-identifier hs-var">PackageFamInstEnv</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInstEnv"><span class="hs-identifier hs-type">FamInstEnv</span></a></span><span>
</span><span id="line-2690"></span><span class="hs-keyword">type</span><span> </span><span id="PackageAnnEnv"><span class="annot"><a href="GHC.Driver.Types.html#PackageAnnEnv"><span class="hs-identifier hs-var">PackageAnnEnv</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Annotations.html#AnnEnv"><span class="hs-identifier hs-type">AnnEnv</span></a></span><span>
</span><span id="line-2691"></span><span class="hs-keyword">type</span><span> </span><span id="PackageCompleteMatchMap"><span class="annot"><a href="GHC.Driver.Types.html#PackageCompleteMatchMap"><span class="hs-identifier hs-var">PackageCompleteMatchMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier hs-type">CompleteMatchMap</span></a></span><span>
</span><span id="line-2692"></span><span>
</span><span id="line-2693"></span><span class="hs-comment">-- | Information about other packages that we have slurped in by reading</span><span>
</span><span id="line-2694"></span><span class="hs-comment">-- their interface files</span><span>
</span><span id="line-2695"></span><span class="hs-keyword">data</span><span> </span><span id="ExternalPackageState"><span class="annot"><a href="GHC.Driver.Types.html#ExternalPackageState"><span class="hs-identifier hs-var">ExternalPackageState</span></a></span></span><span>
</span><span id="line-2696"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EPS"><span class="annot"><a href="GHC.Driver.Types.html#EPS"><span class="hs-identifier hs-var">EPS</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2697"></span><span>        </span><span id="eps_is_boot"><span class="annot"><span class="annottext">ExternalPackageState -&gt; ModuleNameEnv ModuleNameWithIsBoot
</span><a href="GHC.Driver.Types.html#eps_is_boot"><span class="hs-identifier hs-var hs-var">eps_is_boot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleNameEnv"><span class="hs-identifier hs-type">ModuleNameEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2698"></span><span>                </span><span class="hs-comment">-- ^ In OneShot mode (only), home-package modules</span><span>
</span><span id="line-2699"></span><span>                </span><span class="hs-comment">-- accumulate in the external package state, and are</span><span>
</span><span id="line-2700"></span><span>                </span><span class="hs-comment">-- sucked in lazily.  For these home-pkg modules</span><span>
</span><span id="line-2701"></span><span>                </span><span class="hs-comment">-- (only) we need to record which are boot modules.</span><span>
</span><span id="line-2702"></span><span>                </span><span class="hs-comment">-- We set this field after loading all the</span><span>
</span><span id="line-2703"></span><span>                </span><span class="hs-comment">-- explicitly-imported interfaces, but before doing</span><span>
</span><span id="line-2704"></span><span>                </span><span class="hs-comment">-- anything else</span><span>
</span><span id="line-2705"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-2706"></span><span>                </span><span class="hs-comment">-- The 'ModuleName' part is not necessary, but it's useful for</span><span>
</span><span id="line-2707"></span><span>                </span><span class="hs-comment">-- debug prints, and it's convenient because this field comes</span><span>
</span><span id="line-2708"></span><span>                </span><span class="hs-comment">-- direct from 'GHC.Tc.Utils.imp_dep_mods'</span><span>
</span><span id="line-2709"></span><span>
</span><span id="line-2710"></span><span>        </span><span id="eps_PIT"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageIfaceTable
</span><a href="GHC.Driver.Types.html#eps_PIT"><span class="hs-identifier hs-var hs-var">eps_PIT</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PackageIfaceTable"><span class="hs-identifier hs-type">PackageIfaceTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2711"></span><span>                </span><span class="hs-comment">-- ^ The 'ModIface's for modules in external packages</span><span>
</span><span id="line-2712"></span><span>                </span><span class="hs-comment">-- whose interfaces we have opened.</span><span>
</span><span id="line-2713"></span><span>                </span><span class="hs-comment">-- The declarations in these interface files are held in the</span><span>
</span><span id="line-2714"></span><span>                </span><span class="hs-comment">-- 'eps_decls', 'eps_inst_env', 'eps_fam_inst_env' and 'eps_rules'</span><span>
</span><span id="line-2715"></span><span>                </span><span class="hs-comment">-- fields of this record, not in the 'mi_decls' fields of the</span><span>
</span><span id="line-2716"></span><span>                </span><span class="hs-comment">-- interface we have sucked in.</span><span>
</span><span id="line-2717"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-2718"></span><span>                </span><span class="hs-comment">-- What /is/ in the PIT is:</span><span>
</span><span id="line-2719"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-2720"></span><span>                </span><span class="hs-comment">-- * The Module</span><span>
</span><span id="line-2721"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-2722"></span><span>                </span><span class="hs-comment">-- * Fingerprint info</span><span>
</span><span id="line-2723"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-2724"></span><span>                </span><span class="hs-comment">-- * Its exports</span><span>
</span><span id="line-2725"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-2726"></span><span>                </span><span class="hs-comment">-- * Fixities</span><span>
</span><span id="line-2727"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-2728"></span><span>                </span><span class="hs-comment">-- * Deprecations and warnings</span><span>
</span><span id="line-2729"></span><span>
</span><span id="line-2730"></span><span>        </span><span id="eps_free_holes"><span class="annot"><span class="annottext">ExternalPackageState -&gt; InstalledModuleEnv (UniqDSet ModuleName)
</span><a href="GHC.Driver.Types.html#eps_free_holes"><span class="hs-identifier hs-var hs-var">eps_free_holes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#InstalledModuleEnv"><span class="hs-identifier hs-type">InstalledModuleEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.DSet.html#UniqDSet"><span class="hs-identifier hs-type">UniqDSet</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2731"></span><span>                </span><span class="hs-comment">-- ^ Cache for 'mi_free_holes'.  Ordinarily, we can rely on</span><span>
</span><span id="line-2732"></span><span>                </span><span class="hs-comment">-- the 'eps_PIT' for this information, EXCEPT that when</span><span>
</span><span id="line-2733"></span><span>                </span><span class="hs-comment">-- we do dependency analysis, we need to look at the</span><span>
</span><span id="line-2734"></span><span>                </span><span class="hs-comment">-- 'Dependencies' of our imports to determine what their</span><span>
</span><span id="line-2735"></span><span>                </span><span class="hs-comment">-- precise free holes are ('moduleFreeHolesPrecise').  We</span><span>
</span><span id="line-2736"></span><span>                </span><span class="hs-comment">-- don't want to repeatedly reread in the interface</span><span>
</span><span id="line-2737"></span><span>                </span><span class="hs-comment">-- for every import, so cache it here.  When the PIT</span><span>
</span><span id="line-2738"></span><span>                </span><span class="hs-comment">-- gets filled in we can drop these entries.</span><span>
</span><span id="line-2739"></span><span>
</span><span id="line-2740"></span><span>        </span><span id="eps_PTE"><span class="annot"><span class="annottext">ExternalPackageState -&gt; TypeEnv
</span><a href="GHC.Driver.Types.html#eps_PTE"><span class="hs-identifier hs-var hs-var">eps_PTE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PackageTypeEnv"><span class="hs-identifier hs-type">PackageTypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2741"></span><span>                </span><span class="hs-comment">-- ^ Result of typechecking all the external package</span><span>
</span><span id="line-2742"></span><span>                </span><span class="hs-comment">-- interface files we have sucked in. The domain of</span><span>
</span><span id="line-2743"></span><span>                </span><span class="hs-comment">-- the mapping is external-package modules</span><span>
</span><span id="line-2744"></span><span>
</span><span id="line-2745"></span><span>        </span><span id="eps_inst_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; InstEnv
</span><a href="GHC.Driver.Types.html#eps_inst_env"><span class="hs-identifier hs-var hs-var">eps_inst_env</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PackageInstEnv"><span class="hs-identifier hs-type">PackageInstEnv</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ The total 'InstEnv' accumulated</span><span>
</span><span id="line-2746"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-2747"></span><span>        </span><span id="eps_fam_inst_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; FamInstEnv
</span><a href="GHC.Driver.Types.html#eps_fam_inst_env"><span class="hs-identifier hs-var hs-var">eps_fam_inst_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PackageFamInstEnv"><span class="hs-identifier hs-type">PackageFamInstEnv</span></a></span><span class="hs-special">,</span><span class="hs-comment">-- ^ The total 'FamInstEnv' accumulated</span><span>
</span><span id="line-2748"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-2749"></span><span>        </span><span id="eps_rule_base"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageRuleBase
</span><a href="GHC.Driver.Types.html#eps_rule_base"><span class="hs-identifier hs-var hs-var">eps_rule_base</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PackageRuleBase"><span class="hs-identifier hs-type">PackageRuleBase</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- ^ The total 'RuleEnv' accumulated</span><span>
</span><span id="line-2750"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-2751"></span><span>        </span><span id="eps_ann_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; AnnEnv
</span><a href="GHC.Driver.Types.html#eps_ann_env"><span class="hs-identifier hs-var hs-var">eps_ann_env</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PackageAnnEnv"><span class="hs-identifier hs-type">PackageAnnEnv</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- ^ The total 'AnnEnv' accumulated</span><span>
</span><span id="line-2752"></span><span>                                               </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-2753"></span><span>        </span><span id="eps_complete_matches"><span class="annot"><span class="annottext">ExternalPackageState -&gt; PackageCompleteMatchMap
</span><a href="GHC.Driver.Types.html#eps_complete_matches"><span class="hs-identifier hs-var hs-var">eps_complete_matches</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#PackageCompleteMatchMap"><span class="hs-identifier hs-type">PackageCompleteMatchMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2754"></span><span>                                  </span><span class="hs-comment">-- ^ The total 'CompleteMatchMap' accumulated</span><span>
</span><span id="line-2755"></span><span>                                  </span><span class="hs-comment">-- from all the external-package modules</span><span>
</span><span id="line-2756"></span><span>
</span><span id="line-2757"></span><span>        </span><span id="eps_mod_fam_inst_env"><span class="annot"><span class="annottext">ExternalPackageState -&gt; ModuleEnv FamInstEnv
</span><a href="GHC.Driver.Types.html#eps_mod_fam_inst_env"><span class="hs-identifier hs-var hs-var">eps_mod_fam_inst_env</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleEnv"><span class="hs-identifier hs-type">ModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Core.FamInstEnv.html#FamInstEnv"><span class="hs-identifier hs-type">FamInstEnv</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- ^ The family instances accumulated from external</span><span>
</span><span id="line-2758"></span><span>                                                         </span><span class="hs-comment">-- packages, keyed off the module that declared them</span><span>
</span><span id="line-2759"></span><span>
</span><span id="line-2760"></span><span>        </span><span id="eps_stats"><span class="annot"><span class="annottext">ExternalPackageState -&gt; EpsStats
</span><a href="GHC.Driver.Types.html#eps_stats"><span class="hs-identifier hs-var hs-var">eps_stats</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Driver.Types.html#EpsStats"><span class="hs-identifier hs-type">EpsStats</span></a></span><span>                 </span><span class="hs-comment">-- ^ Stastics about what was loaded from external packages</span><span>
</span><span id="line-2761"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-2762"></span><span>
</span><span id="line-2763"></span><span class="hs-comment">-- | Accumulated statistics about what we are putting into the 'ExternalPackageState'.</span><span>
</span><span id="line-2764"></span><span class="hs-comment">-- \&quot;In\&quot; means stuff that is just /read/ from interface files,</span><span>
</span><span id="line-2765"></span><span class="hs-comment">-- \&quot;Out\&quot; means actually sucked in and type-checked</span><span>
</span><span id="line-2766"></span><span class="hs-keyword">data</span><span> </span><span id="EpsStats"><span class="annot"><a href="GHC.Driver.Types.html#EpsStats"><span class="hs-identifier hs-var">EpsStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EpsStats"><span class="annot"><a href="GHC.Driver.Types.html#EpsStats"><span class="hs-identifier hs-var">EpsStats</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="n_ifaces_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_ifaces_in"><span class="hs-identifier hs-var hs-var">n_ifaces_in</span></a></span></span><span>
</span><span id="line-2767"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="n_decls_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_decls_in"><span class="hs-identifier hs-var hs-var">n_decls_in</span></a></span></span><span class="hs-special">,</span><span> </span><span id="n_decls_out"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_decls_out"><span class="hs-identifier hs-var hs-var">n_decls_out</span></a></span></span><span>
</span><span id="line-2768"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="n_rules_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_rules_in"><span class="hs-identifier hs-var hs-var">n_rules_in</span></a></span></span><span class="hs-special">,</span><span> </span><span id="n_rules_out"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_rules_out"><span class="hs-identifier hs-var hs-var">n_rules_out</span></a></span></span><span>
</span><span id="line-2769"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="n_insts_in"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_insts_in"><span class="hs-identifier hs-var hs-var">n_insts_in</span></a></span></span><span class="hs-special">,</span><span> </span><span id="n_insts_out"><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_insts_out"><span class="hs-identifier hs-var hs-var">n_insts_out</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2770"></span><span>
</span><span id="line-2771"></span><span class="annot"><a href="GHC.Driver.Types.html#addEpsInStats"><span class="hs-identifier hs-type">addEpsInStats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#EpsStats"><span class="hs-identifier hs-type">EpsStats</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#EpsStats"><span class="hs-identifier hs-type">EpsStats</span></a></span><span>
</span><span id="line-2772"></span><span class="hs-comment">-- ^ Add stats for one newly-read interface</span><span>
</span><span id="line-2773"></span><span id="addEpsInStats"><span class="annot"><span class="annottext">addEpsInStats :: EpsStats -&gt; Int -&gt; Int -&gt; Int -&gt; EpsStats
</span><a href="GHC.Driver.Types.html#addEpsInStats"><span class="hs-identifier hs-var hs-var">addEpsInStats</span></a></span></span><span> </span><span id="local-6989586621680918628"><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621680918628"><span class="hs-identifier hs-var">stats</span></a></span></span><span> </span><span id="local-6989586621680918627"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918627"><span class="hs-identifier hs-var">n_decls</span></a></span></span><span> </span><span id="local-6989586621680918626"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918626"><span class="hs-identifier hs-var">n_insts</span></a></span></span><span> </span><span id="local-6989586621680918625"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918625"><span class="hs-identifier hs-var">n_rules</span></a></span></span><span>
</span><span id="line-2774"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621680918628"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">n_ifaces_in :: Int
</span><a href="GHC.Driver.Types.html#n_ifaces_in"><span class="hs-identifier hs-var">n_ifaces_in</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_ifaces_in"><span class="hs-identifier hs-var hs-var">n_ifaces_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621680918628"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-2775"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_decls_in :: Int
</span><a href="GHC.Driver.Types.html#n_decls_in"><span class="hs-identifier hs-var">n_decls_in</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_decls_in"><span class="hs-identifier hs-var hs-var">n_decls_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621680918628"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918627"><span class="hs-identifier hs-var">n_decls</span></a></span><span>
</span><span id="line-2776"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_insts_in :: Int
</span><a href="GHC.Driver.Types.html#n_insts_in"><span class="hs-identifier hs-var">n_insts_in</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_insts_in"><span class="hs-identifier hs-var hs-var">n_insts_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621680918628"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918626"><span class="hs-identifier hs-var">n_insts</span></a></span><span>
</span><span id="line-2777"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">n_rules_in :: Int
</span><a href="GHC.Driver.Types.html#n_rules_in"><span class="hs-identifier hs-var">n_rules_in</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpsStats -&gt; Int
</span><a href="GHC.Driver.Types.html#n_rules_in"><span class="hs-identifier hs-var hs-var">n_rules_in</span></a></span><span> </span><span class="annot"><span class="annottext">EpsStats
</span><a href="#local-6989586621680918628"><span class="hs-identifier hs-var">stats</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918625"><span class="hs-identifier hs-var">n_rules</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2778"></span><span>
</span><span id="line-2779"></span><span class="hs-comment">{-
Names in a NameCache are always stored as a Global, and have the SrcLoc
of their binding locations.

Actually that's not quite right.  When we first encounter the original
name, we might not be at its binding site (e.g. we are reading an
interface file); so we give it 'noSrcLoc' then.  Later, when we find
its binding site, we fix it up.
-}</span><span>
</span><span id="line-2788"></span><span>
</span><span id="line-2789"></span><span id="local-6989586621680920588"><span class="annot"><a href="GHC.Driver.Types.html#updNameCache"><span class="hs-identifier hs-type">updNameCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Cache.html#NameCache"><span class="hs-identifier hs-type">NameCache</span></a></span><span>
</span><span id="line-2790"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Cache.html#NameCache"><span class="hs-identifier hs-type">NameCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Cache.html#NameCache"><span class="hs-identifier hs-type">NameCache</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680920588"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- The updating function</span><span>
</span><span id="line-2791"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621680920588"><span class="hs-identifier hs-type">c</span></a></span></span><span>
</span><span id="line-2792"></span><span id="updNameCache"><span class="annot"><span class="annottext">updNameCache :: forall c. IORef NameCache -&gt; (NameCache -&gt; (NameCache, c)) -&gt; IO c
</span><a href="GHC.Driver.Types.html#updNameCache"><span class="hs-identifier hs-var hs-var">updNameCache</span></a></span></span><span> </span><span id="local-6989586621680918624"><span class="annot"><span class="annottext">IORef NameCache
</span><a href="#local-6989586621680918624"><span class="hs-identifier hs-var">ncRef</span></a></span></span><span> </span><span id="local-6989586621680918623"><span class="annot"><span class="annottext">NameCache -&gt; (NameCache, c)
</span><a href="#local-6989586621680918623"><span class="hs-identifier hs-var">upd_fn</span></a></span></span><span>
</span><span id="line-2793"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef NameCache -&gt; (NameCache -&gt; (NameCache, c)) -&gt; IO c
forall a b. IORef a -&gt; (a -&gt; (a, b)) -&gt; IO b
</span><a href="../../base/src/GHC.IORef.html#atomicModifyIORef%27"><span class="hs-identifier hs-var">atomicModifyIORef'</span></a></span><span> </span><span class="annot"><span class="annottext">IORef NameCache
</span><a href="#local-6989586621680918624"><span class="hs-identifier hs-var">ncRef</span></a></span><span> </span><span class="annot"><span class="annottext">NameCache -&gt; (NameCache, c)
</span><a href="#local-6989586621680918623"><span class="hs-identifier hs-var">upd_fn</span></a></span><span>
</span><span id="line-2794"></span><span>
</span><span id="line-2795"></span><span class="annot"><a href="GHC.Driver.Types.html#mkSOName"><span class="hs-identifier hs-type">mkSOName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-2796"></span><span id="mkSOName"><span class="annot"><span class="annottext">mkSOName :: Platform -&gt; ShowS
</span><a href="GHC.Driver.Types.html#mkSOName"><span class="hs-identifier hs-var hs-var">mkSOName</span></a></span></span><span> </span><span id="local-6989586621680918621"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918621"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621680918620"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918620"><span class="hs-identifier hs-var">root</span></a></span></span><span>
</span><span id="line-2797"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="../../ghc-boot/src/GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918621"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2798"></span><span>      </span><span class="annot"><span class="annottext">OS
</span><a href="../../ghc-boot/src/GHC.Platform.html#OSMinGW32"><span class="hs-identifier hs-var">OSMinGW32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>           </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918620"><span class="hs-identifier hs-var">root</span></a></span><span>  </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
</span><a href="../../filepath/src/System.FilePath.Windows.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; FieldName
</span><a href="GHC.Driver.Types.html#soExt"><span class="hs-identifier hs-var">soExt</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918621"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2799"></span><span>      </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918620"><span class="hs-identifier hs-var">root</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
</span><a href="../../filepath/src/System.FilePath.Windows.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; FieldName
</span><a href="GHC.Driver.Types.html#soExt"><span class="hs-identifier hs-var">soExt</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918621"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2800"></span><span>
</span><span id="line-2801"></span><span class="annot"><a href="GHC.Driver.Types.html#mkHsSOName"><span class="hs-identifier hs-type">mkHsSOName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-2802"></span><span id="mkHsSOName"><span class="annot"><span class="annottext">mkHsSOName :: Platform -&gt; ShowS
</span><a href="GHC.Driver.Types.html#mkHsSOName"><span class="hs-identifier hs-var hs-var">mkHsSOName</span></a></span></span><span> </span><span id="local-6989586621680918616"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918616"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621680918615"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918615"><span class="hs-identifier hs-var">root</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;lib&quot;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918615"><span class="hs-identifier hs-var">root</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
</span><a href="../../filepath/src/System.FilePath.Windows.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; FieldName
</span><a href="GHC.Driver.Types.html#soExt"><span class="hs-identifier hs-var">soExt</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918616"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2803"></span><span>
</span><span id="line-2804"></span><span class="annot"><a href="GHC.Driver.Types.html#soExt"><span class="hs-identifier hs-type">soExt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../ghc-boot/src/GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-2805"></span><span id="soExt"><span class="annot"><span class="annottext">soExt :: Platform -&gt; FieldName
</span><a href="GHC.Driver.Types.html#soExt"><span class="hs-identifier hs-var hs-var">soExt</span></a></span></span><span> </span><span id="local-6989586621680918614"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918614"><span class="hs-identifier hs-var">platform</span></a></span></span><span>
</span><span id="line-2806"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="../../ghc-boot/src/GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621680918614"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2807"></span><span>      </span><span class="annot"><span class="annottext">OS
</span><a href="../../ghc-boot/src/GHC.Platform.html#OSDarwin"><span class="hs-identifier hs-var">OSDarwin</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;dylib&quot;</span></span><span>
</span><span id="line-2808"></span><span>      </span><span class="annot"><span class="annottext">OS
</span><a href="../../ghc-boot/src/GHC.Platform.html#OSMinGW32"><span class="hs-identifier hs-var">OSMinGW32</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;dll&quot;</span></span><span>
</span><span id="line-2809"></span><span>      </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;so&quot;</span></span><span>
</span><span id="line-2810"></span><span>
</span><span id="line-2811"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                The module graph and ModSummary type
        A ModSummary is a node in the compilation manager's
        dependency graph, and it's also passed to hscMain
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2820"></span><span>
</span><span id="line-2821"></span><span class="hs-comment">-- | A ModuleGraph contains all the nodes from the home package (only).</span><span>
</span><span id="line-2822"></span><span class="hs-comment">-- There will be a node for each source module, plus a node for each hi-boot</span><span>
</span><span id="line-2823"></span><span class="hs-comment">-- module.</span><span>
</span><span id="line-2824"></span><span class="hs-comment">--</span><span>
</span><span id="line-2825"></span><span class="hs-comment">-- The graph is not necessarily stored in topologically-sorted order.  Use</span><span>
</span><span id="line-2826"></span><span class="hs-comment">-- 'GHC.topSortModuleGraph' and 'GHC.Data.Graph.Directed.flattenSCC' to achieve this.</span><span>
</span><span id="line-2827"></span><span class="hs-keyword">data</span><span> </span><span id="ModuleGraph"><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-var">ModuleGraph</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ModuleGraph"><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-var">ModuleGraph</span></a></span></span><span>
</span><span id="line-2828"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="mg_mss"><span class="annot"><span class="annottext">ModuleGraph -&gt; [ModSummary]
</span><a href="GHC.Driver.Types.html#mg_mss"><span class="hs-identifier hs-var hs-var">mg_mss</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2829"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mg_non_boot"><span class="annot"><span class="annottext">ModuleGraph -&gt; ModuleEnv ModSummary
</span><a href="GHC.Driver.Types.html#mg_non_boot"><span class="hs-identifier hs-var hs-var">mg_non_boot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleEnv"><span class="hs-identifier hs-type">ModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span>
</span><span id="line-2830"></span><span>    </span><span class="hs-comment">-- a map of all non-boot ModSummaries keyed by Modules</span><span>
</span><span id="line-2831"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mg_boot"><span class="annot"><span class="annottext">ModuleGraph -&gt; ModuleSet
</span><a href="GHC.Driver.Types.html#mg_boot"><span class="hs-identifier hs-var hs-var">mg_boot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleSet"><span class="hs-identifier hs-type">ModuleSet</span></a></span><span>
</span><span id="line-2832"></span><span>    </span><span class="hs-comment">-- a set of boot Modules</span><span>
</span><span id="line-2833"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="mg_needs_th_or_qq"><span class="annot"><span class="annottext">ModuleGraph -&gt; Bool
</span><a href="GHC.Driver.Types.html#mg_needs_th_or_qq"><span class="hs-identifier hs-var hs-var">mg_needs_th_or_qq</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2834"></span><span>    </span><span class="hs-comment">-- does any of the modules in mg_mss require TemplateHaskell or</span><span>
</span><span id="line-2835"></span><span>    </span><span class="hs-comment">-- QuasiQuotes?</span><span>
</span><span id="line-2836"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-2837"></span><span>
</span><span id="line-2838"></span><span class="hs-comment">-- | Determines whether a set of modules requires Template Haskell or</span><span>
</span><span id="line-2839"></span><span class="hs-comment">-- Quasi Quotes</span><span>
</span><span id="line-2840"></span><span class="hs-comment">--</span><span>
</span><span id="line-2841"></span><span class="hs-comment">-- Note that if the session's 'DynFlags' enabled Template Haskell when</span><span>
</span><span id="line-2842"></span><span class="hs-comment">-- 'depanal' was called, then each module in the returned module graph will</span><span>
</span><span id="line-2843"></span><span class="hs-comment">-- have Template Haskell enabled whether it is actually needed or not.</span><span>
</span><span id="line-2844"></span><span class="annot"><a href="GHC.Driver.Types.html#needsTemplateHaskellOrQQ"><span class="hs-identifier hs-type">needsTemplateHaskellOrQQ</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2845"></span><span id="needsTemplateHaskellOrQQ"><span class="annot"><span class="annottext">needsTemplateHaskellOrQQ :: ModuleGraph -&gt; Bool
</span><a href="GHC.Driver.Types.html#needsTemplateHaskellOrQQ"><span class="hs-identifier hs-var hs-var">needsTemplateHaskellOrQQ</span></a></span></span><span> </span><span id="local-6989586621680918607"><span class="annot"><span class="annottext">ModuleGraph
</span><a href="#local-6989586621680918607"><span class="hs-identifier hs-var">mg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleGraph -&gt; Bool
</span><a href="GHC.Driver.Types.html#mg_needs_th_or_qq"><span class="hs-identifier hs-var hs-var">mg_needs_th_or_qq</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleGraph
</span><a href="#local-6989586621680918607"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-2846"></span><span>
</span><span id="line-2847"></span><span class="hs-comment">-- | Map a function 'f' over all the 'ModSummaries'.</span><span>
</span><span id="line-2848"></span><span class="hs-comment">-- To preserve invariants 'f' can't change the isBoot status.</span><span>
</span><span id="line-2849"></span><span class="annot"><a href="GHC.Driver.Types.html#mapMG"><span class="hs-identifier hs-type">mapMG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span>
</span><span id="line-2850"></span><span id="mapMG"><span class="annot"><span class="annottext">mapMG :: (ModSummary -&gt; ModSummary) -&gt; ModuleGraph -&gt; ModuleGraph
</span><a href="GHC.Driver.Types.html#mapMG"><span class="hs-identifier hs-var hs-var">mapMG</span></a></span></span><span> </span><span id="local-6989586621680918606"><span class="annot"><span class="annottext">ModSummary -&gt; ModSummary
</span><a href="#local-6989586621680918606"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680918605"><span class="annot"><span class="annottext">mg :: ModuleGraph
</span><a href="#local-6989586621680918605"><span class="hs-identifier hs-var">mg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span class="hs-special">{</span><span id="local-6989586621680918601"><span id="local-6989586621680918602"><span id="local-6989586621680918603"><span id="local-6989586621680918604"><span class="annot"><span class="annottext">Bool
[ModSummary]
ModuleSet
ModuleEnv ModSummary
mg_needs_th_or_qq :: Bool
mg_boot :: ModuleSet
mg_non_boot :: ModuleEnv ModSummary
mg_mss :: [ModSummary]
mg_needs_th_or_qq :: ModuleGraph -&gt; Bool
mg_boot :: ModuleGraph -&gt; ModuleSet
mg_non_boot :: ModuleGraph -&gt; ModuleEnv ModSummary
mg_mss :: ModuleGraph -&gt; [ModSummary]
</span><a href="#local-6989586621680918601"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleGraph
</span><a href="#local-6989586621680918605"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-2851"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_mss :: [ModSummary]
</span><a href="GHC.Driver.Types.html#mg_mss"><span class="hs-identifier hs-var">mg_mss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ModSummary -&gt; ModSummary) -&gt; [ModSummary] -&gt; [ModSummary]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; ModSummary
</span><a href="#local-6989586621680918606"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[ModSummary]
</span><a href="#local-6989586621680918604"><span class="hs-identifier hs-var">mg_mss</span></a></span><span>
</span><span id="line-2852"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_non_boot :: ModuleEnv ModSummary
</span><a href="GHC.Driver.Types.html#mg_non_boot"><span class="hs-identifier hs-var">mg_non_boot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ModSummary -&gt; ModSummary)
-&gt; ModuleEnv ModSummary -&gt; ModuleEnv ModSummary
forall a b. (a -&gt; b) -&gt; ModuleEnv a -&gt; ModuleEnv b
</span><a href="GHC.Unit.Module.Env.html#mapModuleEnv"><span class="hs-identifier hs-var">mapModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; ModSummary
</span><a href="#local-6989586621680918606"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary
</span><a href="#local-6989586621680918603"><span class="hs-identifier hs-var">mg_non_boot</span></a></span><span>
</span><span id="line-2853"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-2854"></span><span>
</span><span id="line-2855"></span><span class="annot"><a href="GHC.Driver.Types.html#mgBootModules"><span class="hs-identifier hs-type">mgBootModules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#ModuleSet"><span class="hs-identifier hs-type">ModuleSet</span></a></span><span>
</span><span id="line-2856"></span><span id="mgBootModules"><span class="annot"><span class="annottext">mgBootModules :: ModuleGraph -&gt; ModuleSet
</span><a href="GHC.Driver.Types.html#mgBootModules"><span class="hs-identifier hs-var hs-var">mgBootModules</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span class="hs-special">{</span><span id="local-6989586621680918596"><span id="local-6989586621680918597"><span id="local-6989586621680918598"><span id="local-6989586621680918599"><span class="annot"><span class="annottext">Bool
[ModSummary]
ModuleSet
ModuleEnv ModSummary
mg_needs_th_or_qq :: Bool
mg_boot :: ModuleSet
mg_non_boot :: ModuleEnv ModSummary
mg_mss :: [ModSummary]
mg_needs_th_or_qq :: ModuleGraph -&gt; Bool
mg_boot :: ModuleGraph -&gt; ModuleSet
mg_non_boot :: ModuleGraph -&gt; ModuleEnv ModSummary
mg_mss :: ModuleGraph -&gt; [ModSummary]
</span><a href="#local-6989586621680918596"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleSet
</span><a href="#local-6989586621680918597"><span class="hs-identifier hs-var">mg_boot</span></a></span><span>
</span><span id="line-2857"></span><span>
</span><span id="line-2858"></span><span class="annot"><a href="GHC.Driver.Types.html#mgModSummaries"><span class="hs-identifier hs-type">mgModSummaries</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2859"></span><span id="mgModSummaries"><span class="annot"><span class="annottext">mgModSummaries :: ModuleGraph -&gt; [ModSummary]
</span><a href="GHC.Driver.Types.html#mgModSummaries"><span class="hs-identifier hs-var hs-var">mgModSummaries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleGraph -&gt; [ModSummary]
</span><a href="GHC.Driver.Types.html#mg_mss"><span class="hs-identifier hs-var hs-var">mg_mss</span></a></span><span>
</span><span id="line-2860"></span><span>
</span><span id="line-2861"></span><span class="annot"><a href="GHC.Driver.Types.html#mgElemModule"><span class="hs-identifier hs-type">mgElemModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2862"></span><span id="mgElemModule"><span class="annot"><span class="annottext">mgElemModule :: ModuleGraph -&gt; Module -&gt; Bool
</span><a href="GHC.Driver.Types.html#mgElemModule"><span class="hs-identifier hs-var hs-var">mgElemModule</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span class="hs-special">{</span><span id="local-6989586621680918592"><span id="local-6989586621680918593"><span id="local-6989586621680918594"><span id="local-6989586621680918595"><span class="annot"><span class="annottext">Bool
[ModSummary]
ModuleSet
ModuleEnv ModSummary
mg_needs_th_or_qq :: Bool
mg_boot :: ModuleSet
mg_non_boot :: ModuleEnv ModSummary
mg_mss :: [ModSummary]
mg_needs_th_or_qq :: ModuleGraph -&gt; Bool
mg_boot :: ModuleGraph -&gt; ModuleSet
mg_non_boot :: ModuleGraph -&gt; ModuleEnv ModSummary
mg_mss :: ModuleGraph -&gt; [ModSummary]
</span><a href="#local-6989586621680918592"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680918591"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918591"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleEnv ModSummary -&gt; Bool
forall a. Module -&gt; ModuleEnv a -&gt; Bool
</span><a href="GHC.Unit.Module.Env.html#elemModuleEnv"><span class="hs-identifier hs-var">elemModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918591"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary
</span><a href="#local-6989586621680918594"><span class="hs-identifier hs-var">mg_non_boot</span></a></span><span>
</span><span id="line-2863"></span><span>
</span><span id="line-2864"></span><span class="hs-comment">-- | Look up a ModSummary in the ModuleGraph</span><span>
</span><span id="line-2865"></span><span class="annot"><a href="GHC.Driver.Types.html#mgLookupModule"><span class="hs-identifier hs-type">mgLookupModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span>
</span><span id="line-2866"></span><span id="mgLookupModule"><span class="annot"><span class="annottext">mgLookupModule :: ModuleGraph -&gt; Module -&gt; Maybe ModSummary
</span><a href="GHC.Driver.Types.html#mgLookupModule"><span class="hs-identifier hs-var hs-var">mgLookupModule</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span class="hs-special">{</span><span id="local-6989586621680918586"><span id="local-6989586621680918587"><span id="local-6989586621680918588"><span id="local-6989586621680918589"><span class="annot"><span class="annottext">Bool
[ModSummary]
ModuleSet
ModuleEnv ModSummary
mg_needs_th_or_qq :: Bool
mg_boot :: ModuleSet
mg_non_boot :: ModuleEnv ModSummary
mg_mss :: [ModSummary]
mg_needs_th_or_qq :: ModuleGraph -&gt; Bool
mg_boot :: ModuleGraph -&gt; ModuleSet
mg_non_boot :: ModuleGraph -&gt; ModuleEnv ModSummary
mg_mss :: ModuleGraph -&gt; [ModSummary]
</span><a href="#local-6989586621680918586"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680918585"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918585"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary -&gt; Module -&gt; Maybe ModSummary
forall a. ModuleEnv a -&gt; Module -&gt; Maybe a
</span><a href="GHC.Unit.Module.Env.html#lookupModuleEnv"><span class="hs-identifier hs-var">lookupModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary
</span><a href="#local-6989586621680918588"><span class="hs-identifier hs-var">mg_non_boot</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918585"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-2867"></span><span>
</span><span id="line-2868"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyMG"><span class="hs-identifier hs-type">emptyMG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span>
</span><span id="line-2869"></span><span id="emptyMG"><span class="annot"><span class="annottext">emptyMG :: ModuleGraph
</span><a href="GHC.Driver.Types.html#emptyMG"><span class="hs-identifier hs-var hs-var">emptyMG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModSummary]
-&gt; ModuleEnv ModSummary -&gt; ModuleSet -&gt; Bool -&gt; ModuleGraph
</span><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-var">ModuleGraph</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary
forall a. ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#emptyModuleEnv"><span class="hs-identifier hs-var">emptyModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleSet
</span><a href="GHC.Unit.Module.Env.html#emptyModuleSet"><span class="hs-identifier hs-var">emptyModuleSet</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2870"></span><span>
</span><span id="line-2871"></span><span class="annot"><a href="GHC.Driver.Types.html#isTemplateHaskellOrQQNonBoot"><span class="hs-identifier hs-type">isTemplateHaskellOrQQNonBoot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2872"></span><span id="isTemplateHaskellOrQQNonBoot"><span class="annot"><span class="annottext">isTemplateHaskellOrQQNonBoot :: ModSummary -&gt; Bool
</span><a href="GHC.Driver.Types.html#isTemplateHaskellOrQQNonBoot"><span class="hs-identifier hs-var hs-var">isTemplateHaskellOrQQNonBoot</span></a></span></span><span> </span><span id="local-6989586621680918583"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918583"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2873"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><a href="../../ghc-boot-th/src/GHC.LanguageExtensions.Type.html#TemplateHaskell"><span class="hs-identifier hs-var">LangExt.TemplateHaskell</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#ms_hspp_opts"><span class="hs-identifier hs-var hs-var">ms_hspp_opts</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918583"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2874"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><a href="../../ghc-boot-th/src/GHC.LanguageExtensions.Type.html#QuasiQuotes"><span class="hs-identifier hs-var">LangExt.QuasiQuotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#ms_hspp_opts"><span class="hs-identifier hs-var hs-var">ms_hspp_opts</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918583"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-2875"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; IsBootInterface
</span><a href="GHC.Driver.Types.html#isBootSummary"><span class="hs-identifier hs-var">isBootSummary</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918583"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="annot"><span class="annottext">IsBootInterface -&gt; IsBootInterface -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2876"></span><span>
</span><span id="line-2877"></span><span class="hs-comment">-- | Add a ModSummary to ModuleGraph. Assumes that the new ModSummary is</span><span>
</span><span id="line-2878"></span><span class="hs-comment">-- not an element of the ModuleGraph.</span><span>
</span><span id="line-2879"></span><span class="annot"><a href="GHC.Driver.Types.html#extendMG"><span class="hs-identifier hs-type">extendMG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span>
</span><span id="line-2880"></span><span id="extendMG"><span class="annot"><span class="annottext">extendMG :: ModuleGraph -&gt; ModSummary -&gt; ModuleGraph
</span><a href="GHC.Driver.Types.html#extendMG"><span class="hs-identifier hs-var hs-var">extendMG</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span class="hs-special">{</span><span id="local-6989586621680918575"><span id="local-6989586621680918576"><span id="local-6989586621680918577"><span id="local-6989586621680918578"><span class="annot"><span class="annottext">Bool
[ModSummary]
ModuleSet
ModuleEnv ModSummary
mg_needs_th_or_qq :: Bool
mg_boot :: ModuleSet
mg_non_boot :: ModuleEnv ModSummary
mg_mss :: [ModSummary]
mg_needs_th_or_qq :: ModuleGraph -&gt; Bool
mg_boot :: ModuleGraph -&gt; ModuleSet
mg_non_boot :: ModuleGraph -&gt; ModuleEnv ModSummary
mg_mss :: ModuleGraph -&gt; [ModSummary]
</span><a href="#local-6989586621680918575"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621680918574"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleGraph :: [ModSummary]
-&gt; ModuleEnv ModSummary -&gt; ModuleSet -&gt; Bool -&gt; ModuleGraph
</span><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span>
</span><span id="line-2881"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_mss :: [ModSummary]
</span><a href="GHC.Driver.Types.html#mg_mss"><span class="hs-identifier hs-var">mg_mss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span><span class="annot"><span class="annottext">ModSummary -&gt; [ModSummary] -&gt; [ModSummary]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[ModSummary]
</span><a href="#local-6989586621680918578"><span class="hs-identifier hs-var">mg_mss</span></a></span><span>
</span><span id="line-2882"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_non_boot :: ModuleEnv ModSummary
</span><a href="GHC.Driver.Types.html#mg_non_boot"><span class="hs-identifier hs-var">mg_non_boot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; IsBootInterface
</span><a href="GHC.Driver.Types.html#isBootSummary"><span class="hs-identifier hs-var">isBootSummary</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2883"></span><span>      </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary
</span><a href="#local-6989586621680918577"><span class="hs-identifier hs-var">mg_non_boot</span></a></span><span>
</span><span id="line-2884"></span><span>      </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary
-&gt; Module -&gt; ModSummary -&gt; ModuleEnv ModSummary
forall a. ModuleEnv a -&gt; Module -&gt; a -&gt; ModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#extendModuleEnv"><span class="hs-identifier hs-var">extendModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleEnv ModSummary
</span><a href="#local-6989586621680918577"><span class="hs-identifier hs-var">mg_non_boot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; Module
</span><a href="GHC.Driver.Types.html#ms_mod"><span class="hs-identifier hs-var hs-var">ms_mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-2885"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_boot :: ModuleSet
</span><a href="GHC.Driver.Types.html#mg_boot"><span class="hs-identifier hs-var">mg_boot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; IsBootInterface
</span><a href="GHC.Driver.Types.html#isBootSummary"><span class="hs-identifier hs-var">isBootSummary</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2886"></span><span>      </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleSet
</span><a href="#local-6989586621680918576"><span class="hs-identifier hs-var">mg_boot</span></a></span><span>
</span><span id="line-2887"></span><span>      </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ModuleSet -&gt; Module -&gt; ModuleSet
</span><a href="GHC.Unit.Module.Env.html#extendModuleSet"><span class="hs-identifier hs-var">extendModuleSet</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleSet
</span><a href="#local-6989586621680918576"><span class="hs-identifier hs-var">mg_boot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; Module
</span><a href="GHC.Driver.Types.html#ms_mod"><span class="hs-identifier hs-var hs-var">ms_mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2888"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_needs_th_or_qq :: Bool
</span><a href="GHC.Driver.Types.html#mg_needs_th_or_qq"><span class="hs-identifier hs-var">mg_needs_th_or_qq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918575"><span class="hs-identifier hs-var">mg_needs_th_or_qq</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; Bool
</span><a href="GHC.Driver.Types.html#isTemplateHaskellOrQQNonBoot"><span class="hs-identifier hs-var">isTemplateHaskellOrQQNonBoot</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918574"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-2889"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-2890"></span><span>
</span><span id="line-2891"></span><span class="annot"><a href="GHC.Driver.Types.html#mkModuleGraph"><span class="hs-identifier hs-type">mkModuleGraph</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModuleGraph"><span class="hs-identifier hs-type">ModuleGraph</span></a></span><span>
</span><span id="line-2892"></span><span id="mkModuleGraph"><span class="annot"><span class="annottext">mkModuleGraph :: [ModSummary] -&gt; ModuleGraph
</span><a href="GHC.Driver.Types.html#mkModuleGraph"><span class="hs-identifier hs-var hs-var">mkModuleGraph</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ModSummary -&gt; ModuleGraph -&gt; ModuleGraph)
-&gt; ModuleGraph -&gt; [ModSummary] -&gt; ModuleGraph
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ModuleGraph -&gt; ModSummary -&gt; ModuleGraph)
-&gt; ModSummary -&gt; ModuleGraph -&gt; ModuleGraph
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleGraph -&gt; ModSummary -&gt; ModuleGraph
</span><a href="GHC.Driver.Types.html#extendMG"><span class="hs-identifier hs-var">extendMG</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ModuleGraph
</span><a href="GHC.Driver.Types.html#emptyMG"><span class="hs-identifier hs-var">emptyMG</span></a></span><span>
</span><span id="line-2893"></span><span>
</span><span id="line-2894"></span><span class="hs-comment">-- | A single node in a 'ModuleGraph'. The nodes of the module graph</span><span>
</span><span id="line-2895"></span><span class="hs-comment">-- are one of:</span><span>
</span><span id="line-2896"></span><span class="hs-comment">--</span><span>
</span><span id="line-2897"></span><span class="hs-comment">-- * A regular Haskell source module</span><span>
</span><span id="line-2898"></span><span class="hs-comment">-- * A hi-boot source module</span><span>
</span><span id="line-2899"></span><span class="hs-comment">--</span><span>
</span><span id="line-2900"></span><span class="hs-keyword">data</span><span> </span><span id="ModSummary"><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-var">ModSummary</span></a></span></span><span>
</span><span id="line-2901"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="ModSummary"><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-var">ModSummary</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2902"></span><span>        </span><span id="ms_mod"><span class="annot"><span class="annottext">ModSummary -&gt; Module
</span><a href="GHC.Driver.Types.html#ms_mod"><span class="hs-identifier hs-var hs-var">ms_mod</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2903"></span><span>          </span><span class="hs-comment">-- ^ Identity of the module</span><span>
</span><span id="line-2904"></span><span>        </span><span id="ms_hsc_src"><span class="annot"><span class="annottext">ModSummary -&gt; HscSource
</span><a href="GHC.Driver.Types.html#ms_hsc_src"><span class="hs-identifier hs-var hs-var">ms_hsc_src</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#HscSource"><span class="hs-identifier hs-type">HscSource</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2905"></span><span>          </span><span class="hs-comment">-- ^ The module source either plain Haskell or hs-boot</span><span>
</span><span id="line-2906"></span><span>        </span><span id="ms_location"><span class="annot"><span class="annottext">ModSummary -&gt; ModLocation
</span><a href="GHC.Driver.Types.html#ms_location"><span class="hs-identifier hs-var hs-var">ms_location</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Location.html#ModLocation"><span class="hs-identifier hs-type">ModLocation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2907"></span><span>          </span><span class="hs-comment">-- ^ Location of the various files belonging to the module</span><span>
</span><span id="line-2908"></span><span>        </span><span id="ms_hs_date"><span class="annot"><span class="annottext">ModSummary -&gt; UTCTime
</span><a href="GHC.Driver.Types.html#ms_hs_date"><span class="hs-identifier hs-var hs-var">ms_hs_date</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../time/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2909"></span><span>          </span><span class="hs-comment">-- ^ Timestamp of source file</span><span>
</span><span id="line-2910"></span><span>        </span><span id="ms_obj_date"><span class="annot"><span class="annottext">ModSummary -&gt; Maybe UTCTime
</span><a href="GHC.Driver.Types.html#ms_obj_date"><span class="hs-identifier hs-var hs-var">ms_obj_date</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../time/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2911"></span><span>          </span><span class="hs-comment">-- ^ Timestamp of object, if we have one</span><span>
</span><span id="line-2912"></span><span>        </span><span id="ms_iface_date"><span class="annot"><span class="annottext">ModSummary -&gt; Maybe UTCTime
</span><a href="GHC.Driver.Types.html#ms_iface_date"><span class="hs-identifier hs-var hs-var">ms_iface_date</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../time/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2913"></span><span>          </span><span class="hs-comment">-- ^ Timestamp of hi file, if we *only* are typechecking (it is</span><span>
</span><span id="line-2914"></span><span>          </span><span class="hs-comment">-- 'Nothing' otherwise.</span><span>
</span><span id="line-2915"></span><span>          </span><span class="hs-comment">-- See Note [Recompilation checking in -fno-code mode] and #9243</span><span>
</span><span id="line-2916"></span><span>        </span><span id="ms_hie_date"><span class="annot"><span class="annottext">ModSummary -&gt; Maybe UTCTime
</span><a href="GHC.Driver.Types.html#ms_hie_date"><span class="hs-identifier hs-var hs-var">ms_hie_date</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../time/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2917"></span><span>          </span><span class="hs-comment">-- ^ Timestamp of hie file, if we have one</span><span>
</span><span id="line-2918"></span><span>        </span><span id="ms_srcimps"><span class="annot"><span class="annottext">ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_srcimps"><span class="hs-identifier hs-var hs-var">ms_srcimps</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-2919"></span><span>          </span><span class="hs-comment">-- ^ Source imports of the module</span><span>
</span><span id="line-2920"></span><span>        </span><span id="ms_textual_imps"><span class="annot"><span class="annottext">ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_textual_imps"><span class="hs-identifier hs-var hs-var">ms_textual_imps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-2921"></span><span>          </span><span class="hs-comment">-- ^ Non-source imports of the module from the module *text*</span><span>
</span><span id="line-2922"></span><span>        </span><span id="ms_parsed_mod"><span class="annot"><span class="annottext">ModSummary -&gt; Maybe HsParsedModule
</span><a href="GHC.Driver.Types.html#ms_parsed_mod"><span class="hs-identifier hs-var hs-var">ms_parsed_mod</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HsParsedModule"><span class="hs-identifier hs-type">HsParsedModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2923"></span><span>          </span><span class="hs-comment">-- ^ The parsed, nonrenamed source, if we have it.  This is also</span><span>
</span><span id="line-2924"></span><span>          </span><span class="hs-comment">-- used to support &quot;inline module syntax&quot; in Backpack files.</span><span>
</span><span id="line-2925"></span><span>        </span><span id="ms_hspp_file"><span class="annot"><span class="annottext">ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#ms_hspp_file"><span class="hs-identifier hs-var hs-var">ms_hspp_file</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2926"></span><span>          </span><span class="hs-comment">-- ^ Filename of preprocessed source file</span><span>
</span><span id="line-2927"></span><span>        </span><span id="ms_hspp_opts"><span class="annot"><span class="annottext">ModSummary -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#ms_hspp_opts"><span class="hs-identifier hs-var hs-var">ms_hspp_opts</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2928"></span><span>          </span><span class="hs-comment">-- ^ Cached flags from @OPTIONS@, @INCLUDE@ and @LANGUAGE@</span><span>
</span><span id="line-2929"></span><span>          </span><span class="hs-comment">-- pragmas in the modules source code</span><span>
</span><span id="line-2930"></span><span>        </span><span id="ms_hspp_buf"><span class="annot"><span class="annottext">ModSummary -&gt; Maybe InputFileBuffer
</span><a href="GHC.Driver.Types.html#ms_hspp_buf"><span class="hs-identifier hs-var hs-var">ms_hspp_buf</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html#StringBuffer"><span class="hs-identifier hs-type">StringBuffer</span></a></span><span>
</span><span id="line-2931"></span><span>          </span><span class="hs-comment">-- ^ The actual preprocessed source, if we have it</span><span>
</span><span id="line-2932"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-2933"></span><span>
</span><span id="line-2934"></span><span class="annot"><a href="GHC.Driver.Types.html#ms_installed_mod"><span class="hs-identifier hs-type">ms_installed_mod</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#InstalledModule"><span class="hs-identifier hs-type">InstalledModule</span></a></span><span>
</span><span id="line-2935"></span><span id="ms_installed_mod"><span class="annot"><span class="annottext">ms_installed_mod :: ModSummary -&gt; InstalledModule
</span><a href="GHC.Driver.Types.html#ms_installed_mod"><span class="hs-identifier hs-var hs-var">ms_installed_mod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InstalledModule, Maybe InstantiatedModule) -&gt; InstalledModule
forall a b. (a, b) -&gt; a
</span><a href="../../base/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((InstalledModule, Maybe InstantiatedModule) -&gt; InstalledModule)
-&gt; (ModSummary -&gt; (InstalledModule, Maybe InstantiatedModule))
-&gt; ModSummary
-&gt; InstalledModule
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; (InstalledModule, Maybe InstantiatedModule)
</span><a href="GHC.Unit.Module.html#getModuleInstantiation"><span class="hs-identifier hs-var">getModuleInstantiation</span></a></span><span> </span><span class="annot"><span class="annottext">(Module -&gt; (InstalledModule, Maybe InstantiatedModule))
-&gt; (ModSummary -&gt; Module)
-&gt; ModSummary
-&gt; (InstalledModule, Maybe InstantiatedModule)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; Module
</span><a href="GHC.Driver.Types.html#ms_mod"><span class="hs-identifier hs-var hs-var">ms_mod</span></a></span><span>
</span><span id="line-2936"></span><span>
</span><span id="line-2937"></span><span class="annot"><a href="GHC.Driver.Types.html#ms_mod_name"><span class="hs-identifier hs-type">ms_mod_name</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-2938"></span><span id="ms_mod_name"><span class="annot"><span class="annottext">ms_mod_name :: ModSummary -&gt; ModuleName
</span><a href="GHC.Driver.Types.html#ms_mod_name"><span class="hs-identifier hs-var hs-var">ms_mod_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">(Module -&gt; ModuleName)
-&gt; (ModSummary -&gt; Module) -&gt; ModSummary -&gt; ModuleName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; Module
</span><a href="GHC.Driver.Types.html#ms_mod"><span class="hs-identifier hs-var hs-var">ms_mod</span></a></span><span>
</span><span id="line-2939"></span><span>
</span><span id="line-2940"></span><span class="annot"><a href="GHC.Driver.Types.html#ms_imps"><span class="hs-identifier hs-type">ms_imps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2941"></span><span id="ms_imps"><span class="annot"><span class="annottext">ms_imps :: ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_imps"><span class="hs-identifier hs-var hs-var">ms_imps</span></a></span></span><span> </span><span id="local-6989586621680918558"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918558"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2942"></span><span>  </span><span class="annot"><span class="annottext">ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_textual_imps"><span class="hs-identifier hs-var hs-var">ms_textual_imps</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918558"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="annot"><span class="annottext">[(Maybe FastString, Located ModuleName)]
-&gt; [(Maybe FastString, Located ModuleName)]
-&gt; [(Maybe FastString, Located ModuleName)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-2943"></span><span>  </span><span class="annot"><span class="annottext">(ModuleName -&gt; (Maybe FastString, Located ModuleName))
-&gt; [ModuleName] -&gt; [(Maybe FastString, Located ModuleName)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; (Maybe FastString, Located ModuleName)
forall {e} {a}. e -&gt; (Maybe a, Located e)
</span><a href="#local-6989586621680918557"><span class="hs-identifier hs-var">mk_additional_import</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; [ModuleName]
</span><a href="GHC.Driver.Session.html#dynFlagDependencies"><span class="hs-identifier hs-var">dynFlagDependencies</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; DynFlags
</span><a href="GHC.Driver.Types.html#ms_hspp_opts"><span class="hs-identifier hs-var hs-var">ms_hspp_opts</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918558"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2944"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2945"></span><span>    </span><span id="local-6989586621680918557"><span class="annot"><span class="annottext">mk_additional_import :: e -&gt; (Maybe a, Located e)
</span><a href="#local-6989586621680918557"><span class="hs-identifier hs-var hs-var">mk_additional_import</span></a></span></span><span> </span><span id="local-6989586621680918555"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680918555"><span class="hs-identifier hs-var">mod_nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">e -&gt; Located e
forall e. e -&gt; Located e
</span><a href="GHC.Types.SrcLoc.html#noLoc"><span class="hs-identifier hs-var">noLoc</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621680918555"><span class="hs-identifier hs-var">mod_nm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2946"></span><span>
</span><span id="line-2947"></span><span class="annot"><a href="GHC.Driver.Types.html#home_imps"><span class="hs-identifier hs-type">home_imps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2948"></span><span id="home_imps"><span class="annot"><span class="annottext">home_imps :: [(Maybe FastString, Located ModuleName)] -&gt; [Located ModuleName]
</span><a href="GHC.Driver.Types.html#home_imps"><span class="hs-identifier hs-var hs-var">home_imps</span></a></span></span><span> </span><span id="local-6989586621680918553"><span class="annot"><span class="annottext">[(Maybe FastString, Located ModuleName)]
</span><a href="#local-6989586621680918553"><span class="hs-identifier hs-var">imps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Located ModuleName
</span><a href="#local-6989586621680918552"><span class="hs-identifier hs-var">lmodname</span></a></span><span> </span><span class="hs-glyph">|</span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680918551"><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621680918551"><span class="hs-identifier hs-var">mb_pkg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680918552"><span class="annot"><span class="annottext">Located ModuleName
</span><a href="#local-6989586621680918552"><span class="hs-identifier hs-var">lmodname</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Maybe FastString, Located ModuleName)]
</span><a href="#local-6989586621680918553"><span class="hs-identifier hs-var">imps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2949"></span><span>                                  </span><span class="annot"><span class="annottext">Maybe FastString -&gt; Bool
</span><a href="#local-6989586621680918550"><span class="hs-identifier hs-var">isLocal</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FastString
</span><a href="#local-6989586621680918551"><span class="hs-identifier hs-var">mb_pkg</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-2950"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680918550"><span class="annot"><span class="annottext">isLocal :: Maybe FastString -&gt; Bool
</span><a href="#local-6989586621680918550"><span class="hs-identifier hs-var hs-var">isLocal</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe FastString
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2951"></span><span>        </span><span class="annot"><a href="#local-6989586621680918550"><span class="hs-identifier hs-var">isLocal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680918547"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621680918547"><span class="hs-identifier hs-var">pkg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621680918547"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; FastString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;this&quot;</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- &quot;this&quot; is special</span><span>
</span><span id="line-2952"></span><span>        </span><span class="annot"><a href="#local-6989586621680918550"><span class="hs-identifier hs-var">isLocal</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FastString
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2953"></span><span>
</span><span id="line-2954"></span><span class="annot"><a href="GHC.Driver.Types.html#ms_home_allimps"><span class="hs-identifier hs-type">ms_home_allimps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2955"></span><span id="ms_home_allimps"><span class="annot"><span class="annottext">ms_home_allimps :: ModSummary -&gt; [ModuleName]
</span><a href="GHC.Driver.Types.html#ms_home_allimps"><span class="hs-identifier hs-var hs-var">ms_home_allimps</span></a></span></span><span> </span><span id="local-6989586621680918545"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918545"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Located ModuleName -&gt; ModuleName)
-&gt; [Located ModuleName] -&gt; [ModuleName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Located ModuleName -&gt; ModuleName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; [Located ModuleName]
</span><a href="GHC.Driver.Types.html#ms_home_srcimps"><span class="hs-identifier hs-var">ms_home_srcimps</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918545"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="annot"><span class="annottext">[Located ModuleName]
-&gt; [Located ModuleName] -&gt; [Located ModuleName]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; [Located ModuleName]
</span><a href="GHC.Driver.Types.html#ms_home_imps"><span class="hs-identifier hs-var">ms_home_imps</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918545"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2956"></span><span>
</span><span id="line-2957"></span><span class="hs-comment">-- | Like 'ms_home_imps', but for SOURCE imports.</span><span>
</span><span id="line-2958"></span><span class="annot"><a href="GHC.Driver.Types.html#ms_home_srcimps"><span class="hs-identifier hs-type">ms_home_srcimps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2959"></span><span id="ms_home_srcimps"><span class="annot"><span class="annottext">ms_home_srcimps :: ModSummary -&gt; [Located ModuleName]
</span><a href="GHC.Driver.Types.html#ms_home_srcimps"><span class="hs-identifier hs-var hs-var">ms_home_srcimps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe FastString, Located ModuleName)] -&gt; [Located ModuleName]
</span><a href="GHC.Driver.Types.html#home_imps"><span class="hs-identifier hs-var">home_imps</span></a></span><span> </span><span class="annot"><span class="annottext">([(Maybe FastString, Located ModuleName)] -&gt; [Located ModuleName])
-&gt; (ModSummary -&gt; [(Maybe FastString, Located ModuleName)])
-&gt; ModSummary
-&gt; [Located ModuleName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_srcimps"><span class="hs-identifier hs-var hs-var">ms_srcimps</span></a></span><span>
</span><span id="line-2960"></span><span>
</span><span id="line-2961"></span><span class="hs-comment">-- | All of the (possibly) home module imports from a</span><span>
</span><span id="line-2962"></span><span class="hs-comment">-- 'ModSummary'; that is to say, each of these module names</span><span>
</span><span id="line-2963"></span><span class="hs-comment">-- could be a home import if an appropriately named file</span><span>
</span><span id="line-2964"></span><span class="hs-comment">-- existed.  (This is in contrast to package qualified</span><span>
</span><span id="line-2965"></span><span class="hs-comment">-- imports, which are guaranteed not to be home imports.)</span><span>
</span><span id="line-2966"></span><span class="annot"><a href="GHC.Driver.Types.html#ms_home_imps"><span class="hs-identifier hs-type">ms_home_imps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2967"></span><span id="ms_home_imps"><span class="annot"><span class="annottext">ms_home_imps :: ModSummary -&gt; [Located ModuleName]
</span><a href="GHC.Driver.Types.html#ms_home_imps"><span class="hs-identifier hs-var hs-var">ms_home_imps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe FastString, Located ModuleName)] -&gt; [Located ModuleName]
</span><a href="GHC.Driver.Types.html#home_imps"><span class="hs-identifier hs-var">home_imps</span></a></span><span> </span><span class="annot"><span class="annottext">([(Maybe FastString, Located ModuleName)] -&gt; [Located ModuleName])
-&gt; (ModSummary -&gt; [(Maybe FastString, Located ModuleName)])
-&gt; ModSummary
-&gt; [Located ModuleName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_imps"><span class="hs-identifier hs-var">ms_imps</span></a></span><span>
</span><span id="line-2968"></span><span>
</span><span id="line-2969"></span><span class="hs-comment">-- The ModLocation contains both the original source filename and the</span><span>
</span><span id="line-2970"></span><span class="hs-comment">-- filename of the cleaned-up source file after all preprocessing has been</span><span>
</span><span id="line-2971"></span><span class="hs-comment">-- done.  The point is that the summariser will have to cpp/unlit/whatever</span><span>
</span><span id="line-2972"></span><span class="hs-comment">-- all files anyway, and there's no point in doing this twice -- just</span><span>
</span><span id="line-2973"></span><span class="hs-comment">-- park the result in a temp file, put the name of it in the location,</span><span>
</span><span id="line-2974"></span><span class="hs-comment">-- and let @compile@ read from that file on the way back up.</span><span>
</span><span id="line-2975"></span><span>
</span><span id="line-2976"></span><span class="hs-comment">-- The ModLocation is stable over successive up-sweeps in GHCi, wheres</span><span>
</span><span id="line-2977"></span><span class="hs-comment">-- the ms_hs_date and imports can, of course, change</span><span>
</span><span id="line-2978"></span><span>
</span><span id="line-2979"></span><span class="annot"><a href="GHC.Driver.Types.html#msHsFilePath"><span class="hs-identifier hs-type">msHsFilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#msHiFilePath"><span class="hs-identifier hs-type">msHiFilePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#msObjFilePath"><span class="hs-identifier hs-type">msObjFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-2980"></span><span id="msHsFilePath"><span class="annot"><span class="annottext">msHsFilePath :: ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msHsFilePath"><span class="hs-identifier hs-var hs-var">msHsFilePath</span></a></span></span><span>  </span><span id="local-6989586621680918543"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918543"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Maybe FieldName -&gt; FieldName
forall a. HasCallStack =&gt; FieldName -&gt; Maybe a -&gt; a
</span><a href="GHC.Data.Maybe.html#expectJust"><span class="hs-identifier hs-var">expectJust</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;msHsFilePath&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModLocation -&gt; Maybe FieldName
</span><a href="GHC.Unit.Module.Location.html#ml_hs_file"><span class="hs-identifier hs-var hs-var">ml_hs_file</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; ModLocation
</span><a href="GHC.Driver.Types.html#ms_location"><span class="hs-identifier hs-var hs-var">ms_location</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918543"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2981"></span><span id="msHiFilePath"><span class="annot"><span class="annottext">msHiFilePath :: ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msHiFilePath"><span class="hs-identifier hs-var hs-var">msHiFilePath</span></a></span></span><span>  </span><span id="local-6989586621680918540"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918540"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModLocation -&gt; FieldName
</span><a href="GHC.Unit.Module.Location.html#ml_hi_file"><span class="hs-identifier hs-var hs-var">ml_hi_file</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; ModLocation
</span><a href="GHC.Driver.Types.html#ms_location"><span class="hs-identifier hs-var hs-var">ms_location</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918540"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2982"></span><span id="msObjFilePath"><span class="annot"><span class="annottext">msObjFilePath :: ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msObjFilePath"><span class="hs-identifier hs-var hs-var">msObjFilePath</span></a></span></span><span> </span><span id="local-6989586621680918538"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918538"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModLocation -&gt; FieldName
</span><a href="GHC.Unit.Module.Location.html#ml_obj_file"><span class="hs-identifier hs-var hs-var">ml_obj_file</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; ModLocation
</span><a href="GHC.Driver.Types.html#ms_location"><span class="hs-identifier hs-var hs-var">ms_location</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918538"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2983"></span><span>
</span><span id="line-2984"></span><span class="annot"><a href="GHC.Driver.Types.html#msDynObjFilePath"><span class="hs-identifier hs-type">msDynObjFilePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-2985"></span><span id="msDynObjFilePath"><span class="annot"><span class="annottext">msDynObjFilePath :: ModSummary -&gt; DynFlags -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msDynObjFilePath"><span class="hs-identifier hs-var hs-var">msDynObjFilePath</span></a></span></span><span> </span><span id="local-6989586621680918535"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918535"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span id="local-6989586621680918534"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918534"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; ShowS
</span><a href="GHC.Driver.Session.html#dynamicOutputFile"><span class="hs-identifier hs-var">dynamicOutputFile</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918534"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msObjFilePath"><span class="hs-identifier hs-var">msObjFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918535"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2986"></span><span>
</span><span id="line-2987"></span><span class="hs-comment">-- | Did this 'ModSummary' originate from a hs-boot file?</span><span>
</span><span id="line-2988"></span><span class="annot"><a href="GHC.Driver.Types.html#isBootSummary"><span class="hs-identifier hs-type">isBootSummary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#IsBootInterface"><span class="hs-identifier hs-type">IsBootInterface</span></a></span><span>
</span><span id="line-2989"></span><span id="isBootSummary"><span class="annot"><span class="annottext">isBootSummary :: ModSummary -&gt; IsBootInterface
</span><a href="GHC.Driver.Types.html#isBootSummary"><span class="hs-identifier hs-var hs-var">isBootSummary</span></a></span></span><span> </span><span id="local-6989586621680918532"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918532"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; HscSource
</span><a href="GHC.Driver.Types.html#ms_hsc_src"><span class="hs-identifier hs-var hs-var">ms_hsc_src</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918532"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource -&gt; HscSource -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="GHC.Driver.Phases.html#HsBootFile"><span class="hs-identifier hs-var">HsBootFile</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="GHC.Unit.Types.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span>
</span><span id="line-2990"></span><span>
</span><span id="line-2991"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918529"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2992"></span><span>   </span><span id="local-6989586621680918512"><span class="annot"><span class="annottext">ppr :: ModSummary -&gt; SDoc
</span><a href="#local-6989586621680918512"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621680918511"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918511"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-2993"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;ModSummary {&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-2994"></span><span>             </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;ms_hs_date = &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTCTime -&gt; FieldName
forall a. Show a =&gt; a -&gt; FieldName
</span><a href="../../base/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; UTCTime
</span><a href="GHC.Driver.Types.html#ms_hs_date"><span class="hs-identifier hs-var hs-var">ms_hs_date</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918511"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2995"></span><span>                          </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;ms_mod =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; Module
</span><a href="GHC.Driver.Types.html#ms_mod"><span class="hs-identifier hs-var hs-var">ms_mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918511"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2996"></span><span>                                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HscSource -&gt; FieldName
</span><a href="GHC.Driver.Phases.html#hscSourceString"><span class="hs-identifier hs-var">hscSourceString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; HscSource
</span><a href="GHC.Driver.Types.html#ms_hsc_src"><span class="hs-identifier hs-var hs-var">ms_hsc_src</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918511"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-2997"></span><span>                          </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;ms_textual_imps =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Maybe FastString, Located ModuleName)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_textual_imps"><span class="hs-identifier hs-var hs-var">ms_textual_imps</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918511"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2998"></span><span>                          </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;ms_srcimps =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Maybe FastString, Located ModuleName)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; [(Maybe FastString, Located ModuleName)]
</span><a href="GHC.Driver.Types.html#ms_srcimps"><span class="hs-identifier hs-var hs-var">ms_srcimps</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918511"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-2999"></span><span>             </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'}'</span></span><span>
</span><span id="line-3000"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-3001"></span><span>
</span><span id="line-3002"></span><span class="annot"><a href="GHC.Driver.Types.html#showModMsg"><span class="hs-identifier hs-type">showModMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#HscTarget"><span class="hs-identifier hs-type">HscTarget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModSummary"><span class="hs-identifier hs-type">ModSummary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-3003"></span><span id="showModMsg"><span class="annot"><span class="annottext">showModMsg :: DynFlags -&gt; HscTarget -&gt; Bool -&gt; ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#showModMsg"><span class="hs-identifier hs-var hs-var">showModMsg</span></a></span></span><span> </span><span id="local-6989586621680918507"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918507"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621680918506"><span class="annot"><span class="annottext">HscTarget
</span><a href="#local-6989586621680918506"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621680918505"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918505"><span class="hs-identifier hs-var">recomp</span></a></span></span><span> </span><span id="local-6989586621680918504"><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918504"><span class="hs-identifier hs-var">mod_summary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; SDoc -&gt; FieldName
</span><a href="GHC.Utils.Outputable.html#showSDoc"><span class="hs-identifier hs-var">showSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918507"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; FieldName) -&gt; SDoc -&gt; FieldName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-3004"></span><span>   </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_HideSourcePaths"><span class="hs-identifier hs-var">Opt_HideSourcePaths</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918507"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-3005"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918501"><span class="hs-identifier hs-var">mod_str</span></a></span><span>
</span><span id="line-3006"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="annot"><span class="annottext">([SDoc] -&gt; SDoc) -&gt; [SDoc] -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-3007"></span><span>         </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918501"><span class="hs-identifier hs-var">mod_str</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char -&gt; FieldName
forall a. Int -&gt; a -&gt; [a]
</span><a href="../../base/src/GHC.List.html#replicate"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base/src/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918501"><span class="hs-identifier hs-var">mod_str</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span>
</span><span id="line-3008"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'('</span></span><span>
</span><span id="line-3009"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621680918496"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msHsFilePath"><span class="hs-identifier hs-var">msHsFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918504"><span class="hs-identifier hs-var">mod_summary</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">','</span></span><span>
</span><span id="line-3010"></span><span>         </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; [SDoc] -&gt; [SDoc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-3011"></span><span>         </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.Session.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_BuildDynamicToo"><span class="hs-identifier hs-var">Opt_BuildDynamicToo</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918507"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-3012"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918494"><span class="hs-identifier hs-var">obj_file</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">','</span></span><span>
</span><span id="line-3013"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918493"><span class="hs-identifier hs-var">dyn_file</span></a></span><span>
</span><span id="line-3014"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">')'</span></span><span>
</span><span id="line-3015"></span><span>                 </span><span class="hs-special">]</span><span>
</span><span id="line-3016"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918494"><span class="hs-identifier hs-var">obj_file</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">')'</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3017"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3018"></span><span>    </span><span id="local-6989586621680918496"><span class="annot"><span class="annottext">op :: ShowS
</span><a href="#local-6989586621680918496"><span class="hs-identifier hs-var hs-var">op</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="../../filepath/src/System.FilePath.Windows.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span>
</span><span id="line-3019"></span><span>    </span><span id="local-6989586621680918491"><span class="annot"><span class="annottext">mod :: ModuleName
</span><a href="#local-6989586621680918491"><span class="hs-identifier hs-var hs-var">mod</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var hs-var">moduleName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; Module
</span><a href="GHC.Driver.Types.html#ms_mod"><span class="hs-identifier hs-var hs-var">ms_mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918504"><span class="hs-identifier hs-var">mod_summary</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3020"></span><span>    </span><span id="local-6989586621680918501"><span class="annot"><span class="annottext">mod_str :: FieldName
</span><a href="#local-6989586621680918501"><span class="hs-identifier hs-var hs-var">mod_str</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; ModuleName -&gt; FieldName
forall a. Outputable a =&gt; DynFlags -&gt; a -&gt; FieldName
</span><a href="GHC.Utils.Outputable.html#showPpr"><span class="hs-identifier hs-var">showPpr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918507"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621680918491"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource -&gt; FieldName
</span><a href="GHC.Driver.Phases.html#hscSourceString"><span class="hs-identifier hs-var">hscSourceString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModSummary -&gt; HscSource
</span><a href="GHC.Driver.Types.html#ms_hsc_src"><span class="hs-identifier hs-var hs-var">ms_hsc_src</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918504"><span class="hs-identifier hs-var">mod_summary</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3021"></span><span>    </span><span id="local-6989586621680918493"><span class="annot"><span class="annottext">dyn_file :: FieldName
</span><a href="#local-6989586621680918493"><span class="hs-identifier hs-var hs-var">dyn_file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621680918496"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; DynFlags -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msDynObjFilePath"><span class="hs-identifier hs-var">msDynObjFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918504"><span class="hs-identifier hs-var">mod_summary</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621680918507"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-3022"></span><span>    </span><span id="local-6989586621680918494"><span class="annot"><span class="annottext">obj_file :: FieldName
</span><a href="#local-6989586621680918494"><span class="hs-identifier hs-var hs-var">obj_file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HscTarget
</span><a href="#local-6989586621680918506"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3023"></span><span>                </span><span class="annot"><span class="annottext">HscTarget
</span><a href="GHC.Driver.Session.html#HscInterpreted"><span class="hs-identifier hs-var">HscInterpreted</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918505"><span class="hs-identifier hs-var">recomp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;interpreted&quot;</span></span><span>
</span><span id="line-3024"></span><span>                </span><span class="annot"><span class="annottext">HscTarget
</span><a href="GHC.Driver.Session.html#HscNothing"><span class="hs-identifier hs-var">HscNothing</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;nothing&quot;</span></span><span>
</span><span id="line-3025"></span><span>                </span><span class="annot"><span class="annottext">HscTarget
</span><span class="hs-identifier">_</span></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621680918496"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary -&gt; FieldName
</span><a href="GHC.Driver.Types.html#msObjFilePath"><span class="hs-identifier hs-var">msObjFilePath</span></a></span><span> </span><span class="annot"><span class="annottext">ModSummary
</span><a href="#local-6989586621680918504"><span class="hs-identifier hs-var">mod_summary</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3026"></span><span>
</span><span id="line-3027"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Recompilation}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-3034"></span><span>
</span><span id="line-3035"></span><span class="hs-comment">-- | Indicates whether a given module's source has been modified since it</span><span>
</span><span id="line-3036"></span><span class="hs-comment">-- was last compiled.</span><span>
</span><span id="line-3037"></span><span class="hs-keyword">data</span><span> </span><span id="SourceModified"><span class="annot"><a href="GHC.Driver.Types.html#SourceModified"><span class="hs-identifier hs-var">SourceModified</span></a></span></span><span>
</span><span id="line-3038"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SourceModified"><span class="annot"><a href="GHC.Driver.Types.html#SourceModified"><span class="hs-identifier hs-var">SourceModified</span></a></span></span><span>
</span><span id="line-3039"></span><span>       </span><span class="hs-comment">-- ^ the source has been modified</span><span>
</span><span id="line-3040"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SourceUnmodified"><span class="annot"><a href="GHC.Driver.Types.html#SourceUnmodified"><span class="hs-identifier hs-var">SourceUnmodified</span></a></span></span><span>
</span><span id="line-3041"></span><span>       </span><span class="hs-comment">-- ^ the source has not been modified.  Compilation may or may</span><span>
</span><span id="line-3042"></span><span>       </span><span class="hs-comment">-- not be necessary, depending on whether any dependencies have</span><span>
</span><span id="line-3043"></span><span>       </span><span class="hs-comment">-- changed since we last compiled.</span><span>
</span><span id="line-3044"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SourceUnmodifiedAndStable"><span class="annot"><a href="GHC.Driver.Types.html#SourceUnmodifiedAndStable"><span class="hs-identifier hs-var">SourceUnmodifiedAndStable</span></a></span></span><span>
</span><span id="line-3045"></span><span>       </span><span class="hs-comment">-- ^ the source has not been modified, and furthermore all of</span><span>
</span><span id="line-3046"></span><span>       </span><span class="hs-comment">-- its (transitive) dependencies are up to date; it definitely</span><span>
</span><span id="line-3047"></span><span>       </span><span class="hs-comment">-- does not need to be recompiled.  This is important for two</span><span>
</span><span id="line-3048"></span><span>       </span><span class="hs-comment">-- reasons: (a) we can omit the version check in checkOldIface,</span><span>
</span><span id="line-3049"></span><span>       </span><span class="hs-comment">-- and (b) if the module used TH splices we don't need to force</span><span>
</span><span id="line-3050"></span><span>       </span><span class="hs-comment">-- recompilation.</span><span>
</span><span id="line-3051"></span><span>
</span><span id="line-3052"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Hpc Support}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-3059"></span><span>
</span><span id="line-3060"></span><span class="hs-comment">-- | Information about a modules use of Haskell Program Coverage</span><span>
</span><span id="line-3061"></span><span class="hs-keyword">data</span><span> </span><span id="HpcInfo"><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier hs-var">HpcInfo</span></a></span></span><span>
</span><span id="line-3062"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HpcInfo"><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier hs-var">HpcInfo</span></a></span></span><span>
</span><span id="line-3063"></span><span>     </span><span class="hs-special">{</span><span> </span><span id="hpcInfoTickCount"><span class="annot"><span class="annottext">HpcInfo -&gt; Int
</span><a href="GHC.Driver.Types.html#hpcInfoTickCount"><span class="hs-identifier hs-var hs-var">hpcInfoTickCount</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-3064"></span><span>     </span><span class="hs-special">,</span><span> </span><span id="hpcInfoHash"><span class="annot"><span class="annottext">HpcInfo -&gt; Int
</span><a href="GHC.Driver.Types.html#hpcInfoHash"><span class="hs-identifier hs-var hs-var">hpcInfoHash</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-3065"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-3066"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoHpcInfo"><span class="annot"><a href="GHC.Driver.Types.html#NoHpcInfo"><span class="hs-identifier hs-var">NoHpcInfo</span></a></span></span><span>
</span><span id="line-3067"></span><span>     </span><span class="hs-special">{</span><span> </span><span id="hpcUsed"><span class="annot"><span class="annottext">HpcInfo -&gt; Bool
</span><a href="GHC.Driver.Types.html#hpcUsed"><span class="hs-identifier hs-var hs-var">hpcUsed</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#AnyHpcUsage"><span class="hs-identifier hs-type">AnyHpcUsage</span></a></span><span>  </span><span class="hs-comment">-- ^ Is hpc used anywhere on the module \*tree\*?</span><span>
</span><span id="line-3068"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-3069"></span><span>
</span><span id="line-3070"></span><span class="hs-comment">-- | This is used to signal if one of my imports used HPC instrumentation</span><span>
</span><span id="line-3071"></span><span class="hs-comment">-- even if there is no module-local HPC usage</span><span>
</span><span id="line-3072"></span><span class="hs-keyword">type</span><span> </span><span id="AnyHpcUsage"><span class="annot"><a href="GHC.Driver.Types.html#AnyHpcUsage"><span class="hs-identifier hs-var">AnyHpcUsage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3073"></span><span>
</span><span id="line-3074"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyHpcInfo"><span class="hs-identifier hs-type">emptyHpcInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#AnyHpcUsage"><span class="hs-identifier hs-type">AnyHpcUsage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier hs-type">HpcInfo</span></a></span><span>
</span><span id="line-3075"></span><span id="emptyHpcInfo"><span class="annot"><span class="annottext">emptyHpcInfo :: Bool -&gt; HpcInfo
</span><a href="GHC.Driver.Types.html#emptyHpcInfo"><span class="hs-identifier hs-var hs-var">emptyHpcInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; HpcInfo
</span><a href="GHC.Driver.Types.html#NoHpcInfo"><span class="hs-identifier hs-var">NoHpcInfo</span></a></span><span>
</span><span id="line-3076"></span><span>
</span><span id="line-3077"></span><span class="hs-comment">-- | Find out if HPC is used by this module or any of the modules</span><span>
</span><span id="line-3078"></span><span class="hs-comment">-- it depends upon</span><span>
</span><span id="line-3079"></span><span class="annot"><a href="GHC.Driver.Types.html#isHpcUsed"><span class="hs-identifier hs-type">isHpcUsed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier hs-type">HpcInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#AnyHpcUsage"><span class="hs-identifier hs-type">AnyHpcUsage</span></a></span><span>
</span><span id="line-3080"></span><span id="isHpcUsed"><span class="annot"><span class="annottext">isHpcUsed :: HpcInfo -&gt; Bool
</span><a href="GHC.Driver.Types.html#isHpcUsed"><span class="hs-identifier hs-var hs-var">isHpcUsed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#HpcInfo"><span class="hs-identifier hs-type">HpcInfo</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3081"></span><span class="annot"><a href="GHC.Driver.Types.html#isHpcUsed"><span class="hs-identifier hs-var">isHpcUsed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#NoHpcInfo"><span class="hs-identifier hs-type">NoHpcInfo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hpcUsed :: HpcInfo -&gt; Bool
</span><a href="GHC.Driver.Types.html#hpcUsed"><span class="hs-identifier hs-var">hpcUsed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621680918479"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918479"><span class="hs-identifier hs-var">used</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918479"><span class="hs-identifier hs-var">used</span></a></span><span>
</span><span id="line-3082"></span><span>
</span><span id="line-3083"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Safe Haskell Support}
*                                                                      *
************************************************************************

This stuff here is related to supporting the Safe Haskell extension,
primarily about storing under what trust type a module has been compiled.
-}</span><span>
</span><span id="line-3093"></span><span>
</span><span id="line-3094"></span><span class="hs-comment">-- | Is an import a safe import?</span><span>
</span><span id="line-3095"></span><span class="hs-keyword">type</span><span> </span><span id="IsSafeImport"><span class="annot"><a href="GHC.Driver.Types.html#IsSafeImport"><span class="hs-identifier hs-var">IsSafeImport</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3096"></span><span>
</span><span id="line-3097"></span><span class="hs-comment">-- | Safe Haskell information for 'ModIface'</span><span>
</span><span id="line-3098"></span><span class="hs-comment">-- Simply a wrapper around SafeHaskellMode to sepperate iface and flags</span><span>
</span><span id="line-3099"></span><span class="hs-keyword">newtype</span><span> </span><span id="IfaceTrustInfo"><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-var">IfaceTrustInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TrustInfo"><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-var">TrustInfo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#SafeHaskellMode"><span class="hs-identifier hs-type">SafeHaskellMode</span></a></span><span>
</span><span id="line-3100"></span><span>
</span><span id="line-3101"></span><span class="annot"><a href="GHC.Driver.Types.html#getSafeMode"><span class="hs-identifier hs-type">getSafeMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#SafeHaskellMode"><span class="hs-identifier hs-type">SafeHaskellMode</span></a></span><span>
</span><span id="line-3102"></span><span id="getSafeMode"><span class="annot"><span class="annottext">getSafeMode :: IfaceTrustInfo -&gt; SafeHaskellMode
</span><a href="GHC.Driver.Types.html#getSafeMode"><span class="hs-identifier hs-var hs-var">getSafeMode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-type">TrustInfo</span></a></span><span> </span><span id="local-6989586621680918477"><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="#local-6989586621680918477"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="#local-6989586621680918477"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-3103"></span><span>
</span><span id="line-3104"></span><span class="annot"><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-type">setSafeMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#SafeHaskellMode"><span class="hs-identifier hs-type">SafeHaskellMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span><span>
</span><span id="line-3105"></span><span id="setSafeMode"><span class="annot"><span class="annottext">setSafeMode :: SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-var hs-var">setSafeMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-var">TrustInfo</span></a></span><span>
</span><span id="line-3106"></span><span>
</span><span id="line-3107"></span><span class="annot"><a href="GHC.Driver.Types.html#noIfaceTrustInfo"><span class="hs-identifier hs-type">noIfaceTrustInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span><span>
</span><span id="line-3108"></span><span id="noIfaceTrustInfo"><span class="annot"><span class="annottext">noIfaceTrustInfo :: IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#noIfaceTrustInfo"><span class="hs-identifier hs-var hs-var">noIfaceTrustInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-var">setSafeMode</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_None"><span class="hs-identifier hs-var">Sf_None</span></a></span><span>
</span><span id="line-3109"></span><span>
</span><span id="line-3110"></span><span class="annot"><a href="GHC.Driver.Types.html#trustInfoToNum"><span class="hs-identifier hs-type">trustInfoToNum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Word.html#Word8"><span class="hs-identifier hs-type">Word8</span></a></span><span>
</span><span id="line-3111"></span><span id="trustInfoToNum"><span class="annot"><span class="annottext">trustInfoToNum :: IfaceTrustInfo -&gt; Word8
</span><a href="GHC.Driver.Types.html#trustInfoToNum"><span class="hs-identifier hs-var hs-var">trustInfoToNum</span></a></span></span><span> </span><span id="local-6989586621680918475"><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680918475"><span class="hs-identifier hs-var">it</span></a></span></span><span>
</span><span id="line-3112"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo -&gt; SafeHaskellMode
</span><a href="GHC.Driver.Types.html#getSafeMode"><span class="hs-identifier hs-var">getSafeMode</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680918475"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3113"></span><span>            </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_None"><span class="hs-identifier hs-var">Sf_None</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-3114"></span><span>            </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Unsafe"><span class="hs-identifier hs-var">Sf_Unsafe</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-3115"></span><span>            </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Trustworthy"><span class="hs-identifier hs-var">Sf_Trustworthy</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-3116"></span><span>            </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Safe"><span class="hs-identifier hs-var">Sf_Safe</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span>
</span><span id="line-3117"></span><span>            </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_SafeInferred"><span class="hs-identifier hs-var">Sf_SafeInferred</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">4</span></span><span>
</span><span id="line-3118"></span><span>            </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Ignore"><span class="hs-identifier hs-var">Sf_Ignore</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-3119"></span><span>
</span><span id="line-3120"></span><span class="annot"><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-type">numToTrustInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base/src/GHC.Word.html#Word8"><span class="hs-identifier hs-type">Word8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span><span>
</span><span id="line-3121"></span><span id="numToTrustInfo"><span class="annot"><span class="annottext">numToTrustInfo :: Word8 -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-var hs-var">numToTrustInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-var">setSafeMode</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_None"><span class="hs-identifier hs-var">Sf_None</span></a></span><span>
</span><span id="line-3122"></span><span class="annot"><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-var">numToTrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-var">setSafeMode</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Unsafe"><span class="hs-identifier hs-var">Sf_Unsafe</span></a></span><span>
</span><span id="line-3123"></span><span class="annot"><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-var">numToTrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-var">setSafeMode</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Trustworthy"><span class="hs-identifier hs-var">Sf_Trustworthy</span></a></span><span>
</span><span id="line-3124"></span><span class="annot"><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-var">numToTrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-var">setSafeMode</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Safe"><span class="hs-identifier hs-var">Sf_Safe</span></a></span><span>
</span><span id="line-3125"></span><span class="annot"><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-var">numToTrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">4</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#setSafeMode"><span class="hs-identifier hs-var">setSafeMode</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_SafeInferred"><span class="hs-identifier hs-var">Sf_SafeInferred</span></a></span><span>
</span><span id="line-3126"></span><span class="annot"><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-var">numToTrustInfo</span></a></span><span> </span><span id="local-6989586621680918469"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918469"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; IfaceTrustInfo
forall a. HasCallStack =&gt; FieldName -&gt; a
</span><a href="../../base/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldName -&gt; IfaceTrustInfo) -&gt; FieldName -&gt; IfaceTrustInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;numToTrustInfo: bad input number! (&quot;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; FieldName
forall a. Show a =&gt; a -&gt; FieldName
</span><a href="../../base/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621680918469"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-3127"></span><span>
</span><span id="line-3128"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918466"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3129"></span><span>    </span><span id="local-6989586621680918465"><span class="annot"><span class="annottext">ppr :: IfaceTrustInfo -&gt; SDoc
</span><a href="#local-6989586621680918465"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-type">TrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_None"><span class="hs-identifier hs-var">Sf_None</span></a></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;none&quot;</span></span><span>
</span><span id="line-3130"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-type">TrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Ignore"><span class="hs-identifier hs-var">Sf_Ignore</span></a></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;none&quot;</span></span><span>
</span><span id="line-3131"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-type">TrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Unsafe"><span class="hs-identifier hs-var">Sf_Unsafe</span></a></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;unsafe&quot;</span></span><span>
</span><span id="line-3132"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-type">TrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Trustworthy"><span class="hs-identifier hs-var">Sf_Trustworthy</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;trustworthy&quot;</span></span><span>
</span><span id="line-3133"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-type">TrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_Safe"><span class="hs-identifier hs-var">Sf_Safe</span></a></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;safe&quot;</span></span><span>
</span><span id="line-3134"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#TrustInfo"><span class="hs-identifier hs-type">TrustInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHaskellMode
</span><a href="GHC.Driver.Session.html#Sf_SafeInferred"><span class="hs-identifier hs-var">Sf_SafeInferred</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;safe-inferred&quot;</span></span><span>
</span><span id="line-3135"></span><span>
</span><span id="line-3136"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918462"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#IfaceTrustInfo"><span class="hs-identifier hs-type">IfaceTrustInfo</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3137"></span><span>    </span><span id="local-6989586621680918460"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; IfaceTrustInfo -&gt; IO ()
</span><a href="#local-6989586621680918460"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621680918459"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918459"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621680918458"><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680918458"><span class="hs-identifier hs-var">iftrust</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918459"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; IO ()) -&gt; Word8 -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo -&gt; Word8
</span><a href="GHC.Driver.Types.html#trustInfoToNum"><span class="hs-identifier hs-var">trustInfoToNum</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680918458"><span class="hs-identifier hs-var">iftrust</span></a></span><span>
</span><span id="line-3138"></span><span>    </span><span id="local-6989586621680918455"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO IfaceTrustInfo
</span><a href="#local-6989586621680918455"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621680918454"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918454"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918454"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">IO Word8 -&gt; (Word8 -&gt; IO IfaceTrustInfo) -&gt; IO IfaceTrustInfo
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IfaceTrustInfo -&gt; IO IfaceTrustInfo
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(IfaceTrustInfo -&gt; IO IfaceTrustInfo)
-&gt; (Word8 -&gt; IfaceTrustInfo) -&gt; Word8 -&gt; IO IfaceTrustInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; IfaceTrustInfo
</span><a href="GHC.Driver.Types.html#numToTrustInfo"><span class="hs-identifier hs-var">numToTrustInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3139"></span><span>
</span><span id="line-3140"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Parser result}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-3147"></span><span>
</span><span id="line-3148"></span><span class="hs-keyword">data</span><span> </span><span id="HsParsedModule"><span class="annot"><a href="GHC.Driver.Types.html#HsParsedModule"><span class="hs-identifier hs-var">HsParsedModule</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HsParsedModule"><span class="annot"><a href="GHC.Driver.Types.html#HsParsedModule"><span class="hs-identifier hs-var">HsParsedModule</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3149"></span><span>    </span><span id="hpm_module"><span class="annot"><span class="annottext">HsParsedModule -&gt; Located HsModule
</span><a href="GHC.Driver.Types.html#hpm_module"><span class="hs-identifier hs-var hs-var">hpm_module</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.html#HsModule"><span class="hs-identifier hs-type">HsModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3150"></span><span>    </span><span id="hpm_src_files"><span class="annot"><span class="annottext">HsParsedModule -&gt; [FieldName]
</span><a href="GHC.Driver.Types.html#hpm_src_files"><span class="hs-identifier hs-var hs-var">hpm_src_files</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-3151"></span><span>       </span><span class="hs-comment">-- ^ extra source files (e.g. from #includes).  The lexer collects</span><span>
</span><span id="line-3152"></span><span>       </span><span class="hs-comment">-- these from '# &lt;file&gt; &lt;line&gt;' pragmas, which the C preprocessor</span><span>
</span><span id="line-3153"></span><span>       </span><span class="hs-comment">-- leaves behind.  These files and their timestamps are stored in</span><span>
</span><span id="line-3154"></span><span>       </span><span class="hs-comment">-- the .hi file, so that we can force recompilation if any of</span><span>
</span><span id="line-3155"></span><span>       </span><span class="hs-comment">-- them change (#3589)</span><span>
</span><span id="line-3156"></span><span>    </span><span id="hpm_annotations"><span class="annot"><span class="annottext">HsParsedModule -&gt; ApiAnns
</span><a href="GHC.Driver.Types.html#hpm_annotations"><span class="hs-identifier hs-var hs-var">hpm_annotations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#ApiAnns"><span class="hs-identifier hs-type">ApiAnns</span></a></span><span>
</span><span id="line-3157"></span><span>    </span><span class="hs-comment">-- See note [Api annotations] in GHC.Parser.Annotation</span><span>
</span><span id="line-3158"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-3159"></span><span>
</span><span id="line-3160"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Linkable stuff}
*                                                                      *
************************************************************************

This stuff is in here, rather than (say) in &quot;GHC.Runtime.Linker&quot;, because the &quot;GHC.Runtime.Linker&quot;
stuff is the *dynamic* linker, and isn't present in a stage-1 compiler
-}</span><span>
</span><span id="line-3170"></span><span>
</span><span id="line-3171"></span><span class="annot"><a href="GHC.Driver.Types.html#isObjectLinkable"><span class="hs-identifier hs-type">isObjectLinkable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Linkable"><span class="hs-identifier hs-type">Linkable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3172"></span><span id="isObjectLinkable"><span class="annot"><span class="annottext">isObjectLinkable :: Linkable -&gt; Bool
</span><a href="GHC.Driver.Types.html#isObjectLinkable"><span class="hs-identifier hs-var hs-var">isObjectLinkable</span></a></span></span><span> </span><span id="local-6989586621680918449"><span class="annot"><span class="annottext">Linkable
</span><a href="#local-6989586621680918449"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Unlinked] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Unlinked]
</span><a href="#local-6989586621680918448"><span class="hs-identifier hs-var">unlinked</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Unlinked -&gt; Bool) -&gt; [Unlinked] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base/src/Data.Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">Unlinked -&gt; Bool
</span><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier hs-var">isObject</span></a></span><span> </span><span class="annot"><span class="annottext">[Unlinked]
</span><a href="#local-6989586621680918448"><span class="hs-identifier hs-var">unlinked</span></a></span><span>
</span><span id="line-3173"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680918448"><span class="annot"><span class="annottext">unlinked :: [Unlinked]
</span><a href="#local-6989586621680918448"><span class="hs-identifier hs-var hs-var">unlinked</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Linkable -&gt; [Unlinked]
</span><a href="GHC.Runtime.Linker.Types.html#linkableUnlinked"><span class="hs-identifier hs-var hs-var">linkableUnlinked</span></a></span><span> </span><span class="annot"><span class="annottext">Linkable
</span><a href="#local-6989586621680918449"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-3174"></span><span>        </span><span class="hs-comment">-- A linkable with no Unlinked's is treated as a BCO.  We can</span><span>
</span><span id="line-3175"></span><span>        </span><span class="hs-comment">-- generate a linkable with no Unlinked's as a result of</span><span>
</span><span id="line-3176"></span><span>        </span><span class="hs-comment">-- compiling a module in HscNothing mode, and this choice</span><span>
</span><span id="line-3177"></span><span>        </span><span class="hs-comment">-- happens to work well with checkStability in module GHC.</span><span>
</span><span id="line-3178"></span><span>
</span><span id="line-3179"></span><span class="annot"><a href="GHC.Driver.Types.html#linkableObjs"><span class="hs-identifier hs-type">linkableObjs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Linkable"><span class="hs-identifier hs-type">Linkable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3180"></span><span id="linkableObjs"><span class="annot"><span class="annottext">linkableObjs :: Linkable -&gt; [FieldName]
</span><a href="GHC.Driver.Types.html#linkableObjs"><span class="hs-identifier hs-var hs-var">linkableObjs</span></a></span></span><span> </span><span id="local-6989586621680918445"><span class="annot"><span class="annottext">Linkable
</span><a href="#local-6989586621680918445"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918444"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DotO"><span class="hs-identifier hs-type">DotO</span></a></span><span> </span><span id="local-6989586621680918444"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918444"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Linkable -&gt; [Unlinked]
</span><a href="GHC.Runtime.Linker.Types.html#linkableUnlinked"><span class="hs-identifier hs-var hs-var">linkableUnlinked</span></a></span><span> </span><span class="annot"><span class="annottext">Linkable
</span><a href="#local-6989586621680918445"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-3181"></span><span>
</span><span id="line-3182"></span><span class="hs-comment">-------------------------------------------</span><span>
</span><span id="line-3183"></span><span>
</span><span id="line-3184"></span><span class="hs-comment">-- | Is this an actual file on disk we can link in somehow?</span><span>
</span><span id="line-3185"></span><span class="annot"><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier hs-type">isObject</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Unlinked"><span class="hs-identifier hs-type">Unlinked</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3186"></span><span id="isObject"><span class="annot"><span class="annottext">isObject :: Unlinked -&gt; Bool
</span><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier hs-var hs-var">isObject</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DotO"><span class="hs-identifier hs-type">DotO</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3187"></span><span class="annot"><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier hs-var">isObject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DotA"><span class="hs-identifier hs-type">DotA</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3188"></span><span class="annot"><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier hs-var">isObject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DotDLL"><span class="hs-identifier hs-type">DotDLL</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3189"></span><span class="annot"><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier hs-var">isObject</span></a></span><span> </span><span class="annot"><span class="annottext">Unlinked
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-3190"></span><span>
</span><span id="line-3191"></span><span class="hs-comment">-- | Is this a bytecode linkable with no file on disk?</span><span>
</span><span id="line-3192"></span><span class="annot"><a href="GHC.Driver.Types.html#isInterpretable"><span class="hs-identifier hs-type">isInterpretable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Unlinked"><span class="hs-identifier hs-type">Unlinked</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3193"></span><span id="isInterpretable"><span class="annot"><span class="annottext">isInterpretable :: Unlinked -&gt; Bool
</span><a href="GHC.Driver.Types.html#isInterpretable"><span class="hs-identifier hs-var hs-var">isInterpretable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (Unlinked -&gt; Bool) -&gt; Unlinked -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Unlinked -&gt; Bool
</span><a href="GHC.Driver.Types.html#isObject"><span class="hs-identifier hs-var">isObject</span></a></span><span>
</span><span id="line-3194"></span><span>
</span><span id="line-3195"></span><span class="hs-comment">-- | Retrieve the filename of the linkable if possible. Panic if it is a byte-code object</span><span>
</span><span id="line-3196"></span><span class="annot"><a href="GHC.Driver.Types.html#nameOfObject"><span class="hs-identifier hs-type">nameOfObject</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Unlinked"><span class="hs-identifier hs-type">Unlinked</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-3197"></span><span id="nameOfObject"><span class="annot"><span class="annottext">nameOfObject :: Unlinked -&gt; FieldName
</span><a href="GHC.Driver.Types.html#nameOfObject"><span class="hs-identifier hs-var hs-var">nameOfObject</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DotO"><span class="hs-identifier hs-type">DotO</span></a></span><span> </span><span id="local-6989586621680918440"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918440"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918440"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-3198"></span><span class="annot"><a href="GHC.Driver.Types.html#nameOfObject"><span class="hs-identifier hs-var">nameOfObject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DotA"><span class="hs-identifier hs-type">DotA</span></a></span><span> </span><span id="local-6989586621680918439"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918439"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918439"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-3199"></span><span class="annot"><a href="GHC.Driver.Types.html#nameOfObject"><span class="hs-identifier hs-var">nameOfObject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#DotDLL"><span class="hs-identifier hs-type">DotDLL</span></a></span><span> </span><span id="local-6989586621680918438"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918438"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918438"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-3200"></span><span class="annot"><a href="GHC.Driver.Types.html#nameOfObject"><span class="hs-identifier hs-var">nameOfObject</span></a></span><span> </span><span id="local-6989586621680918437"><span class="annot"><span class="annottext">Unlinked
</span><a href="#local-6989586621680918437"><span class="hs-identifier hs-var">other</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; FieldName
forall a. HasCallStack =&gt; FieldName -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;nameOfObject&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unlinked -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unlinked
</span><a href="#local-6989586621680918437"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3201"></span><span>
</span><span id="line-3202"></span><span class="hs-comment">-- | Retrieve the compiled byte-code if possible. Panic if it is a file-based linkable</span><span>
</span><span id="line-3203"></span><span class="annot"><a href="GHC.Driver.Types.html#byteCodeOfObject"><span class="hs-identifier hs-type">byteCodeOfObject</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#Unlinked"><span class="hs-identifier hs-type">Unlinked</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.ByteCode.Types.html#CompiledByteCode"><span class="hs-identifier hs-type">CompiledByteCode</span></a></span><span>
</span><span id="line-3204"></span><span id="byteCodeOfObject"><span class="annot"><span class="annottext">byteCodeOfObject :: Unlinked -&gt; CompiledByteCode
</span><a href="GHC.Driver.Types.html#byteCodeOfObject"><span class="hs-identifier hs-var hs-var">byteCodeOfObject</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Runtime.Linker.Types.html#BCOs"><span class="hs-identifier hs-type">BCOs</span></a></span><span> </span><span id="local-6989586621680918435"><span class="annot"><span class="annottext">CompiledByteCode
</span><a href="#local-6989586621680918435"><span class="hs-identifier hs-var">bc</span></a></span></span><span> </span><span class="annot"><span class="annottext">[SptEntry]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompiledByteCode
</span><a href="#local-6989586621680918435"><span class="hs-identifier hs-var">bc</span></a></span><span>
</span><span id="line-3205"></span><span class="annot"><a href="GHC.Driver.Types.html#byteCodeOfObject"><span class="hs-identifier hs-var">byteCodeOfObject</span></a></span><span> </span><span id="local-6989586621680918434"><span class="annot"><span class="annottext">Unlinked
</span><a href="#local-6989586621680918434"><span class="hs-identifier hs-var">other</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc -&gt; CompiledByteCode
forall a. HasCallStack =&gt; FieldName -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;byteCodeOfObject&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unlinked -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unlinked
</span><a href="#local-6989586621680918434"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3206"></span><span>
</span><span id="line-3207"></span><span>
</span><span id="line-3208"></span><span class="hs-comment">-------------------------------------------</span><span>
</span><span id="line-3209"></span><span>
</span><span id="line-3210"></span><span class="hs-comment">-- | A list of conlikes which represents a complete pattern match.</span><span>
</span><span id="line-3211"></span><span class="hs-comment">-- These arise from @COMPLETE@ signatures.</span><span>
</span><span id="line-3212"></span><span>
</span><span id="line-3213"></span><span class="hs-comment">-- See Note [Implementation of COMPLETE signatures]</span><span>
</span><span id="line-3214"></span><span class="hs-keyword">data</span><span> </span><span id="CompleteMatch"><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-var">CompleteMatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CompleteMatch"><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-var">CompleteMatch</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3215"></span><span>                            </span><span id="completeMatchConLikes"><span class="annot"><span class="annottext">CompleteMatch -&gt; [Name]
</span><a href="GHC.Driver.Types.html#completeMatchConLikes"><span class="hs-identifier hs-var hs-var">completeMatchConLikes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3216"></span><span>                            </span><span class="hs-comment">-- ^ The ConLikes that form a covering family</span><span>
</span><span id="line-3217"></span><span>                            </span><span class="hs-comment">-- (e.g. Nothing, Just)</span><span>
</span><span id="line-3218"></span><span>                          </span><span class="hs-special">,</span><span> </span><span id="completeMatchTyCon"><span class="annot"><span class="annottext">CompleteMatch -&gt; Name
</span><a href="GHC.Driver.Types.html#completeMatchTyCon"><span class="hs-identifier hs-var hs-var">completeMatchTyCon</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-3219"></span><span>                            </span><span class="hs-comment">-- ^ The TyCon that they cover (e.g. Maybe)</span><span>
</span><span id="line-3220"></span><span>                          </span><span class="hs-special">}</span><span>
</span><span id="line-3221"></span><span>
</span><span id="line-3222"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918428"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3223"></span><span>  </span><span id="local-6989586621680918425"><span class="annot"><span class="annottext">ppr :: CompleteMatch -&gt; SDoc
</span><a href="#local-6989586621680918425"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span> </span><span id="local-6989586621680918424"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621680918424"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621680918423"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680918423"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-string">&quot;CompleteMatch:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621680918424"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-3224"></span><span>                                                    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680918423"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-3225"></span><span>
</span><span id="line-3226"></span><span class="hs-comment">-- | A map keyed by the 'completeMatchTyCon' which has type Name.</span><span>
</span><span id="line-3227"></span><span>
</span><span id="line-3228"></span><span class="hs-comment">-- See Note [Implementation of COMPLETE signatures]</span><span>
</span><span id="line-3229"></span><span class="hs-keyword">type</span><span> </span><span id="CompleteMatchMap"><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier hs-var">CompleteMatchMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3230"></span><span>
</span><span id="line-3231"></span><span class="annot"><a href="GHC.Driver.Types.html#mkCompleteMatchMap"><span class="hs-identifier hs-type">mkCompleteMatchMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier hs-type">CompleteMatchMap</span></a></span><span>
</span><span id="line-3232"></span><span id="mkCompleteMatchMap"><span class="annot"><span class="annottext">mkCompleteMatchMap :: [CompleteMatch] -&gt; PackageCompleteMatchMap
</span><a href="GHC.Driver.Types.html#mkCompleteMatchMap"><span class="hs-identifier hs-var hs-var">mkCompleteMatchMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PackageCompleteMatchMap
-&gt; [CompleteMatch] -&gt; PackageCompleteMatchMap
</span><a href="GHC.Driver.Types.html#extendCompleteMatchMap"><span class="hs-identifier hs-var">extendCompleteMatchMap</span></a></span><span> </span><span class="annot"><span class="annottext">PackageCompleteMatchMap
forall key elt. UniqFM key elt
</span><a href="GHC.Types.Unique.FM.html#emptyUFM"><span class="hs-identifier hs-var">emptyUFM</span></a></span><span>
</span><span id="line-3233"></span><span>
</span><span id="line-3234"></span><span class="annot"><a href="GHC.Driver.Types.html#extendCompleteMatchMap"><span class="hs-identifier hs-type">extendCompleteMatchMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier hs-type">CompleteMatchMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3235"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier hs-type">CompleteMatchMap</span></a></span><span>
</span><span id="line-3236"></span><span id="extendCompleteMatchMap"><span class="annot"><span class="annottext">extendCompleteMatchMap :: PackageCompleteMatchMap
-&gt; [CompleteMatch] -&gt; PackageCompleteMatchMap
</span><a href="GHC.Driver.Types.html#extendCompleteMatchMap"><span class="hs-identifier hs-var hs-var">extendCompleteMatchMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PackageCompleteMatchMap
 -&gt; CompleteMatch -&gt; PackageCompleteMatchMap)
-&gt; PackageCompleteMatchMap
-&gt; [CompleteMatch]
-&gt; PackageCompleteMatchMap
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base/src/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">PackageCompleteMatchMap -&gt; CompleteMatch -&gt; PackageCompleteMatchMap
</span><a href="#local-6989586621680918420"><span class="hs-identifier hs-var">insertMatch</span></a></span><span>
</span><span id="line-3237"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3238"></span><span>    </span><span class="annot"><a href="#local-6989586621680918420"><span class="hs-identifier hs-type">insertMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier hs-type">CompleteMatchMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatchMap"><span class="hs-identifier hs-type">CompleteMatchMap</span></a></span><span>
</span><span id="line-3239"></span><span>    </span><span id="local-6989586621680918420"><span class="annot"><span class="annottext">insertMatch :: PackageCompleteMatchMap -&gt; CompleteMatch -&gt; PackageCompleteMatchMap
</span><a href="#local-6989586621680918420"><span class="hs-identifier hs-var hs-var">insertMatch</span></a></span></span><span> </span><span id="local-6989586621680918419"><span class="annot"><span class="annottext">PackageCompleteMatchMap
</span><a href="#local-6989586621680918419"><span class="hs-identifier hs-var">ufm</span></a></span></span><span> </span><span id="local-6989586621680918418"><span class="annot"><span class="annottext">c :: CompleteMatch
</span><a href="#local-6989586621680918418"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#CompleteMatch"><span class="hs-identifier hs-type">CompleteMatch</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680918417"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680918417"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([CompleteMatch] -&gt; [CompleteMatch] -&gt; [CompleteMatch])
-&gt; PackageCompleteMatchMap
-&gt; Name
-&gt; [CompleteMatch]
-&gt; PackageCompleteMatchMap
forall key elt.
Uniquable key =&gt;
(elt -&gt; elt -&gt; elt)
-&gt; UniqFM key elt -&gt; key -&gt; elt -&gt; UniqFM key elt
</span><a href="GHC.Types.Unique.FM.html#addToUFM_C"><span class="hs-identifier hs-var">addToUFM_C</span></a></span><span> </span><span class="annot"><span class="annottext">[CompleteMatch] -&gt; [CompleteMatch] -&gt; [CompleteMatch]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">(++)</span></a></span><span> </span><span class="annot"><span class="annottext">PackageCompleteMatchMap
</span><a href="#local-6989586621680918419"><span class="hs-identifier hs-var">ufm</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680918417"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CompleteMatch
</span><a href="#local-6989586621680918418"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3240"></span><span>
</span><span id="line-3241"></span><span class="hs-comment">{-
Note [Implementation of COMPLETE signatures]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A COMPLETE signature represents a set of conlikes (i.e., constructors or
pattern synonyms) such that if they are all pattern-matched against in a
function, it gives rise to a total function. An example is:

  newtype Boolean = Boolean Int
  pattern F, T :: Boolean
  pattern F = Boolean 0
  pattern T = Boolean 1
  {-# COMPLETE F, T #-}

  -- This is a total function
  booleanToInt :: Boolean -&gt; Int
  booleanToInt F = 0
  booleanToInt T = 1

COMPLETE sets are represented internally in GHC with the CompleteMatch data
type. For example, {-# COMPLETE F, T #-} would be represented as:

  CompleteMatch { complateMatchConLikes = [F, T]
                , completeMatchTyCon    = Boolean }

Note that GHC was able to infer the completeMatchTyCon (Boolean), but for the
cases in which it's ambiguous, you can also explicitly specify it in the source
language by writing this:

  {-# COMPLETE F, T :: Boolean #-}

For efficiency purposes, GHC collects all of the CompleteMatches that it knows
about into a CompleteMatchMap, which is a map that is keyed by the
completeMatchTyCon. In other words, you could have a multiple COMPLETE sets
for the same TyCon:

  {-# COMPLETE F, T1 :: Boolean #-}
  {-# COMPLETE F, T2 :: Boolean #-}

And looking up the values in the CompleteMatchMap associated with Boolean
would give you [CompleteMatch [F, T1] Boolean, CompleteMatch [F, T2] Boolean].
dsGetCompleteMatches in GHC.HsToCore.Quote accomplishes this lookup.

Also see Note [Typechecking Complete Matches] in GHC.Tc.Gen.Bind for a more detailed
explanation for how GHC ensures that all the conlikes in a COMPLETE set are
consistent.
-}</span><span>
</span><span id="line-3287"></span><span>
</span><span id="line-3288"></span><span class="hs-comment">-- | Foreign language of the phase if the phase deals with a foreign code</span><span>
</span><span id="line-3289"></span><span class="annot"><a href="GHC.Driver.Types.html#phaseForeignLanguage"><span class="hs-identifier hs-type">phaseForeignLanguage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Phases.html#Phase"><span class="hs-identifier hs-type">Phase</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#ForeignSrcLang"><span class="hs-identifier hs-type">ForeignSrcLang</span></a></span><span>
</span><span id="line-3290"></span><span id="phaseForeignLanguage"><span class="annot"><span class="annottext">phaseForeignLanguage :: Phase -&gt; Maybe ForeignSrcLang
</span><a href="GHC.Driver.Types.html#phaseForeignLanguage"><span class="hs-identifier hs-var hs-var">phaseForeignLanguage</span></a></span></span><span> </span><span id="local-6989586621680918415"><span class="annot"><span class="annottext">Phase
</span><a href="#local-6989586621680918415"><span class="hs-identifier hs-var">phase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Phase
</span><a href="#local-6989586621680918415"><span class="hs-identifier hs-var">phase</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3291"></span><span>  </span><span class="annot"><span class="annottext">Phase
</span><a href="GHC.Driver.Phases.html#Cc"><span class="hs-identifier hs-var">Phase.Cc</span></a></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; Maybe ForeignSrcLang
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#LangC"><span class="hs-identifier hs-var">LangC</span></a></span><span>
</span><span id="line-3292"></span><span>  </span><span class="annot"><span class="annottext">Phase
</span><a href="GHC.Driver.Phases.html#Ccxx"><span class="hs-identifier hs-var">Phase.Ccxx</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; Maybe ForeignSrcLang
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#LangCxx"><span class="hs-identifier hs-var">LangCxx</span></a></span><span>
</span><span id="line-3293"></span><span>  </span><span class="annot"><span class="annottext">Phase
</span><a href="GHC.Driver.Phases.html#Cobjc"><span class="hs-identifier hs-var">Phase.Cobjc</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; Maybe ForeignSrcLang
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#LangObjc"><span class="hs-identifier hs-var">LangObjc</span></a></span><span>
</span><span id="line-3294"></span><span>  </span><span class="annot"><span class="annottext">Phase
</span><a href="GHC.Driver.Phases.html#Cobjcxx"><span class="hs-identifier hs-var">Phase.Cobjcxx</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; Maybe ForeignSrcLang
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#LangObjcxx"><span class="hs-identifier hs-var">LangObjcxx</span></a></span><span>
</span><span id="line-3295"></span><span>  </span><span class="annot"><span class="annottext">Phase
</span><a href="GHC.Driver.Phases.html#HCc"><span class="hs-identifier hs-var">Phase.HCc</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; Maybe ForeignSrcLang
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#LangC"><span class="hs-identifier hs-var">LangC</span></a></span><span>
</span><span id="line-3296"></span><span>  </span><span class="annot"><a href="GHC.Driver.Phases.html#As"><span class="hs-identifier hs-type">Phase.As</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; Maybe ForeignSrcLang
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#LangAsm"><span class="hs-identifier hs-var">LangAsm</span></a></span><span>
</span><span id="line-3297"></span><span>  </span><span class="annot"><span class="annottext">Phase
</span><a href="GHC.Driver.Phases.html#MergeForeign"><span class="hs-identifier hs-var">Phase.MergeForeign</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang -&gt; Maybe ForeignSrcLang
forall a. a -&gt; Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignSrcLang
</span><a href="../../ghc-boot-th/src/GHC.ForeignSrcLang.Type.html#RawObject"><span class="hs-identifier hs-var">RawObject</span></a></span><span>
</span><span id="line-3298"></span><span>  </span><span class="annot"><span class="annottext">Phase
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ForeignSrcLang
forall a. Maybe a
</span><a href="../../base/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-3299"></span><span>
</span><span id="line-3300"></span><span class="hs-comment">-------------------------------------------</span><span>
</span><span id="line-3301"></span><span>
</span><span id="line-3302"></span><span class="hs-comment">-- Take care, this instance only forces to the degree necessary to</span><span>
</span><span id="line-3303"></span><span class="hs-comment">-- avoid major space leaks.</span><span>
</span><span id="line-3304"></span><span id="local-6989586621680920546"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../deepseq/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#IfaceBackendExts"><span class="hs-identifier hs-type">IfaceBackendExts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680920546"><span class="hs-identifier hs-type">phase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfacePhase"><span class="hs-identifier hs-type">ModIfacePhase</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../deepseq/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#IfaceDeclExts"><span class="hs-identifier hs-type">IfaceDeclExts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680920546"><span class="hs-identifier hs-type">phase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIfacePhase"><span class="hs-identifier hs-type">ModIfacePhase</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../deepseq/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ModIface_"><span class="hs-identifier hs-type">ModIface_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920546"><span class="hs-identifier hs-type">phase</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3305"></span><span>  </span><span id="local-6989586621680918366"><span class="annot"><span class="annottext">rnf :: ModIface_ phase -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span id="local-6989586621680918364"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918364"><span class="hs-identifier hs-var">f1</span></a></span></span><span> </span><span id="local-6989586621680918363"><span class="annot"><span class="annottext">Maybe Module
</span><a href="#local-6989586621680918363"><span class="hs-identifier hs-var">f2</span></a></span></span><span> </span><span id="local-6989586621680918362"><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621680918362"><span class="hs-identifier hs-var">f3</span></a></span></span><span> </span><span id="local-6989586621680918361"><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918361"><span class="hs-identifier hs-var">f4</span></a></span></span><span> </span><span id="local-6989586621680918360"><span class="annot"><span class="annottext">[Usage]
</span><a href="#local-6989586621680918360"><span class="hs-identifier hs-var">f5</span></a></span></span><span> </span><span id="local-6989586621680918359"><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680918359"><span class="hs-identifier hs-var">f6</span></a></span></span><span> </span><span id="local-6989586621680918358"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918358"><span class="hs-identifier hs-var">f7</span></a></span></span><span> </span><span id="local-6989586621680918357"><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680918357"><span class="hs-identifier hs-var">f8</span></a></span></span><span> </span><span id="local-6989586621680918356"><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680918356"><span class="hs-identifier hs-var">f9</span></a></span></span><span> </span><span id="local-6989586621680918355"><span class="annot"><span class="annottext">[IfaceAnnotation]
</span><a href="#local-6989586621680918355"><span class="hs-identifier hs-var">f10</span></a></span></span><span> </span><span id="local-6989586621680918354"><span class="annot"><span class="annottext">[IfaceDeclExts phase]
</span><a href="#local-6989586621680918354"><span class="hs-identifier hs-var">f11</span></a></span></span><span> </span><span id="local-6989586621680918353"><span class="annot"><span class="annottext">Maybe GlobalRdrEnv
</span><a href="#local-6989586621680918353"><span class="hs-identifier hs-var">f12</span></a></span></span><span>
</span><span id="line-3306"></span><span>                </span><span id="local-6989586621680918352"><span class="annot"><span class="annottext">[IfaceClsInst]
</span><a href="#local-6989586621680918352"><span class="hs-identifier hs-var">f13</span></a></span></span><span> </span><span id="local-6989586621680918351"><span class="annot"><span class="annottext">[IfaceFamInst]
</span><a href="#local-6989586621680918351"><span class="hs-identifier hs-var">f14</span></a></span></span><span> </span><span id="local-6989586621680918350"><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621680918350"><span class="hs-identifier hs-var">f15</span></a></span></span><span> </span><span id="local-6989586621680918349"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918349"><span class="hs-identifier hs-var">f16</span></a></span></span><span> </span><span id="local-6989586621680918348"><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680918348"><span class="hs-identifier hs-var">f17</span></a></span></span><span> </span><span id="local-6989586621680918347"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918347"><span class="hs-identifier hs-var">f18</span></a></span></span><span> </span><span id="local-6989586621680918346"><span class="annot"><span class="annottext">[IfaceCompleteMatch]
</span><a href="#local-6989586621680918346"><span class="hs-identifier hs-var">f19</span></a></span></span><span> </span><span id="local-6989586621680918345"><span class="annot"><span class="annottext">Maybe HsDocString
</span><a href="#local-6989586621680918345"><span class="hs-identifier hs-var">f20</span></a></span></span><span> </span><span id="local-6989586621680918344"><span class="annot"><span class="annottext">DeclDocMap
</span><a href="#local-6989586621680918344"><span class="hs-identifier hs-var">f21</span></a></span></span><span> </span><span id="local-6989586621680918343"><span class="annot"><span class="annottext">ArgDocMap
</span><a href="#local-6989586621680918343"><span class="hs-identifier hs-var">f22</span></a></span></span><span> </span><span id="local-6989586621680918342"><span class="annot"><span class="annottext">IfaceBackendExts phase
</span><a href="#local-6989586621680918342"><span class="hs-identifier hs-var">f23</span></a></span></span><span> </span><span id="local-6989586621680918341"><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918341"><span class="hs-identifier hs-var">f24</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3307"></span><span>    </span><span class="annot"><span class="annottext">Module -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621680918364"><span class="hs-identifier hs-var">f1</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Maybe Module -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Module
</span><a href="#local-6989586621680918363"><span class="hs-identifier hs-var">f2</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">HscSource
</span><a href="#local-6989586621680918362"><span class="hs-identifier hs-var">f3</span></a></span><span> </span><span class="annot"><span class="annottext">HscSource -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621680918361"><span class="hs-identifier hs-var">f4</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[Usage]
</span><a href="#local-6989586621680918360"><span class="hs-identifier hs-var">f5</span></a></span><span> </span><span class="annot"><span class="annottext">[Usage] -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceExport]
</span><a href="#local-6989586621680918359"><span class="hs-identifier hs-var">f6</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceExport] -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918358"><span class="hs-identifier hs-var">f7</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)]
</span><a href="#local-6989586621680918357"><span class="hs-identifier hs-var">f8</span></a></span><span> </span><span class="annot"><span class="annottext">[(OccName, Fixity)] -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span>
</span><span id="line-3308"></span><span>    </span><span class="annot"><span class="annottext">Warnings
</span><a href="#local-6989586621680918356"><span class="hs-identifier hs-var">f9</span></a></span><span> </span><span class="annot"><span class="annottext">Warnings -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceAnnotation]
</span><a href="#local-6989586621680918355"><span class="hs-identifier hs-var">f10</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceDeclExts phase] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceDeclExts phase]
</span><a href="#local-6989586621680918354"><span class="hs-identifier hs-var">f11</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Maybe GlobalRdrEnv
</span><a href="#local-6989586621680918353"><span class="hs-identifier hs-var">f12</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe GlobalRdrEnv -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceClsInst] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceClsInst]
</span><a href="#local-6989586621680918352"><span class="hs-identifier hs-var">f13</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceFamInst] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceFamInst]
</span><a href="#local-6989586621680918351"><span class="hs-identifier hs-var">f14</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceRule] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceRule]
</span><a href="#local-6989586621680918350"><span class="hs-identifier hs-var">f15</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span>
</span><span id="line-3309"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918349"><span class="hs-identifier hs-var">f16</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo
</span><a href="#local-6989586621680918348"><span class="hs-identifier hs-var">f17</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceTrustInfo -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680918347"><span class="hs-identifier hs-var">f18</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">[IfaceCompleteMatch]
</span><a href="#local-6989586621680918346"><span class="hs-identifier hs-var">f19</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Maybe HsDocString
</span><a href="#local-6989586621680918345"><span class="hs-identifier hs-var">f20</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe HsDocString -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">DeclDocMap
</span><a href="#local-6989586621680918344"><span class="hs-identifier hs-var">f21</span></a></span><span> </span><span class="annot"><span class="annottext">DeclDocMap -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">ArgDocMap
</span><a href="#local-6989586621680918343"><span class="hs-identifier hs-var">f22</span></a></span><span> </span><span class="annot"><span class="annottext">ArgDocMap -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts phase -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">IfaceBackendExts phase
</span><a href="#local-6989586621680918342"><span class="hs-identifier hs-var">f23</span></a></span><span>
</span><span id="line-3310"></span><span>    </span><span class="annot"><span class="annottext">() -&gt; () -&gt; ()
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">ExtensibleFields -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918341"><span class="hs-identifier hs-var">f24</span></a></span></span><span>
</span><span id="line-3311"></span><span>
</span><span id="line-3312"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Extensible Iface Fields}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-3319"></span><span>
</span><span id="line-3320"></span><span class="hs-keyword">type</span><span> </span><span id="FieldName"><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-var">FieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-3321"></span><span>
</span><span id="line-3322"></span><span class="hs-keyword">newtype</span><span> </span><span id="ExtensibleFields"><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-var">ExtensibleFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ExtensibleFields"><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-var">ExtensibleFields</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getExtensibleFields"><span class="annot"><span class="annottext">ExtensibleFields -&gt; Map FieldName BinData
</span><a href="GHC.Driver.Types.html#getExtensibleFields"><span class="hs-identifier hs-var hs-var">getExtensibleFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#BinData"><span class="hs-identifier hs-type">BinData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3323"></span><span>
</span><span id="line-3324"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680918336"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3325"></span><span>  </span><span id="local-6989586621680918311"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; ExtensibleFields -&gt; IO ()
</span><a href="#local-6989586621680918311"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621680918310"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span id="local-6989586621680918309"><span class="annot"><span class="annottext">Map FieldName BinData
</span><a href="#local-6989586621680918309"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3326"></span><span>    </span><span class="annot"><span class="annottext">BinHandle -&gt; Int -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map FieldName BinData -&gt; Int
forall k a. Map k a -&gt; Int
</span><a href="../../containers/src/Data.Map.Internal.html#size"><span class="hs-identifier hs-var">Map.size</span></a></span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData
</span><a href="#local-6989586621680918309"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-3327"></span><span>
</span><span id="line-3328"></span><span>    </span><span class="hs-comment">-- Put the names of each field, and reserve a space</span><span>
</span><span id="line-3329"></span><span>    </span><span class="hs-comment">-- for a payload pointer after each name:</span><span>
</span><span id="line-3330"></span><span>    </span><span id="local-6989586621680918307"><span class="annot"><span class="annottext">[(Bin (Bin Any), BinData)]
</span><a href="#local-6989586621680918307"><span class="hs-identifier hs-var">header_entries</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(FieldName, BinData)]
-&gt; ((FieldName, BinData) -&gt; IO (Bin (Bin Any), BinData))
-&gt; IO [(Bin (Bin Any), BinData)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map FieldName BinData -&gt; [(FieldName, BinData)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../containers/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData
</span><a href="#local-6989586621680918309"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((FieldName, BinData) -&gt; IO (Bin (Bin Any), BinData))
 -&gt; IO [(Bin (Bin Any), BinData)])
-&gt; ((FieldName, BinData) -&gt; IO (Bin (Bin Any), BinData))
-&gt; IO [(Bin (Bin Any), BinData)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680918305"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918305"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680918304"><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918304"><span class="hs-identifier hs-var">dat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3331"></span><span>      </span><span class="annot"><span class="annottext">BinHandle -&gt; FieldName -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918305"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-3332"></span><span>      </span><span id="local-6989586621680918303"><span class="annot"><span class="annottext">Bin (Bin Any)
</span><a href="#local-6989586621680918303"><span class="hs-identifier hs-var">field_p_p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Bin (Bin Any))
forall {k} (a :: k). BinHandle -&gt; IO (Bin a)
</span><a href="GHC.Utils.Binary.html#tellBin"><span class="hs-identifier hs-var">tellBin</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-3333"></span><span>      </span><span class="annot"><span class="annottext">BinHandle -&gt; Bin (Bin Any) -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bin (Bin Any)
</span><a href="#local-6989586621680918303"><span class="hs-identifier hs-var">field_p_p</span></a></span><span>
</span><span id="line-3334"></span><span>      </span><span class="annot"><span class="annottext">(Bin (Bin Any), BinData) -&gt; IO (Bin (Bin Any), BinData)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bin (Bin Any)
</span><a href="#local-6989586621680918303"><span class="hs-identifier hs-var">field_p_p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918304"><span class="hs-identifier hs-var">dat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3335"></span><span>
</span><span id="line-3336"></span><span>    </span><span class="hs-comment">-- Now put the payloads and use the reserved space</span><span>
</span><span id="line-3337"></span><span>    </span><span class="hs-comment">-- to point to the start of each payload:</span><span>
</span><span id="line-3338"></span><span>    </span><span class="annot"><span class="annottext">[(Bin (Bin Any), BinData)]
-&gt; ((Bin (Bin Any), BinData) -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bin (Bin Any), BinData)]
</span><a href="#local-6989586621680918307"><span class="hs-identifier hs-var">header_entries</span></a></span><span> </span><span class="annot"><span class="annottext">(((Bin (Bin Any), BinData) -&gt; IO ()) -&gt; IO ())
-&gt; ((Bin (Bin Any), BinData) -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680918301"><span class="annot"><span class="annottext">Bin (Bin Any)
</span><a href="#local-6989586621680918301"><span class="hs-identifier hs-var">field_p_p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680918300"><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918300"><span class="hs-identifier hs-var">dat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3339"></span><span>      </span><span id="local-6989586621680918299"><span class="annot"><span class="annottext">Bin Any
</span><a href="#local-6989586621680918299"><span class="hs-identifier hs-var">field_p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Bin Any)
forall {k} (a :: k). BinHandle -&gt; IO (Bin a)
</span><a href="GHC.Utils.Binary.html#tellBin"><span class="hs-identifier hs-var">tellBin</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-3340"></span><span>      </span><span class="annot"><span class="annottext">BinHandle -&gt; Bin (Bin Any) -&gt; Bin Any -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; Bin a -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putAt"><span class="hs-identifier hs-var">putAt</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bin (Bin Any)
</span><a href="#local-6989586621680918301"><span class="hs-identifier hs-var">field_p_p</span></a></span><span> </span><span class="annot"><span class="annottext">Bin Any
</span><a href="#local-6989586621680918299"><span class="hs-identifier hs-var">field_p</span></a></span><span>
</span><span id="line-3341"></span><span>      </span><span class="annot"><span class="annottext">BinHandle -&gt; Bin Any -&gt; IO ()
forall {k} (a :: k). BinHandle -&gt; Bin a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#seekBin"><span class="hs-identifier hs-var">seekBin</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bin Any
</span><a href="#local-6989586621680918299"><span class="hs-identifier hs-var">field_p</span></a></span><span>
</span><span id="line-3342"></span><span>      </span><span class="annot"><span class="annottext">BinHandle -&gt; BinData -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918310"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918300"><span class="hs-identifier hs-var">dat</span></a></span><span>
</span><span id="line-3343"></span><span>
</span><span id="line-3344"></span><span>  </span><span id="local-6989586621680918277"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO ExtensibleFields
</span><a href="#local-6989586621680918277"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621680918276"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918276"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3345"></span><span>    </span><span id="local-6989586621680918275"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918275"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Int
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918276"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-3346"></span><span>
</span><span id="line-3347"></span><span>    </span><span class="hs-comment">-- Get the names and field pointers:</span><span>
</span><span id="line-3348"></span><span>    </span><span id="local-6989586621680918274"><span class="annot"><span class="annottext">[(FieldName, Bin Any)]
</span><a href="#local-6989586621680918274"><span class="hs-identifier hs-var">header_entries</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (FieldName, Bin Any) -&gt; IO [(FieldName, Bin Any)]
forall (m :: * -&gt; *) a. Applicative m =&gt; Int -&gt; m a -&gt; m [a]
</span><a href="../../base/src/Control.Monad.html#replicateM"><span class="hs-identifier hs-var">replicateM</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680918275"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (FieldName, Bin Any) -&gt; IO [(FieldName, Bin Any)])
-&gt; IO (FieldName, Bin Any) -&gt; IO [(FieldName, Bin Any)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3349"></span><span>      </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldName -&gt; Bin Any -&gt; (FieldName, Bin Any))
-&gt; IO FieldName -&gt; IO (Bin Any -&gt; (FieldName, Bin Any))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO FieldName
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918276"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Bin Any -&gt; (FieldName, Bin Any))
-&gt; IO (Bin Any) -&gt; IO (FieldName, Bin Any)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Bin Any)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918276"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-3350"></span><span>
</span><span id="line-3351"></span><span>    </span><span class="hs-comment">-- Seek to and get each field's payload:</span><span>
</span><span id="line-3352"></span><span>    </span><span id="local-6989586621680918272"><span class="annot"><span class="annottext">[(FieldName, BinData)]
</span><a href="#local-6989586621680918272"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(FieldName, Bin Any)]
-&gt; ((FieldName, Bin Any) -&gt; IO (FieldName, BinData))
-&gt; IO [(FieldName, BinData)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../../base/src/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">[(FieldName, Bin Any)]
</span><a href="#local-6989586621680918274"><span class="hs-identifier hs-var">header_entries</span></a></span><span> </span><span class="annot"><span class="annottext">(((FieldName, Bin Any) -&gt; IO (FieldName, BinData))
 -&gt; IO [(FieldName, BinData)])
-&gt; ((FieldName, Bin Any) -&gt; IO (FieldName, BinData))
-&gt; IO [(FieldName, BinData)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621680918271"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918271"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680918270"><span class="annot"><span class="annottext">Bin Any
</span><a href="#local-6989586621680918270"><span class="hs-identifier hs-var">field_p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3353"></span><span>      </span><span class="annot"><span class="annottext">BinHandle -&gt; Bin Any -&gt; IO ()
forall {k} (a :: k). BinHandle -&gt; Bin a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#seekBin"><span class="hs-identifier hs-var">seekBin</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918276"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Bin Any
</span><a href="#local-6989586621680918270"><span class="hs-identifier hs-var">field_p</span></a></span><span>
</span><span id="line-3354"></span><span>      </span><span id="local-6989586621680918269"><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918269"><span class="hs-identifier hs-var">dat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO BinData
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918276"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-3355"></span><span>      </span><span class="annot"><span class="annottext">(FieldName, BinData) -&gt; IO (FieldName, BinData)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918271"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918269"><span class="hs-identifier hs-var">dat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3356"></span><span>
</span><span id="line-3357"></span><span>    </span><span class="annot"><span class="annottext">ExtensibleFields -&gt; IO ExtensibleFields
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ExtensibleFields -&gt; IO ExtensibleFields)
-&gt; ([(FieldName, BinData)] -&gt; ExtensibleFields)
-&gt; [(FieldName, BinData)]
-&gt; IO ExtensibleFields
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-var">ExtensibleFields</span></a></span><span> </span><span class="annot"><span class="annottext">(Map FieldName BinData -&gt; ExtensibleFields)
-&gt; ([(FieldName, BinData)] -&gt; Map FieldName BinData)
-&gt; [(FieldName, BinData)]
-&gt; ExtensibleFields
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[(FieldName, BinData)] -&gt; Map FieldName BinData
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../../containers/src/Data.Map.Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(FieldName, BinData)] -&gt; IO ExtensibleFields)
-&gt; [(FieldName, BinData)] -&gt; IO ExtensibleFields
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(FieldName, BinData)]
</span><a href="#local-6989586621680918272"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-3358"></span><span>
</span><span id="line-3359"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq/src/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3360"></span><span>  </span><span id="local-6989586621680918259"><span class="annot"><span class="annottext">rnf :: ExtensibleFields -&gt; ()
</span><a href="#local-6989586621680918259"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span id="local-6989586621680918258"><span class="annot"><span class="annottext">Map FieldName BinData
</span><a href="#local-6989586621680918258"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../../deepseq/src/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData
</span><a href="#local-6989586621680918258"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-3361"></span><span>
</span><span id="line-3362"></span><span class="annot"><a href="GHC.Driver.Types.html#emptyExtensibleFields"><span class="hs-identifier hs-type">emptyExtensibleFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span>
</span><span id="line-3363"></span><span id="emptyExtensibleFields"><span class="annot"><span class="annottext">emptyExtensibleFields :: ExtensibleFields
</span><a href="GHC.Driver.Types.html#emptyExtensibleFields"><span class="hs-identifier hs-var hs-var">emptyExtensibleFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-var">ExtensibleFields</span></a></span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData
forall k a. Map k a
</span><a href="../../containers/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-3364"></span><span>
</span><span id="line-3365"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-3366"></span><span class="hs-comment">-- | Reading</span><span>
</span><span id="line-3367"></span><span>
</span><span id="line-3368"></span><span id="local-6989586621680920508"><span class="annot"><a href="GHC.Driver.Types.html#readIfaceField"><span class="hs-identifier hs-type">readIfaceField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920508"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920508"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-3369"></span><span id="readIfaceField"><span class="annot"><span class="annottext">readIfaceField :: forall a. Binary a =&gt; FieldName -&gt; ModIface -&gt; IO (Maybe a)
</span><a href="GHC.Driver.Types.html#readIfaceField"><span class="hs-identifier hs-var hs-var">readIfaceField</span></a></span></span><span> </span><span id="local-6989586621680918254"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918254"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; (BinHandle -&gt; IO a) -&gt; ModIface -&gt; IO (Maybe a)
forall a.
FieldName -&gt; (BinHandle -&gt; IO a) -&gt; ModIface -&gt; IO (Maybe a)
</span><a href="GHC.Driver.Types.html#readIfaceFieldWith"><span class="hs-identifier hs-var">readIfaceFieldWith</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918254"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO a
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-3370"></span><span>
</span><span id="line-3371"></span><span id="local-6989586621680920505"><span class="annot"><a href="GHC.Driver.Types.html#readField"><span class="hs-identifier hs-type">readField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920505"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920505"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-3372"></span><span id="readField"><span class="annot"><span class="annottext">readField :: forall a. Binary a =&gt; FieldName -&gt; ExtensibleFields -&gt; IO (Maybe a)
</span><a href="GHC.Driver.Types.html#readField"><span class="hs-identifier hs-var hs-var">readField</span></a></span></span><span> </span><span id="local-6989586621680918251"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918251"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; (BinHandle -&gt; IO a) -&gt; ExtensibleFields -&gt; IO (Maybe a)
forall a.
FieldName
-&gt; (BinHandle -&gt; IO a) -&gt; ExtensibleFields -&gt; IO (Maybe a)
</span><a href="GHC.Driver.Types.html#readFieldWith"><span class="hs-identifier hs-var">readFieldWith</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918251"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO a
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-3373"></span><span>
</span><span id="line-3374"></span><span id="local-6989586621680920506"><span class="annot"><a href="GHC.Driver.Types.html#readIfaceFieldWith"><span class="hs-identifier hs-type">readIfaceFieldWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Binary.html#BinHandle"><span class="hs-identifier hs-type">BinHandle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621680920506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-3375"></span><span id="readIfaceFieldWith"><span class="annot"><span class="annottext">readIfaceFieldWith :: forall a.
FieldName -&gt; (BinHandle -&gt; IO a) -&gt; ModIface -&gt; IO (Maybe a)
</span><a href="GHC.Driver.Types.html#readIfaceFieldWith"><span class="hs-identifier hs-var hs-var">readIfaceFieldWith</span></a></span></span><span> </span><span id="local-6989586621680918249"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918249"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680918248"><span class="annot"><span class="annottext">BinHandle -&gt; IO a
</span><a href="#local-6989586621680918248"><span class="hs-identifier hs-var">read</span></a></span></span><span> </span><span id="local-6989586621680918247"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918247"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; (BinHandle -&gt; IO a) -&gt; ExtensibleFields -&gt; IO (Maybe a)
forall a.
FieldName
-&gt; (BinHandle -&gt; IO a) -&gt; ExtensibleFields -&gt; IO (Maybe a)
</span><a href="GHC.Driver.Types.html#readFieldWith"><span class="hs-identifier hs-var">readFieldWith</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918249"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO a
</span><a href="#local-6989586621680918248"><span class="hs-identifier hs-var">read</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; ExtensibleFields
forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var hs-var">mi_ext_fields</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918247"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3376"></span><span>
</span><span id="line-3377"></span><span id="local-6989586621680920503"><span class="annot"><a href="GHC.Driver.Types.html#readFieldWith"><span class="hs-identifier hs-type">readFieldWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Binary.html#BinHandle"><span class="hs-identifier hs-type">BinHandle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621680920503"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920503"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-3378"></span><span id="readFieldWith"><span class="annot"><span class="annottext">readFieldWith :: forall a.
FieldName
-&gt; (BinHandle -&gt; IO a) -&gt; ExtensibleFields -&gt; IO (Maybe a)
</span><a href="GHC.Driver.Types.html#readFieldWith"><span class="hs-identifier hs-var hs-var">readFieldWith</span></a></span></span><span> </span><span id="local-6989586621680918240"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918240"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680918239"><span class="annot"><span class="annottext">BinHandle -&gt; IO a
</span><a href="#local-6989586621680918239"><span class="hs-identifier hs-var">read</span></a></span></span><span> </span><span id="local-6989586621680918238"><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918238"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (IO a) -&gt; IO (Maybe a)
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><a href="../../base/src/Data.Traversable.html#sequence"><span class="hs-identifier hs-var">sequence</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (IO a) -&gt; IO (Maybe a)) -&gt; Maybe (IO a) -&gt; IO (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">BinHandle -&gt; IO a
</span><a href="#local-6989586621680918239"><span class="hs-identifier hs-var">read</span></a></span><span> </span><span class="annot"><span class="annottext">(BinHandle -&gt; IO a) -&gt; IO BinHandle -&gt; IO a
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../base/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO BinHandle -&gt; IO a)
-&gt; (BinData -&gt; IO BinHandle) -&gt; BinData -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BinData -&gt; IO BinHandle
</span><a href="GHC.Utils.Binary.html#dataHandle"><span class="hs-identifier hs-var">dataHandle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(BinData -&gt; IO a) -&gt; Maybe BinData -&gt; Maybe (IO a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-3379"></span><span>  </span><span class="annot"><span class="annottext">FieldName -&gt; Map FieldName BinData -&gt; Maybe BinData
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../containers/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918240"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExtensibleFields -&gt; Map FieldName BinData
</span><a href="GHC.Driver.Types.html#getExtensibleFields"><span class="hs-identifier hs-var hs-var">getExtensibleFields</span></a></span><span> </span><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918238"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3380"></span><span>
</span><span id="line-3381"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-3382"></span><span class="hs-comment">-- | Writing</span><span>
</span><span id="line-3383"></span><span>
</span><span id="line-3384"></span><span id="local-6989586621680920492"><span class="annot"><a href="GHC.Driver.Types.html#writeIfaceField"><span class="hs-identifier hs-type">writeIfaceField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920492"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920492"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span></span><span>
</span><span id="line-3385"></span><span id="writeIfaceField"><span class="annot"><span class="annottext">writeIfaceField :: forall a. Binary a =&gt; FieldName -&gt; a -&gt; ModIface -&gt; IO ModIface
</span><a href="GHC.Driver.Types.html#writeIfaceField"><span class="hs-identifier hs-var hs-var">writeIfaceField</span></a></span></span><span> </span><span id="local-6989586621680918231"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918231"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680918230"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680918230"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; (BinHandle -&gt; IO ()) -&gt; ModIface -&gt; IO ModIface
</span><a href="GHC.Driver.Types.html#writeIfaceFieldWith"><span class="hs-identifier hs-var">writeIfaceFieldWith</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918231"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BinHandle -&gt; a -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-operator hs-var">`put_`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680918230"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3386"></span><span>
</span><span id="line-3387"></span><span id="local-6989586621680920490"><span class="annot"><a href="GHC.Driver.Types.html#writeField"><span class="hs-identifier hs-type">writeField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680920490"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680920490"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span></span><span>
</span><span id="line-3388"></span><span id="writeField"><span class="annot"><span class="annottext">writeField :: forall a.
Binary a =&gt;
FieldName -&gt; a -&gt; ExtensibleFields -&gt; IO ExtensibleFields
</span><a href="GHC.Driver.Types.html#writeField"><span class="hs-identifier hs-var hs-var">writeField</span></a></span></span><span> </span><span id="local-6989586621680918227"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918227"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680918226"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680918226"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; (BinHandle -&gt; IO ()) -&gt; ExtensibleFields -&gt; IO ExtensibleFields
</span><a href="GHC.Driver.Types.html#writeFieldWith"><span class="hs-identifier hs-var">writeFieldWith</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918227"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BinHandle -&gt; a -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-operator hs-var">`put_`</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680918226"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3389"></span><span>
</span><span id="line-3390"></span><span class="annot"><a href="GHC.Driver.Types.html#writeIfaceFieldWith"><span class="hs-identifier hs-type">writeIfaceFieldWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Binary.html#BinHandle"><span class="hs-identifier hs-type">BinHandle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-3391"></span><span id="writeIfaceFieldWith"><span class="annot"><span class="annottext">writeIfaceFieldWith :: FieldName -&gt; (BinHandle -&gt; IO ()) -&gt; ModIface -&gt; IO ModIface
</span><a href="GHC.Driver.Types.html#writeIfaceFieldWith"><span class="hs-identifier hs-var hs-var">writeIfaceFieldWith</span></a></span></span><span> </span><span id="local-6989586621680918224"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918224"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680918223"><span class="annot"><span class="annottext">BinHandle -&gt; IO ()
</span><a href="#local-6989586621680918223"><span class="hs-identifier hs-var">write</span></a></span></span><span> </span><span id="local-6989586621680918222"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918222"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3392"></span><span>  </span><span id="local-6989586621680918221"><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918221"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; (BinHandle -&gt; IO ()) -&gt; ExtensibleFields -&gt; IO ExtensibleFields
</span><a href="GHC.Driver.Types.html#writeFieldWith"><span class="hs-identifier hs-var">writeFieldWith</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918224"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO ()
</span><a href="#local-6989586621680918223"><span class="hs-identifier hs-var">write</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; ExtensibleFields
forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var hs-var">mi_ext_fields</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918222"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3393"></span><span>  </span><span class="annot"><span class="annottext">ModIface -&gt; IO ModIface
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918222"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mi_ext_fields :: ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var">mi_ext_fields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918221"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3394"></span><span>
</span><span id="line-3395"></span><span class="annot"><a href="GHC.Driver.Types.html#writeFieldWith"><span class="hs-identifier hs-type">writeFieldWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Binary.html#BinHandle"><span class="hs-identifier hs-type">BinHandle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span>
</span><span id="line-3396"></span><span id="writeFieldWith"><span class="annot"><span class="annottext">writeFieldWith :: FieldName
-&gt; (BinHandle -&gt; IO ()) -&gt; ExtensibleFields -&gt; IO ExtensibleFields
</span><a href="GHC.Driver.Types.html#writeFieldWith"><span class="hs-identifier hs-var hs-var">writeFieldWith</span></a></span></span><span> </span><span id="local-6989586621680918220"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918220"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680918219"><span class="annot"><span class="annottext">BinHandle -&gt; IO ()
</span><a href="#local-6989586621680918219"><span class="hs-identifier hs-var">write</span></a></span></span><span> </span><span id="local-6989586621680918218"><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918218"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3397"></span><span>  </span><span id="local-6989586621680918217"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918217"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO BinHandle
</span><a href="GHC.Utils.Binary.html#openBinMem"><span class="hs-identifier hs-var">openBinMem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1024</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base/src/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1024</span></span><span class="hs-special">)</span><span>
</span><span id="line-3398"></span><span>  </span><span class="annot"><span class="annottext">BinHandle -&gt; IO ()
</span><a href="#local-6989586621680918219"><span class="hs-identifier hs-var">write</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918217"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-3399"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-3400"></span><span>  </span><span id="local-6989586621680918214"><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918214"><span class="hs-identifier hs-var">bd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO BinData
</span><a href="GHC.Utils.Binary.html#handleData"><span class="hs-identifier hs-var">handleData</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621680918217"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-3401"></span><span>  </span><span class="annot"><span class="annottext">ExtensibleFields -&gt; IO ExtensibleFields
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ExtensibleFields -&gt; IO ExtensibleFields)
-&gt; ExtensibleFields -&gt; IO ExtensibleFields
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-var">ExtensibleFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
-&gt; BinData -&gt; Map FieldName BinData -&gt; Map FieldName BinData
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../../containers/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918220"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">BinData
</span><a href="#local-6989586621680918214"><span class="hs-identifier hs-var">bd</span></a></span><span> </span><span class="annot"><span class="annottext">(Map FieldName BinData -&gt; Map FieldName BinData)
-&gt; Map FieldName BinData -&gt; Map FieldName BinData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExtensibleFields -&gt; Map FieldName BinData
</span><a href="GHC.Driver.Types.html#getExtensibleFields"><span class="hs-identifier hs-var hs-var">getExtensibleFields</span></a></span><span> </span><span class="annot"><span class="annottext">ExtensibleFields
</span><a href="#local-6989586621680918218"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3402"></span><span>
</span><span id="line-3403"></span><span class="annot"><a href="GHC.Driver.Types.html#deleteField"><span class="hs-identifier hs-type">deleteField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span>
</span><span id="line-3404"></span><span id="deleteField"><span class="annot"><span class="annottext">deleteField :: FieldName -&gt; ExtensibleFields -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#deleteField"><span class="hs-identifier hs-var hs-var">deleteField</span></a></span></span><span> </span><span id="local-6989586621680918211"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918211"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-type">ExtensibleFields</span></a></span><span> </span><span id="local-6989586621680918210"><span class="annot"><span class="annottext">Map FieldName BinData
</span><a href="#local-6989586621680918210"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#ExtensibleFields"><span class="hs-identifier hs-var">ExtensibleFields</span></a></span><span> </span><span class="annot"><span class="annottext">(Map FieldName BinData -&gt; ExtensibleFields)
-&gt; Map FieldName BinData -&gt; ExtensibleFields
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Map FieldName BinData -&gt; Map FieldName BinData
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Map k a
</span><a href="../../containers/src/Data.Map.Internal.html#delete"><span class="hs-identifier hs-var">Map.delete</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918211"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map FieldName BinData
</span><a href="#local-6989586621680918210"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-3405"></span><span>
</span><span id="line-3406"></span><span class="annot"><a href="GHC.Driver.Types.html#deleteIfaceField"><span class="hs-identifier hs-type">deleteIfaceField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.Types.html#ModIface"><span class="hs-identifier hs-type">ModIface</span></a></span><span>
</span><span id="line-3407"></span><span id="deleteIfaceField"><span class="annot"><span class="annottext">deleteIfaceField :: FieldName -&gt; ModIface -&gt; ModIface
</span><a href="GHC.Driver.Types.html#deleteIfaceField"><span class="hs-identifier hs-var hs-var">deleteIfaceField</span></a></span></span><span> </span><span id="local-6989586621680918208"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918208"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680918207"><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918207"><span class="hs-identifier hs-var">iface</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918207"><span class="hs-identifier hs-var">iface</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mi_ext_fields :: ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var">mi_ext_fields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; ExtensibleFields -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#deleteField"><span class="hs-identifier hs-var">deleteField</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621680918208"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModIface -&gt; ExtensibleFields
forall (phase :: ModIfacePhase).
ModIface_ phase -&gt; ExtensibleFields
</span><a href="GHC.Driver.Types.html#mi_ext_fields"><span class="hs-identifier hs-var hs-var">mi_ext_fields</span></a></span><span> </span><span class="annot"><span class="annottext">ModIface
</span><a href="#local-6989586621680918207"><span class="hs-identifier hs-var">iface</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3408"></span></pre></body></html>